/*! For license information please see main.9fd20f55.js.LICENSE.txt */
!function(){var e={818:function(e){e.exports=function(){"use strict";return function(e,g,t){g.prototype.isBetween=function(e,g,n,I){var C=t(e),l=t(g),a="("===(I=I||"()")[0],o=")"===I[1];return(a?this.isAfter(C,n):!this.isBefore(C,n))&&(o?this.isBefore(l,n):!this.isAfter(l,n))||(a?this.isBefore(C,n):!this.isAfter(C,n))&&(o?this.isAfter(l,n):!this.isBefore(l,n))}}}()},253:function(e){e.exports=function(){"use strict";return function(e,g){g.prototype.isSameOrAfter=function(e,g){return this.isSame(e,g)||this.isAfter(e,g)}}}()},320:function(e){e.exports=function(){"use strict";return function(e,g){g.prototype.isSameOrBefore=function(e,g){return this.isSame(e,g)||this.isBefore(e,g)}}}()},36:function(e){e.exports=function(){"use strict";return function(e,g,t){var n=g.prototype,I=function(e){return e&&(e.indexOf?e:e.s)},C=function(e,g,t,n,C){var l=e.name?e:e.$locale(),a=I(l[g]),o=I(l[t]),r=a||o.map((function(e){return e.slice(0,n)}));if(!C)return r;var c=l.weekStart;return r.map((function(e,g){return r[(g+(c||0))%7]}))},l=function(){return t.Ls[t.locale()]},a=function(e,g){return e.formats[g]||function(e){return e.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(e,g,t){return g||t.slice(1)}))}(e.formats[g.toUpperCase()])},o=function(){var e=this;return{months:function(g){return g?g.format("MMMM"):C(e,"months")},monthsShort:function(g){return g?g.format("MMM"):C(e,"monthsShort","months",3)},firstDayOfWeek:function(){return e.$locale().weekStart||0},weekdays:function(g){return g?g.format("dddd"):C(e,"weekdays")},weekdaysMin:function(g){return g?g.format("dd"):C(e,"weekdaysMin","weekdays",2)},weekdaysShort:function(g){return g?g.format("ddd"):C(e,"weekdaysShort","weekdays",3)},longDateFormat:function(g){return a(e.$locale(),g)},meridiem:this.$locale().meridiem,ordinal:this.$locale().ordinal}};n.localeData=function(){return o.bind(this)()},t.localeData=function(){var e=l();return{firstDayOfWeek:function(){return e.weekStart||0},weekdays:function(){return t.weekdays()},weekdaysShort:function(){return t.weekdaysShort()},weekdaysMin:function(){return t.weekdaysMin()},months:function(){return t.months()},monthsShort:function(){return t.monthsShort()},longDateFormat:function(g){return a(e,g)},meridiem:e.meridiem,ordinal:e.ordinal}},t.months=function(){return C(l(),"months")},t.monthsShort=function(){return C(l(),"monthsShort","months",3)},t.weekdays=function(e){return C(l(),"weekdays",null,null,e)},t.weekdaysShort=function(e){return C(l(),"weekdaysShort","weekdays",3,e)},t.weekdaysMin=function(e){return C(l(),"weekdaysMin","weekdays",2,e)}}}()},893:function(e){e.exports=function(){"use strict";var e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(g,t,n){var I=t.prototype,C=I.format;n.en.formats=e,I.format=function(g){void 0===g&&(g="YYYY-MM-DDTHH:mm:ssZ");var t=this.$locale().formats,n=function(g,t){return g.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(g,n,I){var C=I&&I.toUpperCase();return n||t[I]||e[I]||t[C].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(e,g,t){return g||t.slice(1)}))}))}(g,void 0===t?{}:t);return C.call(this,n)}}}()},26:function(e){e.exports=function(){"use strict";return function(e,g,t){var n=function(e,g){if(!g||!g.length||1===g.length&&!g[0]||1===g.length&&Array.isArray(g[0])&&!g[0].length)return null;var t;1===g.length&&g[0].length>0&&(g=g[0]),t=(g=g.filter((function(e){return e})))[0];for(var n=1;n<g.length;n+=1)g[n].isValid()&&!g[n][e](t)||(t=g[n]);return t};t.max=function(){var e=[].slice.call(arguments,0);return n("isAfter",e)},t.min=function(){var e=[].slice.call(arguments,0);return n("isBefore",e)}}}()},27:function(e){e.exports=function(){"use strict";var e="minute",g=/[+-]\d\d(?::?\d\d)?/g,t=/([+-]|\d\d)/g;return function(n,I,C){var l=I.prototype;C.utc=function(e){return new I({date:e,utc:!0,args:arguments})},l.utc=function(g){var t=C(this.toDate(),{locale:this.$L,utc:!0});return g?t.add(this.utcOffset(),e):t},l.local=function(){return C(this.toDate(),{locale:this.$L,utc:!1})};var a=l.parse;l.parse=function(e){e.utc&&(this.$u=!0),this.$utils().u(e.$offset)||(this.$offset=e.$offset),a.call(this,e)};var o=l.init;l.init=function(){if(this.$u){var e=this.$d;this.$y=e.getUTCFullYear(),this.$M=e.getUTCMonth(),this.$D=e.getUTCDate(),this.$W=e.getUTCDay(),this.$H=e.getUTCHours(),this.$m=e.getUTCMinutes(),this.$s=e.getUTCSeconds(),this.$ms=e.getUTCMilliseconds()}else o.call(this)};var r=l.utcOffset;l.utcOffset=function(n,I){var C=this.$utils().u;if(C(n))return this.$u?0:C(this.$offset)?r.call(this):this.$offset;if("string"==typeof n&&(n=function(e){void 0===e&&(e="");var n=e.match(g);if(!n)return null;var I=(""+n[0]).match(t)||["-",0,0],C=I[0],l=60*+I[1]+ +I[2];return 0===l?0:"+"===C?l:-l}(n),null===n))return this;var l=Math.abs(n)<=16?60*n:n,a=this;if(I)return a.$offset=l,a.$u=0===n,a;if(0!==n){var o=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(a=this.local().add(l+o,e)).$offset=l,a.$x.$localOffset=o}else a=this.utc();return a};var c=l.format;l.format=function(e){var g=e||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return c.call(this,g)},l.valueOf=function(){var e=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*e},l.isUTC=function(){return!!this.$u},l.toISOString=function(){return this.toDate().toISOString()},l.toString=function(){return this.toDate().toUTCString()};var i=l.toDate;l.toDate=function(e){return"s"===e&&this.$offset?C(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():i.call(this)};var s=l.diff;l.diff=function(e,g,t){if(e&&this.$u===e.$u)return s.call(this,e,g,t);var n=this.local(),I=C(e).local();return s.call(n,I,g,t)}}}()},618:function(e,g,t){var n;!function(){"use strict";var I=!("undefined"===typeof window||!window.document||!window.document.createElement),C={canUseDOM:I,canUseWorkers:"undefined"!==typeof Worker,canUseEventListeners:I&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:I&&!!window.screen};void 0===(n=function(){return C}.call(g,t,g,e))||(e.exports=n)}()},110:function(e,g,t){"use strict";var n=t(309),I={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},C={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},l={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function o(e){return n.isMemo(e)?l:a[e.$$typeof]||I}a[n.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[n.Memo]=l;var r=Object.defineProperty,c=Object.getOwnPropertyNames,i=Object.getOwnPropertySymbols,s=Object.getOwnPropertyDescriptor,A=Object.getPrototypeOf,d=Object.prototype;e.exports=function e(g,t,n){if("string"!==typeof t){if(d){var I=A(t);I&&I!==d&&e(g,I,n)}var l=c(t);i&&(l=l.concat(i(t)));for(var a=o(g),u=o(t),m=0;m<l.length;++m){var b=l[m];if(!C[b]&&(!n||!n[b])&&(!u||!u[b])&&(!a||!a[b])){var Z=s(t,b);try{r(g,b,Z)}catch(h){}}}}return g}},746:function(e,g){"use strict";var t="function"===typeof Symbol&&Symbol.for,n=t?Symbol.for("react.element"):60103,I=t?Symbol.for("react.portal"):60106,C=t?Symbol.for("react.fragment"):60107,l=t?Symbol.for("react.strict_mode"):60108,a=t?Symbol.for("react.profiler"):60114,o=t?Symbol.for("react.provider"):60109,r=t?Symbol.for("react.context"):60110,c=t?Symbol.for("react.async_mode"):60111,i=t?Symbol.for("react.concurrent_mode"):60111,s=t?Symbol.for("react.forward_ref"):60112,A=t?Symbol.for("react.suspense"):60113,d=t?Symbol.for("react.suspense_list"):60120,u=t?Symbol.for("react.memo"):60115,m=t?Symbol.for("react.lazy"):60116,b=t?Symbol.for("react.block"):60121,Z=t?Symbol.for("react.fundamental"):60117,h=t?Symbol.for("react.responder"):60118,p=t?Symbol.for("react.scope"):60119;function G(e){if("object"===typeof e&&null!==e){var g=e.$$typeof;switch(g){case n:switch(e=e.type){case c:case i:case C:case a:case l:case A:return e;default:switch(e=e&&e.$$typeof){case r:case s:case m:case u:case o:return e;default:return g}}case I:return g}}}function y(e){return G(e)===i}g.AsyncMode=c,g.ConcurrentMode=i,g.ContextConsumer=r,g.ContextProvider=o,g.Element=n,g.ForwardRef=s,g.Fragment=C,g.Lazy=m,g.Memo=u,g.Portal=I,g.Profiler=a,g.StrictMode=l,g.Suspense=A,g.isAsyncMode=function(e){return y(e)||G(e)===c},g.isConcurrentMode=y,g.isContextConsumer=function(e){return G(e)===r},g.isContextProvider=function(e){return G(e)===o},g.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===n},g.isForwardRef=function(e){return G(e)===s},g.isFragment=function(e){return G(e)===C},g.isLazy=function(e){return G(e)===m},g.isMemo=function(e){return G(e)===u},g.isPortal=function(e){return G(e)===I},g.isProfiler=function(e){return G(e)===a},g.isStrictMode=function(e){return G(e)===l},g.isSuspense=function(e){return G(e)===A},g.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===C||e===i||e===a||e===l||e===A||e===d||"object"===typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===u||e.$$typeof===o||e.$$typeof===r||e.$$typeof===s||e.$$typeof===Z||e.$$typeof===h||e.$$typeof===p||e.$$typeof===b)},g.typeOf=G},309:function(e,g,t){"use strict";e.exports=t(746)},176:function(e){"use strict";e.exports=function(e,g,t,n,I,C,l,a){if(!e){var o;if(void 0===g)o=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var r=[t,n,I,C,l,a],c=0;(o=new Error(g.replace(/%s/g,(function(){return r[c++]})))).name="Invariant Violation"}throw o.framesToPop=1,o}}},426:function(e,g,t){(e=t.nmd(e)).exports=function(){"use strict";var g,t;function n(){return g.apply(null,arguments)}function I(e){g=e}function C(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function l(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function a(e,g){return Object.prototype.hasOwnProperty.call(e,g)}function o(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var g;for(g in e)if(a(e,g))return!1;return!0}function r(e){return void 0===e}function c(e){return"number"===typeof e||"[object Number]"===Object.prototype.toString.call(e)}function i(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function s(e,g){var t,n=[],I=e.length;for(t=0;t<I;++t)n.push(g(e[t],t));return n}function A(e,g){for(var t in g)a(g,t)&&(e[t]=g[t]);return a(g,"toString")&&(e.toString=g.toString),a(g,"valueOf")&&(e.valueOf=g.valueOf),e}function d(e,g,t,n){return Tt(e,g,t,n,!0).utc()}function u(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function m(e){return null==e._pf&&(e._pf=u()),e._pf}function b(e){if(null==e._isValid){var g=m(e),n=t.call(g.parsedDateParts,(function(e){return null!=e})),I=!isNaN(e._d.getTime())&&g.overflow<0&&!g.empty&&!g.invalidEra&&!g.invalidMonth&&!g.invalidWeekday&&!g.weekdayMismatch&&!g.nullInput&&!g.invalidFormat&&!g.userInvalidated&&(!g.meridiem||g.meridiem&&n);if(e._strict&&(I=I&&0===g.charsLeftOver&&0===g.unusedTokens.length&&void 0===g.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return I;e._isValid=I}return e._isValid}function Z(e){var g=d(NaN);return null!=e?A(m(g),e):m(g).userInvalidated=!0,g}t=Array.prototype.some?Array.prototype.some:function(e){var g,t=Object(this),n=t.length>>>0;for(g=0;g<n;g++)if(g in t&&e.call(this,t[g],g,t))return!0;return!1};var h=n.momentProperties=[],p=!1;function G(e,g){var t,n,I,C=h.length;if(r(g._isAMomentObject)||(e._isAMomentObject=g._isAMomentObject),r(g._i)||(e._i=g._i),r(g._f)||(e._f=g._f),r(g._l)||(e._l=g._l),r(g._strict)||(e._strict=g._strict),r(g._tzm)||(e._tzm=g._tzm),r(g._isUTC)||(e._isUTC=g._isUTC),r(g._offset)||(e._offset=g._offset),r(g._pf)||(e._pf=m(g)),r(g._locale)||(e._locale=g._locale),C>0)for(t=0;t<C;t++)r(I=g[n=h[t]])||(e[n]=I);return e}function y(e){G(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===p&&(p=!0,n.updateOffset(this),p=!1)}function B(e){return e instanceof y||null!=e&&null!=e._isAMomentObject}function f(e){!1===n.suppressDeprecationWarnings&&"undefined"!==typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function S(e,g){var t=!0;return A((function(){if(null!=n.deprecationHandler&&n.deprecationHandler(null,e),t){var I,C,l,o=[],r=arguments.length;for(C=0;C<r;C++){if(I="","object"===typeof arguments[C]){for(l in I+="\n["+C+"] ",arguments[0])a(arguments[0],l)&&(I+=l+": "+arguments[0][l]+", ");I=I.slice(0,-2)}else I=arguments[C];o.push(I)}f(e+"\nArguments: "+Array.prototype.slice.call(o).join("")+"\n"+(new Error).stack),t=!1}return g.apply(this,arguments)}),g)}var v,W={};function V(e,g){null!=n.deprecationHandler&&n.deprecationHandler(e,g),W[e]||(f(g),W[e]=!0)}function R(e){return"undefined"!==typeof Function&&e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function k(e){var g,t;for(t in e)a(e,t)&&(R(g=e[t])?this[t]=g:this["_"+t]=g);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function X(e,g){var t,n=A({},e);for(t in g)a(g,t)&&(l(e[t])&&l(g[t])?(n[t]={},A(n[t],e[t]),A(n[t],g[t])):null!=g[t]?n[t]=g[t]:delete n[t]);for(t in e)a(e,t)&&!a(g,t)&&l(e[t])&&(n[t]=A({},n[t]));return n}function J(e){null!=e&&this.set(e)}n.suppressDeprecationWarnings=!1,n.deprecationHandler=null,v=Object.keys?Object.keys:function(e){var g,t=[];for(g in e)a(e,g)&&t.push(g);return t};var Y={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function H(e,g,t){var n=this._calendar[e]||this._calendar.sameElse;return R(n)?n.call(g,t):n}function w(e,g,t){var n=""+Math.abs(e),I=g-n.length;return(e>=0?t?"+":"":"-")+Math.pow(10,Math.max(0,I)).toString().substr(1)+n}var N=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,K=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,F={},x={};function E(e,g,t,n){var I=n;"string"===typeof n&&(I=function(){return this[n]()}),e&&(x[e]=I),g&&(x[g[0]]=function(){return w(I.apply(this,arguments),g[1],g[2])}),t&&(x[t]=function(){return this.localeData().ordinal(I.apply(this,arguments),e)})}function z(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function M(e){var g,t,n=e.match(N);for(g=0,t=n.length;g<t;g++)x[n[g]]?n[g]=x[n[g]]:n[g]=z(n[g]);return function(g){var I,C="";for(I=0;I<t;I++)C+=R(n[I])?n[I].call(g,e):n[I];return C}}function U(e,g){return e.isValid()?(g=D(g,e.localeData()),F[g]=F[g]||M(g),F[g](e)):e.localeData().invalidDate()}function D(e,g){var t=5;function n(e){return g.longDateFormat(e)||e}for(K.lastIndex=0;t>=0&&K.test(e);)e=e.replace(K,n),K.lastIndex=0,t-=1;return e}var Q={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function L(e){var g=this._longDateFormat[e],t=this._longDateFormat[e.toUpperCase()];return g||!t?g:(this._longDateFormat[e]=t.match(N).map((function(e){return"MMMM"===e||"MM"===e||"DD"===e||"dddd"===e?e.slice(1):e})).join(""),this._longDateFormat[e])}var T="Invalid date";function j(){return this._invalidDate}var O="%d",P=/\d{1,2}/;function _(e){return this._ordinal.replace("%d",e)}var q={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function $(e,g,t,n){var I=this._relativeTime[t];return R(I)?I(e,g,t,n):I.replace(/%d/i,e)}function ee(e,g){var t=this._relativeTime[e>0?"future":"past"];return R(t)?t(g):t.replace(/%s/i,g)}var ge={};function te(e,g){var t=e.toLowerCase();ge[t]=ge[t+"s"]=ge[g]=e}function ne(e){return"string"===typeof e?ge[e]||ge[e.toLowerCase()]:void 0}function Ie(e){var g,t,n={};for(t in e)a(e,t)&&(g=ne(t))&&(n[g]=e[t]);return n}var Ce={};function le(e,g){Ce[e]=g}function ae(e){var g,t=[];for(g in e)a(e,g)&&t.push({unit:g,priority:Ce[g]});return t.sort((function(e,g){return e.priority-g.priority})),t}function oe(e){return e%4===0&&e%100!==0||e%400===0}function re(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function ce(e){var g=+e,t=0;return 0!==g&&isFinite(g)&&(t=re(g)),t}function ie(e,g){return function(t){return null!=t?(Ae(this,e,t),n.updateOffset(this,g),this):se(this,e)}}function se(e,g){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+g]():NaN}function Ae(e,g,t){e.isValid()&&!isNaN(t)&&("FullYear"===g&&oe(e.year())&&1===e.month()&&29===e.date()?(t=ce(t),e._d["set"+(e._isUTC?"UTC":"")+g](t,e.month(),$e(t,e.month()))):e._d["set"+(e._isUTC?"UTC":"")+g](t))}function de(e){return R(this[e=ne(e)])?this[e]():this}function ue(e,g){if("object"===typeof e){var t,n=ae(e=Ie(e)),I=n.length;for(t=0;t<I;t++)this[n[t].unit](e[n[t].unit])}else if(R(this[e=ne(e)]))return this[e](g);return this}var me,be=/\d/,Ze=/\d\d/,he=/\d{3}/,pe=/\d{4}/,Ge=/[+-]?\d{6}/,ye=/\d\d?/,Be=/\d\d\d\d?/,fe=/\d\d\d\d\d\d?/,Se=/\d{1,3}/,ve=/\d{1,4}/,We=/[+-]?\d{1,6}/,Ve=/\d+/,Re=/[+-]?\d+/,ke=/Z|[+-]\d\d:?\d\d/gi,Xe=/Z|[+-]\d\d(?::?\d\d)?/gi,Je=/[+-]?\d+(\.\d{1,3})?/,Ye=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;function He(e,g,t){me[e]=R(g)?g:function(e,n){return e&&t?t:g}}function we(e,g){return a(me,e)?me[e](g._strict,g._locale):new RegExp(Ne(e))}function Ne(e){return Ke(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(e,g,t,n,I){return g||t||n||I})))}function Ke(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}me={};var Fe={};function xe(e,g){var t,n,I=g;for("string"===typeof e&&(e=[e]),c(g)&&(I=function(e,t){t[g]=ce(e)}),n=e.length,t=0;t<n;t++)Fe[e[t]]=I}function Ee(e,g){xe(e,(function(e,t,n,I){n._w=n._w||{},g(e,n._w,n,I)}))}function ze(e,g,t){null!=g&&a(Fe,e)&&Fe[e](g,t._a,t,e)}var Me,Ue=0,De=1,Qe=2,Le=3,Te=4,je=5,Oe=6,Pe=7,_e=8;function qe(e,g){return(e%g+g)%g}function $e(e,g){if(isNaN(e)||isNaN(g))return NaN;var t=qe(g,12);return e+=(g-t)/12,1===t?oe(e)?29:28:31-t%7%2}Me=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var g;for(g=0;g<this.length;++g)if(this[g]===e)return g;return-1},E("M",["MM",2],"Mo",(function(){return this.month()+1})),E("MMM",0,0,(function(e){return this.localeData().monthsShort(this,e)})),E("MMMM",0,0,(function(e){return this.localeData().months(this,e)})),te("month","M"),le("month",8),He("M",ye),He("MM",ye,Ze),He("MMM",(function(e,g){return g.monthsShortRegex(e)})),He("MMMM",(function(e,g){return g.monthsRegex(e)})),xe(["M","MM"],(function(e,g){g[De]=ce(e)-1})),xe(["MMM","MMMM"],(function(e,g,t,n){var I=t._locale.monthsParse(e,n,t._strict);null!=I?g[De]=I:m(t).invalidMonth=e}));var eg="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),gg="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),tg=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,ng=Ye,Ig=Ye;function Cg(e,g){return e?C(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||tg).test(g)?"format":"standalone"][e.month()]:C(this._months)?this._months:this._months.standalone}function lg(e,g){return e?C(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[tg.test(g)?"format":"standalone"][e.month()]:C(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function ag(e,g,t){var n,I,C,l=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],n=0;n<12;++n)C=d([2e3,n]),this._shortMonthsParse[n]=this.monthsShort(C,"").toLocaleLowerCase(),this._longMonthsParse[n]=this.months(C,"").toLocaleLowerCase();return t?"MMM"===g?-1!==(I=Me.call(this._shortMonthsParse,l))?I:null:-1!==(I=Me.call(this._longMonthsParse,l))?I:null:"MMM"===g?-1!==(I=Me.call(this._shortMonthsParse,l))||-1!==(I=Me.call(this._longMonthsParse,l))?I:null:-1!==(I=Me.call(this._longMonthsParse,l))||-1!==(I=Me.call(this._shortMonthsParse,l))?I:null}function og(e,g,t){var n,I,C;if(this._monthsParseExact)return ag.call(this,e,g,t);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;n<12;n++){if(I=d([2e3,n]),t&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(I,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(I,"").replace(".","")+"$","i")),t||this._monthsParse[n]||(C="^"+this.months(I,"")+"|^"+this.monthsShort(I,""),this._monthsParse[n]=new RegExp(C.replace(".",""),"i")),t&&"MMMM"===g&&this._longMonthsParse[n].test(e))return n;if(t&&"MMM"===g&&this._shortMonthsParse[n].test(e))return n;if(!t&&this._monthsParse[n].test(e))return n}}function rg(e,g){var t;if(!e.isValid())return e;if("string"===typeof g)if(/^\d+$/.test(g))g=ce(g);else if(!c(g=e.localeData().monthsParse(g)))return e;return t=Math.min(e.date(),$e(e.year(),g)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](g,t),e}function cg(e){return null!=e?(rg(this,e),n.updateOffset(this,!0),this):se(this,"Month")}function ig(){return $e(this.year(),this.month())}function sg(e){return this._monthsParseExact?(a(this,"_monthsRegex")||dg.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(a(this,"_monthsShortRegex")||(this._monthsShortRegex=ng),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function Ag(e){return this._monthsParseExact?(a(this,"_monthsRegex")||dg.call(this),e?this._monthsStrictRegex:this._monthsRegex):(a(this,"_monthsRegex")||(this._monthsRegex=Ig),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function dg(){function e(e,g){return g.length-e.length}var g,t,n=[],I=[],C=[];for(g=0;g<12;g++)t=d([2e3,g]),n.push(this.monthsShort(t,"")),I.push(this.months(t,"")),C.push(this.months(t,"")),C.push(this.monthsShort(t,""));for(n.sort(e),I.sort(e),C.sort(e),g=0;g<12;g++)n[g]=Ke(n[g]),I[g]=Ke(I[g]);for(g=0;g<24;g++)C[g]=Ke(C[g]);this._monthsRegex=new RegExp("^("+C.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+I.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+n.join("|")+")","i")}function ug(e){return oe(e)?366:365}E("Y",0,0,(function(){var e=this.year();return e<=9999?w(e,4):"+"+e})),E(0,["YY",2],0,(function(){return this.year()%100})),E(0,["YYYY",4],0,"year"),E(0,["YYYYY",5],0,"year"),E(0,["YYYYYY",6,!0],0,"year"),te("year","y"),le("year",1),He("Y",Re),He("YY",ye,Ze),He("YYYY",ve,pe),He("YYYYY",We,Ge),He("YYYYYY",We,Ge),xe(["YYYYY","YYYYYY"],Ue),xe("YYYY",(function(e,g){g[Ue]=2===e.length?n.parseTwoDigitYear(e):ce(e)})),xe("YY",(function(e,g){g[Ue]=n.parseTwoDigitYear(e)})),xe("Y",(function(e,g){g[Ue]=parseInt(e,10)})),n.parseTwoDigitYear=function(e){return ce(e)+(ce(e)>68?1900:2e3)};var mg=ie("FullYear",!0);function bg(){return oe(this.year())}function Zg(e,g,t,n,I,C,l){var a;return e<100&&e>=0?(a=new Date(e+400,g,t,n,I,C,l),isFinite(a.getFullYear())&&a.setFullYear(e)):a=new Date(e,g,t,n,I,C,l),a}function hg(e){var g,t;return e<100&&e>=0?((t=Array.prototype.slice.call(arguments))[0]=e+400,g=new Date(Date.UTC.apply(null,t)),isFinite(g.getUTCFullYear())&&g.setUTCFullYear(e)):g=new Date(Date.UTC.apply(null,arguments)),g}function pg(e,g,t){var n=7+g-t;return-(7+hg(e,0,n).getUTCDay()-g)%7+n-1}function Gg(e,g,t,n,I){var C,l,a=1+7*(g-1)+(7+t-n)%7+pg(e,n,I);return a<=0?l=ug(C=e-1)+a:a>ug(e)?(C=e+1,l=a-ug(e)):(C=e,l=a),{year:C,dayOfYear:l}}function yg(e,g,t){var n,I,C=pg(e.year(),g,t),l=Math.floor((e.dayOfYear()-C-1)/7)+1;return l<1?n=l+Bg(I=e.year()-1,g,t):l>Bg(e.year(),g,t)?(n=l-Bg(e.year(),g,t),I=e.year()+1):(I=e.year(),n=l),{week:n,year:I}}function Bg(e,g,t){var n=pg(e,g,t),I=pg(e+1,g,t);return(ug(e)-n+I)/7}function fg(e){return yg(e,this._week.dow,this._week.doy).week}E("w",["ww",2],"wo","week"),E("W",["WW",2],"Wo","isoWeek"),te("week","w"),te("isoWeek","W"),le("week",5),le("isoWeek",5),He("w",ye),He("ww",ye,Ze),He("W",ye),He("WW",ye,Ze),Ee(["w","ww","W","WW"],(function(e,g,t,n){g[n.substr(0,1)]=ce(e)}));var Sg={dow:0,doy:6};function vg(){return this._week.dow}function Wg(){return this._week.doy}function Vg(e){var g=this.localeData().week(this);return null==e?g:this.add(7*(e-g),"d")}function Rg(e){var g=yg(this,1,4).week;return null==e?g:this.add(7*(e-g),"d")}function kg(e,g){return"string"!==typeof e?e:isNaN(e)?"number"===typeof(e=g.weekdaysParse(e))?e:null:parseInt(e,10)}function Xg(e,g){return"string"===typeof e?g.weekdaysParse(e)%7||7:isNaN(e)?null:e}function Jg(e,g){return e.slice(g,7).concat(e.slice(0,g))}E("d",0,"do","day"),E("dd",0,0,(function(e){return this.localeData().weekdaysMin(this,e)})),E("ddd",0,0,(function(e){return this.localeData().weekdaysShort(this,e)})),E("dddd",0,0,(function(e){return this.localeData().weekdays(this,e)})),E("e",0,0,"weekday"),E("E",0,0,"isoWeekday"),te("day","d"),te("weekday","e"),te("isoWeekday","E"),le("day",11),le("weekday",11),le("isoWeekday",11),He("d",ye),He("e",ye),He("E",ye),He("dd",(function(e,g){return g.weekdaysMinRegex(e)})),He("ddd",(function(e,g){return g.weekdaysShortRegex(e)})),He("dddd",(function(e,g){return g.weekdaysRegex(e)})),Ee(["dd","ddd","dddd"],(function(e,g,t,n){var I=t._locale.weekdaysParse(e,n,t._strict);null!=I?g.d=I:m(t).invalidWeekday=e})),Ee(["d","e","E"],(function(e,g,t,n){g[n]=ce(e)}));var Yg="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Hg="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),wg="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Ng=Ye,Kg=Ye,Fg=Ye;function xg(e,g){var t=C(this._weekdays)?this._weekdays:this._weekdays[e&&!0!==e&&this._weekdays.isFormat.test(g)?"format":"standalone"];return!0===e?Jg(t,this._week.dow):e?t[e.day()]:t}function Eg(e){return!0===e?Jg(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function zg(e){return!0===e?Jg(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function Mg(e,g,t){var n,I,C,l=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],n=0;n<7;++n)C=d([2e3,1]).day(n),this._minWeekdaysParse[n]=this.weekdaysMin(C,"").toLocaleLowerCase(),this._shortWeekdaysParse[n]=this.weekdaysShort(C,"").toLocaleLowerCase(),this._weekdaysParse[n]=this.weekdays(C,"").toLocaleLowerCase();return t?"dddd"===g?-1!==(I=Me.call(this._weekdaysParse,l))?I:null:"ddd"===g?-1!==(I=Me.call(this._shortWeekdaysParse,l))?I:null:-1!==(I=Me.call(this._minWeekdaysParse,l))?I:null:"dddd"===g?-1!==(I=Me.call(this._weekdaysParse,l))||-1!==(I=Me.call(this._shortWeekdaysParse,l))||-1!==(I=Me.call(this._minWeekdaysParse,l))?I:null:"ddd"===g?-1!==(I=Me.call(this._shortWeekdaysParse,l))||-1!==(I=Me.call(this._weekdaysParse,l))||-1!==(I=Me.call(this._minWeekdaysParse,l))?I:null:-1!==(I=Me.call(this._minWeekdaysParse,l))||-1!==(I=Me.call(this._weekdaysParse,l))||-1!==(I=Me.call(this._shortWeekdaysParse,l))?I:null}function Ug(e,g,t){var n,I,C;if(this._weekdaysParseExact)return Mg.call(this,e,g,t);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),n=0;n<7;n++){if(I=d([2e3,1]).day(n),t&&!this._fullWeekdaysParse[n]&&(this._fullWeekdaysParse[n]=new RegExp("^"+this.weekdays(I,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[n]=new RegExp("^"+this.weekdaysShort(I,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[n]=new RegExp("^"+this.weekdaysMin(I,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[n]||(C="^"+this.weekdays(I,"")+"|^"+this.weekdaysShort(I,"")+"|^"+this.weekdaysMin(I,""),this._weekdaysParse[n]=new RegExp(C.replace(".",""),"i")),t&&"dddd"===g&&this._fullWeekdaysParse[n].test(e))return n;if(t&&"ddd"===g&&this._shortWeekdaysParse[n].test(e))return n;if(t&&"dd"===g&&this._minWeekdaysParse[n].test(e))return n;if(!t&&this._weekdaysParse[n].test(e))return n}}function Dg(e){if(!this.isValid())return null!=e?this:NaN;var g=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=kg(e,this.localeData()),this.add(e-g,"d")):g}function Qg(e){if(!this.isValid())return null!=e?this:NaN;var g=(this.day()+7-this.localeData()._week.dow)%7;return null==e?g:this.add(e-g,"d")}function Lg(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var g=Xg(e,this.localeData());return this.day(this.day()%7?g:g-7)}return this.day()||7}function Tg(e){return this._weekdaysParseExact?(a(this,"_weekdaysRegex")||Pg.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(a(this,"_weekdaysRegex")||(this._weekdaysRegex=Ng),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function jg(e){return this._weekdaysParseExact?(a(this,"_weekdaysRegex")||Pg.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(a(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Kg),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Og(e){return this._weekdaysParseExact?(a(this,"_weekdaysRegex")||Pg.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(a(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Fg),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Pg(){function e(e,g){return g.length-e.length}var g,t,n,I,C,l=[],a=[],o=[],r=[];for(g=0;g<7;g++)t=d([2e3,1]).day(g),n=Ke(this.weekdaysMin(t,"")),I=Ke(this.weekdaysShort(t,"")),C=Ke(this.weekdays(t,"")),l.push(n),a.push(I),o.push(C),r.push(n),r.push(I),r.push(C);l.sort(e),a.sort(e),o.sort(e),r.sort(e),this._weekdaysRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+o.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+l.join("|")+")","i")}function _g(){return this.hours()%12||12}function qg(){return this.hours()||24}function $g(e,g){E(e,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),g)}))}function et(e,g){return g._meridiemParse}function gt(e){return"p"===(e+"").toLowerCase().charAt(0)}E("H",["HH",2],0,"hour"),E("h",["hh",2],0,_g),E("k",["kk",2],0,qg),E("hmm",0,0,(function(){return""+_g.apply(this)+w(this.minutes(),2)})),E("hmmss",0,0,(function(){return""+_g.apply(this)+w(this.minutes(),2)+w(this.seconds(),2)})),E("Hmm",0,0,(function(){return""+this.hours()+w(this.minutes(),2)})),E("Hmmss",0,0,(function(){return""+this.hours()+w(this.minutes(),2)+w(this.seconds(),2)})),$g("a",!0),$g("A",!1),te("hour","h"),le("hour",13),He("a",et),He("A",et),He("H",ye),He("h",ye),He("k",ye),He("HH",ye,Ze),He("hh",ye,Ze),He("kk",ye,Ze),He("hmm",Be),He("hmmss",fe),He("Hmm",Be),He("Hmmss",fe),xe(["H","HH"],Le),xe(["k","kk"],(function(e,g,t){var n=ce(e);g[Le]=24===n?0:n})),xe(["a","A"],(function(e,g,t){t._isPm=t._locale.isPM(e),t._meridiem=e})),xe(["h","hh"],(function(e,g,t){g[Le]=ce(e),m(t).bigHour=!0})),xe("hmm",(function(e,g,t){var n=e.length-2;g[Le]=ce(e.substr(0,n)),g[Te]=ce(e.substr(n)),m(t).bigHour=!0})),xe("hmmss",(function(e,g,t){var n=e.length-4,I=e.length-2;g[Le]=ce(e.substr(0,n)),g[Te]=ce(e.substr(n,2)),g[je]=ce(e.substr(I)),m(t).bigHour=!0})),xe("Hmm",(function(e,g,t){var n=e.length-2;g[Le]=ce(e.substr(0,n)),g[Te]=ce(e.substr(n))})),xe("Hmmss",(function(e,g,t){var n=e.length-4,I=e.length-2;g[Le]=ce(e.substr(0,n)),g[Te]=ce(e.substr(n,2)),g[je]=ce(e.substr(I))}));var tt=/[ap]\.?m?\.?/i,nt=ie("Hours",!0);function It(e,g,t){return e>11?t?"pm":"PM":t?"am":"AM"}var Ct,lt={calendar:Y,longDateFormat:Q,invalidDate:T,ordinal:O,dayOfMonthOrdinalParse:P,relativeTime:q,months:eg,monthsShort:gg,week:Sg,weekdays:Yg,weekdaysMin:wg,weekdaysShort:Hg,meridiemParse:tt},at={},ot={};function rt(e,g){var t,n=Math.min(e.length,g.length);for(t=0;t<n;t+=1)if(e[t]!==g[t])return t;return n}function ct(e){return e?e.toLowerCase().replace("_","-"):e}function it(e){for(var g,t,n,I,C=0;C<e.length;){for(g=(I=ct(e[C]).split("-")).length,t=(t=ct(e[C+1]))?t.split("-"):null;g>0;){if(n=At(I.slice(0,g).join("-")))return n;if(t&&t.length>=g&&rt(I,t)>=g-1)break;g--}C++}return Ct}function st(e){return null!=e.match("^[^/\\\\]*$")}function At(g){var t=null;if(void 0===at[g]&&e&&e.exports&&st(g))try{t=Ct._abbr,Object(function(){var e=new Error("Cannot find module 'undefined'");throw e.code="MODULE_NOT_FOUND",e}()),dt(t)}catch(n){at[g]=null}return at[g]}function dt(e,g){var t;return e&&((t=r(g)?bt(e):ut(e,g))?Ct=t:"undefined"!==typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),Ct._abbr}function ut(e,g){if(null!==g){var t,n=lt;if(g.abbr=e,null!=at[e])V("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=at[e]._config;else if(null!=g.parentLocale)if(null!=at[g.parentLocale])n=at[g.parentLocale]._config;else{if(null==(t=At(g.parentLocale)))return ot[g.parentLocale]||(ot[g.parentLocale]=[]),ot[g.parentLocale].push({name:e,config:g}),null;n=t._config}return at[e]=new J(X(n,g)),ot[e]&&ot[e].forEach((function(e){ut(e.name,e.config)})),dt(e),at[e]}return delete at[e],null}function mt(e,g){if(null!=g){var t,n,I=lt;null!=at[e]&&null!=at[e].parentLocale?at[e].set(X(at[e]._config,g)):(null!=(n=At(e))&&(I=n._config),g=X(I,g),null==n&&(g.abbr=e),(t=new J(g)).parentLocale=at[e],at[e]=t),dt(e)}else null!=at[e]&&(null!=at[e].parentLocale?(at[e]=at[e].parentLocale,e===dt()&&dt(e)):null!=at[e]&&delete at[e]);return at[e]}function bt(e){var g;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return Ct;if(!C(e)){if(g=At(e))return g;e=[e]}return it(e)}function Zt(){return v(at)}function ht(e){var g,t=e._a;return t&&-2===m(e).overflow&&(g=t[De]<0||t[De]>11?De:t[Qe]<1||t[Qe]>$e(t[Ue],t[De])?Qe:t[Le]<0||t[Le]>24||24===t[Le]&&(0!==t[Te]||0!==t[je]||0!==t[Oe])?Le:t[Te]<0||t[Te]>59?Te:t[je]<0||t[je]>59?je:t[Oe]<0||t[Oe]>999?Oe:-1,m(e)._overflowDayOfYear&&(g<Ue||g>Qe)&&(g=Qe),m(e)._overflowWeeks&&-1===g&&(g=Pe),m(e)._overflowWeekday&&-1===g&&(g=_e),m(e).overflow=g),e}var pt=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Gt=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,yt=/Z|[+-]\d\d(?::?\d\d)?/,Bt=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],ft=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],St=/^\/?Date\((-?\d+)/i,vt=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Wt={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Vt(e){var g,t,n,I,C,l,a=e._i,o=pt.exec(a)||Gt.exec(a),r=Bt.length,c=ft.length;if(o){for(m(e).iso=!0,g=0,t=r;g<t;g++)if(Bt[g][1].exec(o[1])){I=Bt[g][0],n=!1!==Bt[g][2];break}if(null==I)return void(e._isValid=!1);if(o[3]){for(g=0,t=c;g<t;g++)if(ft[g][1].exec(o[3])){C=(o[2]||" ")+ft[g][0];break}if(null==C)return void(e._isValid=!1)}if(!n&&null!=C)return void(e._isValid=!1);if(o[4]){if(!yt.exec(o[4]))return void(e._isValid=!1);l="Z"}e._f=I+(C||"")+(l||""),Et(e)}else e._isValid=!1}function Rt(e,g,t,n,I,C){var l=[kt(e),gg.indexOf(g),parseInt(t,10),parseInt(n,10),parseInt(I,10)];return C&&l.push(parseInt(C,10)),l}function kt(e){var g=parseInt(e,10);return g<=49?2e3+g:g<=999?1900+g:g}function Xt(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function Jt(e,g,t){return!e||Hg.indexOf(e)===new Date(g[0],g[1],g[2]).getDay()||(m(t).weekdayMismatch=!0,t._isValid=!1,!1)}function Yt(e,g,t){if(e)return Wt[e];if(g)return 0;var n=parseInt(t,10),I=n%100;return(n-I)/100*60+I}function Ht(e){var g,t=vt.exec(Xt(e._i));if(t){if(g=Rt(t[4],t[3],t[2],t[5],t[6],t[7]),!Jt(t[1],g,e))return;e._a=g,e._tzm=Yt(t[8],t[9],t[10]),e._d=hg.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),m(e).rfc2822=!0}else e._isValid=!1}function wt(e){var g=St.exec(e._i);null===g?(Vt(e),!1===e._isValid&&(delete e._isValid,Ht(e),!1===e._isValid&&(delete e._isValid,e._strict?e._isValid=!1:n.createFromInputFallback(e)))):e._d=new Date(+g[1])}function Nt(e,g,t){return null!=e?e:null!=g?g:t}function Kt(e){var g=new Date(n.now());return e._useUTC?[g.getUTCFullYear(),g.getUTCMonth(),g.getUTCDate()]:[g.getFullYear(),g.getMonth(),g.getDate()]}function Ft(e){var g,t,n,I,C,l=[];if(!e._d){for(n=Kt(e),e._w&&null==e._a[Qe]&&null==e._a[De]&&xt(e),null!=e._dayOfYear&&(C=Nt(e._a[Ue],n[Ue]),(e._dayOfYear>ug(C)||0===e._dayOfYear)&&(m(e)._overflowDayOfYear=!0),t=hg(C,0,e._dayOfYear),e._a[De]=t.getUTCMonth(),e._a[Qe]=t.getUTCDate()),g=0;g<3&&null==e._a[g];++g)e._a[g]=l[g]=n[g];for(;g<7;g++)e._a[g]=l[g]=null==e._a[g]?2===g?1:0:e._a[g];24===e._a[Le]&&0===e._a[Te]&&0===e._a[je]&&0===e._a[Oe]&&(e._nextDay=!0,e._a[Le]=0),e._d=(e._useUTC?hg:Zg).apply(null,l),I=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[Le]=24),e._w&&"undefined"!==typeof e._w.d&&e._w.d!==I&&(m(e).weekdayMismatch=!0)}}function xt(e){var g,t,n,I,C,l,a,o,r;null!=(g=e._w).GG||null!=g.W||null!=g.E?(C=1,l=4,t=Nt(g.GG,e._a[Ue],yg(jt(),1,4).year),n=Nt(g.W,1),((I=Nt(g.E,1))<1||I>7)&&(o=!0)):(C=e._locale._week.dow,l=e._locale._week.doy,r=yg(jt(),C,l),t=Nt(g.gg,e._a[Ue],r.year),n=Nt(g.w,r.week),null!=g.d?((I=g.d)<0||I>6)&&(o=!0):null!=g.e?(I=g.e+C,(g.e<0||g.e>6)&&(o=!0)):I=C),n<1||n>Bg(t,C,l)?m(e)._overflowWeeks=!0:null!=o?m(e)._overflowWeekday=!0:(a=Gg(t,n,I,C,l),e._a[Ue]=a.year,e._dayOfYear=a.dayOfYear)}function Et(e){if(e._f!==n.ISO_8601)if(e._f!==n.RFC_2822){e._a=[],m(e).empty=!0;var g,t,I,C,l,a,o,r=""+e._i,c=r.length,i=0;for(o=(I=D(e._f,e._locale).match(N)||[]).length,g=0;g<o;g++)C=I[g],(t=(r.match(we(C,e))||[])[0])&&((l=r.substr(0,r.indexOf(t))).length>0&&m(e).unusedInput.push(l),r=r.slice(r.indexOf(t)+t.length),i+=t.length),x[C]?(t?m(e).empty=!1:m(e).unusedTokens.push(C),ze(C,t,e)):e._strict&&!t&&m(e).unusedTokens.push(C);m(e).charsLeftOver=c-i,r.length>0&&m(e).unusedInput.push(r),e._a[Le]<=12&&!0===m(e).bigHour&&e._a[Le]>0&&(m(e).bigHour=void 0),m(e).parsedDateParts=e._a.slice(0),m(e).meridiem=e._meridiem,e._a[Le]=zt(e._locale,e._a[Le],e._meridiem),null!==(a=m(e).era)&&(e._a[Ue]=e._locale.erasConvertYear(a,e._a[Ue])),Ft(e),ht(e)}else Ht(e);else Vt(e)}function zt(e,g,t){var n;return null==t?g:null!=e.meridiemHour?e.meridiemHour(g,t):null!=e.isPM?((n=e.isPM(t))&&g<12&&(g+=12),n||12!==g||(g=0),g):g}function Mt(e){var g,t,n,I,C,l,a=!1,o=e._f.length;if(0===o)return m(e).invalidFormat=!0,void(e._d=new Date(NaN));for(I=0;I<o;I++)C=0,l=!1,g=G({},e),null!=e._useUTC&&(g._useUTC=e._useUTC),g._f=e._f[I],Et(g),b(g)&&(l=!0),C+=m(g).charsLeftOver,C+=10*m(g).unusedTokens.length,m(g).score=C,a?C<n&&(n=C,t=g):(null==n||C<n||l)&&(n=C,t=g,l&&(a=!0));A(e,t||g)}function Ut(e){if(!e._d){var g=Ie(e._i),t=void 0===g.day?g.date:g.day;e._a=s([g.year,g.month,t,g.hour,g.minute,g.second,g.millisecond],(function(e){return e&&parseInt(e,10)})),Ft(e)}}function Dt(e){var g=new y(ht(Qt(e)));return g._nextDay&&(g.add(1,"d"),g._nextDay=void 0),g}function Qt(e){var g=e._i,t=e._f;return e._locale=e._locale||bt(e._l),null===g||void 0===t&&""===g?Z({nullInput:!0}):("string"===typeof g&&(e._i=g=e._locale.preparse(g)),B(g)?new y(ht(g)):(i(g)?e._d=g:C(t)?Mt(e):t?Et(e):Lt(e),b(e)||(e._d=null),e))}function Lt(e){var g=e._i;r(g)?e._d=new Date(n.now()):i(g)?e._d=new Date(g.valueOf()):"string"===typeof g?wt(e):C(g)?(e._a=s(g.slice(0),(function(e){return parseInt(e,10)})),Ft(e)):l(g)?Ut(e):c(g)?e._d=new Date(g):n.createFromInputFallback(e)}function Tt(e,g,t,n,I){var a={};return!0!==g&&!1!==g||(n=g,g=void 0),!0!==t&&!1!==t||(n=t,t=void 0),(l(e)&&o(e)||C(e)&&0===e.length)&&(e=void 0),a._isAMomentObject=!0,a._useUTC=a._isUTC=I,a._l=t,a._i=e,a._f=g,a._strict=n,Dt(a)}function jt(e,g,t,n){return Tt(e,g,t,n,!1)}n.createFromInputFallback=S("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))})),n.ISO_8601=function(){},n.RFC_2822=function(){};var Ot=S("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=jt.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:Z()})),Pt=S("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=jt.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:Z()}));function _t(e,g){var t,n;if(1===g.length&&C(g[0])&&(g=g[0]),!g.length)return jt();for(t=g[0],n=1;n<g.length;++n)g[n].isValid()&&!g[n][e](t)||(t=g[n]);return t}function qt(){return _t("isBefore",[].slice.call(arguments,0))}function $t(){return _t("isAfter",[].slice.call(arguments,0))}var en=function(){return Date.now?Date.now():+new Date},gn=["year","quarter","month","week","day","hour","minute","second","millisecond"];function tn(e){var g,t,n=!1,I=gn.length;for(g in e)if(a(e,g)&&(-1===Me.call(gn,g)||null!=e[g]&&isNaN(e[g])))return!1;for(t=0;t<I;++t)if(e[gn[t]]){if(n)return!1;parseFloat(e[gn[t]])!==ce(e[gn[t]])&&(n=!0)}return!0}function nn(){return this._isValid}function In(){return Vn(NaN)}function Cn(e){var g=Ie(e),t=g.year||0,n=g.quarter||0,I=g.month||0,C=g.week||g.isoWeek||0,l=g.day||0,a=g.hour||0,o=g.minute||0,r=g.second||0,c=g.millisecond||0;this._isValid=tn(g),this._milliseconds=+c+1e3*r+6e4*o+1e3*a*60*60,this._days=+l+7*C,this._months=+I+3*n+12*t,this._data={},this._locale=bt(),this._bubble()}function ln(e){return e instanceof Cn}function an(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function on(e,g,t){var n,I=Math.min(e.length,g.length),C=Math.abs(e.length-g.length),l=0;for(n=0;n<I;n++)(t&&e[n]!==g[n]||!t&&ce(e[n])!==ce(g[n]))&&l++;return l+C}function rn(e,g){E(e,0,0,(function(){var e=this.utcOffset(),t="+";return e<0&&(e=-e,t="-"),t+w(~~(e/60),2)+g+w(~~e%60,2)}))}rn("Z",":"),rn("ZZ",""),He("Z",Xe),He("ZZ",Xe),xe(["Z","ZZ"],(function(e,g,t){t._useUTC=!0,t._tzm=sn(Xe,e)}));var cn=/([\+\-]|\d\d)/gi;function sn(e,g){var t,n,I=(g||"").match(e);return null===I?null:0===(n=60*(t=((I[I.length-1]||[])+"").match(cn)||["-",0,0])[1]+ce(t[2]))?0:"+"===t[0]?n:-n}function An(e,g){var t,I;return g._isUTC?(t=g.clone(),I=(B(e)||i(e)?e.valueOf():jt(e).valueOf())-t.valueOf(),t._d.setTime(t._d.valueOf()+I),n.updateOffset(t,!1),t):jt(e).local()}function dn(e){return-Math.round(e._d.getTimezoneOffset())}function un(e,g,t){var I,C=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"===typeof e){if(null===(e=sn(Xe,e)))return this}else Math.abs(e)<16&&!t&&(e*=60);return!this._isUTC&&g&&(I=dn(this)),this._offset=e,this._isUTC=!0,null!=I&&this.add(I,"m"),C!==e&&(!g||this._changeInProgress?Yn(this,Vn(e-C,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,n.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?C:dn(this)}function mn(e,g){return null!=e?("string"!==typeof e&&(e=-e),this.utcOffset(e,g),this):-this.utcOffset()}function bn(e){return this.utcOffset(0,e)}function Zn(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(dn(this),"m")),this}function hn(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"===typeof this._i){var e=sn(ke,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this}function pn(e){return!!this.isValid()&&(e=e?jt(e).utcOffset():0,(this.utcOffset()-e)%60===0)}function Gn(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function yn(){if(!r(this._isDSTShifted))return this._isDSTShifted;var e,g={};return G(g,this),(g=Qt(g))._a?(e=g._isUTC?d(g._a):jt(g._a),this._isDSTShifted=this.isValid()&&on(g._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function Bn(){return!!this.isValid()&&!this._isUTC}function fn(){return!!this.isValid()&&this._isUTC}function Sn(){return!!this.isValid()&&this._isUTC&&0===this._offset}n.updateOffset=function(){};var vn=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Wn=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Vn(e,g){var t,n,I,C=e,l=null;return ln(e)?C={ms:e._milliseconds,d:e._days,M:e._months}:c(e)||!isNaN(+e)?(C={},g?C[g]=+e:C.milliseconds=+e):(l=vn.exec(e))?(t="-"===l[1]?-1:1,C={y:0,d:ce(l[Qe])*t,h:ce(l[Le])*t,m:ce(l[Te])*t,s:ce(l[je])*t,ms:ce(an(1e3*l[Oe]))*t}):(l=Wn.exec(e))?(t="-"===l[1]?-1:1,C={y:Rn(l[2],t),M:Rn(l[3],t),w:Rn(l[4],t),d:Rn(l[5],t),h:Rn(l[6],t),m:Rn(l[7],t),s:Rn(l[8],t)}):null==C?C={}:"object"===typeof C&&("from"in C||"to"in C)&&(I=Xn(jt(C.from),jt(C.to)),(C={}).ms=I.milliseconds,C.M=I.months),n=new Cn(C),ln(e)&&a(e,"_locale")&&(n._locale=e._locale),ln(e)&&a(e,"_isValid")&&(n._isValid=e._isValid),n}function Rn(e,g){var t=e&&parseFloat(e.replace(",","."));return(isNaN(t)?0:t)*g}function kn(e,g){var t={};return t.months=g.month()-e.month()+12*(g.year()-e.year()),e.clone().add(t.months,"M").isAfter(g)&&--t.months,t.milliseconds=+g-+e.clone().add(t.months,"M"),t}function Xn(e,g){var t;return e.isValid()&&g.isValid()?(g=An(g,e),e.isBefore(g)?t=kn(e,g):((t=kn(g,e)).milliseconds=-t.milliseconds,t.months=-t.months),t):{milliseconds:0,months:0}}function Jn(e,g){return function(t,n){var I;return null===n||isNaN(+n)||(V(g,"moment()."+g+"(period, number) is deprecated. Please use moment()."+g+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),I=t,t=n,n=I),Yn(this,Vn(t,n),e),this}}function Yn(e,g,t,I){var C=g._milliseconds,l=an(g._days),a=an(g._months);e.isValid()&&(I=null==I||I,a&&rg(e,se(e,"Month")+a*t),l&&Ae(e,"Date",se(e,"Date")+l*t),C&&e._d.setTime(e._d.valueOf()+C*t),I&&n.updateOffset(e,l||a))}Vn.fn=Cn.prototype,Vn.invalid=In;var Hn=Jn(1,"add"),wn=Jn(-1,"subtract");function Nn(e){return"string"===typeof e||e instanceof String}function Kn(e){return B(e)||i(e)||Nn(e)||c(e)||xn(e)||Fn(e)||null===e||void 0===e}function Fn(e){var g,t,n=l(e)&&!o(e),I=!1,C=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],r=C.length;for(g=0;g<r;g+=1)t=C[g],I=I||a(e,t);return n&&I}function xn(e){var g=C(e),t=!1;return g&&(t=0===e.filter((function(g){return!c(g)&&Nn(e)})).length),g&&t}function En(e){var g,t,n=l(e)&&!o(e),I=!1,C=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"];for(g=0;g<C.length;g+=1)t=C[g],I=I||a(e,t);return n&&I}function zn(e,g){var t=e.diff(g,"days",!0);return t<-6?"sameElse":t<-1?"lastWeek":t<0?"lastDay":t<1?"sameDay":t<2?"nextDay":t<7?"nextWeek":"sameElse"}function Mn(e,g){1===arguments.length&&(arguments[0]?Kn(arguments[0])?(e=arguments[0],g=void 0):En(arguments[0])&&(g=arguments[0],e=void 0):(e=void 0,g=void 0));var t=e||jt(),I=An(t,this).startOf("day"),C=n.calendarFormat(this,I)||"sameElse",l=g&&(R(g[C])?g[C].call(this,t):g[C]);return this.format(l||this.localeData().calendar(C,this,jt(t)))}function Un(){return new y(this)}function Dn(e,g){var t=B(e)?e:jt(e);return!(!this.isValid()||!t.isValid())&&("millisecond"===(g=ne(g)||"millisecond")?this.valueOf()>t.valueOf():t.valueOf()<this.clone().startOf(g).valueOf())}function Qn(e,g){var t=B(e)?e:jt(e);return!(!this.isValid()||!t.isValid())&&("millisecond"===(g=ne(g)||"millisecond")?this.valueOf()<t.valueOf():this.clone().endOf(g).valueOf()<t.valueOf())}function Ln(e,g,t,n){var I=B(e)?e:jt(e),C=B(g)?g:jt(g);return!!(this.isValid()&&I.isValid()&&C.isValid())&&("("===(n=n||"()")[0]?this.isAfter(I,t):!this.isBefore(I,t))&&(")"===n[1]?this.isBefore(C,t):!this.isAfter(C,t))}function Tn(e,g){var t,n=B(e)?e:jt(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(g=ne(g)||"millisecond")?this.valueOf()===n.valueOf():(t=n.valueOf(),this.clone().startOf(g).valueOf()<=t&&t<=this.clone().endOf(g).valueOf()))}function jn(e,g){return this.isSame(e,g)||this.isAfter(e,g)}function On(e,g){return this.isSame(e,g)||this.isBefore(e,g)}function Pn(e,g,t){var n,I,C;if(!this.isValid())return NaN;if(!(n=An(e,this)).isValid())return NaN;switch(I=6e4*(n.utcOffset()-this.utcOffset()),g=ne(g)){case"year":C=_n(this,n)/12;break;case"month":C=_n(this,n);break;case"quarter":C=_n(this,n)/3;break;case"second":C=(this-n)/1e3;break;case"minute":C=(this-n)/6e4;break;case"hour":C=(this-n)/36e5;break;case"day":C=(this-n-I)/864e5;break;case"week":C=(this-n-I)/6048e5;break;default:C=this-n}return t?C:re(C)}function _n(e,g){if(e.date()<g.date())return-_n(g,e);var t=12*(g.year()-e.year())+(g.month()-e.month()),n=e.clone().add(t,"months");return-(t+(g-n<0?(g-n)/(n-e.clone().add(t-1,"months")):(g-n)/(e.clone().add(t+1,"months")-n)))||0}function qn(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function $n(e){if(!this.isValid())return null;var g=!0!==e,t=g?this.clone().utc():this;return t.year()<0||t.year()>9999?U(t,g?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):R(Date.prototype.toISOString)?g?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",U(t,"Z")):U(t,g?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function eI(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e,g,t,n,I="moment",C="";return this.isLocal()||(I=0===this.utcOffset()?"moment.utc":"moment.parseZone",C="Z"),e="["+I+'("]',g=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",t="-MM-DD[T]HH:mm:ss.SSS",n=C+'[")]',this.format(e+g+t+n)}function gI(e){e||(e=this.isUtc()?n.defaultFormatUtc:n.defaultFormat);var g=U(this,e);return this.localeData().postformat(g)}function tI(e,g){return this.isValid()&&(B(e)&&e.isValid()||jt(e).isValid())?Vn({to:this,from:e}).locale(this.locale()).humanize(!g):this.localeData().invalidDate()}function nI(e){return this.from(jt(),e)}function II(e,g){return this.isValid()&&(B(e)&&e.isValid()||jt(e).isValid())?Vn({from:this,to:e}).locale(this.locale()).humanize(!g):this.localeData().invalidDate()}function CI(e){return this.to(jt(),e)}function lI(e){var g;return void 0===e?this._locale._abbr:(null!=(g=bt(e))&&(this._locale=g),this)}n.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",n.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var aI=S("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(e){return void 0===e?this.localeData():this.locale(e)}));function oI(){return this._locale}var rI=1e3,cI=60*rI,iI=60*cI,sI=3506328*iI;function AI(e,g){return(e%g+g)%g}function dI(e,g,t){return e<100&&e>=0?new Date(e+400,g,t)-sI:new Date(e,g,t).valueOf()}function uI(e,g,t){return e<100&&e>=0?Date.UTC(e+400,g,t)-sI:Date.UTC(e,g,t)}function mI(e){var g,t;if(void 0===(e=ne(e))||"millisecond"===e||!this.isValid())return this;switch(t=this._isUTC?uI:dI,e){case"year":g=t(this.year(),0,1);break;case"quarter":g=t(this.year(),this.month()-this.month()%3,1);break;case"month":g=t(this.year(),this.month(),1);break;case"week":g=t(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":g=t(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":g=t(this.year(),this.month(),this.date());break;case"hour":g=this._d.valueOf(),g-=AI(g+(this._isUTC?0:this.utcOffset()*cI),iI);break;case"minute":g=this._d.valueOf(),g-=AI(g,cI);break;case"second":g=this._d.valueOf(),g-=AI(g,rI)}return this._d.setTime(g),n.updateOffset(this,!0),this}function bI(e){var g,t;if(void 0===(e=ne(e))||"millisecond"===e||!this.isValid())return this;switch(t=this._isUTC?uI:dI,e){case"year":g=t(this.year()+1,0,1)-1;break;case"quarter":g=t(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":g=t(this.year(),this.month()+1,1)-1;break;case"week":g=t(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":g=t(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":g=t(this.year(),this.month(),this.date()+1)-1;break;case"hour":g=this._d.valueOf(),g+=iI-AI(g+(this._isUTC?0:this.utcOffset()*cI),iI)-1;break;case"minute":g=this._d.valueOf(),g+=cI-AI(g,cI)-1;break;case"second":g=this._d.valueOf(),g+=rI-AI(g,rI)-1}return this._d.setTime(g),n.updateOffset(this,!0),this}function ZI(){return this._d.valueOf()-6e4*(this._offset||0)}function hI(){return Math.floor(this.valueOf()/1e3)}function pI(){return new Date(this.valueOf())}function GI(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function yI(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function BI(){return this.isValid()?this.toISOString():null}function fI(){return b(this)}function SI(){return A({},m(this))}function vI(){return m(this).overflow}function WI(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function VI(e,g){var t,I,C,l=this._eras||bt("en")._eras;for(t=0,I=l.length;t<I;++t)switch("string"===typeof l[t].since&&(C=n(l[t].since).startOf("day"),l[t].since=C.valueOf()),typeof l[t].until){case"undefined":l[t].until=1/0;break;case"string":C=n(l[t].until).startOf("day").valueOf(),l[t].until=C.valueOf()}return l}function RI(e,g,t){var n,I,C,l,a,o=this.eras();for(e=e.toUpperCase(),n=0,I=o.length;n<I;++n)if(C=o[n].name.toUpperCase(),l=o[n].abbr.toUpperCase(),a=o[n].narrow.toUpperCase(),t)switch(g){case"N":case"NN":case"NNN":if(l===e)return o[n];break;case"NNNN":if(C===e)return o[n];break;case"NNNNN":if(a===e)return o[n]}else if([C,l,a].indexOf(e)>=0)return o[n]}function kI(e,g){var t=e.since<=e.until?1:-1;return void 0===g?n(e.since).year():n(e.since).year()+(g-e.offset)*t}function XI(){var e,g,t,n=this.localeData().eras();for(e=0,g=n.length;e<g;++e){if(t=this.clone().startOf("day").valueOf(),n[e].since<=t&&t<=n[e].until)return n[e].name;if(n[e].until<=t&&t<=n[e].since)return n[e].name}return""}function JI(){var e,g,t,n=this.localeData().eras();for(e=0,g=n.length;e<g;++e){if(t=this.clone().startOf("day").valueOf(),n[e].since<=t&&t<=n[e].until)return n[e].narrow;if(n[e].until<=t&&t<=n[e].since)return n[e].narrow}return""}function YI(){var e,g,t,n=this.localeData().eras();for(e=0,g=n.length;e<g;++e){if(t=this.clone().startOf("day").valueOf(),n[e].since<=t&&t<=n[e].until)return n[e].abbr;if(n[e].until<=t&&t<=n[e].since)return n[e].abbr}return""}function HI(){var e,g,t,I,C=this.localeData().eras();for(e=0,g=C.length;e<g;++e)if(t=C[e].since<=C[e].until?1:-1,I=this.clone().startOf("day").valueOf(),C[e].since<=I&&I<=C[e].until||C[e].until<=I&&I<=C[e].since)return(this.year()-n(C[e].since).year())*t+C[e].offset;return this.year()}function wI(e){return a(this,"_erasNameRegex")||MI.call(this),e?this._erasNameRegex:this._erasRegex}function NI(e){return a(this,"_erasAbbrRegex")||MI.call(this),e?this._erasAbbrRegex:this._erasRegex}function KI(e){return a(this,"_erasNarrowRegex")||MI.call(this),e?this._erasNarrowRegex:this._erasRegex}function FI(e,g){return g.erasAbbrRegex(e)}function xI(e,g){return g.erasNameRegex(e)}function EI(e,g){return g.erasNarrowRegex(e)}function zI(e,g){return g._eraYearOrdinalRegex||Ve}function MI(){var e,g,t=[],n=[],I=[],C=[],l=this.eras();for(e=0,g=l.length;e<g;++e)n.push(Ke(l[e].name)),t.push(Ke(l[e].abbr)),I.push(Ke(l[e].narrow)),C.push(Ke(l[e].name)),C.push(Ke(l[e].abbr)),C.push(Ke(l[e].narrow));this._erasRegex=new RegExp("^("+C.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+n.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+t.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+I.join("|")+")","i")}function UI(e,g){E(0,[e,e.length],0,g)}function DI(e){return PI.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function QI(e){return PI.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function LI(){return Bg(this.year(),1,4)}function TI(){return Bg(this.isoWeekYear(),1,4)}function jI(){var e=this.localeData()._week;return Bg(this.year(),e.dow,e.doy)}function OI(){var e=this.localeData()._week;return Bg(this.weekYear(),e.dow,e.doy)}function PI(e,g,t,n,I){var C;return null==e?yg(this,n,I).year:(g>(C=Bg(e,n,I))&&(g=C),_I.call(this,e,g,t,n,I))}function _I(e,g,t,n,I){var C=Gg(e,g,t,n,I),l=hg(C.year,0,C.dayOfYear);return this.year(l.getUTCFullYear()),this.month(l.getUTCMonth()),this.date(l.getUTCDate()),this}function qI(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)}E("N",0,0,"eraAbbr"),E("NN",0,0,"eraAbbr"),E("NNN",0,0,"eraAbbr"),E("NNNN",0,0,"eraName"),E("NNNNN",0,0,"eraNarrow"),E("y",["y",1],"yo","eraYear"),E("y",["yy",2],0,"eraYear"),E("y",["yyy",3],0,"eraYear"),E("y",["yyyy",4],0,"eraYear"),He("N",FI),He("NN",FI),He("NNN",FI),He("NNNN",xI),He("NNNNN",EI),xe(["N","NN","NNN","NNNN","NNNNN"],(function(e,g,t,n){var I=t._locale.erasParse(e,n,t._strict);I?m(t).era=I:m(t).invalidEra=e})),He("y",Ve),He("yy",Ve),He("yyy",Ve),He("yyyy",Ve),He("yo",zI),xe(["y","yy","yyy","yyyy"],Ue),xe(["yo"],(function(e,g,t,n){var I;t._locale._eraYearOrdinalRegex&&(I=e.match(t._locale._eraYearOrdinalRegex)),t._locale.eraYearOrdinalParse?g[Ue]=t._locale.eraYearOrdinalParse(e,I):g[Ue]=parseInt(e,10)})),E(0,["gg",2],0,(function(){return this.weekYear()%100})),E(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),UI("gggg","weekYear"),UI("ggggg","weekYear"),UI("GGGG","isoWeekYear"),UI("GGGGG","isoWeekYear"),te("weekYear","gg"),te("isoWeekYear","GG"),le("weekYear",1),le("isoWeekYear",1),He("G",Re),He("g",Re),He("GG",ye,Ze),He("gg",ye,Ze),He("GGGG",ve,pe),He("gggg",ve,pe),He("GGGGG",We,Ge),He("ggggg",We,Ge),Ee(["gggg","ggggg","GGGG","GGGGG"],(function(e,g,t,n){g[n.substr(0,2)]=ce(e)})),Ee(["gg","GG"],(function(e,g,t,I){g[I]=n.parseTwoDigitYear(e)})),E("Q",0,"Qo","quarter"),te("quarter","Q"),le("quarter",7),He("Q",be),xe("Q",(function(e,g){g[De]=3*(ce(e)-1)})),E("D",["DD",2],"Do","date"),te("date","D"),le("date",9),He("D",ye),He("DD",ye,Ze),He("Do",(function(e,g){return e?g._dayOfMonthOrdinalParse||g._ordinalParse:g._dayOfMonthOrdinalParseLenient})),xe(["D","DD"],Qe),xe("Do",(function(e,g){g[Qe]=ce(e.match(ye)[0])}));var $I=ie("Date",!0);function eC(e){var g=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?g:this.add(e-g,"d")}E("DDD",["DDDD",3],"DDDo","dayOfYear"),te("dayOfYear","DDD"),le("dayOfYear",4),He("DDD",Se),He("DDDD",he),xe(["DDD","DDDD"],(function(e,g,t){t._dayOfYear=ce(e)})),E("m",["mm",2],0,"minute"),te("minute","m"),le("minute",14),He("m",ye),He("mm",ye,Ze),xe(["m","mm"],Te);var gC=ie("Minutes",!1);E("s",["ss",2],0,"second"),te("second","s"),le("second",15),He("s",ye),He("ss",ye,Ze),xe(["s","ss"],je);var tC,nC,IC=ie("Seconds",!1);for(E("S",0,0,(function(){return~~(this.millisecond()/100)})),E(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),E(0,["SSS",3],0,"millisecond"),E(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),E(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),E(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),E(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),E(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),E(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),te("millisecond","ms"),le("millisecond",16),He("S",Se,be),He("SS",Se,Ze),He("SSS",Se,he),tC="SSSS";tC.length<=9;tC+="S")He(tC,Ve);function CC(e,g){g[Oe]=ce(1e3*("0."+e))}for(tC="S";tC.length<=9;tC+="S")xe(tC,CC);function lC(){return this._isUTC?"UTC":""}function aC(){return this._isUTC?"Coordinated Universal Time":""}nC=ie("Milliseconds",!1),E("z",0,0,"zoneAbbr"),E("zz",0,0,"zoneName");var oC=y.prototype;function rC(e){return jt(1e3*e)}function cC(){return jt.apply(null,arguments).parseZone()}function iC(e){return e}oC.add=Hn,oC.calendar=Mn,oC.clone=Un,oC.diff=Pn,oC.endOf=bI,oC.format=gI,oC.from=tI,oC.fromNow=nI,oC.to=II,oC.toNow=CI,oC.get=de,oC.invalidAt=vI,oC.isAfter=Dn,oC.isBefore=Qn,oC.isBetween=Ln,oC.isSame=Tn,oC.isSameOrAfter=jn,oC.isSameOrBefore=On,oC.isValid=fI,oC.lang=aI,oC.locale=lI,oC.localeData=oI,oC.max=Pt,oC.min=Ot,oC.parsingFlags=SI,oC.set=ue,oC.startOf=mI,oC.subtract=wn,oC.toArray=GI,oC.toObject=yI,oC.toDate=pI,oC.toISOString=$n,oC.inspect=eI,"undefined"!==typeof Symbol&&null!=Symbol.for&&(oC[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),oC.toJSON=BI,oC.toString=qn,oC.unix=hI,oC.valueOf=ZI,oC.creationData=WI,oC.eraName=XI,oC.eraNarrow=JI,oC.eraAbbr=YI,oC.eraYear=HI,oC.year=mg,oC.isLeapYear=bg,oC.weekYear=DI,oC.isoWeekYear=QI,oC.quarter=oC.quarters=qI,oC.month=cg,oC.daysInMonth=ig,oC.week=oC.weeks=Vg,oC.isoWeek=oC.isoWeeks=Rg,oC.weeksInYear=jI,oC.weeksInWeekYear=OI,oC.isoWeeksInYear=LI,oC.isoWeeksInISOWeekYear=TI,oC.date=$I,oC.day=oC.days=Dg,oC.weekday=Qg,oC.isoWeekday=Lg,oC.dayOfYear=eC,oC.hour=oC.hours=nt,oC.minute=oC.minutes=gC,oC.second=oC.seconds=IC,oC.millisecond=oC.milliseconds=nC,oC.utcOffset=un,oC.utc=bn,oC.local=Zn,oC.parseZone=hn,oC.hasAlignedHourOffset=pn,oC.isDST=Gn,oC.isLocal=Bn,oC.isUtcOffset=fn,oC.isUtc=Sn,oC.isUTC=Sn,oC.zoneAbbr=lC,oC.zoneName=aC,oC.dates=S("dates accessor is deprecated. Use date instead.",$I),oC.months=S("months accessor is deprecated. Use month instead",cg),oC.years=S("years accessor is deprecated. Use year instead",mg),oC.zone=S("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",mn),oC.isDSTShifted=S("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",yn);var sC=J.prototype;function AC(e,g,t,n){var I=bt(),C=d().set(n,g);return I[t](C,e)}function dC(e,g,t){if(c(e)&&(g=e,e=void 0),e=e||"",null!=g)return AC(e,g,t,"month");var n,I=[];for(n=0;n<12;n++)I[n]=AC(e,n,t,"month");return I}function uC(e,g,t,n){"boolean"===typeof e?(c(g)&&(t=g,g=void 0),g=g||""):(t=g=e,e=!1,c(g)&&(t=g,g=void 0),g=g||"");var I,C=bt(),l=e?C._week.dow:0,a=[];if(null!=t)return AC(g,(t+l)%7,n,"day");for(I=0;I<7;I++)a[I]=AC(g,(I+l)%7,n,"day");return a}function mC(e,g){return dC(e,g,"months")}function bC(e,g){return dC(e,g,"monthsShort")}function ZC(e,g,t){return uC(e,g,t,"weekdays")}function hC(e,g,t){return uC(e,g,t,"weekdaysShort")}function pC(e,g,t){return uC(e,g,t,"weekdaysMin")}sC.calendar=H,sC.longDateFormat=L,sC.invalidDate=j,sC.ordinal=_,sC.preparse=iC,sC.postformat=iC,sC.relativeTime=$,sC.pastFuture=ee,sC.set=k,sC.eras=VI,sC.erasParse=RI,sC.erasConvertYear=kI,sC.erasAbbrRegex=NI,sC.erasNameRegex=wI,sC.erasNarrowRegex=KI,sC.months=Cg,sC.monthsShort=lg,sC.monthsParse=og,sC.monthsRegex=Ag,sC.monthsShortRegex=sg,sC.week=fg,sC.firstDayOfYear=Wg,sC.firstDayOfWeek=vg,sC.weekdays=xg,sC.weekdaysMin=zg,sC.weekdaysShort=Eg,sC.weekdaysParse=Ug,sC.weekdaysRegex=Tg,sC.weekdaysShortRegex=jg,sC.weekdaysMinRegex=Og,sC.isPM=gt,sC.meridiem=It,dt("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var g=e%10;return e+(1===ce(e%100/10)?"th":1===g?"st":2===g?"nd":3===g?"rd":"th")}}),n.lang=S("moment.lang is deprecated. Use moment.locale instead.",dt),n.langData=S("moment.langData is deprecated. Use moment.localeData instead.",bt);var GC=Math.abs;function yC(){var e=this._data;return this._milliseconds=GC(this._milliseconds),this._days=GC(this._days),this._months=GC(this._months),e.milliseconds=GC(e.milliseconds),e.seconds=GC(e.seconds),e.minutes=GC(e.minutes),e.hours=GC(e.hours),e.months=GC(e.months),e.years=GC(e.years),this}function BC(e,g,t,n){var I=Vn(g,t);return e._milliseconds+=n*I._milliseconds,e._days+=n*I._days,e._months+=n*I._months,e._bubble()}function fC(e,g){return BC(this,e,g,1)}function SC(e,g){return BC(this,e,g,-1)}function vC(e){return e<0?Math.floor(e):Math.ceil(e)}function WC(){var e,g,t,n,I,C=this._milliseconds,l=this._days,a=this._months,o=this._data;return C>=0&&l>=0&&a>=0||C<=0&&l<=0&&a<=0||(C+=864e5*vC(RC(a)+l),l=0,a=0),o.milliseconds=C%1e3,e=re(C/1e3),o.seconds=e%60,g=re(e/60),o.minutes=g%60,t=re(g/60),o.hours=t%24,l+=re(t/24),a+=I=re(VC(l)),l-=vC(RC(I)),n=re(a/12),a%=12,o.days=l,o.months=a,o.years=n,this}function VC(e){return 4800*e/146097}function RC(e){return 146097*e/4800}function kC(e){if(!this.isValid())return NaN;var g,t,n=this._milliseconds;if("month"===(e=ne(e))||"quarter"===e||"year"===e)switch(g=this._days+n/864e5,t=this._months+VC(g),e){case"month":return t;case"quarter":return t/3;case"year":return t/12}else switch(g=this._days+Math.round(RC(this._months)),e){case"week":return g/7+n/6048e5;case"day":return g+n/864e5;case"hour":return 24*g+n/36e5;case"minute":return 1440*g+n/6e4;case"second":return 86400*g+n/1e3;case"millisecond":return Math.floor(864e5*g)+n;default:throw new Error("Unknown unit "+e)}}function XC(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*ce(this._months/12):NaN}function JC(e){return function(){return this.as(e)}}var YC=JC("ms"),HC=JC("s"),wC=JC("m"),NC=JC("h"),KC=JC("d"),FC=JC("w"),xC=JC("M"),EC=JC("Q"),zC=JC("y");function MC(){return Vn(this)}function UC(e){return e=ne(e),this.isValid()?this[e+"s"]():NaN}function DC(e){return function(){return this.isValid()?this._data[e]:NaN}}var QC=DC("milliseconds"),LC=DC("seconds"),TC=DC("minutes"),jC=DC("hours"),OC=DC("days"),PC=DC("months"),_C=DC("years");function qC(){return re(this.days()/7)}var $C=Math.round,el={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function gl(e,g,t,n,I){return I.relativeTime(g||1,!!t,e,n)}function tl(e,g,t,n){var I=Vn(e).abs(),C=$C(I.as("s")),l=$C(I.as("m")),a=$C(I.as("h")),o=$C(I.as("d")),r=$C(I.as("M")),c=$C(I.as("w")),i=$C(I.as("y")),s=C<=t.ss&&["s",C]||C<t.s&&["ss",C]||l<=1&&["m"]||l<t.m&&["mm",l]||a<=1&&["h"]||a<t.h&&["hh",a]||o<=1&&["d"]||o<t.d&&["dd",o];return null!=t.w&&(s=s||c<=1&&["w"]||c<t.w&&["ww",c]),(s=s||r<=1&&["M"]||r<t.M&&["MM",r]||i<=1&&["y"]||["yy",i])[2]=g,s[3]=+e>0,s[4]=n,gl.apply(null,s)}function nl(e){return void 0===e?$C:"function"===typeof e&&($C=e,!0)}function Il(e,g){return void 0!==el[e]&&(void 0===g?el[e]:(el[e]=g,"s"===e&&(el.ss=g-1),!0))}function Cl(e,g){if(!this.isValid())return this.localeData().invalidDate();var t,n,I=!1,C=el;return"object"===typeof e&&(g=e,e=!1),"boolean"===typeof e&&(I=e),"object"===typeof g&&(C=Object.assign({},el,g),null!=g.s&&null==g.ss&&(C.ss=g.s-1)),n=tl(this,!I,C,t=this.localeData()),I&&(n=t.pastFuture(+this,n)),t.postformat(n)}var ll=Math.abs;function al(e){return(e>0)-(e<0)||+e}function ol(){if(!this.isValid())return this.localeData().invalidDate();var e,g,t,n,I,C,l,a,o=ll(this._milliseconds)/1e3,r=ll(this._days),c=ll(this._months),i=this.asSeconds();return i?(e=re(o/60),g=re(e/60),o%=60,e%=60,t=re(c/12),c%=12,n=o?o.toFixed(3).replace(/\.?0+$/,""):"",I=i<0?"-":"",C=al(this._months)!==al(i)?"-":"",l=al(this._days)!==al(i)?"-":"",a=al(this._milliseconds)!==al(i)?"-":"",I+"P"+(t?C+t+"Y":"")+(c?C+c+"M":"")+(r?l+r+"D":"")+(g||e||o?"T":"")+(g?a+g+"H":"")+(e?a+e+"M":"")+(o?a+n+"S":"")):"P0D"}var rl=Cn.prototype;return rl.isValid=nn,rl.abs=yC,rl.add=fC,rl.subtract=SC,rl.as=kC,rl.asMilliseconds=YC,rl.asSeconds=HC,rl.asMinutes=wC,rl.asHours=NC,rl.asDays=KC,rl.asWeeks=FC,rl.asMonths=xC,rl.asQuarters=EC,rl.asYears=zC,rl.valueOf=XC,rl._bubble=WC,rl.clone=MC,rl.get=UC,rl.milliseconds=QC,rl.seconds=LC,rl.minutes=TC,rl.hours=jC,rl.days=OC,rl.weeks=qC,rl.months=PC,rl.years=_C,rl.humanize=Cl,rl.toISOString=ol,rl.toString=ol,rl.toJSON=ol,rl.locale=lI,rl.localeData=oI,rl.toIsoString=S("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",ol),rl.lang=aI,E("X",0,0,"unix"),E("x",0,0,"valueOf"),He("x",Re),He("X",Je),xe("X",(function(e,g,t){t._d=new Date(1e3*parseFloat(e))})),xe("x",(function(e,g,t){t._d=new Date(ce(e))})),n.version="2.29.4",I(jt),n.fn=oC,n.min=qt,n.max=$t,n.now=en,n.utc=d,n.unix=rC,n.months=mC,n.isDate=i,n.locale=dt,n.invalid=Z,n.duration=Vn,n.isMoment=B,n.weekdays=ZC,n.parseZone=cC,n.localeData=bt,n.isDuration=ln,n.monthsShort=bC,n.weekdaysMin=pC,n.defineLocale=ut,n.updateLocale=mt,n.locales=Zt,n.weekdaysShort=hC,n.normalizeUnits=ne,n.relativeTimeRounding=nl,n.relativeTimeThreshold=Il,n.calendarFormat=zn,n.prototype=oC,n.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},n}()},888:function(e,g,t){"use strict";var n=t(47);function I(){}function C(){}C.resetWarningCache=I,e.exports=function(){function e(e,g,t,I,C,l){if(l!==n){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function g(){return e}e.isRequired=e;var t={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:g,element:e,elementType:e,instanceOf:g,node:e,objectOf:g,oneOf:g,oneOfType:g,shape:g,exact:g,checkPropTypes:C,resetWarningCache:I};return t.PropTypes=t,t}},7:function(e,g,t){e.exports=t(888)()},47:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},463:function(e,g,t){"use strict";var n=t(791),I=t(296);function C(e){for(var g="https://reactjs.org/docs/error-decoder.html?invariant="+e,t=1;t<arguments.length;t++)g+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+e+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var l=new Set,a={};function o(e,g){r(e,g),r(e+"Capture",g)}function r(e,g){for(a[e]=g,e=0;e<g.length;e++)l.add(g[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),i=Object.prototype.hasOwnProperty,s=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,A={},d={};function u(e,g,t,n,I,C,l){this.acceptsBooleans=2===g||3===g||4===g,this.attributeName=n,this.attributeNamespace=I,this.mustUseProperty=t,this.propertyName=e,this.type=g,this.sanitizeURL=C,this.removeEmptyString=l}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new u(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var g=e[0];m[g]=new u(g,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new u(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new u(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new u(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new u(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new u(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new u(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new u(e,5,!1,e.toLowerCase(),null,!1,!1)}));var b=/[\-:]([a-z])/g;function Z(e){return e[1].toUpperCase()}function h(e,g,t,n){var I=m.hasOwnProperty(g)?m[g]:null;(null!==I?0!==I.type:n||!(2<g.length)||"o"!==g[0]&&"O"!==g[0]||"n"!==g[1]&&"N"!==g[1])&&(function(e,g,t,n){if(null===g||"undefined"===typeof g||function(e,g,t,n){if(null!==t&&0===t.type)return!1;switch(typeof g){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==t?!t.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,g,t,n))return!0;if(n)return!1;if(null!==t)switch(t.type){case 3:return!g;case 4:return!1===g;case 5:return isNaN(g);case 6:return isNaN(g)||1>g}return!1}(g,t,I,n)&&(t=null),n||null===I?function(e){return!!i.call(d,e)||!i.call(A,e)&&(s.test(e)?d[e]=!0:(A[e]=!0,!1))}(g)&&(null===t?e.removeAttribute(g):e.setAttribute(g,""+t)):I.mustUseProperty?e[I.propertyName]=null===t?3!==I.type&&"":t:(g=I.attributeName,n=I.attributeNamespace,null===t?e.removeAttribute(g):(t=3===(I=I.type)||4===I&&!0===t?"":""+t,n?e.setAttributeNS(n,g,t):e.setAttribute(g,t))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var g=e.replace(b,Z);m[g]=new u(g,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var g=e.replace(b,Z);m[g]=new u(g,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var g=e.replace(b,Z);m[g]=new u(g,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new u(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new u("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new u(e,1,!1,e.toLowerCase(),null,!0,!0)}));var p=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,G=Symbol.for("react.element"),y=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),v=Symbol.for("react.provider"),W=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),X=Symbol.for("react.memo"),J=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var Y=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var H=Symbol.iterator;function w(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=H&&e[H]||e["@@iterator"])?e:null}var N,K=Object.assign;function F(e){if(void 0===N)try{throw Error()}catch(t){var g=t.stack.trim().match(/\n( *(at )?)/);N=g&&g[1]||""}return"\n"+N+e}var x=!1;function E(e,g){if(!e||x)return"";x=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(g)if(g=function(){throw Error()},Object.defineProperty(g.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(g,[])}catch(r){var n=r}Reflect.construct(e,[],g)}else{try{g.call()}catch(r){n=r}e.call(g.prototype)}else{try{throw Error()}catch(r){n=r}e()}}catch(r){if(r&&n&&"string"===typeof r.stack){for(var I=r.stack.split("\n"),C=n.stack.split("\n"),l=I.length-1,a=C.length-1;1<=l&&0<=a&&I[l]!==C[a];)a--;for(;1<=l&&0<=a;l--,a--)if(I[l]!==C[a]){if(1!==l||1!==a)do{if(l--,0>--a||I[l]!==C[a]){var o="\n"+I[l].replace(" at new "," at ");return e.displayName&&o.includes("<anonymous>")&&(o=o.replace("<anonymous>",e.displayName)),o}}while(1<=l&&0<=a);break}}}finally{x=!1,Error.prepareStackTrace=t}return(e=e?e.displayName||e.name:"")?F(e):""}function z(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=E(e.type,!1);case 11:return e=E(e.type.render,!1);case 1:return e=E(e.type,!0);default:return""}}function M(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case B:return"Fragment";case y:return"Portal";case S:return"Profiler";case f:return"StrictMode";case R:return"Suspense";case k:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case W:return(e.displayName||"Context")+".Consumer";case v:return(e._context.displayName||"Context")+".Provider";case V:var g=e.render;return(e=e.displayName)||(e=""!==(e=g.displayName||g.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case X:return null!==(g=e.displayName||null)?g:M(e.type)||"Memo";case J:g=e._payload,e=e._init;try{return M(e(g))}catch(t){}}return null}function U(e){var g=e.type;switch(e.tag){case 24:return"Cache";case 9:return(g.displayName||"Context")+".Consumer";case 10:return(g._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=g.render).displayName||e.name||"",g.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return g;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return M(g);case 8:return g===f?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof g)return g.displayName||g.name||null;if("string"===typeof g)return g}return null}function D(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function Q(e){var g=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===g||"radio"===g)}function L(e){e._valueTracker||(e._valueTracker=function(e){var g=Q(e)?"checked":"value",t=Object.getOwnPropertyDescriptor(e.constructor.prototype,g),n=""+e[g];if(!e.hasOwnProperty(g)&&"undefined"!==typeof t&&"function"===typeof t.get&&"function"===typeof t.set){var I=t.get,C=t.set;return Object.defineProperty(e,g,{configurable:!0,get:function(){return I.call(this)},set:function(e){n=""+e,C.call(this,e)}}),Object.defineProperty(e,g,{enumerable:t.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[g]}}}}(e))}function T(e){if(!e)return!1;var g=e._valueTracker;if(!g)return!0;var t=g.getValue(),n="";return e&&(n=Q(e)?e.checked?"true":"false":e.value),(e=n)!==t&&(g.setValue(e),!0)}function j(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(g){return e.body}}function O(e,g){var t=g.checked;return K({},g,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=t?t:e._wrapperState.initialChecked})}function P(e,g){var t=null==g.defaultValue?"":g.defaultValue,n=null!=g.checked?g.checked:g.defaultChecked;t=D(null!=g.value?g.value:t),e._wrapperState={initialChecked:n,initialValue:t,controlled:"checkbox"===g.type||"radio"===g.type?null!=g.checked:null!=g.value}}function _(e,g){null!=(g=g.checked)&&h(e,"checked",g,!1)}function q(e,g){_(e,g);var t=D(g.value),n=g.type;if(null!=t)"number"===n?(0===t&&""===e.value||e.value!=t)&&(e.value=""+t):e.value!==""+t&&(e.value=""+t);else if("submit"===n||"reset"===n)return void e.removeAttribute("value");g.hasOwnProperty("value")?ee(e,g.type,t):g.hasOwnProperty("defaultValue")&&ee(e,g.type,D(g.defaultValue)),null==g.checked&&null!=g.defaultChecked&&(e.defaultChecked=!!g.defaultChecked)}function $(e,g,t){if(g.hasOwnProperty("value")||g.hasOwnProperty("defaultValue")){var n=g.type;if(!("submit"!==n&&"reset"!==n||void 0!==g.value&&null!==g.value))return;g=""+e._wrapperState.initialValue,t||g===e.value||(e.value=g),e.defaultValue=g}""!==(t=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==t&&(e.name=t)}function ee(e,g,t){"number"===g&&j(e.ownerDocument)===e||(null==t?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+t&&(e.defaultValue=""+t))}var ge=Array.isArray;function te(e,g,t,n){if(e=e.options,g){g={};for(var I=0;I<t.length;I++)g["$"+t[I]]=!0;for(t=0;t<e.length;t++)I=g.hasOwnProperty("$"+e[t].value),e[t].selected!==I&&(e[t].selected=I),I&&n&&(e[t].defaultSelected=!0)}else{for(t=""+D(t),g=null,I=0;I<e.length;I++){if(e[I].value===t)return e[I].selected=!0,void(n&&(e[I].defaultSelected=!0));null!==g||e[I].disabled||(g=e[I])}null!==g&&(g.selected=!0)}}function ne(e,g){if(null!=g.dangerouslySetInnerHTML)throw Error(C(91));return K({},g,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ie(e,g){var t=g.value;if(null==t){if(t=g.children,g=g.defaultValue,null!=t){if(null!=g)throw Error(C(92));if(ge(t)){if(1<t.length)throw Error(C(93));t=t[0]}g=t}null==g&&(g=""),t=g}e._wrapperState={initialValue:D(t)}}function Ce(e,g){var t=D(g.value),n=D(g.defaultValue);null!=t&&((t=""+t)!==e.value&&(e.value=t),null==g.defaultValue&&e.defaultValue!==t&&(e.defaultValue=t)),null!=n&&(e.defaultValue=""+n)}function le(e){var g=e.textContent;g===e._wrapperState.initialValue&&""!==g&&null!==g&&(e.value=g)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function oe(e,g){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(g):"http://www.w3.org/2000/svg"===e&&"foreignObject"===g?"http://www.w3.org/1999/xhtml":e}var re,ce,ie=(ce=function(e,g){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=g;else{for((re=re||document.createElement("div")).innerHTML="<svg>"+g.valueOf().toString()+"</svg>",g=re.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;g.firstChild;)e.appendChild(g.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,g,t,n){MSApp.execUnsafeLocalFunction((function(){return ce(e,g)}))}:ce);function se(e,g){if(g){var t=e.firstChild;if(t&&t===e.lastChild&&3===t.nodeType)return void(t.nodeValue=g)}e.textContent=g}var Ae={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},de=["Webkit","ms","Moz","O"];function ue(e,g,t){return null==g||"boolean"===typeof g||""===g?"":t||"number"!==typeof g||0===g||Ae.hasOwnProperty(e)&&Ae[e]?(""+g).trim():g+"px"}function me(e,g){for(var t in e=e.style,g)if(g.hasOwnProperty(t)){var n=0===t.indexOf("--"),I=ue(t,g[t],n);"float"===t&&(t="cssFloat"),n?e.setProperty(t,I):e[t]=I}}Object.keys(Ae).forEach((function(e){de.forEach((function(g){g=g+e.charAt(0).toUpperCase()+e.substring(1),Ae[g]=Ae[e]}))}));var be=K({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ze(e,g){if(g){if(be[e]&&(null!=g.children||null!=g.dangerouslySetInnerHTML))throw Error(C(137,e));if(null!=g.dangerouslySetInnerHTML){if(null!=g.children)throw Error(C(60));if("object"!==typeof g.dangerouslySetInnerHTML||!("__html"in g.dangerouslySetInnerHTML))throw Error(C(61))}if(null!=g.style&&"object"!==typeof g.style)throw Error(C(62))}}function he(e,g){if(-1===e.indexOf("-"))return"string"===typeof g.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pe=null;function Ge(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var ye=null,Be=null,fe=null;function Se(e){if(e=hI(e)){if("function"!==typeof ye)throw Error(C(280));var g=e.stateNode;g&&(g=GI(g),ye(e.stateNode,e.type,g))}}function ve(e){Be?fe?fe.push(e):fe=[e]:Be=e}function We(){if(Be){var e=Be,g=fe;if(fe=Be=null,Se(e),g)for(e=0;e<g.length;e++)Se(g[e])}}function Ve(e,g){return e(g)}function Re(){}var ke=!1;function Xe(e,g,t){if(ke)return e(g,t);ke=!0;try{return Ve(e,g,t)}finally{ke=!1,(null!==Be||null!==fe)&&(Re(),We())}}function Je(e,g){var t=e.stateNode;if(null===t)return null;var n=GI(t);if(null===n)return null;t=n[g];e:switch(g){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(t&&"function"!==typeof t)throw Error(C(231,g,typeof t));return t}var Ye=!1;if(c)try{var He={};Object.defineProperty(He,"passive",{get:function(){Ye=!0}}),window.addEventListener("test",He,He),window.removeEventListener("test",He,He)}catch(ce){Ye=!1}function we(e,g,t,n,I,C,l,a,o){var r=Array.prototype.slice.call(arguments,3);try{g.apply(t,r)}catch(c){this.onError(c)}}var Ne=!1,Ke=null,Fe=!1,xe=null,Ee={onError:function(e){Ne=!0,Ke=e}};function ze(e,g,t,n,I,C,l,a,o){Ne=!1,Ke=null,we.apply(Ee,arguments)}function Me(e){var g=e,t=e;if(e.alternate)for(;g.return;)g=g.return;else{e=g;do{0!==(4098&(g=e).flags)&&(t=g.return),e=g.return}while(e)}return 3===g.tag?t:null}function Ue(e){if(13===e.tag){var g=e.memoizedState;if(null===g&&(null!==(e=e.alternate)&&(g=e.memoizedState)),null!==g)return g.dehydrated}return null}function De(e){if(Me(e)!==e)throw Error(C(188))}function Qe(e){return null!==(e=function(e){var g=e.alternate;if(!g){if(null===(g=Me(e)))throw Error(C(188));return g!==e?null:e}for(var t=e,n=g;;){var I=t.return;if(null===I)break;var l=I.alternate;if(null===l){if(null!==(n=I.return)){t=n;continue}break}if(I.child===l.child){for(l=I.child;l;){if(l===t)return De(I),e;if(l===n)return De(I),g;l=l.sibling}throw Error(C(188))}if(t.return!==n.return)t=I,n=l;else{for(var a=!1,o=I.child;o;){if(o===t){a=!0,t=I,n=l;break}if(o===n){a=!0,n=I,t=l;break}o=o.sibling}if(!a){for(o=l.child;o;){if(o===t){a=!0,t=l,n=I;break}if(o===n){a=!0,n=l,t=I;break}o=o.sibling}if(!a)throw Error(C(189))}}if(t.alternate!==n)throw Error(C(190))}if(3!==t.tag)throw Error(C(188));return t.stateNode.current===t?e:g}(e))?Le(e):null}function Le(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var g=Le(e);if(null!==g)return g;e=e.sibling}return null}var Te=I.unstable_scheduleCallback,je=I.unstable_cancelCallback,Oe=I.unstable_shouldYield,Pe=I.unstable_requestPaint,_e=I.unstable_now,qe=I.unstable_getCurrentPriorityLevel,$e=I.unstable_ImmediatePriority,eg=I.unstable_UserBlockingPriority,gg=I.unstable_NormalPriority,tg=I.unstable_LowPriority,ng=I.unstable_IdlePriority,Ig=null,Cg=null;var lg=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ag(e)/og|0)|0},ag=Math.log,og=Math.LN2;var rg=64,cg=4194304;function ig(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function sg(e,g){var t=e.pendingLanes;if(0===t)return 0;var n=0,I=e.suspendedLanes,C=e.pingedLanes,l=268435455&t;if(0!==l){var a=l&~I;0!==a?n=ig(a):0!==(C&=l)&&(n=ig(C))}else 0!==(l=t&~I)?n=ig(l):0!==C&&(n=ig(C));if(0===n)return 0;if(0!==g&&g!==n&&0===(g&I)&&((I=n&-n)>=(C=g&-g)||16===I&&0!==(4194240&C)))return g;if(0!==(4&n)&&(n|=16&t),0!==(g=e.entangledLanes))for(e=e.entanglements,g&=n;0<g;)I=1<<(t=31-lg(g)),n|=e[t],g&=~I;return n}function Ag(e,g){switch(e){case 1:case 2:case 4:return g+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g+5e3;default:return-1}}function dg(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function ug(){var e=rg;return 0===(4194240&(rg<<=1))&&(rg=64),e}function mg(e){for(var g=[],t=0;31>t;t++)g.push(e);return g}function bg(e,g,t){e.pendingLanes|=g,536870912!==g&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[g=31-lg(g)]=t}function Zg(e,g){var t=e.entangledLanes|=g;for(e=e.entanglements;t;){var n=31-lg(t),I=1<<n;I&g|e[n]&g&&(e[n]|=g),t&=~I}}var hg=0;function pg(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var Gg,yg,Bg,fg,Sg,vg=!1,Wg=[],Vg=null,Rg=null,kg=null,Xg=new Map,Jg=new Map,Yg=[],Hg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function wg(e,g){switch(e){case"focusin":case"focusout":Vg=null;break;case"dragenter":case"dragleave":Rg=null;break;case"mouseover":case"mouseout":kg=null;break;case"pointerover":case"pointerout":Xg.delete(g.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jg.delete(g.pointerId)}}function Ng(e,g,t,n,I,C){return null===e||e.nativeEvent!==C?(e={blockedOn:g,domEventName:t,eventSystemFlags:n,nativeEvent:C,targetContainers:[I]},null!==g&&(null!==(g=hI(g))&&yg(g)),e):(e.eventSystemFlags|=n,g=e.targetContainers,null!==I&&-1===g.indexOf(I)&&g.push(I),e)}function Kg(e){var g=ZI(e.target);if(null!==g){var t=Me(g);if(null!==t)if(13===(g=t.tag)){if(null!==(g=Ue(t)))return e.blockedOn=g,void Sg(e.priority,(function(){Bg(t)}))}else if(3===g&&t.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===t.tag?t.stateNode.containerInfo:null)}e.blockedOn=null}function Fg(e){if(null!==e.blockedOn)return!1;for(var g=e.targetContainers;0<g.length;){var t=Og(e.domEventName,e.eventSystemFlags,g[0],e.nativeEvent);if(null!==t)return null!==(g=hI(t))&&yg(g),e.blockedOn=t,!1;var n=new(t=e.nativeEvent).constructor(t.type,t);pe=n,t.target.dispatchEvent(n),pe=null,g.shift()}return!0}function xg(e,g,t){Fg(e)&&t.delete(g)}function Eg(){vg=!1,null!==Vg&&Fg(Vg)&&(Vg=null),null!==Rg&&Fg(Rg)&&(Rg=null),null!==kg&&Fg(kg)&&(kg=null),Xg.forEach(xg),Jg.forEach(xg)}function zg(e,g){e.blockedOn===g&&(e.blockedOn=null,vg||(vg=!0,I.unstable_scheduleCallback(I.unstable_NormalPriority,Eg)))}function Mg(e){function g(g){return zg(g,e)}if(0<Wg.length){zg(Wg[0],e);for(var t=1;t<Wg.length;t++){var n=Wg[t];n.blockedOn===e&&(n.blockedOn=null)}}for(null!==Vg&&zg(Vg,e),null!==Rg&&zg(Rg,e),null!==kg&&zg(kg,e),Xg.forEach(g),Jg.forEach(g),t=0;t<Yg.length;t++)(n=Yg[t]).blockedOn===e&&(n.blockedOn=null);for(;0<Yg.length&&null===(t=Yg[0]).blockedOn;)Kg(t),null===t.blockedOn&&Yg.shift()}var Ug=p.ReactCurrentBatchConfig,Dg=!0;function Qg(e,g,t,n){var I=hg,C=Ug.transition;Ug.transition=null;try{hg=1,Tg(e,g,t,n)}finally{hg=I,Ug.transition=C}}function Lg(e,g,t,n){var I=hg,C=Ug.transition;Ug.transition=null;try{hg=4,Tg(e,g,t,n)}finally{hg=I,Ug.transition=C}}function Tg(e,g,t,n){if(Dg){var I=Og(e,g,t,n);if(null===I)Dn(e,g,n,jg,t),wg(e,n);else if(function(e,g,t,n,I){switch(g){case"focusin":return Vg=Ng(Vg,e,g,t,n,I),!0;case"dragenter":return Rg=Ng(Rg,e,g,t,n,I),!0;case"mouseover":return kg=Ng(kg,e,g,t,n,I),!0;case"pointerover":var C=I.pointerId;return Xg.set(C,Ng(Xg.get(C)||null,e,g,t,n,I)),!0;case"gotpointercapture":return C=I.pointerId,Jg.set(C,Ng(Jg.get(C)||null,e,g,t,n,I)),!0}return!1}(I,e,g,t,n))n.stopPropagation();else if(wg(e,n),4&g&&-1<Hg.indexOf(e)){for(;null!==I;){var C=hI(I);if(null!==C&&Gg(C),null===(C=Og(e,g,t,n))&&Dn(e,g,n,jg,t),C===I)break;I=C}null!==I&&n.stopPropagation()}else Dn(e,g,n,null,t)}}var jg=null;function Og(e,g,t,n){if(jg=null,null!==(e=ZI(e=Ge(n))))if(null===(g=Me(e)))e=null;else if(13===(t=g.tag)){if(null!==(e=Ue(g)))return e;e=null}else if(3===t){if(g.stateNode.current.memoizedState.isDehydrated)return 3===g.tag?g.stateNode.containerInfo:null;e=null}else g!==e&&(e=null);return jg=e,null}function Pg(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(qe()){case $e:return 1;case eg:return 4;case gg:case tg:return 16;case ng:return 536870912;default:return 16}default:return 16}}var _g=null,qg=null,$g=null;function et(){if($g)return $g;var e,g,t=qg,n=t.length,I="value"in _g?_g.value:_g.textContent,C=I.length;for(e=0;e<n&&t[e]===I[e];e++);var l=n-e;for(g=1;g<=l&&t[n-g]===I[C-g];g++);return $g=I.slice(e,1<g?1-g:void 0)}function gt(e){var g=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===g&&(e=13):e=g,10===e&&(e=13),32<=e||13===e?e:0}function tt(){return!0}function nt(){return!1}function It(e){function g(g,t,n,I,C){for(var l in this._reactName=g,this._targetInst=n,this.type=t,this.nativeEvent=I,this.target=C,this.currentTarget=null,e)e.hasOwnProperty(l)&&(g=e[l],this[l]=g?g(I):I[l]);return this.isDefaultPrevented=(null!=I.defaultPrevented?I.defaultPrevented:!1===I.returnValue)?tt:nt,this.isPropagationStopped=nt,this}return K(g.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=tt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=tt)},persist:function(){},isPersistent:tt}),g}var Ct,lt,at,ot={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rt=It(ot),ct=K({},ot,{view:0,detail:0}),it=It(ct),st=K({},ct,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ft,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==at&&(at&&"mousemove"===e.type?(Ct=e.screenX-at.screenX,lt=e.screenY-at.screenY):lt=Ct=0,at=e),Ct)},movementY:function(e){return"movementY"in e?e.movementY:lt}}),At=It(st),dt=It(K({},st,{dataTransfer:0})),ut=It(K({},ct,{relatedTarget:0})),mt=It(K({},ot,{animationName:0,elapsedTime:0,pseudoElement:0})),bt=K({},ot,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Zt=It(bt),ht=It(K({},ot,{data:0})),pt={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Bt(e){var g=this.nativeEvent;return g.getModifierState?g.getModifierState(e):!!(e=yt[e])&&!!g[e]}function ft(){return Bt}var St=K({},ct,{key:function(e){if(e.key){var g=pt[e.key]||e.key;if("Unidentified"!==g)return g}return"keypress"===e.type?13===(e=gt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Gt[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ft,charCode:function(e){return"keypress"===e.type?gt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?gt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),vt=It(St),Wt=It(K({},st,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Vt=It(K({},ct,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ft})),Rt=It(K({},ot,{propertyName:0,elapsedTime:0,pseudoElement:0})),kt=K({},st,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Xt=It(kt),Jt=[9,13,27,32],Yt=c&&"CompositionEvent"in window,Ht=null;c&&"documentMode"in document&&(Ht=document.documentMode);var wt=c&&"TextEvent"in window&&!Ht,Nt=c&&(!Yt||Ht&&8<Ht&&11>=Ht),Kt=String.fromCharCode(32),Ft=!1;function xt(e,g){switch(e){case"keyup":return-1!==Jt.indexOf(g.keyCode);case"keydown":return 229!==g.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Et(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zt=!1;var Mt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ut(e){var g=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===g?!!Mt[e.type]:"textarea"===g}function Dt(e,g,t,n){ve(n),0<(g=Ln(g,"onChange")).length&&(t=new rt("onChange","change",null,t,n),e.push({event:t,listeners:g}))}var Qt=null,Lt=null;function Tt(e){Fn(e,0)}function jt(e){if(T(pI(e)))return e}function Ot(e,g){if("change"===e)return g}var Pt=!1;if(c){var _t;if(c){var qt="oninput"in document;if(!qt){var $t=document.createElement("div");$t.setAttribute("oninput","return;"),qt="function"===typeof $t.oninput}_t=qt}else _t=!1;Pt=_t&&(!document.documentMode||9<document.documentMode)}function en(){Qt&&(Qt.detachEvent("onpropertychange",gn),Lt=Qt=null)}function gn(e){if("value"===e.propertyName&&jt(Lt)){var g=[];Dt(g,Lt,e,Ge(e)),Xe(Tt,g)}}function tn(e,g,t){"focusin"===e?(en(),Lt=t,(Qt=g).attachEvent("onpropertychange",gn)):"focusout"===e&&en()}function nn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return jt(Lt)}function In(e,g){if("click"===e)return jt(g)}function Cn(e,g){if("input"===e||"change"===e)return jt(g)}var ln="function"===typeof Object.is?Object.is:function(e,g){return e===g&&(0!==e||1/e===1/g)||e!==e&&g!==g};function an(e,g){if(ln(e,g))return!0;if("object"!==typeof e||null===e||"object"!==typeof g||null===g)return!1;var t=Object.keys(e),n=Object.keys(g);if(t.length!==n.length)return!1;for(n=0;n<t.length;n++){var I=t[n];if(!i.call(g,I)||!ln(e[I],g[I]))return!1}return!0}function on(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function rn(e,g){var t,n=on(e);for(e=0;n;){if(3===n.nodeType){if(t=e+n.textContent.length,e<=g&&t>=g)return{node:n,offset:g-e};e=t}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=on(n)}}function cn(e,g){return!(!e||!g)&&(e===g||(!e||3!==e.nodeType)&&(g&&3===g.nodeType?cn(e,g.parentNode):"contains"in e?e.contains(g):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(g))))}function sn(){for(var e=window,g=j();g instanceof e.HTMLIFrameElement;){try{var t="string"===typeof g.contentWindow.location.href}catch(n){t=!1}if(!t)break;g=j((e=g.contentWindow).document)}return g}function An(e){var g=e&&e.nodeName&&e.nodeName.toLowerCase();return g&&("input"===g&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===g||"true"===e.contentEditable)}function dn(e){var g=sn(),t=e.focusedElem,n=e.selectionRange;if(g!==t&&t&&t.ownerDocument&&cn(t.ownerDocument.documentElement,t)){if(null!==n&&An(t))if(g=n.start,void 0===(e=n.end)&&(e=g),"selectionStart"in t)t.selectionStart=g,t.selectionEnd=Math.min(e,t.value.length);else if((e=(g=t.ownerDocument||document)&&g.defaultView||window).getSelection){e=e.getSelection();var I=t.textContent.length,C=Math.min(n.start,I);n=void 0===n.end?C:Math.min(n.end,I),!e.extend&&C>n&&(I=n,n=C,C=I),I=rn(t,C);var l=rn(t,n);I&&l&&(1!==e.rangeCount||e.anchorNode!==I.node||e.anchorOffset!==I.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&((g=g.createRange()).setStart(I.node,I.offset),e.removeAllRanges(),C>n?(e.addRange(g),e.extend(l.node,l.offset)):(g.setEnd(l.node,l.offset),e.addRange(g)))}for(g=[],e=t;e=e.parentNode;)1===e.nodeType&&g.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof t.focus&&t.focus(),t=0;t<g.length;t++)(e=g[t]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var un=c&&"documentMode"in document&&11>=document.documentMode,mn=null,bn=null,Zn=null,hn=!1;function pn(e,g,t){var n=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;hn||null==mn||mn!==j(n)||("selectionStart"in(n=mn)&&An(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},Zn&&an(Zn,n)||(Zn=n,0<(n=Ln(bn,"onSelect")).length&&(g=new rt("onSelect","select",null,g,t),e.push({event:g,listeners:n}),g.target=mn)))}function Gn(e,g){var t={};return t[e.toLowerCase()]=g.toLowerCase(),t["Webkit"+e]="webkit"+g,t["Moz"+e]="moz"+g,t}var yn={animationend:Gn("Animation","AnimationEnd"),animationiteration:Gn("Animation","AnimationIteration"),animationstart:Gn("Animation","AnimationStart"),transitionend:Gn("Transition","TransitionEnd")},Bn={},fn={};function Sn(e){if(Bn[e])return Bn[e];if(!yn[e])return e;var g,t=yn[e];for(g in t)if(t.hasOwnProperty(g)&&g in fn)return Bn[e]=t[g];return e}c&&(fn=document.createElement("div").style,"AnimationEvent"in window||(delete yn.animationend.animation,delete yn.animationiteration.animation,delete yn.animationstart.animation),"TransitionEvent"in window||delete yn.transitionend.transition);var vn=Sn("animationend"),Wn=Sn("animationiteration"),Vn=Sn("animationstart"),Rn=Sn("transitionend"),kn=new Map,Xn="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Jn(e,g){kn.set(e,g),o(g,[e])}for(var Yn=0;Yn<Xn.length;Yn++){var Hn=Xn[Yn];Jn(Hn.toLowerCase(),"on"+(Hn[0].toUpperCase()+Hn.slice(1)))}Jn(vn,"onAnimationEnd"),Jn(Wn,"onAnimationIteration"),Jn(Vn,"onAnimationStart"),Jn("dblclick","onDoubleClick"),Jn("focusin","onFocus"),Jn("focusout","onBlur"),Jn(Rn,"onTransitionEnd"),r("onMouseEnter",["mouseout","mouseover"]),r("onMouseLeave",["mouseout","mouseover"]),r("onPointerEnter",["pointerout","pointerover"]),r("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Nn=new Set("cancel close invalid load scroll toggle".split(" ").concat(wn));function Kn(e,g,t){var n=e.type||"unknown-event";e.currentTarget=t,function(e,g,t,n,I,l,a,o,r){if(ze.apply(this,arguments),Ne){if(!Ne)throw Error(C(198));var c=Ke;Ne=!1,Ke=null,Fe||(Fe=!0,xe=c)}}(n,g,void 0,e),e.currentTarget=null}function Fn(e,g){g=0!==(4&g);for(var t=0;t<e.length;t++){var n=e[t],I=n.event;n=n.listeners;e:{var C=void 0;if(g)for(var l=n.length-1;0<=l;l--){var a=n[l],o=a.instance,r=a.currentTarget;if(a=a.listener,o!==C&&I.isPropagationStopped())break e;Kn(I,a,r),C=o}else for(l=0;l<n.length;l++){if(o=(a=n[l]).instance,r=a.currentTarget,a=a.listener,o!==C&&I.isPropagationStopped())break e;Kn(I,a,r),C=o}}}if(Fe)throw e=xe,Fe=!1,xe=null,e}function xn(e,g){var t=g[uI];void 0===t&&(t=g[uI]=new Set);var n=e+"__bubble";t.has(n)||(Un(g,e,2,!1),t.add(n))}function En(e,g,t){var n=0;g&&(n|=4),Un(t,e,n,g)}var zn="_reactListening"+Math.random().toString(36).slice(2);function Mn(e){if(!e[zn]){e[zn]=!0,l.forEach((function(g){"selectionchange"!==g&&(Nn.has(g)||En(g,!1,e),En(g,!0,e))}));var g=9===e.nodeType?e:e.ownerDocument;null===g||g[zn]||(g[zn]=!0,En("selectionchange",!1,g))}}function Un(e,g,t,n){switch(Pg(g)){case 1:var I=Qg;break;case 4:I=Lg;break;default:I=Tg}t=I.bind(null,g,t,e),I=void 0,!Ye||"touchstart"!==g&&"touchmove"!==g&&"wheel"!==g||(I=!0),n?void 0!==I?e.addEventListener(g,t,{capture:!0,passive:I}):e.addEventListener(g,t,!0):void 0!==I?e.addEventListener(g,t,{passive:I}):e.addEventListener(g,t,!1)}function Dn(e,g,t,n,I){var C=n;if(0===(1&g)&&0===(2&g)&&null!==n)e:for(;;){if(null===n)return;var l=n.tag;if(3===l||4===l){var a=n.stateNode.containerInfo;if(a===I||8===a.nodeType&&a.parentNode===I)break;if(4===l)for(l=n.return;null!==l;){var o=l.tag;if((3===o||4===o)&&((o=l.stateNode.containerInfo)===I||8===o.nodeType&&o.parentNode===I))return;l=l.return}for(;null!==a;){if(null===(l=ZI(a)))return;if(5===(o=l.tag)||6===o){n=C=l;continue e}a=a.parentNode}}n=n.return}Xe((function(){var n=C,I=Ge(t),l=[];e:{var a=kn.get(e);if(void 0!==a){var o=rt,r=e;switch(e){case"keypress":if(0===gt(t))break e;case"keydown":case"keyup":o=vt;break;case"focusin":r="focus",o=ut;break;case"focusout":r="blur",o=ut;break;case"beforeblur":case"afterblur":o=ut;break;case"click":if(2===t.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":o=At;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":o=dt;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":o=Vt;break;case vn:case Wn:case Vn:o=mt;break;case Rn:o=Rt;break;case"scroll":o=it;break;case"wheel":o=Xt;break;case"copy":case"cut":case"paste":o=Zt;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":o=Wt}var c=0!==(4&g),i=!c&&"scroll"===e,s=c?null!==a?a+"Capture":null:a;c=[];for(var A,d=n;null!==d;){var u=(A=d).stateNode;if(5===A.tag&&null!==u&&(A=u,null!==s&&(null!=(u=Je(d,s))&&c.push(Qn(d,u,A)))),i)break;d=d.return}0<c.length&&(a=new o(a,r,null,t,I),l.push({event:a,listeners:c}))}}if(0===(7&g)){if(o="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||t===pe||!(r=t.relatedTarget||t.fromElement)||!ZI(r)&&!r[dI])&&(o||a)&&(a=I.window===I?I:(a=I.ownerDocument)?a.defaultView||a.parentWindow:window,o?(o=n,null!==(r=(r=t.relatedTarget||t.toElement)?ZI(r):null)&&(r!==(i=Me(r))||5!==r.tag&&6!==r.tag)&&(r=null)):(o=null,r=n),o!==r)){if(c=At,u="onMouseLeave",s="onMouseEnter",d="mouse","pointerout"!==e&&"pointerover"!==e||(c=Wt,u="onPointerLeave",s="onPointerEnter",d="pointer"),i=null==o?a:pI(o),A=null==r?a:pI(r),(a=new c(u,d+"leave",o,t,I)).target=i,a.relatedTarget=A,u=null,ZI(I)===n&&((c=new c(s,d+"enter",r,t,I)).target=A,c.relatedTarget=i,u=c),i=u,o&&r)e:{for(s=r,d=0,A=c=o;A;A=Tn(A))d++;for(A=0,u=s;u;u=Tn(u))A++;for(;0<d-A;)c=Tn(c),d--;for(;0<A-d;)s=Tn(s),A--;for(;d--;){if(c===s||null!==s&&c===s.alternate)break e;c=Tn(c),s=Tn(s)}c=null}else c=null;null!==o&&jn(l,a,o,c,!1),null!==r&&null!==i&&jn(l,i,r,c,!0)}if("select"===(o=(a=n?pI(n):window).nodeName&&a.nodeName.toLowerCase())||"input"===o&&"file"===a.type)var m=Ot;else if(Ut(a))if(Pt)m=Cn;else{m=nn;var b=tn}else(o=a.nodeName)&&"input"===o.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(m=In);switch(m&&(m=m(e,n))?Dt(l,m,t,I):(b&&b(e,a,n),"focusout"===e&&(b=a._wrapperState)&&b.controlled&&"number"===a.type&&ee(a,"number",a.value)),b=n?pI(n):window,e){case"focusin":(Ut(b)||"true"===b.contentEditable)&&(mn=b,bn=n,Zn=null);break;case"focusout":Zn=bn=mn=null;break;case"mousedown":hn=!0;break;case"contextmenu":case"mouseup":case"dragend":hn=!1,pn(l,t,I);break;case"selectionchange":if(un)break;case"keydown":case"keyup":pn(l,t,I)}var Z;if(Yt)e:{switch(e){case"compositionstart":var h="onCompositionStart";break e;case"compositionend":h="onCompositionEnd";break e;case"compositionupdate":h="onCompositionUpdate";break e}h=void 0}else zt?xt(e,t)&&(h="onCompositionEnd"):"keydown"===e&&229===t.keyCode&&(h="onCompositionStart");h&&(Nt&&"ko"!==t.locale&&(zt||"onCompositionStart"!==h?"onCompositionEnd"===h&&zt&&(Z=et()):(qg="value"in(_g=I)?_g.value:_g.textContent,zt=!0)),0<(b=Ln(n,h)).length&&(h=new ht(h,e,null,t,I),l.push({event:h,listeners:b}),Z?h.data=Z:null!==(Z=Et(t))&&(h.data=Z))),(Z=wt?function(e,g){switch(e){case"compositionend":return Et(g);case"keypress":return 32!==g.which?null:(Ft=!0,Kt);case"textInput":return(e=g.data)===Kt&&Ft?null:e;default:return null}}(e,t):function(e,g){if(zt)return"compositionend"===e||!Yt&&xt(e,g)?(e=et(),$g=qg=_g=null,zt=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(g.ctrlKey||g.altKey||g.metaKey)||g.ctrlKey&&g.altKey){if(g.char&&1<g.char.length)return g.char;if(g.which)return String.fromCharCode(g.which)}return null;case"compositionend":return Nt&&"ko"!==g.locale?null:g.data}}(e,t))&&(0<(n=Ln(n,"onBeforeInput")).length&&(I=new ht("onBeforeInput","beforeinput",null,t,I),l.push({event:I,listeners:n}),I.data=Z))}Fn(l,g)}))}function Qn(e,g,t){return{instance:e,listener:g,currentTarget:t}}function Ln(e,g){for(var t=g+"Capture",n=[];null!==e;){var I=e,C=I.stateNode;5===I.tag&&null!==C&&(I=C,null!=(C=Je(e,t))&&n.unshift(Qn(e,C,I)),null!=(C=Je(e,g))&&n.push(Qn(e,C,I))),e=e.return}return n}function Tn(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function jn(e,g,t,n,I){for(var C=g._reactName,l=[];null!==t&&t!==n;){var a=t,o=a.alternate,r=a.stateNode;if(null!==o&&o===n)break;5===a.tag&&null!==r&&(a=r,I?null!=(o=Je(t,C))&&l.unshift(Qn(t,o,a)):I||null!=(o=Je(t,C))&&l.push(Qn(t,o,a))),t=t.return}0!==l.length&&e.push({event:g,listeners:l})}var On=/\r\n?/g,Pn=/\u0000|\uFFFD/g;function _n(e){return("string"===typeof e?e:""+e).replace(On,"\n").replace(Pn,"")}function qn(e,g,t){if(g=_n(g),_n(e)!==g&&t)throw Error(C(425))}function $n(){}var eI=null,gI=null;function tI(e,g){return"textarea"===e||"noscript"===e||"string"===typeof g.children||"number"===typeof g.children||"object"===typeof g.dangerouslySetInnerHTML&&null!==g.dangerouslySetInnerHTML&&null!=g.dangerouslySetInnerHTML.__html}var nI="function"===typeof setTimeout?setTimeout:void 0,II="function"===typeof clearTimeout?clearTimeout:void 0,CI="function"===typeof Promise?Promise:void 0,lI="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof CI?function(e){return CI.resolve(null).then(e).catch(aI)}:nI;function aI(e){setTimeout((function(){throw e}))}function oI(e,g){var t=g,n=0;do{var I=t.nextSibling;if(e.removeChild(t),I&&8===I.nodeType)if("/$"===(t=I.data)){if(0===n)return e.removeChild(I),void Mg(g);n--}else"$"!==t&&"$?"!==t&&"$!"!==t||n++;t=I}while(t);Mg(g)}function rI(e){for(;null!=e;e=e.nextSibling){var g=e.nodeType;if(1===g||3===g)break;if(8===g){if("$"===(g=e.data)||"$!"===g||"$?"===g)break;if("/$"===g)return null}}return e}function cI(e){e=e.previousSibling;for(var g=0;e;){if(8===e.nodeType){var t=e.data;if("$"===t||"$!"===t||"$?"===t){if(0===g)return e;g--}else"/$"===t&&g++}e=e.previousSibling}return null}var iI=Math.random().toString(36).slice(2),sI="__reactFiber$"+iI,AI="__reactProps$"+iI,dI="__reactContainer$"+iI,uI="__reactEvents$"+iI,mI="__reactListeners$"+iI,bI="__reactHandles$"+iI;function ZI(e){var g=e[sI];if(g)return g;for(var t=e.parentNode;t;){if(g=t[dI]||t[sI]){if(t=g.alternate,null!==g.child||null!==t&&null!==t.child)for(e=cI(e);null!==e;){if(t=e[sI])return t;e=cI(e)}return g}t=(e=t).parentNode}return null}function hI(e){return!(e=e[sI]||e[dI])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function pI(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(C(33))}function GI(e){return e[AI]||null}var yI=[],BI=-1;function fI(e){return{current:e}}function SI(e){0>BI||(e.current=yI[BI],yI[BI]=null,BI--)}function vI(e,g){BI++,yI[BI]=e.current,e.current=g}var WI={},VI=fI(WI),RI=fI(!1),kI=WI;function XI(e,g){var t=e.type.contextTypes;if(!t)return WI;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===g)return n.__reactInternalMemoizedMaskedChildContext;var I,C={};for(I in t)C[I]=g[I];return n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=g,e.__reactInternalMemoizedMaskedChildContext=C),C}function JI(e){return null!==(e=e.childContextTypes)&&void 0!==e}function YI(){SI(RI),SI(VI)}function HI(e,g,t){if(VI.current!==WI)throw Error(C(168));vI(VI,g),vI(RI,t)}function wI(e,g,t){var n=e.stateNode;if(g=g.childContextTypes,"function"!==typeof n.getChildContext)return t;for(var I in n=n.getChildContext())if(!(I in g))throw Error(C(108,U(e)||"Unknown",I));return K({},t,n)}function NI(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||WI,kI=VI.current,vI(VI,e),vI(RI,RI.current),!0}function KI(e,g,t){var n=e.stateNode;if(!n)throw Error(C(169));t?(e=wI(e,g,kI),n.__reactInternalMemoizedMergedChildContext=e,SI(RI),SI(VI),vI(VI,e)):SI(RI),vI(RI,t)}var FI=null,xI=!1,EI=!1;function zI(e){null===FI?FI=[e]:FI.push(e)}function MI(){if(!EI&&null!==FI){EI=!0;var e=0,g=hg;try{var t=FI;for(hg=1;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}FI=null,xI=!1}catch(I){throw null!==FI&&(FI=FI.slice(e+1)),Te($e,MI),I}finally{hg=g,EI=!1}}return null}var UI=[],DI=0,QI=null,LI=0,TI=[],jI=0,OI=null,PI=1,_I="";function qI(e,g){UI[DI++]=LI,UI[DI++]=QI,QI=e,LI=g}function $I(e,g,t){TI[jI++]=PI,TI[jI++]=_I,TI[jI++]=OI,OI=e;var n=PI;e=_I;var I=32-lg(n)-1;n&=~(1<<I),t+=1;var C=32-lg(g)+I;if(30<C){var l=I-I%5;C=(n&(1<<l)-1).toString(32),n>>=l,I-=l,PI=1<<32-lg(g)+I|t<<I|n,_I=C+e}else PI=1<<C|t<<I|n,_I=e}function eC(e){null!==e.return&&(qI(e,1),$I(e,1,0))}function gC(e){for(;e===QI;)QI=UI[--DI],UI[DI]=null,LI=UI[--DI],UI[DI]=null;for(;e===OI;)OI=TI[--jI],TI[jI]=null,_I=TI[--jI],TI[jI]=null,PI=TI[--jI],TI[jI]=null}var tC=null,nC=null,IC=!1,CC=null;function lC(e,g){var t=Jr(5,null,null,0);t.elementType="DELETED",t.stateNode=g,t.return=e,null===(g=e.deletions)?(e.deletions=[t],e.flags|=16):g.push(t)}function aC(e,g){switch(e.tag){case 5:var t=e.type;return null!==(g=1!==g.nodeType||t.toLowerCase()!==g.nodeName.toLowerCase()?null:g)&&(e.stateNode=g,tC=e,nC=rI(g.firstChild),!0);case 6:return null!==(g=""===e.pendingProps||3!==g.nodeType?null:g)&&(e.stateNode=g,tC=e,nC=null,!0);case 13:return null!==(g=8!==g.nodeType?null:g)&&(t=null!==OI?{id:PI,overflow:_I}:null,e.memoizedState={dehydrated:g,treeContext:t,retryLane:1073741824},(t=Jr(18,null,null,0)).stateNode=g,t.return=e,e.child=t,tC=e,nC=null,!0);default:return!1}}function oC(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function rC(e){if(IC){var g=nC;if(g){var t=g;if(!aC(e,g)){if(oC(e))throw Error(C(418));g=rI(t.nextSibling);var n=tC;g&&aC(e,g)?lC(n,t):(e.flags=-4097&e.flags|2,IC=!1,tC=e)}}else{if(oC(e))throw Error(C(418));e.flags=-4097&e.flags|2,IC=!1,tC=e}}}function cC(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;tC=e}function iC(e){if(e!==tC)return!1;if(!IC)return cC(e),IC=!0,!1;var g;if((g=3!==e.tag)&&!(g=5!==e.tag)&&(g="head"!==(g=e.type)&&"body"!==g&&!tI(e.type,e.memoizedProps)),g&&(g=nC)){if(oC(e))throw sC(),Error(C(418));for(;g;)lC(e,g),g=rI(g.nextSibling)}if(cC(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(C(317));e:{for(e=e.nextSibling,g=0;e;){if(8===e.nodeType){var t=e.data;if("/$"===t){if(0===g){nC=rI(e.nextSibling);break e}g--}else"$"!==t&&"$!"!==t&&"$?"!==t||g++}e=e.nextSibling}nC=null}}else nC=tC?rI(e.stateNode.nextSibling):null;return!0}function sC(){for(var e=nC;e;)e=rI(e.nextSibling)}function AC(){nC=tC=null,IC=!1}function dC(e){null===CC?CC=[e]:CC.push(e)}var uC=p.ReactCurrentBatchConfig;function mC(e,g){if(e&&e.defaultProps){for(var t in g=K({},g),e=e.defaultProps)void 0===g[t]&&(g[t]=e[t]);return g}return g}var bC=fI(null),ZC=null,hC=null,pC=null;function GC(){pC=hC=ZC=null}function yC(e){var g=bC.current;SI(bC),e._currentValue=g}function BC(e,g,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&g)!==g?(e.childLanes|=g,null!==n&&(n.childLanes|=g)):null!==n&&(n.childLanes&g)!==g&&(n.childLanes|=g),e===t)break;e=e.return}}function fC(e,g){ZC=e,pC=hC=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&g)&&(ha=!0),e.firstContext=null)}function SC(e){var g=e._currentValue;if(pC!==e)if(e={context:e,memoizedValue:g,next:null},null===hC){if(null===ZC)throw Error(C(308));hC=e,ZC.dependencies={lanes:0,firstContext:e}}else hC=hC.next=e;return g}var vC=null;function WC(e){null===vC?vC=[e]:vC.push(e)}function VC(e,g,t,n){var I=g.interleaved;return null===I?(t.next=t,WC(g)):(t.next=I.next,I.next=t),g.interleaved=t,RC(e,n)}function RC(e,g){e.lanes|=g;var t=e.alternate;for(null!==t&&(t.lanes|=g),t=e,e=e.return;null!==e;)e.childLanes|=g,null!==(t=e.alternate)&&(t.childLanes|=g),t=e,e=e.return;return 3===t.tag?t.stateNode:null}var kC=!1;function XC(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function JC(e,g){e=e.updateQueue,g.updateQueue===e&&(g.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function YC(e,g){return{eventTime:e,lane:g,tag:0,payload:null,callback:null,next:null}}function HC(e,g,t){var n=e.updateQueue;if(null===n)return null;if(n=n.shared,0!==(2&Ro)){var I=n.pending;return null===I?g.next=g:(g.next=I.next,I.next=g),n.pending=g,RC(e,t)}return null===(I=n.interleaved)?(g.next=g,WC(n)):(g.next=I.next,I.next=g),n.interleaved=g,RC(e,t)}function wC(e,g,t){if(null!==(g=g.updateQueue)&&(g=g.shared,0!==(4194240&t))){var n=g.lanes;t|=n&=e.pendingLanes,g.lanes=t,Zg(e,t)}}function NC(e,g){var t=e.updateQueue,n=e.alternate;if(null!==n&&t===(n=n.updateQueue)){var I=null,C=null;if(null!==(t=t.firstBaseUpdate)){do{var l={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};null===C?I=C=l:C=C.next=l,t=t.next}while(null!==t);null===C?I=C=g:C=C.next=g}else I=C=g;return t={baseState:n.baseState,firstBaseUpdate:I,lastBaseUpdate:C,shared:n.shared,effects:n.effects},void(e.updateQueue=t)}null===(e=t.lastBaseUpdate)?t.firstBaseUpdate=g:e.next=g,t.lastBaseUpdate=g}function KC(e,g,t,n){var I=e.updateQueue;kC=!1;var C=I.firstBaseUpdate,l=I.lastBaseUpdate,a=I.shared.pending;if(null!==a){I.shared.pending=null;var o=a,r=o.next;o.next=null,null===l?C=r:l.next=r,l=o;var c=e.alternate;null!==c&&((a=(c=c.updateQueue).lastBaseUpdate)!==l&&(null===a?c.firstBaseUpdate=r:a.next=r,c.lastBaseUpdate=o))}if(null!==C){var i=I.baseState;for(l=0,c=r=o=null,a=C;;){var s=a.lane,A=a.eventTime;if((n&s)===s){null!==c&&(c=c.next={eventTime:A,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var d=e,u=a;switch(s=g,A=t,u.tag){case 1:if("function"===typeof(d=u.payload)){i=d.call(A,i,s);break e}i=d;break e;case 3:d.flags=-65537&d.flags|128;case 0:if(null===(s="function"===typeof(d=u.payload)?d.call(A,i,s):d)||void 0===s)break e;i=K({},i,s);break e;case 2:kC=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(s=I.effects)?I.effects=[a]:s.push(a))}else A={eventTime:A,lane:s,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===c?(r=c=A,o=i):c=c.next=A,l|=s;if(null===(a=a.next)){if(null===(a=I.shared.pending))break;a=(s=a).next,s.next=null,I.lastBaseUpdate=s,I.shared.pending=null}}if(null===c&&(o=i),I.baseState=o,I.firstBaseUpdate=r,I.lastBaseUpdate=c,null!==(g=I.shared.interleaved)){I=g;do{l|=I.lane,I=I.next}while(I!==g)}else null===C&&(I.shared.lanes=0);Ko|=l,e.lanes=l,e.memoizedState=i}}function FC(e,g,t){if(e=g.effects,g.effects=null,null!==e)for(g=0;g<e.length;g++){var n=e[g],I=n.callback;if(null!==I){if(n.callback=null,n=t,"function"!==typeof I)throw Error(C(191,I));I.call(n)}}}var xC=(new n.Component).refs;function EC(e,g,t,n){t=null===(t=t(n,g=e.memoizedState))||void 0===t?g:K({},g,t),e.memoizedState=t,0===e.lanes&&(e.updateQueue.baseState=t)}var zC={isMounted:function(e){return!!(e=e._reactInternals)&&Me(e)===e},enqueueSetState:function(e,g,t){e=e._reactInternals;var n=gr(),I=tr(e),C=YC(n,I);C.payload=g,void 0!==t&&null!==t&&(C.callback=t),null!==(g=HC(e,C,I))&&(nr(g,e,I,n),wC(g,e,I))},enqueueReplaceState:function(e,g,t){e=e._reactInternals;var n=gr(),I=tr(e),C=YC(n,I);C.tag=1,C.payload=g,void 0!==t&&null!==t&&(C.callback=t),null!==(g=HC(e,C,I))&&(nr(g,e,I,n),wC(g,e,I))},enqueueForceUpdate:function(e,g){e=e._reactInternals;var t=gr(),n=tr(e),I=YC(t,n);I.tag=2,void 0!==g&&null!==g&&(I.callback=g),null!==(g=HC(e,I,n))&&(nr(g,e,n,t),wC(g,e,n))}};function MC(e,g,t,n,I,C,l){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,C,l):!g.prototype||!g.prototype.isPureReactComponent||(!an(t,n)||!an(I,C))}function UC(e,g,t){var n=!1,I=WI,C=g.contextType;return"object"===typeof C&&null!==C?C=SC(C):(I=JI(g)?kI:VI.current,C=(n=null!==(n=g.contextTypes)&&void 0!==n)?XI(e,I):WI),g=new g(t,C),e.memoizedState=null!==g.state&&void 0!==g.state?g.state:null,g.updater=zC,e.stateNode=g,g._reactInternals=e,n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=I,e.__reactInternalMemoizedMaskedChildContext=C),g}function DC(e,g,t,n){e=g.state,"function"===typeof g.componentWillReceiveProps&&g.componentWillReceiveProps(t,n),"function"===typeof g.UNSAFE_componentWillReceiveProps&&g.UNSAFE_componentWillReceiveProps(t,n),g.state!==e&&zC.enqueueReplaceState(g,g.state,null)}function QC(e,g,t,n){var I=e.stateNode;I.props=t,I.state=e.memoizedState,I.refs=xC,XC(e);var C=g.contextType;"object"===typeof C&&null!==C?I.context=SC(C):(C=JI(g)?kI:VI.current,I.context=XI(e,C)),I.state=e.memoizedState,"function"===typeof(C=g.getDerivedStateFromProps)&&(EC(e,g,C,t),I.state=e.memoizedState),"function"===typeof g.getDerivedStateFromProps||"function"===typeof I.getSnapshotBeforeUpdate||"function"!==typeof I.UNSAFE_componentWillMount&&"function"!==typeof I.componentWillMount||(g=I.state,"function"===typeof I.componentWillMount&&I.componentWillMount(),"function"===typeof I.UNSAFE_componentWillMount&&I.UNSAFE_componentWillMount(),g!==I.state&&zC.enqueueReplaceState(I,I.state,null),KC(e,t,I,n),I.state=e.memoizedState),"function"===typeof I.componentDidMount&&(e.flags|=4194308)}function LC(e,g,t){if(null!==(e=t.ref)&&"function"!==typeof e&&"object"!==typeof e){if(t._owner){if(t=t._owner){if(1!==t.tag)throw Error(C(309));var n=t.stateNode}if(!n)throw Error(C(147,e));var I=n,l=""+e;return null!==g&&null!==g.ref&&"function"===typeof g.ref&&g.ref._stringRef===l?g.ref:(g=function(e){var g=I.refs;g===xC&&(g=I.refs={}),null===e?delete g[l]:g[l]=e},g._stringRef=l,g)}if("string"!==typeof e)throw Error(C(284));if(!t._owner)throw Error(C(290,e))}return e}function TC(e,g){throw e=Object.prototype.toString.call(g),Error(C(31,"[object Object]"===e?"object with keys {"+Object.keys(g).join(", ")+"}":e))}function jC(e){return(0,e._init)(e._payload)}function OC(e){function g(g,t){if(e){var n=g.deletions;null===n?(g.deletions=[t],g.flags|=16):n.push(t)}}function t(t,n){if(!e)return null;for(;null!==n;)g(t,n),n=n.sibling;return null}function n(e,g){for(e=new Map;null!==g;)null!==g.key?e.set(g.key,g):e.set(g.index,g),g=g.sibling;return e}function I(e,g){return(e=Hr(e,g)).index=0,e.sibling=null,e}function l(g,t,n){return g.index=n,e?null!==(n=g.alternate)?(n=n.index)<t?(g.flags|=2,t):n:(g.flags|=2,t):(g.flags|=1048576,t)}function a(g){return e&&null===g.alternate&&(g.flags|=2),g}function o(e,g,t,n){return null===g||6!==g.tag?((g=Fr(t,e.mode,n)).return=e,g):((g=I(g,t)).return=e,g)}function r(e,g,t,n){var C=t.type;return C===B?i(e,g,t.props.children,n,t.key):null!==g&&(g.elementType===C||"object"===typeof C&&null!==C&&C.$$typeof===J&&jC(C)===g.type)?((n=I(g,t.props)).ref=LC(e,g,t),n.return=e,n):((n=wr(t.type,t.key,t.props,null,e.mode,n)).ref=LC(e,g,t),n.return=e,n)}function c(e,g,t,n){return null===g||4!==g.tag||g.stateNode.containerInfo!==t.containerInfo||g.stateNode.implementation!==t.implementation?((g=xr(t,e.mode,n)).return=e,g):((g=I(g,t.children||[])).return=e,g)}function i(e,g,t,n,C){return null===g||7!==g.tag?((g=Nr(t,e.mode,n,C)).return=e,g):((g=I(g,t)).return=e,g)}function s(e,g,t){if("string"===typeof g&&""!==g||"number"===typeof g)return(g=Fr(""+g,e.mode,t)).return=e,g;if("object"===typeof g&&null!==g){switch(g.$$typeof){case G:return(t=wr(g.type,g.key,g.props,null,e.mode,t)).ref=LC(e,null,g),t.return=e,t;case y:return(g=xr(g,e.mode,t)).return=e,g;case J:return s(e,(0,g._init)(g._payload),t)}if(ge(g)||w(g))return(g=Nr(g,e.mode,t,null)).return=e,g;TC(e,g)}return null}function A(e,g,t,n){var I=null!==g?g.key:null;if("string"===typeof t&&""!==t||"number"===typeof t)return null!==I?null:o(e,g,""+t,n);if("object"===typeof t&&null!==t){switch(t.$$typeof){case G:return t.key===I?r(e,g,t,n):null;case y:return t.key===I?c(e,g,t,n):null;case J:return A(e,g,(I=t._init)(t._payload),n)}if(ge(t)||w(t))return null!==I?null:i(e,g,t,n,null);TC(e,t)}return null}function d(e,g,t,n,I){if("string"===typeof n&&""!==n||"number"===typeof n)return o(g,e=e.get(t)||null,""+n,I);if("object"===typeof n&&null!==n){switch(n.$$typeof){case G:return r(g,e=e.get(null===n.key?t:n.key)||null,n,I);case y:return c(g,e=e.get(null===n.key?t:n.key)||null,n,I);case J:return d(e,g,t,(0,n._init)(n._payload),I)}if(ge(n)||w(n))return i(g,e=e.get(t)||null,n,I,null);TC(g,n)}return null}function u(I,C,a,o){for(var r=null,c=null,i=C,u=C=0,m=null;null!==i&&u<a.length;u++){i.index>u?(m=i,i=null):m=i.sibling;var b=A(I,i,a[u],o);if(null===b){null===i&&(i=m);break}e&&i&&null===b.alternate&&g(I,i),C=l(b,C,u),null===c?r=b:c.sibling=b,c=b,i=m}if(u===a.length)return t(I,i),IC&&qI(I,u),r;if(null===i){for(;u<a.length;u++)null!==(i=s(I,a[u],o))&&(C=l(i,C,u),null===c?r=i:c.sibling=i,c=i);return IC&&qI(I,u),r}for(i=n(I,i);u<a.length;u++)null!==(m=d(i,I,u,a[u],o))&&(e&&null!==m.alternate&&i.delete(null===m.key?u:m.key),C=l(m,C,u),null===c?r=m:c.sibling=m,c=m);return e&&i.forEach((function(e){return g(I,e)})),IC&&qI(I,u),r}function m(I,a,o,r){var c=w(o);if("function"!==typeof c)throw Error(C(150));if(null==(o=c.call(o)))throw Error(C(151));for(var i=c=null,u=a,m=a=0,b=null,Z=o.next();null!==u&&!Z.done;m++,Z=o.next()){u.index>m?(b=u,u=null):b=u.sibling;var h=A(I,u,Z.value,r);if(null===h){null===u&&(u=b);break}e&&u&&null===h.alternate&&g(I,u),a=l(h,a,m),null===i?c=h:i.sibling=h,i=h,u=b}if(Z.done)return t(I,u),IC&&qI(I,m),c;if(null===u){for(;!Z.done;m++,Z=o.next())null!==(Z=s(I,Z.value,r))&&(a=l(Z,a,m),null===i?c=Z:i.sibling=Z,i=Z);return IC&&qI(I,m),c}for(u=n(I,u);!Z.done;m++,Z=o.next())null!==(Z=d(u,I,m,Z.value,r))&&(e&&null!==Z.alternate&&u.delete(null===Z.key?m:Z.key),a=l(Z,a,m),null===i?c=Z:i.sibling=Z,i=Z);return e&&u.forEach((function(e){return g(I,e)})),IC&&qI(I,m),c}return function e(n,C,l,o){if("object"===typeof l&&null!==l&&l.type===B&&null===l.key&&(l=l.props.children),"object"===typeof l&&null!==l){switch(l.$$typeof){case G:e:{for(var r=l.key,c=C;null!==c;){if(c.key===r){if((r=l.type)===B){if(7===c.tag){t(n,c.sibling),(C=I(c,l.props.children)).return=n,n=C;break e}}else if(c.elementType===r||"object"===typeof r&&null!==r&&r.$$typeof===J&&jC(r)===c.type){t(n,c.sibling),(C=I(c,l.props)).ref=LC(n,c,l),C.return=n,n=C;break e}t(n,c);break}g(n,c),c=c.sibling}l.type===B?((C=Nr(l.props.children,n.mode,o,l.key)).return=n,n=C):((o=wr(l.type,l.key,l.props,null,n.mode,o)).ref=LC(n,C,l),o.return=n,n=o)}return a(n);case y:e:{for(c=l.key;null!==C;){if(C.key===c){if(4===C.tag&&C.stateNode.containerInfo===l.containerInfo&&C.stateNode.implementation===l.implementation){t(n,C.sibling),(C=I(C,l.children||[])).return=n,n=C;break e}t(n,C);break}g(n,C),C=C.sibling}(C=xr(l,n.mode,o)).return=n,n=C}return a(n);case J:return e(n,C,(c=l._init)(l._payload),o)}if(ge(l))return u(n,C,l,o);if(w(l))return m(n,C,l,o);TC(n,l)}return"string"===typeof l&&""!==l||"number"===typeof l?(l=""+l,null!==C&&6===C.tag?(t(n,C.sibling),(C=I(C,l)).return=n,n=C):(t(n,C),(C=Fr(l,n.mode,o)).return=n,n=C),a(n)):t(n,C)}}var PC=OC(!0),_C=OC(!1),qC={},$C=fI(qC),el=fI(qC),gl=fI(qC);function tl(e){if(e===qC)throw Error(C(174));return e}function nl(e,g){switch(vI(gl,g),vI(el,e),vI($C,qC),e=g.nodeType){case 9:case 11:g=(g=g.documentElement)?g.namespaceURI:oe(null,"");break;default:g=oe(g=(e=8===e?g.parentNode:g).namespaceURI||null,e=e.tagName)}SI($C),vI($C,g)}function Il(){SI($C),SI(el),SI(gl)}function Cl(e){tl(gl.current);var g=tl($C.current),t=oe(g,e.type);g!==t&&(vI(el,e),vI($C,t))}function ll(e){el.current===e&&(SI($C),SI(el))}var al=fI(0);function ol(e){for(var g=e;null!==g;){if(13===g.tag){var t=g.memoizedState;if(null!==t&&(null===(t=t.dehydrated)||"$?"===t.data||"$!"===t.data))return g}else if(19===g.tag&&void 0!==g.memoizedProps.revealOrder){if(0!==(128&g.flags))return g}else if(null!==g.child){g.child.return=g,g=g.child;continue}if(g===e)break;for(;null===g.sibling;){if(null===g.return||g.return===e)return null;g=g.return}g.sibling.return=g.return,g=g.sibling}return null}var rl=[];function cl(){for(var e=0;e<rl.length;e++)rl[e]._workInProgressVersionPrimary=null;rl.length=0}var il=p.ReactCurrentDispatcher,sl=p.ReactCurrentBatchConfig,Al=0,dl=null,ul=null,ml=null,bl=!1,Zl=!1,hl=0,pl=0;function Gl(){throw Error(C(321))}function yl(e,g){if(null===g)return!1;for(var t=0;t<g.length&&t<e.length;t++)if(!ln(e[t],g[t]))return!1;return!0}function Bl(e,g,t,n,I,l){if(Al=l,dl=g,g.memoizedState=null,g.updateQueue=null,g.lanes=0,il.current=null===e||null===e.memoizedState?la:aa,e=t(n,I),Zl){l=0;do{if(Zl=!1,hl=0,25<=l)throw Error(C(301));l+=1,ml=ul=null,g.updateQueue=null,il.current=oa,e=t(n,I)}while(Zl)}if(il.current=Ca,g=null!==ul&&null!==ul.next,Al=0,ml=ul=dl=null,bl=!1,g)throw Error(C(300));return e}function fl(){var e=0!==hl;return hl=0,e}function Sl(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ml?dl.memoizedState=ml=e:ml=ml.next=e,ml}function vl(){if(null===ul){var e=dl.alternate;e=null!==e?e.memoizedState:null}else e=ul.next;var g=null===ml?dl.memoizedState:ml.next;if(null!==g)ml=g,ul=e;else{if(null===e)throw Error(C(310));e={memoizedState:(ul=e).memoizedState,baseState:ul.baseState,baseQueue:ul.baseQueue,queue:ul.queue,next:null},null===ml?dl.memoizedState=ml=e:ml=ml.next=e}return ml}function Wl(e,g){return"function"===typeof g?g(e):g}function Vl(e){var g=vl(),t=g.queue;if(null===t)throw Error(C(311));t.lastRenderedReducer=e;var n=ul,I=n.baseQueue,l=t.pending;if(null!==l){if(null!==I){var a=I.next;I.next=l.next,l.next=a}n.baseQueue=I=l,t.pending=null}if(null!==I){l=I.next,n=n.baseState;var o=a=null,r=null,c=l;do{var i=c.lane;if((Al&i)===i)null!==r&&(r=r.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:e(n,c.action);else{var s={lane:i,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===r?(o=r=s,a=n):r=r.next=s,dl.lanes|=i,Ko|=i}c=c.next}while(null!==c&&c!==l);null===r?a=n:r.next=o,ln(n,g.memoizedState)||(ha=!0),g.memoizedState=n,g.baseState=a,g.baseQueue=r,t.lastRenderedState=n}if(null!==(e=t.interleaved)){I=e;do{l=I.lane,dl.lanes|=l,Ko|=l,I=I.next}while(I!==e)}else null===I&&(t.lanes=0);return[g.memoizedState,t.dispatch]}function Rl(e){var g=vl(),t=g.queue;if(null===t)throw Error(C(311));t.lastRenderedReducer=e;var n=t.dispatch,I=t.pending,l=g.memoizedState;if(null!==I){t.pending=null;var a=I=I.next;do{l=e(l,a.action),a=a.next}while(a!==I);ln(l,g.memoizedState)||(ha=!0),g.memoizedState=l,null===g.baseQueue&&(g.baseState=l),t.lastRenderedState=l}return[l,n]}function kl(){}function Xl(e,g){var t=dl,n=vl(),I=g(),l=!ln(n.memoizedState,I);if(l&&(n.memoizedState=I,ha=!0),n=n.queue,Ul(Hl.bind(null,t,n,e),[e]),n.getSnapshot!==g||l||null!==ml&&1&ml.memoizedState.tag){if(t.flags|=2048,Fl(9,Yl.bind(null,t,n,I,g),void 0,null),null===ko)throw Error(C(349));0!==(30&Al)||Jl(t,g,I)}return I}function Jl(e,g,t){e.flags|=16384,e={getSnapshot:g,value:t},null===(g=dl.updateQueue)?(g={lastEffect:null,stores:null},dl.updateQueue=g,g.stores=[e]):null===(t=g.stores)?g.stores=[e]:t.push(e)}function Yl(e,g,t,n){g.value=t,g.getSnapshot=n,wl(g)&&Nl(e)}function Hl(e,g,t){return t((function(){wl(g)&&Nl(e)}))}function wl(e){var g=e.getSnapshot;e=e.value;try{var t=g();return!ln(e,t)}catch(n){return!0}}function Nl(e){var g=RC(e,1);null!==g&&nr(g,e,1,-1)}function Kl(e){var g=Sl();return"function"===typeof e&&(e=e()),g.memoizedState=g.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Wl,lastRenderedState:e},g.queue=e,e=e.dispatch=ga.bind(null,dl,e),[g.memoizedState,e]}function Fl(e,g,t,n){return e={tag:e,create:g,destroy:t,deps:n,next:null},null===(g=dl.updateQueue)?(g={lastEffect:null,stores:null},dl.updateQueue=g,g.lastEffect=e.next=e):null===(t=g.lastEffect)?g.lastEffect=e.next=e:(n=t.next,t.next=e,e.next=n,g.lastEffect=e),e}function xl(){return vl().memoizedState}function El(e,g,t,n){var I=Sl();dl.flags|=e,I.memoizedState=Fl(1|g,t,void 0,void 0===n?null:n)}function zl(e,g,t,n){var I=vl();n=void 0===n?null:n;var C=void 0;if(null!==ul){var l=ul.memoizedState;if(C=l.destroy,null!==n&&yl(n,l.deps))return void(I.memoizedState=Fl(g,t,C,n))}dl.flags|=e,I.memoizedState=Fl(1|g,t,C,n)}function Ml(e,g){return El(8390656,8,e,g)}function Ul(e,g){return zl(2048,8,e,g)}function Dl(e,g){return zl(4,2,e,g)}function Ql(e,g){return zl(4,4,e,g)}function Ll(e,g){return"function"===typeof g?(e=e(),g(e),function(){g(null)}):null!==g&&void 0!==g?(e=e(),g.current=e,function(){g.current=null}):void 0}function Tl(e,g,t){return t=null!==t&&void 0!==t?t.concat([e]):null,zl(4,4,Ll.bind(null,g,e),t)}function jl(){}function Ol(e,g){var t=vl();g=void 0===g?null:g;var n=t.memoizedState;return null!==n&&null!==g&&yl(g,n[1])?n[0]:(t.memoizedState=[e,g],e)}function Pl(e,g){var t=vl();g=void 0===g?null:g;var n=t.memoizedState;return null!==n&&null!==g&&yl(g,n[1])?n[0]:(e=e(),t.memoizedState=[e,g],e)}function _l(e,g,t){return 0===(21&Al)?(e.baseState&&(e.baseState=!1,ha=!0),e.memoizedState=t):(ln(t,g)||(t=ug(),dl.lanes|=t,Ko|=t,e.baseState=!0),g)}function ql(e,g){var t=hg;hg=0!==t&&4>t?t:4,e(!0);var n=sl.transition;sl.transition={};try{e(!1),g()}finally{hg=t,sl.transition=n}}function $l(){return vl().memoizedState}function ea(e,g,t){var n=tr(e);if(t={lane:n,action:t,hasEagerState:!1,eagerState:null,next:null},ta(e))na(g,t);else if(null!==(t=VC(e,g,t,n))){nr(t,e,n,gr()),Ia(t,g,n)}}function ga(e,g,t){var n=tr(e),I={lane:n,action:t,hasEagerState:!1,eagerState:null,next:null};if(ta(e))na(g,I);else{var C=e.alternate;if(0===e.lanes&&(null===C||0===C.lanes)&&null!==(C=g.lastRenderedReducer))try{var l=g.lastRenderedState,a=C(l,t);if(I.hasEagerState=!0,I.eagerState=a,ln(a,l)){var o=g.interleaved;return null===o?(I.next=I,WC(g)):(I.next=o.next,o.next=I),void(g.interleaved=I)}}catch(r){}null!==(t=VC(e,g,I,n))&&(nr(t,e,n,I=gr()),Ia(t,g,n))}}function ta(e){var g=e.alternate;return e===dl||null!==g&&g===dl}function na(e,g){Zl=bl=!0;var t=e.pending;null===t?g.next=g:(g.next=t.next,t.next=g),e.pending=g}function Ia(e,g,t){if(0!==(4194240&t)){var n=g.lanes;t|=n&=e.pendingLanes,g.lanes=t,Zg(e,t)}}var Ca={readContext:SC,useCallback:Gl,useContext:Gl,useEffect:Gl,useImperativeHandle:Gl,useInsertionEffect:Gl,useLayoutEffect:Gl,useMemo:Gl,useReducer:Gl,useRef:Gl,useState:Gl,useDebugValue:Gl,useDeferredValue:Gl,useTransition:Gl,useMutableSource:Gl,useSyncExternalStore:Gl,useId:Gl,unstable_isNewReconciler:!1},la={readContext:SC,useCallback:function(e,g){return Sl().memoizedState=[e,void 0===g?null:g],e},useContext:SC,useEffect:Ml,useImperativeHandle:function(e,g,t){return t=null!==t&&void 0!==t?t.concat([e]):null,El(4194308,4,Ll.bind(null,g,e),t)},useLayoutEffect:function(e,g){return El(4194308,4,e,g)},useInsertionEffect:function(e,g){return El(4,2,e,g)},useMemo:function(e,g){var t=Sl();return g=void 0===g?null:g,e=e(),t.memoizedState=[e,g],e},useReducer:function(e,g,t){var n=Sl();return g=void 0!==t?t(g):g,n.memoizedState=n.baseState=g,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:g},n.queue=e,e=e.dispatch=ea.bind(null,dl,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},Sl().memoizedState=e},useState:Kl,useDebugValue:jl,useDeferredValue:function(e){return Sl().memoizedState=e},useTransition:function(){var e=Kl(!1),g=e[0];return e=ql.bind(null,e[1]),Sl().memoizedState=e,[g,e]},useMutableSource:function(){},useSyncExternalStore:function(e,g,t){var n=dl,I=Sl();if(IC){if(void 0===t)throw Error(C(407));t=t()}else{if(t=g(),null===ko)throw Error(C(349));0!==(30&Al)||Jl(n,g,t)}I.memoizedState=t;var l={value:t,getSnapshot:g};return I.queue=l,Ml(Hl.bind(null,n,l,e),[e]),n.flags|=2048,Fl(9,Yl.bind(null,n,l,t,g),void 0,null),t},useId:function(){var e=Sl(),g=ko.identifierPrefix;if(IC){var t=_I;g=":"+g+"R"+(t=(PI&~(1<<32-lg(PI)-1)).toString(32)+t),0<(t=hl++)&&(g+="H"+t.toString(32)),g+=":"}else g=":"+g+"r"+(t=pl++).toString(32)+":";return e.memoizedState=g},unstable_isNewReconciler:!1},aa={readContext:SC,useCallback:Ol,useContext:SC,useEffect:Ul,useImperativeHandle:Tl,useInsertionEffect:Dl,useLayoutEffect:Ql,useMemo:Pl,useReducer:Vl,useRef:xl,useState:function(){return Vl(Wl)},useDebugValue:jl,useDeferredValue:function(e){return _l(vl(),ul.memoizedState,e)},useTransition:function(){return[Vl(Wl)[0],vl().memoizedState]},useMutableSource:kl,useSyncExternalStore:Xl,useId:$l,unstable_isNewReconciler:!1},oa={readContext:SC,useCallback:Ol,useContext:SC,useEffect:Ul,useImperativeHandle:Tl,useInsertionEffect:Dl,useLayoutEffect:Ql,useMemo:Pl,useReducer:Rl,useRef:xl,useState:function(){return Rl(Wl)},useDebugValue:jl,useDeferredValue:function(e){var g=vl();return null===ul?g.memoizedState=e:_l(g,ul.memoizedState,e)},useTransition:function(){return[Rl(Wl)[0],vl().memoizedState]},useMutableSource:kl,useSyncExternalStore:Xl,useId:$l,unstable_isNewReconciler:!1};function ra(e,g){try{var t="",n=g;do{t+=z(n),n=n.return}while(n);var I=t}catch(C){I="\nError generating stack: "+C.message+"\n"+C.stack}return{value:e,source:g,stack:I,digest:null}}function ca(e,g,t){return{value:e,source:null,stack:null!=t?t:null,digest:null!=g?g:null}}function ia(e,g){try{console.error(g.value)}catch(t){setTimeout((function(){throw t}))}}var sa="function"===typeof WeakMap?WeakMap:Map;function Aa(e,g,t){(t=YC(-1,t)).tag=3,t.payload={element:null};var n=g.value;return t.callback=function(){Qo||(Qo=!0,Lo=n),ia(0,g)},t}function da(e,g,t){(t=YC(-1,t)).tag=3;var n=e.type.getDerivedStateFromError;if("function"===typeof n){var I=g.value;t.payload=function(){return n(I)},t.callback=function(){ia(0,g)}}var C=e.stateNode;return null!==C&&"function"===typeof C.componentDidCatch&&(t.callback=function(){ia(0,g),"function"!==typeof n&&(null===To?To=new Set([this]):To.add(this));var e=g.stack;this.componentDidCatch(g.value,{componentStack:null!==e?e:""})}),t}function ua(e,g,t){var n=e.pingCache;if(null===n){n=e.pingCache=new sa;var I=new Set;n.set(g,I)}else void 0===(I=n.get(g))&&(I=new Set,n.set(g,I));I.has(t)||(I.add(t),e=vr.bind(null,e,g,t),g.then(e,e))}function ma(e){do{var g;if((g=13===e.tag)&&(g=null===(g=e.memoizedState)||null!==g.dehydrated),g)return e;e=e.return}while(null!==e);return null}function ba(e,g,t,n,I){return 0===(1&e.mode)?(e===g?e.flags|=65536:(e.flags|=128,t.flags|=131072,t.flags&=-52805,1===t.tag&&(null===t.alternate?t.tag=17:((g=YC(-1,1)).tag=2,HC(t,g,1))),t.lanes|=1),e):(e.flags|=65536,e.lanes=I,e)}var Za=p.ReactCurrentOwner,ha=!1;function pa(e,g,t,n){g.child=null===e?_C(g,null,t,n):PC(g,e.child,t,n)}function Ga(e,g,t,n,I){t=t.render;var C=g.ref;return fC(g,I),n=Bl(e,g,t,n,C,I),t=fl(),null===e||ha?(IC&&t&&eC(g),g.flags|=1,pa(e,g,n,I),g.child):(g.updateQueue=e.updateQueue,g.flags&=-2053,e.lanes&=~I,Da(e,g,I))}function ya(e,g,t,n,I){if(null===e){var C=t.type;return"function"!==typeof C||Yr(C)||void 0!==C.defaultProps||null!==t.compare||void 0!==t.defaultProps?((e=wr(t.type,null,n,g,g.mode,I)).ref=g.ref,e.return=g,g.child=e):(g.tag=15,g.type=C,Ba(e,g,C,n,I))}if(C=e.child,0===(e.lanes&I)){var l=C.memoizedProps;if((t=null!==(t=t.compare)?t:an)(l,n)&&e.ref===g.ref)return Da(e,g,I)}return g.flags|=1,(e=Hr(C,n)).ref=g.ref,e.return=g,g.child=e}function Ba(e,g,t,n,I){if(null!==e){var C=e.memoizedProps;if(an(C,n)&&e.ref===g.ref){if(ha=!1,g.pendingProps=n=C,0===(e.lanes&I))return g.lanes=e.lanes,Da(e,g,I);0!==(131072&e.flags)&&(ha=!0)}}return va(e,g,t,n,I)}function fa(e,g,t){var n=g.pendingProps,I=n.children,C=null!==e?e.memoizedState:null;if("hidden"===n.mode)if(0===(1&g.mode))g.memoizedState={baseLanes:0,cachePool:null,transitions:null},vI(Ho,Yo),Yo|=t;else{if(0===(1073741824&t))return e=null!==C?C.baseLanes|t:t,g.lanes=g.childLanes=1073741824,g.memoizedState={baseLanes:e,cachePool:null,transitions:null},g.updateQueue=null,vI(Ho,Yo),Yo|=e,null;g.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=null!==C?C.baseLanes:t,vI(Ho,Yo),Yo|=n}else null!==C?(n=C.baseLanes|t,g.memoizedState=null):n=t,vI(Ho,Yo),Yo|=n;return pa(e,g,I,t),g.child}function Sa(e,g){var t=g.ref;(null===e&&null!==t||null!==e&&e.ref!==t)&&(g.flags|=512,g.flags|=2097152)}function va(e,g,t,n,I){var C=JI(t)?kI:VI.current;return C=XI(g,C),fC(g,I),t=Bl(e,g,t,n,C,I),n=fl(),null===e||ha?(IC&&n&&eC(g),g.flags|=1,pa(e,g,t,I),g.child):(g.updateQueue=e.updateQueue,g.flags&=-2053,e.lanes&=~I,Da(e,g,I))}function Wa(e,g,t,n,I){if(JI(t)){var C=!0;NI(g)}else C=!1;if(fC(g,I),null===g.stateNode)Ua(e,g),UC(g,t,n),QC(g,t,n,I),n=!0;else if(null===e){var l=g.stateNode,a=g.memoizedProps;l.props=a;var o=l.context,r=t.contextType;"object"===typeof r&&null!==r?r=SC(r):r=XI(g,r=JI(t)?kI:VI.current);var c=t.getDerivedStateFromProps,i="function"===typeof c||"function"===typeof l.getSnapshotBeforeUpdate;i||"function"!==typeof l.UNSAFE_componentWillReceiveProps&&"function"!==typeof l.componentWillReceiveProps||(a!==n||o!==r)&&DC(g,l,n,r),kC=!1;var s=g.memoizedState;l.state=s,KC(g,n,l,I),o=g.memoizedState,a!==n||s!==o||RI.current||kC?("function"===typeof c&&(EC(g,t,c,n),o=g.memoizedState),(a=kC||MC(g,t,a,n,s,o,r))?(i||"function"!==typeof l.UNSAFE_componentWillMount&&"function"!==typeof l.componentWillMount||("function"===typeof l.componentWillMount&&l.componentWillMount(),"function"===typeof l.UNSAFE_componentWillMount&&l.UNSAFE_componentWillMount()),"function"===typeof l.componentDidMount&&(g.flags|=4194308)):("function"===typeof l.componentDidMount&&(g.flags|=4194308),g.memoizedProps=n,g.memoizedState=o),l.props=n,l.state=o,l.context=r,n=a):("function"===typeof l.componentDidMount&&(g.flags|=4194308),n=!1)}else{l=g.stateNode,JC(e,g),a=g.memoizedProps,r=g.type===g.elementType?a:mC(g.type,a),l.props=r,i=g.pendingProps,s=l.context,"object"===typeof(o=t.contextType)&&null!==o?o=SC(o):o=XI(g,o=JI(t)?kI:VI.current);var A=t.getDerivedStateFromProps;(c="function"===typeof A||"function"===typeof l.getSnapshotBeforeUpdate)||"function"!==typeof l.UNSAFE_componentWillReceiveProps&&"function"!==typeof l.componentWillReceiveProps||(a!==i||s!==o)&&DC(g,l,n,o),kC=!1,s=g.memoizedState,l.state=s,KC(g,n,l,I);var d=g.memoizedState;a!==i||s!==d||RI.current||kC?("function"===typeof A&&(EC(g,t,A,n),d=g.memoizedState),(r=kC||MC(g,t,r,n,s,d,o)||!1)?(c||"function"!==typeof l.UNSAFE_componentWillUpdate&&"function"!==typeof l.componentWillUpdate||("function"===typeof l.componentWillUpdate&&l.componentWillUpdate(n,d,o),"function"===typeof l.UNSAFE_componentWillUpdate&&l.UNSAFE_componentWillUpdate(n,d,o)),"function"===typeof l.componentDidUpdate&&(g.flags|=4),"function"===typeof l.getSnapshotBeforeUpdate&&(g.flags|=1024)):("function"!==typeof l.componentDidUpdate||a===e.memoizedProps&&s===e.memoizedState||(g.flags|=4),"function"!==typeof l.getSnapshotBeforeUpdate||a===e.memoizedProps&&s===e.memoizedState||(g.flags|=1024),g.memoizedProps=n,g.memoizedState=d),l.props=n,l.state=d,l.context=o,n=r):("function"!==typeof l.componentDidUpdate||a===e.memoizedProps&&s===e.memoizedState||(g.flags|=4),"function"!==typeof l.getSnapshotBeforeUpdate||a===e.memoizedProps&&s===e.memoizedState||(g.flags|=1024),n=!1)}return Va(e,g,t,n,C,I)}function Va(e,g,t,n,I,C){Sa(e,g);var l=0!==(128&g.flags);if(!n&&!l)return I&&KI(g,t,!1),Da(e,g,C);n=g.stateNode,Za.current=g;var a=l&&"function"!==typeof t.getDerivedStateFromError?null:n.render();return g.flags|=1,null!==e&&l?(g.child=PC(g,e.child,null,C),g.child=PC(g,null,a,C)):pa(e,g,a,C),g.memoizedState=n.state,I&&KI(g,t,!0),g.child}function Ra(e){var g=e.stateNode;g.pendingContext?HI(0,g.pendingContext,g.pendingContext!==g.context):g.context&&HI(0,g.context,!1),nl(e,g.containerInfo)}function ka(e,g,t,n,I){return AC(),dC(I),g.flags|=256,pa(e,g,t,n),g.child}var Xa,Ja,Ya,Ha,wa={dehydrated:null,treeContext:null,retryLane:0};function Na(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ka(e,g,t){var n,I=g.pendingProps,l=al.current,a=!1,o=0!==(128&g.flags);if((n=o)||(n=(null===e||null!==e.memoizedState)&&0!==(2&l)),n?(a=!0,g.flags&=-129):null!==e&&null===e.memoizedState||(l|=1),vI(al,1&l),null===e)return rC(g),null!==(e=g.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&g.mode)?g.lanes=1:"$!"===e.data?g.lanes=8:g.lanes=1073741824,null):(o=I.children,e=I.fallback,a?(I=g.mode,a=g.child,o={mode:"hidden",children:o},0===(1&I)&&null!==a?(a.childLanes=0,a.pendingProps=o):a=Kr(o,I,0,null),e=Nr(e,I,t,null),a.return=g,e.return=g,a.sibling=e,g.child=a,g.child.memoizedState=Na(t),g.memoizedState=wa,e):Fa(g,o));if(null!==(l=e.memoizedState)&&null!==(n=l.dehydrated))return function(e,g,t,n,I,l,a){if(t)return 256&g.flags?(g.flags&=-257,xa(e,g,a,n=ca(Error(C(422))))):null!==g.memoizedState?(g.child=e.child,g.flags|=128,null):(l=n.fallback,I=g.mode,n=Kr({mode:"visible",children:n.children},I,0,null),(l=Nr(l,I,a,null)).flags|=2,n.return=g,l.return=g,n.sibling=l,g.child=n,0!==(1&g.mode)&&PC(g,e.child,null,a),g.child.memoizedState=Na(a),g.memoizedState=wa,l);if(0===(1&g.mode))return xa(e,g,a,null);if("$!"===I.data){if(n=I.nextSibling&&I.nextSibling.dataset)var o=n.dgst;return n=o,xa(e,g,a,n=ca(l=Error(C(419)),n,void 0))}if(o=0!==(a&e.childLanes),ha||o){if(null!==(n=ko)){switch(a&-a){case 4:I=2;break;case 16:I=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:I=32;break;case 536870912:I=268435456;break;default:I=0}0!==(I=0!==(I&(n.suspendedLanes|a))?0:I)&&I!==l.retryLane&&(l.retryLane=I,RC(e,I),nr(n,e,I,-1))}return mr(),xa(e,g,a,n=ca(Error(C(421))))}return"$?"===I.data?(g.flags|=128,g.child=e.child,g=Vr.bind(null,e),I._reactRetry=g,null):(e=l.treeContext,nC=rI(I.nextSibling),tC=g,IC=!0,CC=null,null!==e&&(TI[jI++]=PI,TI[jI++]=_I,TI[jI++]=OI,PI=e.id,_I=e.overflow,OI=g),g=Fa(g,n.children),g.flags|=4096,g)}(e,g,o,I,n,l,t);if(a){a=I.fallback,o=g.mode,n=(l=e.child).sibling;var r={mode:"hidden",children:I.children};return 0===(1&o)&&g.child!==l?((I=g.child).childLanes=0,I.pendingProps=r,g.deletions=null):(I=Hr(l,r)).subtreeFlags=14680064&l.subtreeFlags,null!==n?a=Hr(n,a):(a=Nr(a,o,t,null)).flags|=2,a.return=g,I.return=g,I.sibling=a,g.child=I,I=a,a=g.child,o=null===(o=e.child.memoizedState)?Na(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=e.childLanes&~t,g.memoizedState=wa,I}return e=(a=e.child).sibling,I=Hr(a,{mode:"visible",children:I.children}),0===(1&g.mode)&&(I.lanes=t),I.return=g,I.sibling=null,null!==e&&(null===(t=g.deletions)?(g.deletions=[e],g.flags|=16):t.push(e)),g.child=I,g.memoizedState=null,I}function Fa(e,g){return(g=Kr({mode:"visible",children:g},e.mode,0,null)).return=e,e.child=g}function xa(e,g,t,n){return null!==n&&dC(n),PC(g,e.child,null,t),(e=Fa(g,g.pendingProps.children)).flags|=2,g.memoizedState=null,e}function Ea(e,g,t){e.lanes|=g;var n=e.alternate;null!==n&&(n.lanes|=g),BC(e.return,g,t)}function za(e,g,t,n,I){var C=e.memoizedState;null===C?e.memoizedState={isBackwards:g,rendering:null,renderingStartTime:0,last:n,tail:t,tailMode:I}:(C.isBackwards=g,C.rendering=null,C.renderingStartTime=0,C.last=n,C.tail=t,C.tailMode=I)}function Ma(e,g,t){var n=g.pendingProps,I=n.revealOrder,C=n.tail;if(pa(e,g,n.children,t),0!==(2&(n=al.current)))n=1&n|2,g.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=g.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ea(e,t,g);else if(19===e.tag)Ea(e,t,g);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===g)break e;for(;null===e.sibling;){if(null===e.return||e.return===g)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(vI(al,n),0===(1&g.mode))g.memoizedState=null;else switch(I){case"forwards":for(t=g.child,I=null;null!==t;)null!==(e=t.alternate)&&null===ol(e)&&(I=t),t=t.sibling;null===(t=I)?(I=g.child,g.child=null):(I=t.sibling,t.sibling=null),za(g,!1,I,t,C);break;case"backwards":for(t=null,I=g.child,g.child=null;null!==I;){if(null!==(e=I.alternate)&&null===ol(e)){g.child=I;break}e=I.sibling,I.sibling=t,t=I,I=e}za(g,!0,t,null,C);break;case"together":za(g,!1,null,null,void 0);break;default:g.memoizedState=null}return g.child}function Ua(e,g){0===(1&g.mode)&&null!==e&&(e.alternate=null,g.alternate=null,g.flags|=2)}function Da(e,g,t){if(null!==e&&(g.dependencies=e.dependencies),Ko|=g.lanes,0===(t&g.childLanes))return null;if(null!==e&&g.child!==e.child)throw Error(C(153));if(null!==g.child){for(t=Hr(e=g.child,e.pendingProps),g.child=t,t.return=g;null!==e.sibling;)e=e.sibling,(t=t.sibling=Hr(e,e.pendingProps)).return=g;t.sibling=null}return g.child}function Qa(e,g){if(!IC)switch(e.tailMode){case"hidden":g=e.tail;for(var t=null;null!==g;)null!==g.alternate&&(t=g),g=g.sibling;null===t?e.tail=null:t.sibling=null;break;case"collapsed":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?g||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function La(e){var g=null!==e.alternate&&e.alternate.child===e.child,t=0,n=0;if(g)for(var I=e.child;null!==I;)t|=I.lanes|I.childLanes,n|=14680064&I.subtreeFlags,n|=14680064&I.flags,I.return=e,I=I.sibling;else for(I=e.child;null!==I;)t|=I.lanes|I.childLanes,n|=I.subtreeFlags,n|=I.flags,I.return=e,I=I.sibling;return e.subtreeFlags|=n,e.childLanes=t,g}function Ta(e,g,t){var n=g.pendingProps;switch(gC(g),g.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return La(g),null;case 1:case 17:return JI(g.type)&&YI(),La(g),null;case 3:return n=g.stateNode,Il(),SI(RI),SI(VI),cl(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(iC(g)?g.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&g.flags)||(g.flags|=1024,null!==CC&&(ar(CC),CC=null))),Ja(e,g),La(g),null;case 5:ll(g);var I=tl(gl.current);if(t=g.type,null!==e&&null!=g.stateNode)Ya(e,g,t,n,I),e.ref!==g.ref&&(g.flags|=512,g.flags|=2097152);else{if(!n){if(null===g.stateNode)throw Error(C(166));return La(g),null}if(e=tl($C.current),iC(g)){n=g.stateNode,t=g.type;var l=g.memoizedProps;switch(n[sI]=g,n[AI]=l,e=0!==(1&g.mode),t){case"dialog":xn("cancel",n),xn("close",n);break;case"iframe":case"object":case"embed":xn("load",n);break;case"video":case"audio":for(I=0;I<wn.length;I++)xn(wn[I],n);break;case"source":xn("error",n);break;case"img":case"image":case"link":xn("error",n),xn("load",n);break;case"details":xn("toggle",n);break;case"input":P(n,l),xn("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!l.multiple},xn("invalid",n);break;case"textarea":Ie(n,l),xn("invalid",n)}for(var o in Ze(t,l),I=null,l)if(l.hasOwnProperty(o)){var r=l[o];"children"===o?"string"===typeof r?n.textContent!==r&&(!0!==l.suppressHydrationWarning&&qn(n.textContent,r,e),I=["children",r]):"number"===typeof r&&n.textContent!==""+r&&(!0!==l.suppressHydrationWarning&&qn(n.textContent,r,e),I=["children",""+r]):a.hasOwnProperty(o)&&null!=r&&"onScroll"===o&&xn("scroll",n)}switch(t){case"input":L(n),$(n,l,!0);break;case"textarea":L(n),le(n);break;case"select":case"option":break;default:"function"===typeof l.onClick&&(n.onclick=$n)}n=I,g.updateQueue=n,null!==n&&(g.flags|=4)}else{o=9===I.nodeType?I:I.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(t)),"http://www.w3.org/1999/xhtml"===e?"script"===t?((e=o.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof n.is?e=o.createElement(t,{is:n.is}):(e=o.createElement(t),"select"===t&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,t),e[sI]=g,e[AI]=n,Xa(e,g,!1,!1),g.stateNode=e;e:{switch(o=he(t,n),t){case"dialog":xn("cancel",e),xn("close",e),I=n;break;case"iframe":case"object":case"embed":xn("load",e),I=n;break;case"video":case"audio":for(I=0;I<wn.length;I++)xn(wn[I],e);I=n;break;case"source":xn("error",e),I=n;break;case"img":case"image":case"link":xn("error",e),xn("load",e),I=n;break;case"details":xn("toggle",e),I=n;break;case"input":P(e,n),I=O(e,n),xn("invalid",e);break;case"option":default:I=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},I=K({},n,{value:void 0}),xn("invalid",e);break;case"textarea":Ie(e,n),I=ne(e,n),xn("invalid",e)}for(l in Ze(t,I),r=I)if(r.hasOwnProperty(l)){var c=r[l];"style"===l?me(e,c):"dangerouslySetInnerHTML"===l?null!=(c=c?c.__html:void 0)&&ie(e,c):"children"===l?"string"===typeof c?("textarea"!==t||""!==c)&&se(e,c):"number"===typeof c&&se(e,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(a.hasOwnProperty(l)?null!=c&&"onScroll"===l&&xn("scroll",e):null!=c&&h(e,l,c,o))}switch(t){case"input":L(e),$(e,n,!1);break;case"textarea":L(e),le(e);break;case"option":null!=n.value&&e.setAttribute("value",""+D(n.value));break;case"select":e.multiple=!!n.multiple,null!=(l=n.value)?te(e,!!n.multiple,l,!1):null!=n.defaultValue&&te(e,!!n.multiple,n.defaultValue,!0);break;default:"function"===typeof I.onClick&&(e.onclick=$n)}switch(t){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(g.flags|=4)}null!==g.ref&&(g.flags|=512,g.flags|=2097152)}return La(g),null;case 6:if(e&&null!=g.stateNode)Ha(e,g,e.memoizedProps,n);else{if("string"!==typeof n&&null===g.stateNode)throw Error(C(166));if(t=tl(gl.current),tl($C.current),iC(g)){if(n=g.stateNode,t=g.memoizedProps,n[sI]=g,(l=n.nodeValue!==t)&&null!==(e=tC))switch(e.tag){case 3:qn(n.nodeValue,t,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&qn(n.nodeValue,t,0!==(1&e.mode))}l&&(g.flags|=4)}else(n=(9===t.nodeType?t:t.ownerDocument).createTextNode(n))[sI]=g,g.stateNode=n}return La(g),null;case 13:if(SI(al),n=g.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(IC&&null!==nC&&0!==(1&g.mode)&&0===(128&g.flags))sC(),AC(),g.flags|=98560,l=!1;else if(l=iC(g),null!==n&&null!==n.dehydrated){if(null===e){if(!l)throw Error(C(318));if(!(l=null!==(l=g.memoizedState)?l.dehydrated:null))throw Error(C(317));l[sI]=g}else AC(),0===(128&g.flags)&&(g.memoizedState=null),g.flags|=4;La(g),l=!1}else null!==CC&&(ar(CC),CC=null),l=!0;if(!l)return 65536&g.flags?g:null}return 0!==(128&g.flags)?(g.lanes=t,g):((n=null!==n)!==(null!==e&&null!==e.memoizedState)&&n&&(g.child.flags|=8192,0!==(1&g.mode)&&(null===e||0!==(1&al.current)?0===wo&&(wo=3):mr())),null!==g.updateQueue&&(g.flags|=4),La(g),null);case 4:return Il(),Ja(e,g),null===e&&Mn(g.stateNode.containerInfo),La(g),null;case 10:return yC(g.type._context),La(g),null;case 19:if(SI(al),null===(l=g.memoizedState))return La(g),null;if(n=0!==(128&g.flags),null===(o=l.rendering))if(n)Qa(l,!1);else{if(0!==wo||null!==e&&0!==(128&e.flags))for(e=g.child;null!==e;){if(null!==(o=ol(e))){for(g.flags|=128,Qa(l,!1),null!==(n=o.updateQueue)&&(g.updateQueue=n,g.flags|=4),g.subtreeFlags=0,n=t,t=g.child;null!==t;)e=n,(l=t).flags&=14680066,null===(o=l.alternate)?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=o.childLanes,l.lanes=o.lanes,l.child=o.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=o.memoizedProps,l.memoizedState=o.memoizedState,l.updateQueue=o.updateQueue,l.type=o.type,e=o.dependencies,l.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),t=t.sibling;return vI(al,1&al.current|2),g.child}e=e.sibling}null!==l.tail&&_e()>Uo&&(g.flags|=128,n=!0,Qa(l,!1),g.lanes=4194304)}else{if(!n)if(null!==(e=ol(o))){if(g.flags|=128,n=!0,null!==(t=e.updateQueue)&&(g.updateQueue=t,g.flags|=4),Qa(l,!0),null===l.tail&&"hidden"===l.tailMode&&!o.alternate&&!IC)return La(g),null}else 2*_e()-l.renderingStartTime>Uo&&1073741824!==t&&(g.flags|=128,n=!0,Qa(l,!1),g.lanes=4194304);l.isBackwards?(o.sibling=g.child,g.child=o):(null!==(t=l.last)?t.sibling=o:g.child=o,l.last=o)}return null!==l.tail?(g=l.tail,l.rendering=g,l.tail=g.sibling,l.renderingStartTime=_e(),g.sibling=null,t=al.current,vI(al,n?1&t|2:1&t),g):(La(g),null);case 22:case 23:return sr(),n=null!==g.memoizedState,null!==e&&null!==e.memoizedState!==n&&(g.flags|=8192),n&&0!==(1&g.mode)?0!==(1073741824&Yo)&&(La(g),6&g.subtreeFlags&&(g.flags|=8192)):La(g),null;case 24:case 25:return null}throw Error(C(156,g.tag))}function ja(e,g){switch(gC(g),g.tag){case 1:return JI(g.type)&&YI(),65536&(e=g.flags)?(g.flags=-65537&e|128,g):null;case 3:return Il(),SI(RI),SI(VI),cl(),0!==(65536&(e=g.flags))&&0===(128&e)?(g.flags=-65537&e|128,g):null;case 5:return ll(g),null;case 13:if(SI(al),null!==(e=g.memoizedState)&&null!==e.dehydrated){if(null===g.alternate)throw Error(C(340));AC()}return 65536&(e=g.flags)?(g.flags=-65537&e|128,g):null;case 19:return SI(al),null;case 4:return Il(),null;case 10:return yC(g.type._context),null;case 22:case 23:return sr(),null;default:return null}}Xa=function(e,g){for(var t=g.child;null!==t;){if(5===t.tag||6===t.tag)e.appendChild(t.stateNode);else if(4!==t.tag&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===g)break;for(;null===t.sibling;){if(null===t.return||t.return===g)return;t=t.return}t.sibling.return=t.return,t=t.sibling}},Ja=function(){},Ya=function(e,g,t,n){var I=e.memoizedProps;if(I!==n){e=g.stateNode,tl($C.current);var C,l=null;switch(t){case"input":I=O(e,I),n=O(e,n),l=[];break;case"select":I=K({},I,{value:void 0}),n=K({},n,{value:void 0}),l=[];break;case"textarea":I=ne(e,I),n=ne(e,n),l=[];break;default:"function"!==typeof I.onClick&&"function"===typeof n.onClick&&(e.onclick=$n)}for(c in Ze(t,n),t=null,I)if(!n.hasOwnProperty(c)&&I.hasOwnProperty(c)&&null!=I[c])if("style"===c){var o=I[c];for(C in o)o.hasOwnProperty(C)&&(t||(t={}),t[C]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(a.hasOwnProperty(c)?l||(l=[]):(l=l||[]).push(c,null));for(c in n){var r=n[c];if(o=null!=I?I[c]:void 0,n.hasOwnProperty(c)&&r!==o&&(null!=r||null!=o))if("style"===c)if(o){for(C in o)!o.hasOwnProperty(C)||r&&r.hasOwnProperty(C)||(t||(t={}),t[C]="");for(C in r)r.hasOwnProperty(C)&&o[C]!==r[C]&&(t||(t={}),t[C]=r[C])}else t||(l||(l=[]),l.push(c,t)),t=r;else"dangerouslySetInnerHTML"===c?(r=r?r.__html:void 0,o=o?o.__html:void 0,null!=r&&o!==r&&(l=l||[]).push(c,r)):"children"===c?"string"!==typeof r&&"number"!==typeof r||(l=l||[]).push(c,""+r):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(a.hasOwnProperty(c)?(null!=r&&"onScroll"===c&&xn("scroll",e),l||o===r||(l=[])):(l=l||[]).push(c,r))}t&&(l=l||[]).push("style",t);var c=l;(g.updateQueue=c)&&(g.flags|=4)}},Ha=function(e,g,t,n){t!==n&&(g.flags|=4)};var Oa=!1,Pa=!1,_a="function"===typeof WeakSet?WeakSet:Set,qa=null;function $a(e,g){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){Sr(e,g,n)}else t.current=null}function eo(e,g,t){try{t()}catch(n){Sr(e,g,n)}}var go=!1;function to(e,g,t){var n=g.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var I=n=n.next;do{if((I.tag&e)===e){var C=I.destroy;I.destroy=void 0,void 0!==C&&eo(g,t,C)}I=I.next}while(I!==n)}}function no(e,g){if(null!==(g=null!==(g=g.updateQueue)?g.lastEffect:null)){var t=g=g.next;do{if((t.tag&e)===e){var n=t.create;t.destroy=n()}t=t.next}while(t!==g)}}function Io(e){var g=e.ref;if(null!==g){var t=e.stateNode;e.tag,e=t,"function"===typeof g?g(e):g.current=e}}function Co(e){var g=e.alternate;null!==g&&(e.alternate=null,Co(g)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(g=e.stateNode)&&(delete g[sI],delete g[AI],delete g[uI],delete g[mI],delete g[bI])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function lo(e){return 5===e.tag||3===e.tag||4===e.tag}function ao(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||lo(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function oo(e,g,t){var n=e.tag;if(5===n||6===n)e=e.stateNode,g?8===t.nodeType?t.parentNode.insertBefore(e,g):t.insertBefore(e,g):(8===t.nodeType?(g=t.parentNode).insertBefore(e,t):(g=t).appendChild(e),null!==(t=t._reactRootContainer)&&void 0!==t||null!==g.onclick||(g.onclick=$n));else if(4!==n&&null!==(e=e.child))for(oo(e,g,t),e=e.sibling;null!==e;)oo(e,g,t),e=e.sibling}function ro(e,g,t){var n=e.tag;if(5===n||6===n)e=e.stateNode,g?t.insertBefore(e,g):t.appendChild(e);else if(4!==n&&null!==(e=e.child))for(ro(e,g,t),e=e.sibling;null!==e;)ro(e,g,t),e=e.sibling}var co=null,io=!1;function so(e,g,t){for(t=t.child;null!==t;)Ao(e,g,t),t=t.sibling}function Ao(e,g,t){if(Cg&&"function"===typeof Cg.onCommitFiberUnmount)try{Cg.onCommitFiberUnmount(Ig,t)}catch(a){}switch(t.tag){case 5:Pa||$a(t,g);case 6:var n=co,I=io;co=null,so(e,g,t),io=I,null!==(co=n)&&(io?(e=co,t=t.stateNode,8===e.nodeType?e.parentNode.removeChild(t):e.removeChild(t)):co.removeChild(t.stateNode));break;case 18:null!==co&&(io?(e=co,t=t.stateNode,8===e.nodeType?oI(e.parentNode,t):1===e.nodeType&&oI(e,t),Mg(e)):oI(co,t.stateNode));break;case 4:n=co,I=io,co=t.stateNode.containerInfo,io=!0,so(e,g,t),co=n,io=I;break;case 0:case 11:case 14:case 15:if(!Pa&&(null!==(n=t.updateQueue)&&null!==(n=n.lastEffect))){I=n=n.next;do{var C=I,l=C.destroy;C=C.tag,void 0!==l&&(0!==(2&C)||0!==(4&C))&&eo(t,g,l),I=I.next}while(I!==n)}so(e,g,t);break;case 1:if(!Pa&&($a(t,g),"function"===typeof(n=t.stateNode).componentWillUnmount))try{n.props=t.memoizedProps,n.state=t.memoizedState,n.componentWillUnmount()}catch(a){Sr(t,g,a)}so(e,g,t);break;case 21:so(e,g,t);break;case 22:1&t.mode?(Pa=(n=Pa)||null!==t.memoizedState,so(e,g,t),Pa=n):so(e,g,t);break;default:so(e,g,t)}}function uo(e){var g=e.updateQueue;if(null!==g){e.updateQueue=null;var t=e.stateNode;null===t&&(t=e.stateNode=new _a),g.forEach((function(g){var n=Rr.bind(null,e,g);t.has(g)||(t.add(g),g.then(n,n))}))}}function mo(e,g){var t=g.deletions;if(null!==t)for(var n=0;n<t.length;n++){var I=t[n];try{var l=e,a=g,o=a;e:for(;null!==o;){switch(o.tag){case 5:co=o.stateNode,io=!1;break e;case 3:case 4:co=o.stateNode.containerInfo,io=!0;break e}o=o.return}if(null===co)throw Error(C(160));Ao(l,a,I),co=null,io=!1;var r=I.alternate;null!==r&&(r.return=null),I.return=null}catch(c){Sr(I,g,c)}}if(12854&g.subtreeFlags)for(g=g.child;null!==g;)bo(g,e),g=g.sibling}function bo(e,g){var t=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(mo(g,e),Zo(e),4&n){try{to(3,e,e.return),no(3,e)}catch(m){Sr(e,e.return,m)}try{to(5,e,e.return)}catch(m){Sr(e,e.return,m)}}break;case 1:mo(g,e),Zo(e),512&n&&null!==t&&$a(t,t.return);break;case 5:if(mo(g,e),Zo(e),512&n&&null!==t&&$a(t,t.return),32&e.flags){var I=e.stateNode;try{se(I,"")}catch(m){Sr(e,e.return,m)}}if(4&n&&null!=(I=e.stateNode)){var l=e.memoizedProps,a=null!==t?t.memoizedProps:l,o=e.type,r=e.updateQueue;if(e.updateQueue=null,null!==r)try{"input"===o&&"radio"===l.type&&null!=l.name&&_(I,l),he(o,a);var c=he(o,l);for(a=0;a<r.length;a+=2){var i=r[a],s=r[a+1];"style"===i?me(I,s):"dangerouslySetInnerHTML"===i?ie(I,s):"children"===i?se(I,s):h(I,i,s,c)}switch(o){case"input":q(I,l);break;case"textarea":Ce(I,l);break;case"select":var A=I._wrapperState.wasMultiple;I._wrapperState.wasMultiple=!!l.multiple;var d=l.value;null!=d?te(I,!!l.multiple,d,!1):A!==!!l.multiple&&(null!=l.defaultValue?te(I,!!l.multiple,l.defaultValue,!0):te(I,!!l.multiple,l.multiple?[]:"",!1))}I[AI]=l}catch(m){Sr(e,e.return,m)}}break;case 6:if(mo(g,e),Zo(e),4&n){if(null===e.stateNode)throw Error(C(162));I=e.stateNode,l=e.memoizedProps;try{I.nodeValue=l}catch(m){Sr(e,e.return,m)}}break;case 3:if(mo(g,e),Zo(e),4&n&&null!==t&&t.memoizedState.isDehydrated)try{Mg(g.containerInfo)}catch(m){Sr(e,e.return,m)}break;case 4:default:mo(g,e),Zo(e);break;case 13:mo(g,e),Zo(e),8192&(I=e.child).flags&&(l=null!==I.memoizedState,I.stateNode.isHidden=l,!l||null!==I.alternate&&null!==I.alternate.memoizedState||(Mo=_e())),4&n&&uo(e);break;case 22:if(i=null!==t&&null!==t.memoizedState,1&e.mode?(Pa=(c=Pa)||i,mo(g,e),Pa=c):mo(g,e),Zo(e),8192&n){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!i&&0!==(1&e.mode))for(qa=e,i=e.child;null!==i;){for(s=qa=i;null!==qa;){switch(d=(A=qa).child,A.tag){case 0:case 11:case 14:case 15:to(4,A,A.return);break;case 1:$a(A,A.return);var u=A.stateNode;if("function"===typeof u.componentWillUnmount){n=A,t=A.return;try{g=n,u.props=g.memoizedProps,u.state=g.memoizedState,u.componentWillUnmount()}catch(m){Sr(n,t,m)}}break;case 5:$a(A,A.return);break;case 22:if(null!==A.memoizedState){yo(s);continue}}null!==d?(d.return=A,qa=d):yo(s)}i=i.sibling}e:for(i=null,s=e;;){if(5===s.tag){if(null===i){i=s;try{I=s.stateNode,c?"function"===typeof(l=I.style).setProperty?l.setProperty("display","none","important"):l.display="none":(o=s.stateNode,a=void 0!==(r=s.memoizedProps.style)&&null!==r&&r.hasOwnProperty("display")?r.display:null,o.style.display=ue("display",a))}catch(m){Sr(e,e.return,m)}}}else if(6===s.tag){if(null===i)try{s.stateNode.nodeValue=c?"":s.memoizedProps}catch(m){Sr(e,e.return,m)}}else if((22!==s.tag&&23!==s.tag||null===s.memoizedState||s===e)&&null!==s.child){s.child.return=s,s=s.child;continue}if(s===e)break e;for(;null===s.sibling;){if(null===s.return||s.return===e)break e;i===s&&(i=null),s=s.return}i===s&&(i=null),s.sibling.return=s.return,s=s.sibling}}break;case 19:mo(g,e),Zo(e),4&n&&uo(e);case 21:}}function Zo(e){var g=e.flags;if(2&g){try{e:{for(var t=e.return;null!==t;){if(lo(t)){var n=t;break e}t=t.return}throw Error(C(160))}switch(n.tag){case 5:var I=n.stateNode;32&n.flags&&(se(I,""),n.flags&=-33),ro(e,ao(e),I);break;case 3:case 4:var l=n.stateNode.containerInfo;oo(e,ao(e),l);break;default:throw Error(C(161))}}catch(a){Sr(e,e.return,a)}e.flags&=-3}4096&g&&(e.flags&=-4097)}function ho(e,g,t){qa=e,po(e,g,t)}function po(e,g,t){for(var n=0!==(1&e.mode);null!==qa;){var I=qa,C=I.child;if(22===I.tag&&n){var l=null!==I.memoizedState||Oa;if(!l){var a=I.alternate,o=null!==a&&null!==a.memoizedState||Pa;a=Oa;var r=Pa;if(Oa=l,(Pa=o)&&!r)for(qa=I;null!==qa;)o=(l=qa).child,22===l.tag&&null!==l.memoizedState?Bo(I):null!==o?(o.return=l,qa=o):Bo(I);for(;null!==C;)qa=C,po(C,g,t),C=C.sibling;qa=I,Oa=a,Pa=r}Go(e)}else 0!==(8772&I.subtreeFlags)&&null!==C?(C.return=I,qa=C):Go(e)}}function Go(e){for(;null!==qa;){var g=qa;if(0!==(8772&g.flags)){var t=g.alternate;try{if(0!==(8772&g.flags))switch(g.tag){case 0:case 11:case 15:Pa||no(5,g);break;case 1:var n=g.stateNode;if(4&g.flags&&!Pa)if(null===t)n.componentDidMount();else{var I=g.elementType===g.type?t.memoizedProps:mC(g.type,t.memoizedProps);n.componentDidUpdate(I,t.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var l=g.updateQueue;null!==l&&FC(g,l,n);break;case 3:var a=g.updateQueue;if(null!==a){if(t=null,null!==g.child)switch(g.child.tag){case 5:case 1:t=g.child.stateNode}FC(g,a,t)}break;case 5:var o=g.stateNode;if(null===t&&4&g.flags){t=o;var r=g.memoizedProps;switch(g.type){case"button":case"input":case"select":case"textarea":r.autoFocus&&t.focus();break;case"img":r.src&&(t.src=r.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===g.memoizedState){var c=g.alternate;if(null!==c){var i=c.memoizedState;if(null!==i){var s=i.dehydrated;null!==s&&Mg(s)}}}break;default:throw Error(C(163))}Pa||512&g.flags&&Io(g)}catch(A){Sr(g,g.return,A)}}if(g===e){qa=null;break}if(null!==(t=g.sibling)){t.return=g.return,qa=t;break}qa=g.return}}function yo(e){for(;null!==qa;){var g=qa;if(g===e){qa=null;break}var t=g.sibling;if(null!==t){t.return=g.return,qa=t;break}qa=g.return}}function Bo(e){for(;null!==qa;){var g=qa;try{switch(g.tag){case 0:case 11:case 15:var t=g.return;try{no(4,g)}catch(o){Sr(g,t,o)}break;case 1:var n=g.stateNode;if("function"===typeof n.componentDidMount){var I=g.return;try{n.componentDidMount()}catch(o){Sr(g,I,o)}}var C=g.return;try{Io(g)}catch(o){Sr(g,C,o)}break;case 5:var l=g.return;try{Io(g)}catch(o){Sr(g,l,o)}}}catch(o){Sr(g,g.return,o)}if(g===e){qa=null;break}var a=g.sibling;if(null!==a){a.return=g.return,qa=a;break}qa=g.return}}var fo,So=Math.ceil,vo=p.ReactCurrentDispatcher,Wo=p.ReactCurrentOwner,Vo=p.ReactCurrentBatchConfig,Ro=0,ko=null,Xo=null,Jo=0,Yo=0,Ho=fI(0),wo=0,No=null,Ko=0,Fo=0,xo=0,Eo=null,zo=null,Mo=0,Uo=1/0,Do=null,Qo=!1,Lo=null,To=null,jo=!1,Oo=null,Po=0,_o=0,qo=null,$o=-1,er=0;function gr(){return 0!==(6&Ro)?_e():-1!==$o?$o:$o=_e()}function tr(e){return 0===(1&e.mode)?1:0!==(2&Ro)&&0!==Jo?Jo&-Jo:null!==uC.transition?(0===er&&(er=ug()),er):0!==(e=hg)?e:e=void 0===(e=window.event)?16:Pg(e.type)}function nr(e,g,t,n){if(50<_o)throw _o=0,qo=null,Error(C(185));bg(e,t,n),0!==(2&Ro)&&e===ko||(e===ko&&(0===(2&Ro)&&(Fo|=t),4===wo&&or(e,Jo)),Ir(e,n),1===t&&0===Ro&&0===(1&g.mode)&&(Uo=_e()+500,xI&&MI()))}function Ir(e,g){var t=e.callbackNode;!function(e,g){for(var t=e.suspendedLanes,n=e.pingedLanes,I=e.expirationTimes,C=e.pendingLanes;0<C;){var l=31-lg(C),a=1<<l,o=I[l];-1===o?0!==(a&t)&&0===(a&n)||(I[l]=Ag(a,g)):o<=g&&(e.expiredLanes|=a),C&=~a}}(e,g);var n=sg(e,e===ko?Jo:0);if(0===n)null!==t&&je(t),e.callbackNode=null,e.callbackPriority=0;else if(g=n&-n,e.callbackPriority!==g){if(null!=t&&je(t),1===g)0===e.tag?function(e){xI=!0,zI(e)}(rr.bind(null,e)):zI(rr.bind(null,e)),lI((function(){0===(6&Ro)&&MI()})),t=null;else{switch(pg(n)){case 1:t=$e;break;case 4:t=eg;break;case 16:default:t=gg;break;case 536870912:t=ng}t=kr(t,Cr.bind(null,e))}e.callbackPriority=g,e.callbackNode=t}}function Cr(e,g){if($o=-1,er=0,0!==(6&Ro))throw Error(C(327));var t=e.callbackNode;if(Br()&&e.callbackNode!==t)return null;var n=sg(e,e===ko?Jo:0);if(0===n)return null;if(0!==(30&n)||0!==(n&e.expiredLanes)||g)g=br(e,n);else{g=n;var I=Ro;Ro|=2;var l=ur();for(ko===e&&Jo===g||(Do=null,Uo=_e()+500,Ar(e,g));;)try{hr();break}catch(o){dr(e,o)}GC(),vo.current=l,Ro=I,null!==Xo?g=0:(ko=null,Jo=0,g=wo)}if(0!==g){if(2===g&&(0!==(I=dg(e))&&(n=I,g=lr(e,I))),1===g)throw t=No,Ar(e,0),or(e,n),Ir(e,_e()),t;if(6===g)or(e,n);else{if(I=e.current.alternate,0===(30&n)&&!function(e){for(var g=e;;){if(16384&g.flags){var t=g.updateQueue;if(null!==t&&null!==(t=t.stores))for(var n=0;n<t.length;n++){var I=t[n],C=I.getSnapshot;I=I.value;try{if(!ln(C(),I))return!1}catch(a){return!1}}}if(t=g.child,16384&g.subtreeFlags&&null!==t)t.return=g,g=t;else{if(g===e)break;for(;null===g.sibling;){if(null===g.return||g.return===e)return!0;g=g.return}g.sibling.return=g.return,g=g.sibling}}return!0}(I)&&(2===(g=br(e,n))&&(0!==(l=dg(e))&&(n=l,g=lr(e,l))),1===g))throw t=No,Ar(e,0),or(e,n),Ir(e,_e()),t;switch(e.finishedWork=I,e.finishedLanes=n,g){case 0:case 1:throw Error(C(345));case 2:case 5:yr(e,zo,Do);break;case 3:if(or(e,n),(130023424&n)===n&&10<(g=Mo+500-_e())){if(0!==sg(e,0))break;if(((I=e.suspendedLanes)&n)!==n){gr(),e.pingedLanes|=e.suspendedLanes&I;break}e.timeoutHandle=nI(yr.bind(null,e,zo,Do),g);break}yr(e,zo,Do);break;case 4:if(or(e,n),(4194240&n)===n)break;for(g=e.eventTimes,I=-1;0<n;){var a=31-lg(n);l=1<<a,(a=g[a])>I&&(I=a),n&=~l}if(n=I,10<(n=(120>(n=_e()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*So(n/1960))-n)){e.timeoutHandle=nI(yr.bind(null,e,zo,Do),n);break}yr(e,zo,Do);break;default:throw Error(C(329))}}}return Ir(e,_e()),e.callbackNode===t?Cr.bind(null,e):null}function lr(e,g){var t=Eo;return e.current.memoizedState.isDehydrated&&(Ar(e,g).flags|=256),2!==(e=br(e,g))&&(g=zo,zo=t,null!==g&&ar(g)),e}function ar(e){null===zo?zo=e:zo.push.apply(zo,e)}function or(e,g){for(g&=~xo,g&=~Fo,e.suspendedLanes|=g,e.pingedLanes&=~g,e=e.expirationTimes;0<g;){var t=31-lg(g),n=1<<t;e[t]=-1,g&=~n}}function rr(e){if(0!==(6&Ro))throw Error(C(327));Br();var g=sg(e,0);if(0===(1&g))return Ir(e,_e()),null;var t=br(e,g);if(0!==e.tag&&2===t){var n=dg(e);0!==n&&(g=n,t=lr(e,n))}if(1===t)throw t=No,Ar(e,0),or(e,g),Ir(e,_e()),t;if(6===t)throw Error(C(345));return e.finishedWork=e.current.alternate,e.finishedLanes=g,yr(e,zo,Do),Ir(e,_e()),null}function cr(e,g){var t=Ro;Ro|=1;try{return e(g)}finally{0===(Ro=t)&&(Uo=_e()+500,xI&&MI())}}function ir(e){null!==Oo&&0===Oo.tag&&0===(6&Ro)&&Br();var g=Ro;Ro|=1;var t=Vo.transition,n=hg;try{if(Vo.transition=null,hg=1,e)return e()}finally{hg=n,Vo.transition=t,0===(6&(Ro=g))&&MI()}}function sr(){Yo=Ho.current,SI(Ho)}function Ar(e,g){e.finishedWork=null,e.finishedLanes=0;var t=e.timeoutHandle;if(-1!==t&&(e.timeoutHandle=-1,II(t)),null!==Xo)for(t=Xo.return;null!==t;){var n=t;switch(gC(n),n.tag){case 1:null!==(n=n.type.childContextTypes)&&void 0!==n&&YI();break;case 3:Il(),SI(RI),SI(VI),cl();break;case 5:ll(n);break;case 4:Il();break;case 13:case 19:SI(al);break;case 10:yC(n.type._context);break;case 22:case 23:sr()}t=t.return}if(ko=e,Xo=e=Hr(e.current,null),Jo=Yo=g,wo=0,No=null,xo=Fo=Ko=0,zo=Eo=null,null!==vC){for(g=0;g<vC.length;g++)if(null!==(n=(t=vC[g]).interleaved)){t.interleaved=null;var I=n.next,C=t.pending;if(null!==C){var l=C.next;C.next=I,n.next=l}t.pending=n}vC=null}return e}function dr(e,g){for(;;){var t=Xo;try{if(GC(),il.current=Ca,bl){for(var n=dl.memoizedState;null!==n;){var I=n.queue;null!==I&&(I.pending=null),n=n.next}bl=!1}if(Al=0,ml=ul=dl=null,Zl=!1,hl=0,Wo.current=null,null===t||null===t.return){wo=1,No=g,Xo=null;break}e:{var l=e,a=t.return,o=t,r=g;if(g=Jo,o.flags|=32768,null!==r&&"object"===typeof r&&"function"===typeof r.then){var c=r,i=o,s=i.tag;if(0===(1&i.mode)&&(0===s||11===s||15===s)){var A=i.alternate;A?(i.updateQueue=A.updateQueue,i.memoizedState=A.memoizedState,i.lanes=A.lanes):(i.updateQueue=null,i.memoizedState=null)}var d=ma(a);if(null!==d){d.flags&=-257,ba(d,a,o,0,g),1&d.mode&&ua(l,c,g),r=c;var u=(g=d).updateQueue;if(null===u){var m=new Set;m.add(r),g.updateQueue=m}else u.add(r);break e}if(0===(1&g)){ua(l,c,g),mr();break e}r=Error(C(426))}else if(IC&&1&o.mode){var b=ma(a);if(null!==b){0===(65536&b.flags)&&(b.flags|=256),ba(b,a,o,0,g),dC(ra(r,o));break e}}l=r=ra(r,o),4!==wo&&(wo=2),null===Eo?Eo=[l]:Eo.push(l),l=a;do{switch(l.tag){case 3:l.flags|=65536,g&=-g,l.lanes|=g,NC(l,Aa(0,r,g));break e;case 1:o=r;var Z=l.type,h=l.stateNode;if(0===(128&l.flags)&&("function"===typeof Z.getDerivedStateFromError||null!==h&&"function"===typeof h.componentDidCatch&&(null===To||!To.has(h)))){l.flags|=65536,g&=-g,l.lanes|=g,NC(l,da(l,o,g));break e}}l=l.return}while(null!==l)}Gr(t)}catch(p){g=p,Xo===t&&null!==t&&(Xo=t=t.return);continue}break}}function ur(){var e=vo.current;return vo.current=Ca,null===e?Ca:e}function mr(){0!==wo&&3!==wo&&2!==wo||(wo=4),null===ko||0===(268435455&Ko)&&0===(268435455&Fo)||or(ko,Jo)}function br(e,g){var t=Ro;Ro|=2;var n=ur();for(ko===e&&Jo===g||(Do=null,Ar(e,g));;)try{Zr();break}catch(I){dr(e,I)}if(GC(),Ro=t,vo.current=n,null!==Xo)throw Error(C(261));return ko=null,Jo=0,wo}function Zr(){for(;null!==Xo;)pr(Xo)}function hr(){for(;null!==Xo&&!Oe();)pr(Xo)}function pr(e){var g=fo(e.alternate,e,Yo);e.memoizedProps=e.pendingProps,null===g?Gr(e):Xo=g,Wo.current=null}function Gr(e){var g=e;do{var t=g.alternate;if(e=g.return,0===(32768&g.flags)){if(null!==(t=Ta(t,g,Yo)))return void(Xo=t)}else{if(null!==(t=ja(t,g)))return t.flags&=32767,void(Xo=t);if(null===e)return wo=6,void(Xo=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(g=g.sibling))return void(Xo=g);Xo=g=e}while(null!==g);0===wo&&(wo=5)}function yr(e,g,t){var n=hg,I=Vo.transition;try{Vo.transition=null,hg=1,function(e,g,t,n){do{Br()}while(null!==Oo);if(0!==(6&Ro))throw Error(C(327));t=e.finishedWork;var I=e.finishedLanes;if(null===t)return null;if(e.finishedWork=null,e.finishedLanes=0,t===e.current)throw Error(C(177));e.callbackNode=null,e.callbackPriority=0;var l=t.lanes|t.childLanes;if(function(e,g){var t=e.pendingLanes&~g;e.pendingLanes=g,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=g,e.mutableReadLanes&=g,e.entangledLanes&=g,g=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<t;){var I=31-lg(t),C=1<<I;g[I]=0,n[I]=-1,e[I]=-1,t&=~C}}(e,l),e===ko&&(Xo=ko=null,Jo=0),0===(2064&t.subtreeFlags)&&0===(2064&t.flags)||jo||(jo=!0,kr(gg,(function(){return Br(),null}))),l=0!==(15990&t.flags),0!==(15990&t.subtreeFlags)||l){l=Vo.transition,Vo.transition=null;var a=hg;hg=1;var o=Ro;Ro|=4,Wo.current=null,function(e,g){if(eI=Dg,An(e=sn())){if("selectionStart"in e)var t={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(t=(t=e.ownerDocument)&&t.defaultView||window).getSelection&&t.getSelection();if(n&&0!==n.rangeCount){t=n.anchorNode;var I=n.anchorOffset,l=n.focusNode;n=n.focusOffset;try{t.nodeType,l.nodeType}catch(G){t=null;break e}var a=0,o=-1,r=-1,c=0,i=0,s=e,A=null;g:for(;;){for(var d;s!==t||0!==I&&3!==s.nodeType||(o=a+I),s!==l||0!==n&&3!==s.nodeType||(r=a+n),3===s.nodeType&&(a+=s.nodeValue.length),null!==(d=s.firstChild);)A=s,s=d;for(;;){if(s===e)break g;if(A===t&&++c===I&&(o=a),A===l&&++i===n&&(r=a),null!==(d=s.nextSibling))break;A=(s=A).parentNode}s=d}t=-1===o||-1===r?null:{start:o,end:r}}else t=null}t=t||{start:0,end:0}}else t=null;for(gI={focusedElem:e,selectionRange:t},Dg=!1,qa=g;null!==qa;)if(e=(g=qa).child,0!==(1028&g.subtreeFlags)&&null!==e)e.return=g,qa=e;else for(;null!==qa;){g=qa;try{var u=g.alternate;if(0!==(1024&g.flags))switch(g.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==u){var m=u.memoizedProps,b=u.memoizedState,Z=g.stateNode,h=Z.getSnapshotBeforeUpdate(g.elementType===g.type?m:mC(g.type,m),b);Z.__reactInternalSnapshotBeforeUpdate=h}break;case 3:var p=g.stateNode.containerInfo;1===p.nodeType?p.textContent="":9===p.nodeType&&p.documentElement&&p.removeChild(p.documentElement);break;default:throw Error(C(163))}}catch(G){Sr(g,g.return,G)}if(null!==(e=g.sibling)){e.return=g.return,qa=e;break}qa=g.return}u=go,go=!1}(e,t),bo(t,e),dn(gI),Dg=!!eI,gI=eI=null,e.current=t,ho(t,e,I),Pe(),Ro=o,hg=a,Vo.transition=l}else e.current=t;if(jo&&(jo=!1,Oo=e,Po=I),l=e.pendingLanes,0===l&&(To=null),function(e){if(Cg&&"function"===typeof Cg.onCommitFiberRoot)try{Cg.onCommitFiberRoot(Ig,e,void 0,128===(128&e.current.flags))}catch(g){}}(t.stateNode),Ir(e,_e()),null!==g)for(n=e.onRecoverableError,t=0;t<g.length;t++)I=g[t],n(I.value,{componentStack:I.stack,digest:I.digest});if(Qo)throw Qo=!1,e=Lo,Lo=null,e;0!==(1&Po)&&0!==e.tag&&Br(),l=e.pendingLanes,0!==(1&l)?e===qo?_o++:(_o=0,qo=e):_o=0,MI()}(e,g,t,n)}finally{Vo.transition=I,hg=n}return null}function Br(){if(null!==Oo){var e=pg(Po),g=Vo.transition,t=hg;try{if(Vo.transition=null,hg=16>e?16:e,null===Oo)var n=!1;else{if(e=Oo,Oo=null,Po=0,0!==(6&Ro))throw Error(C(331));var I=Ro;for(Ro|=4,qa=e.current;null!==qa;){var l=qa,a=l.child;if(0!==(16&qa.flags)){var o=l.deletions;if(null!==o){for(var r=0;r<o.length;r++){var c=o[r];for(qa=c;null!==qa;){var i=qa;switch(i.tag){case 0:case 11:case 15:to(8,i,l)}var s=i.child;if(null!==s)s.return=i,qa=s;else for(;null!==qa;){var A=(i=qa).sibling,d=i.return;if(Co(i),i===c){qa=null;break}if(null!==A){A.return=d,qa=A;break}qa=d}}}var u=l.alternate;if(null!==u){var m=u.child;if(null!==m){u.child=null;do{var b=m.sibling;m.sibling=null,m=b}while(null!==m)}}qa=l}}if(0!==(2064&l.subtreeFlags)&&null!==a)a.return=l,qa=a;else e:for(;null!==qa;){if(0!==(2048&(l=qa).flags))switch(l.tag){case 0:case 11:case 15:to(9,l,l.return)}var Z=l.sibling;if(null!==Z){Z.return=l.return,qa=Z;break e}qa=l.return}}var h=e.current;for(qa=h;null!==qa;){var p=(a=qa).child;if(0!==(2064&a.subtreeFlags)&&null!==p)p.return=a,qa=p;else e:for(a=h;null!==qa;){if(0!==(2048&(o=qa).flags))try{switch(o.tag){case 0:case 11:case 15:no(9,o)}}catch(y){Sr(o,o.return,y)}if(o===a){qa=null;break e}var G=o.sibling;if(null!==G){G.return=o.return,qa=G;break e}qa=o.return}}if(Ro=I,MI(),Cg&&"function"===typeof Cg.onPostCommitFiberRoot)try{Cg.onPostCommitFiberRoot(Ig,e)}catch(y){}n=!0}return n}finally{hg=t,Vo.transition=g}}return!1}function fr(e,g,t){e=HC(e,g=Aa(0,g=ra(t,g),1),1),g=gr(),null!==e&&(bg(e,1,g),Ir(e,g))}function Sr(e,g,t){if(3===e.tag)fr(e,e,t);else for(;null!==g;){if(3===g.tag){fr(g,e,t);break}if(1===g.tag){var n=g.stateNode;if("function"===typeof g.type.getDerivedStateFromError||"function"===typeof n.componentDidCatch&&(null===To||!To.has(n))){g=HC(g,e=da(g,e=ra(t,e),1),1),e=gr(),null!==g&&(bg(g,1,e),Ir(g,e));break}}g=g.return}}function vr(e,g,t){var n=e.pingCache;null!==n&&n.delete(g),g=gr(),e.pingedLanes|=e.suspendedLanes&t,ko===e&&(Jo&t)===t&&(4===wo||3===wo&&(130023424&Jo)===Jo&&500>_e()-Mo?Ar(e,0):xo|=t),Ir(e,g)}function Wr(e,g){0===g&&(0===(1&e.mode)?g=1:(g=cg,0===(130023424&(cg<<=1))&&(cg=4194304)));var t=gr();null!==(e=RC(e,g))&&(bg(e,g,t),Ir(e,t))}function Vr(e){var g=e.memoizedState,t=0;null!==g&&(t=g.retryLane),Wr(e,t)}function Rr(e,g){var t=0;switch(e.tag){case 13:var n=e.stateNode,I=e.memoizedState;null!==I&&(t=I.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(C(314))}null!==n&&n.delete(g),Wr(e,t)}function kr(e,g){return Te(e,g)}function Xr(e,g,t,n){this.tag=e,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=g,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jr(e,g,t,n){return new Xr(e,g,t,n)}function Yr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Hr(e,g){var t=e.alternate;return null===t?((t=Jr(e.tag,g,e.key,e.mode)).elementType=e.elementType,t.type=e.type,t.stateNode=e.stateNode,t.alternate=e,e.alternate=t):(t.pendingProps=g,t.type=e.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=14680064&e.flags,t.childLanes=e.childLanes,t.lanes=e.lanes,t.child=e.child,t.memoizedProps=e.memoizedProps,t.memoizedState=e.memoizedState,t.updateQueue=e.updateQueue,g=e.dependencies,t.dependencies=null===g?null:{lanes:g.lanes,firstContext:g.firstContext},t.sibling=e.sibling,t.index=e.index,t.ref=e.ref,t}function wr(e,g,t,n,I,l){var a=2;if(n=e,"function"===typeof e)Yr(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case B:return Nr(t.children,I,l,g);case f:a=8,I|=8;break;case S:return(e=Jr(12,t,g,2|I)).elementType=S,e.lanes=l,e;case R:return(e=Jr(13,t,g,I)).elementType=R,e.lanes=l,e;case k:return(e=Jr(19,t,g,I)).elementType=k,e.lanes=l,e;case Y:return Kr(t,I,l,g);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case v:a=10;break e;case W:a=9;break e;case V:a=11;break e;case X:a=14;break e;case J:a=16,n=null;break e}throw Error(C(130,null==e?e:typeof e,""))}return(g=Jr(a,t,g,I)).elementType=e,g.type=n,g.lanes=l,g}function Nr(e,g,t,n){return(e=Jr(7,e,n,g)).lanes=t,e}function Kr(e,g,t,n){return(e=Jr(22,e,n,g)).elementType=Y,e.lanes=t,e.stateNode={isHidden:!1},e}function Fr(e,g,t){return(e=Jr(6,e,null,g)).lanes=t,e}function xr(e,g,t){return(g=Jr(4,null!==e.children?e.children:[],e.key,g)).lanes=t,g.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},g}function Er(e,g,t,n,I){this.tag=g,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mg(0),this.expirationTimes=mg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mg(0),this.identifierPrefix=n,this.onRecoverableError=I,this.mutableSourceEagerHydrationData=null}function zr(e,g,t,n,I,C,l,a,o){return e=new Er(e,g,t,a,o),1===g?(g=1,!0===C&&(g|=8)):g=0,C=Jr(3,null,null,g),e.current=C,C.stateNode=e,C.memoizedState={element:n,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},XC(C),e}function Mr(e){if(!e)return WI;e:{if(Me(e=e._reactInternals)!==e||1!==e.tag)throw Error(C(170));var g=e;do{switch(g.tag){case 3:g=g.stateNode.context;break e;case 1:if(JI(g.type)){g=g.stateNode.__reactInternalMemoizedMergedChildContext;break e}}g=g.return}while(null!==g);throw Error(C(171))}if(1===e.tag){var t=e.type;if(JI(t))return wI(e,t,g)}return g}function Ur(e,g,t,n,I,C,l,a,o){return(e=zr(t,n,!0,e,0,C,0,a,o)).context=Mr(null),t=e.current,(C=YC(n=gr(),I=tr(t))).callback=void 0!==g&&null!==g?g:null,HC(t,C,I),e.current.lanes=I,bg(e,I,n),Ir(e,n),e}function Dr(e,g,t,n){var I=g.current,C=gr(),l=tr(I);return t=Mr(t),null===g.context?g.context=t:g.pendingContext=t,(g=YC(C,l)).payload={element:e},null!==(n=void 0===n?null:n)&&(g.callback=n),null!==(e=HC(I,g,l))&&(nr(e,I,l,C),wC(e,I,l)),l}function Qr(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Lr(e,g){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var t=e.retryLane;e.retryLane=0!==t&&t<g?t:g}}function Tr(e,g){Lr(e,g),(e=e.alternate)&&Lr(e,g)}fo=function(e,g,t){if(null!==e)if(e.memoizedProps!==g.pendingProps||RI.current)ha=!0;else{if(0===(e.lanes&t)&&0===(128&g.flags))return ha=!1,function(e,g,t){switch(g.tag){case 3:Ra(g),AC();break;case 5:Cl(g);break;case 1:JI(g.type)&&NI(g);break;case 4:nl(g,g.stateNode.containerInfo);break;case 10:var n=g.type._context,I=g.memoizedProps.value;vI(bC,n._currentValue),n._currentValue=I;break;case 13:if(null!==(n=g.memoizedState))return null!==n.dehydrated?(vI(al,1&al.current),g.flags|=128,null):0!==(t&g.child.childLanes)?Ka(e,g,t):(vI(al,1&al.current),null!==(e=Da(e,g,t))?e.sibling:null);vI(al,1&al.current);break;case 19:if(n=0!==(t&g.childLanes),0!==(128&e.flags)){if(n)return Ma(e,g,t);g.flags|=128}if(null!==(I=g.memoizedState)&&(I.rendering=null,I.tail=null,I.lastEffect=null),vI(al,al.current),n)break;return null;case 22:case 23:return g.lanes=0,fa(e,g,t)}return Da(e,g,t)}(e,g,t);ha=0!==(131072&e.flags)}else ha=!1,IC&&0!==(1048576&g.flags)&&$I(g,LI,g.index);switch(g.lanes=0,g.tag){case 2:var n=g.type;Ua(e,g),e=g.pendingProps;var I=XI(g,VI.current);fC(g,t),I=Bl(null,g,n,e,I,t);var l=fl();return g.flags|=1,"object"===typeof I&&null!==I&&"function"===typeof I.render&&void 0===I.$$typeof?(g.tag=1,g.memoizedState=null,g.updateQueue=null,JI(n)?(l=!0,NI(g)):l=!1,g.memoizedState=null!==I.state&&void 0!==I.state?I.state:null,XC(g),I.updater=zC,g.stateNode=I,I._reactInternals=g,QC(g,n,e,t),g=Va(null,g,n,!0,l,t)):(g.tag=0,IC&&l&&eC(g),pa(null,g,I,t),g=g.child),g;case 16:n=g.elementType;e:{switch(Ua(e,g),e=g.pendingProps,n=(I=n._init)(n._payload),g.type=n,I=g.tag=function(e){if("function"===typeof e)return Yr(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===V)return 11;if(e===X)return 14}return 2}(n),e=mC(n,e),I){case 0:g=va(null,g,n,e,t);break e;case 1:g=Wa(null,g,n,e,t);break e;case 11:g=Ga(null,g,n,e,t);break e;case 14:g=ya(null,g,n,mC(n.type,e),t);break e}throw Error(C(306,n,""))}return g;case 0:return n=g.type,I=g.pendingProps,va(e,g,n,I=g.elementType===n?I:mC(n,I),t);case 1:return n=g.type,I=g.pendingProps,Wa(e,g,n,I=g.elementType===n?I:mC(n,I),t);case 3:e:{if(Ra(g),null===e)throw Error(C(387));n=g.pendingProps,I=(l=g.memoizedState).element,JC(e,g),KC(g,n,null,t);var a=g.memoizedState;if(n=a.element,l.isDehydrated){if(l={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},g.updateQueue.baseState=l,g.memoizedState=l,256&g.flags){g=ka(e,g,n,t,I=ra(Error(C(423)),g));break e}if(n!==I){g=ka(e,g,n,t,I=ra(Error(C(424)),g));break e}for(nC=rI(g.stateNode.containerInfo.firstChild),tC=g,IC=!0,CC=null,t=_C(g,null,n,t),g.child=t;t;)t.flags=-3&t.flags|4096,t=t.sibling}else{if(AC(),n===I){g=Da(e,g,t);break e}pa(e,g,n,t)}g=g.child}return g;case 5:return Cl(g),null===e&&rC(g),n=g.type,I=g.pendingProps,l=null!==e?e.memoizedProps:null,a=I.children,tI(n,I)?a=null:null!==l&&tI(n,l)&&(g.flags|=32),Sa(e,g),pa(e,g,a,t),g.child;case 6:return null===e&&rC(g),null;case 13:return Ka(e,g,t);case 4:return nl(g,g.stateNode.containerInfo),n=g.pendingProps,null===e?g.child=PC(g,null,n,t):pa(e,g,n,t),g.child;case 11:return n=g.type,I=g.pendingProps,Ga(e,g,n,I=g.elementType===n?I:mC(n,I),t);case 7:return pa(e,g,g.pendingProps,t),g.child;case 8:case 12:return pa(e,g,g.pendingProps.children,t),g.child;case 10:e:{if(n=g.type._context,I=g.pendingProps,l=g.memoizedProps,a=I.value,vI(bC,n._currentValue),n._currentValue=a,null!==l)if(ln(l.value,a)){if(l.children===I.children&&!RI.current){g=Da(e,g,t);break e}}else for(null!==(l=g.child)&&(l.return=g);null!==l;){var o=l.dependencies;if(null!==o){a=l.child;for(var r=o.firstContext;null!==r;){if(r.context===n){if(1===l.tag){(r=YC(-1,t&-t)).tag=2;var c=l.updateQueue;if(null!==c){var i=(c=c.shared).pending;null===i?r.next=r:(r.next=i.next,i.next=r),c.pending=r}}l.lanes|=t,null!==(r=l.alternate)&&(r.lanes|=t),BC(l.return,t,g),o.lanes|=t;break}r=r.next}}else if(10===l.tag)a=l.type===g.type?null:l.child;else if(18===l.tag){if(null===(a=l.return))throw Error(C(341));a.lanes|=t,null!==(o=a.alternate)&&(o.lanes|=t),BC(a,t,g),a=l.sibling}else a=l.child;if(null!==a)a.return=l;else for(a=l;null!==a;){if(a===g){a=null;break}if(null!==(l=a.sibling)){l.return=a.return,a=l;break}a=a.return}l=a}pa(e,g,I.children,t),g=g.child}return g;case 9:return I=g.type,n=g.pendingProps.children,fC(g,t),n=n(I=SC(I)),g.flags|=1,pa(e,g,n,t),g.child;case 14:return I=mC(n=g.type,g.pendingProps),ya(e,g,n,I=mC(n.type,I),t);case 15:return Ba(e,g,g.type,g.pendingProps,t);case 17:return n=g.type,I=g.pendingProps,I=g.elementType===n?I:mC(n,I),Ua(e,g),g.tag=1,JI(n)?(e=!0,NI(g)):e=!1,fC(g,t),UC(g,n,I),QC(g,n,I,t),Va(null,g,n,!0,e,t);case 19:return Ma(e,g,t);case 22:return fa(e,g,t)}throw Error(C(156,g.tag))};var jr="function"===typeof reportError?reportError:function(e){console.error(e)};function Or(e){this._internalRoot=e}function Pr(e){this._internalRoot=e}function _r(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function qr(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function $r(){}function ec(e,g,t,n,I){var C=t._reactRootContainer;if(C){var l=C;if("function"===typeof I){var a=I;I=function(){var e=Qr(l);a.call(e)}}Dr(g,l,e,I)}else l=function(e,g,t,n,I){if(I){if("function"===typeof n){var C=n;n=function(){var e=Qr(l);C.call(e)}}var l=Ur(g,n,e,0,null,!1,0,"",$r);return e._reactRootContainer=l,e[dI]=l.current,Mn(8===e.nodeType?e.parentNode:e),ir(),l}for(;I=e.lastChild;)e.removeChild(I);if("function"===typeof n){var a=n;n=function(){var e=Qr(o);a.call(e)}}var o=zr(e,0,!1,null,0,!1,0,"",$r);return e._reactRootContainer=o,e[dI]=o.current,Mn(8===e.nodeType?e.parentNode:e),ir((function(){Dr(g,o,t,n)})),o}(t,g,e,I,n);return Qr(l)}Pr.prototype.render=Or.prototype.render=function(e){var g=this._internalRoot;if(null===g)throw Error(C(409));Dr(e,g,null,null)},Pr.prototype.unmount=Or.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var g=e.containerInfo;ir((function(){Dr(null,e,null,null)})),g[dI]=null}},Pr.prototype.unstable_scheduleHydration=function(e){if(e){var g=fg();e={blockedOn:null,target:e,priority:g};for(var t=0;t<Yg.length&&0!==g&&g<Yg[t].priority;t++);Yg.splice(t,0,e),0===t&&Kg(e)}},Gg=function(e){switch(e.tag){case 3:var g=e.stateNode;if(g.current.memoizedState.isDehydrated){var t=ig(g.pendingLanes);0!==t&&(Zg(g,1|t),Ir(g,_e()),0===(6&Ro)&&(Uo=_e()+500,MI()))}break;case 13:ir((function(){var g=RC(e,1);if(null!==g){var t=gr();nr(g,e,1,t)}})),Tr(e,1)}},yg=function(e){if(13===e.tag){var g=RC(e,134217728);if(null!==g)nr(g,e,134217728,gr());Tr(e,134217728)}},Bg=function(e){if(13===e.tag){var g=tr(e),t=RC(e,g);if(null!==t)nr(t,e,g,gr());Tr(e,g)}},fg=function(){return hg},Sg=function(e,g){var t=hg;try{return hg=e,g()}finally{hg=t}},ye=function(e,g,t){switch(g){case"input":if(q(e,t),g=t.name,"radio"===t.type&&null!=g){for(t=e;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+g)+'][type="radio"]'),g=0;g<t.length;g++){var n=t[g];if(n!==e&&n.form===e.form){var I=GI(n);if(!I)throw Error(C(90));T(n),q(n,I)}}}break;case"textarea":Ce(e,t);break;case"select":null!=(g=t.value)&&te(e,!!t.multiple,g,!1)}},Ve=cr,Re=ir;var gc={usingClientEntryPoint:!1,Events:[hI,pI,GI,ve,We,cr]},tc={findFiberByHostInstance:ZI,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},nc={bundleType:tc.bundleType,version:tc.version,rendererPackageName:tc.rendererPackageName,rendererConfig:tc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:p.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Qe(e))?null:e.stateNode},findFiberByHostInstance:tc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Ic=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ic.isDisabled&&Ic.supportsFiber)try{Ig=Ic.inject(nc),Cg=Ic}catch(ce){}}g.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gc,g.createPortal=function(e,g){var t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!_r(g))throw Error(C(200));return function(e,g,t){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:y,key:null==n?null:""+n,children:e,containerInfo:g,implementation:t}}(e,g,null,t)},g.createRoot=function(e,g){if(!_r(e))throw Error(C(299));var t=!1,n="",I=jr;return null!==g&&void 0!==g&&(!0===g.unstable_strictMode&&(t=!0),void 0!==g.identifierPrefix&&(n=g.identifierPrefix),void 0!==g.onRecoverableError&&(I=g.onRecoverableError)),g=zr(e,1,!1,null,0,t,0,n,I),e[dI]=g.current,Mn(8===e.nodeType?e.parentNode:e),new Or(g)},g.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var g=e._reactInternals;if(void 0===g){if("function"===typeof e.render)throw Error(C(188));throw e=Object.keys(e).join(","),Error(C(268,e))}return e=null===(e=Qe(g))?null:e.stateNode},g.flushSync=function(e){return ir(e)},g.hydrate=function(e,g,t){if(!qr(g))throw Error(C(200));return ec(null,e,g,!0,t)},g.hydrateRoot=function(e,g,t){if(!_r(e))throw Error(C(405));var n=null!=t&&t.hydratedSources||null,I=!1,l="",a=jr;if(null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(I=!0),void 0!==t.identifierPrefix&&(l=t.identifierPrefix),void 0!==t.onRecoverableError&&(a=t.onRecoverableError)),g=Ur(g,null,e,1,null!=t?t:null,I,0,l,a),e[dI]=g.current,Mn(e),n)for(e=0;e<n.length;e++)I=(I=(t=n[e])._getVersion)(t._source),null==g.mutableSourceEagerHydrationData?g.mutableSourceEagerHydrationData=[t,I]:g.mutableSourceEagerHydrationData.push(t,I);return new Pr(g)},g.render=function(e,g,t){if(!qr(g))throw Error(C(200));return ec(null,e,g,!1,t)},g.unmountComponentAtNode=function(e){if(!qr(e))throw Error(C(40));return!!e._reactRootContainer&&(ir((function(){ec(null,null,e,!1,(function(){e._reactRootContainer=null,e[dI]=null}))})),!0)},g.unstable_batchedUpdates=cr,g.unstable_renderSubtreeIntoContainer=function(e,g,t,n){if(!qr(t))throw Error(C(200));if(null==e||void 0===e._reactInternals)throw Error(C(38));return ec(e,g,t,!1,n)},g.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,g,t){"use strict";var n=t(164);g.createRoot=n.createRoot,g.hydrateRoot=n.hydrateRoot},164:function(e,g,t){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(g){console.error(g)}}(),e.exports=t(463)},372:function(e,g){"use strict";var t=60103,n=60106,I=60107,C=60108,l=60114,a=60109,o=60110,r=60112,c=60113,i=60120,s=60115,A=60116,d=60121,u=60122,m=60117,b=60129,Z=60131;if("function"===typeof Symbol&&Symbol.for){var h=Symbol.for;t=h("react.element"),n=h("react.portal"),I=h("react.fragment"),C=h("react.strict_mode"),l=h("react.profiler"),a=h("react.provider"),o=h("react.context"),r=h("react.forward_ref"),c=h("react.suspense"),i=h("react.suspense_list"),s=h("react.memo"),A=h("react.lazy"),d=h("react.block"),u=h("react.server.block"),m=h("react.fundamental"),b=h("react.debug_trace_mode"),Z=h("react.legacy_hidden")}function p(e){if("object"===typeof e&&null!==e){var g=e.$$typeof;switch(g){case t:switch(e=e.type){case I:case l:case C:case c:case i:return e;default:switch(e=e&&e.$$typeof){case o:case r:case A:case s:case a:return e;default:return g}}case n:return g}}}g.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===I||e===l||e===b||e===C||e===c||e===i||e===Z||"object"===typeof e&&null!==e&&(e.$$typeof===A||e.$$typeof===s||e.$$typeof===a||e.$$typeof===o||e.$$typeof===r||e.$$typeof===m||e.$$typeof===d||e[0]===u)},g.typeOf=p},441:function(e,g,t){"use strict";e.exports=t(372)},688:function(e,g,t){"use strict";function n(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!==e&&void 0!==e&&this.setState(e)}function I(e){this.setState(function(g){var t=this.constructor.getDerivedStateFromProps(e,g);return null!==t&&void 0!==t?t:null}.bind(this))}function C(e,g){try{var t=this.props,n=this.state;this.props=e,this.state=g,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(t,n)}finally{this.props=t,this.state=n}}function l(e){var g=e.prototype;if(!g||!g.isReactComponent)throw new Error("Can only polyfill class components");if("function"!==typeof e.getDerivedStateFromProps&&"function"!==typeof g.getSnapshotBeforeUpdate)return e;var t=null,l=null,a=null;if("function"===typeof g.componentWillMount?t="componentWillMount":"function"===typeof g.UNSAFE_componentWillMount&&(t="UNSAFE_componentWillMount"),"function"===typeof g.componentWillReceiveProps?l="componentWillReceiveProps":"function"===typeof g.UNSAFE_componentWillReceiveProps&&(l="UNSAFE_componentWillReceiveProps"),"function"===typeof g.componentWillUpdate?a="componentWillUpdate":"function"===typeof g.UNSAFE_componentWillUpdate&&(a="UNSAFE_componentWillUpdate"),null!==t||null!==l||null!==a){var o=e.displayName||e.name,r="function"===typeof e.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+o+" uses "+r+" but also contains the following legacy lifecycles:"+(null!==t?"\n  "+t:"")+(null!==l?"\n  "+l:"")+(null!==a?"\n  "+a:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"===typeof e.getDerivedStateFromProps&&(g.componentWillMount=n,g.componentWillReceiveProps=I),"function"===typeof g.getSnapshotBeforeUpdate){if("function"!==typeof g.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");g.componentWillUpdate=C;var c=g.componentDidUpdate;g.componentDidUpdate=function(e,g,t){var n=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:t;c.call(this,e,g,n)}}return e}t.r(g),t.d(g,{polyfill:function(){return l}}),n.__suppressDeprecationWarning=!0,I.__suppressDeprecationWarning=!0,C.__suppressDeprecationWarning=!0},240:function(e,g,t){"use strict";Object.defineProperty(g,"__esModule",{value:!0}),g.bodyOpenClassName=g.portalClassName=void 0;var n=Object.assign||function(e){for(var g=1;g<arguments.length;g++){var t=arguments[g];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},I=function(){function e(e,g){for(var t=0;t<g.length;t++){var n=g[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(g,t,n){return t&&e(g.prototype,t),n&&e(g,n),g}}(),C=t(791),l=d(C),a=d(t(164)),o=d(t(7)),r=d(t(334)),c=function(e){if(e&&e.__esModule)return e;var g={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(g[t]=e[t]);return g.default=e,g}(t(858)),i=t(663),s=d(i),A=t(688);function d(e){return e&&e.__esModule?e:{default:e}}function u(e,g){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!g||"object"!==typeof g&&"function"!==typeof g?e:g}var m=g.portalClassName="ReactModalPortal",b=g.bodyOpenClassName="ReactModal__Body--open",Z=i.canUseDOM&&void 0!==a.default.createPortal,h=function(e){return document.createElement(e)},p=function(){return Z?a.default.createPortal:a.default.unstable_renderSubtreeIntoContainer};function G(e){return e()}var y=function(e){function g(){var e,t,I;!function(e,g){if(!(e instanceof g))throw new TypeError("Cannot call a class as a function")}(this,g);for(var C=arguments.length,o=Array(C),c=0;c<C;c++)o[c]=arguments[c];return t=I=u(this,(e=g.__proto__||Object.getPrototypeOf(g)).call.apply(e,[this].concat(o))),I.removePortal=function(){!Z&&a.default.unmountComponentAtNode(I.node);var e=G(I.props.parentSelector);e&&e.contains(I.node)?e.removeChild(I.node):console.warn('React-Modal: "parentSelector" prop did not returned any DOM element. Make sure that the parent element is unmounted to avoid any memory leaks.')},I.portalRef=function(e){I.portal=e},I.renderPortal=function(e){var t=p()(I,l.default.createElement(r.default,n({defaultStyles:g.defaultStyles},e)),I.node);I.portalRef(t)},u(I,t)}return function(e,g){if("function"!==typeof g&&null!==g)throw new TypeError("Super expression must either be null or a function, not "+typeof g);e.prototype=Object.create(g&&g.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(e,g):e.__proto__=g)}(g,e),I(g,[{key:"componentDidMount",value:function(){i.canUseDOM&&(Z||(this.node=h("div")),this.node.className=this.props.portalClassName,G(this.props.parentSelector).appendChild(this.node),!Z&&this.renderPortal(this.props))}},{key:"getSnapshotBeforeUpdate",value:function(e){return{prevParent:G(e.parentSelector),nextParent:G(this.props.parentSelector)}}},{key:"componentDidUpdate",value:function(e,g,t){if(i.canUseDOM){var n=this.props,I=n.isOpen,C=n.portalClassName;e.portalClassName!==C&&(this.node.className=C);var l=t.prevParent,a=t.nextParent;a!==l&&(l.removeChild(this.node),a.appendChild(this.node)),(e.isOpen||I)&&!Z&&this.renderPortal(this.props)}}},{key:"componentWillUnmount",value:function(){if(i.canUseDOM&&this.node&&this.portal){var e=this.portal.state,g=Date.now(),t=e.isOpen&&this.props.closeTimeoutMS&&(e.closesAt||g+this.props.closeTimeoutMS);t?(e.beforeClose||this.portal.closeWithTimeout(),setTimeout(this.removePortal,t-g)):this.removePortal()}}},{key:"render",value:function(){return i.canUseDOM&&Z?(!this.node&&Z&&(this.node=h("div")),p()(l.default.createElement(r.default,n({ref:this.portalRef,defaultStyles:g.defaultStyles},this.props)),this.node)):null}}],[{key:"setAppElement",value:function(e){c.setElement(e)}}]),g}(C.Component);y.propTypes={isOpen:o.default.bool.isRequired,style:o.default.shape({content:o.default.object,overlay:o.default.object}),portalClassName:o.default.string,bodyOpenClassName:o.default.string,htmlOpenClassName:o.default.string,className:o.default.oneOfType([o.default.string,o.default.shape({base:o.default.string.isRequired,afterOpen:o.default.string.isRequired,beforeClose:o.default.string.isRequired})]),overlayClassName:o.default.oneOfType([o.default.string,o.default.shape({base:o.default.string.isRequired,afterOpen:o.default.string.isRequired,beforeClose:o.default.string.isRequired})]),appElement:o.default.oneOfType([o.default.instanceOf(s.default),o.default.instanceOf(i.SafeHTMLCollection),o.default.instanceOf(i.SafeNodeList),o.default.arrayOf(o.default.instanceOf(s.default))]),onAfterOpen:o.default.func,onRequestClose:o.default.func,closeTimeoutMS:o.default.number,ariaHideApp:o.default.bool,shouldFocusAfterRender:o.default.bool,shouldCloseOnOverlayClick:o.default.bool,shouldReturnFocusAfterClose:o.default.bool,preventScroll:o.default.bool,parentSelector:o.default.func,aria:o.default.object,data:o.default.object,role:o.default.string,contentLabel:o.default.string,shouldCloseOnEsc:o.default.bool,overlayRef:o.default.func,contentRef:o.default.func,id:o.default.string,overlayElement:o.default.func,contentElement:o.default.func},y.defaultProps={isOpen:!1,portalClassName:m,bodyOpenClassName:b,role:"dialog",ariaHideApp:!0,closeTimeoutMS:0,shouldFocusAfterRender:!0,shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,shouldReturnFocusAfterClose:!0,preventScroll:!1,parentSelector:function(){return document.body},overlayElement:function(e,g){return l.default.createElement("div",e,g)},contentElement:function(e,g){return l.default.createElement("div",e,g)}},y.defaultStyles={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.75)"},content:{position:"absolute",top:"40px",left:"40px",right:"40px",bottom:"40px",border:"1px solid #ccc",background:"#fff",overflow:"auto",WebkitOverflowScrolling:"touch",borderRadius:"4px",outline:"none",padding:"20px"}},(0,A.polyfill)(y),g.default=y},334:function(e,g,t){"use strict";Object.defineProperty(g,"__esModule",{value:!0});var n=Object.assign||function(e){for(var g=1;g<arguments.length;g++){var t=arguments[g];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},I="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C=function(){function e(e,g){for(var t=0;t<g.length;t++){var n=g[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(g,t,n){return t&&e(g.prototype,t),n&&e(g,n),g}}(),l=t(791),a=m(t(7)),o=u(t(844)),r=m(t(870)),c=u(t(858)),i=u(t(942)),s=t(663),A=m(s),d=m(t(484));function u(e){if(e&&e.__esModule)return e;var g={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(g[t]=e[t]);return g.default=e,g}function m(e){return e&&e.__esModule?e:{default:e}}t(670);var b={overlay:"ReactModal__Overlay",content:"ReactModal__Content"},Z=0,h=function(e){function g(e){!function(e,g){if(!(e instanceof g))throw new TypeError("Cannot call a class as a function")}(this,g);var t=function(e,g){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!g||"object"!==typeof g&&"function"!==typeof g?e:g}(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,e));return t.setOverlayRef=function(e){t.overlay=e,t.props.overlayRef&&t.props.overlayRef(e)},t.setContentRef=function(e){t.content=e,t.props.contentRef&&t.props.contentRef(e)},t.afterClose=function(){var e=t.props,g=e.appElement,n=e.ariaHideApp,I=e.htmlOpenClassName,C=e.bodyOpenClassName,l=e.parentSelector,a=l&&l().ownerDocument||document;C&&i.remove(a.body,C),I&&i.remove(a.getElementsByTagName("html")[0],I),n&&Z>0&&0===(Z-=1)&&c.show(g),t.props.shouldFocusAfterRender&&(t.props.shouldReturnFocusAfterClose?(o.returnFocus(t.props.preventScroll),o.teardownScopedFocus()):o.popWithoutFocus()),t.props.onAfterClose&&t.props.onAfterClose(),d.default.deregister(t)},t.open=function(){t.beforeOpen(),t.state.afterOpen&&t.state.beforeClose?(clearTimeout(t.closeTimer),t.setState({beforeClose:!1})):(t.props.shouldFocusAfterRender&&(o.setupScopedFocus(t.node),o.markForFocusLater()),t.setState({isOpen:!0},(function(){t.openAnimationFrame=requestAnimationFrame((function(){t.setState({afterOpen:!0}),t.props.isOpen&&t.props.onAfterOpen&&t.props.onAfterOpen({overlayEl:t.overlay,contentEl:t.content})}))})))},t.close=function(){t.props.closeTimeoutMS>0?t.closeWithTimeout():t.closeWithoutTimeout()},t.focusContent=function(){return t.content&&!t.contentHasFocus()&&t.content.focus({preventScroll:!0})},t.closeWithTimeout=function(){var e=Date.now()+t.props.closeTimeoutMS;t.setState({beforeClose:!0,closesAt:e},(function(){t.closeTimer=setTimeout(t.closeWithoutTimeout,t.state.closesAt-Date.now())}))},t.closeWithoutTimeout=function(){t.setState({beforeClose:!1,isOpen:!1,afterOpen:!1,closesAt:null},t.afterClose)},t.handleKeyDown=function(e){(function(e){return"Tab"===e.code||9===e.keyCode})(e)&&(0,r.default)(t.content,e),t.props.shouldCloseOnEsc&&function(e){return"Escape"===e.code||27===e.keyCode}(e)&&(e.stopPropagation(),t.requestClose(e))},t.handleOverlayOnClick=function(e){null===t.shouldClose&&(t.shouldClose=!0),t.shouldClose&&t.props.shouldCloseOnOverlayClick&&(t.ownerHandlesClose()?t.requestClose(e):t.focusContent()),t.shouldClose=null},t.handleContentOnMouseUp=function(){t.shouldClose=!1},t.handleOverlayOnMouseDown=function(e){t.props.shouldCloseOnOverlayClick||e.target!=t.overlay||e.preventDefault()},t.handleContentOnClick=function(){t.shouldClose=!1},t.handleContentOnMouseDown=function(){t.shouldClose=!1},t.requestClose=function(e){return t.ownerHandlesClose()&&t.props.onRequestClose(e)},t.ownerHandlesClose=function(){return t.props.onRequestClose},t.shouldBeClosed=function(){return!t.state.isOpen&&!t.state.beforeClose},t.contentHasFocus=function(){return document.activeElement===t.content||t.content.contains(document.activeElement)},t.buildClassName=function(e,g){var n="object"===("undefined"===typeof g?"undefined":I(g))?g:{base:b[e],afterOpen:b[e]+"--after-open",beforeClose:b[e]+"--before-close"},C=n.base;return t.state.afterOpen&&(C=C+" "+n.afterOpen),t.state.beforeClose&&(C=C+" "+n.beforeClose),"string"===typeof g&&g?C+" "+g:C},t.attributesFromObject=function(e,g){return Object.keys(g).reduce((function(t,n){return t[e+"-"+n]=g[n],t}),{})},t.state={afterOpen:!1,beforeClose:!1},t.shouldClose=null,t.moveFromContentToOverlay=null,t}return function(e,g){if("function"!==typeof g&&null!==g)throw new TypeError("Super expression must either be null or a function, not "+typeof g);e.prototype=Object.create(g&&g.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(e,g):e.__proto__=g)}(g,e),C(g,[{key:"componentDidMount",value:function(){this.props.isOpen&&this.open()}},{key:"componentDidUpdate",value:function(e,g){this.props.isOpen&&!e.isOpen?this.open():!this.props.isOpen&&e.isOpen&&this.close(),this.props.shouldFocusAfterRender&&this.state.isOpen&&!g.isOpen&&this.focusContent()}},{key:"componentWillUnmount",value:function(){this.state.isOpen&&this.afterClose(),clearTimeout(this.closeTimer),cancelAnimationFrame(this.openAnimationFrame)}},{key:"beforeOpen",value:function(){var e=this.props,g=e.appElement,t=e.ariaHideApp,n=e.htmlOpenClassName,I=e.bodyOpenClassName,C=e.parentSelector,l=C&&C().ownerDocument||document;I&&i.add(l.body,I),n&&i.add(l.getElementsByTagName("html")[0],n),t&&(Z+=1,c.hide(g)),d.default.register(this)}},{key:"render",value:function(){var e=this.props,g=e.id,t=e.className,I=e.overlayClassName,C=e.defaultStyles,l=e.children,a=t?{}:C.content,o=I?{}:C.overlay;if(this.shouldBeClosed())return null;var r={ref:this.setOverlayRef,className:this.buildClassName("overlay",I),style:n({},o,this.props.style.overlay),onClick:this.handleOverlayOnClick,onMouseDown:this.handleOverlayOnMouseDown},c=n({id:g,ref:this.setContentRef,style:n({},a,this.props.style.content),className:this.buildClassName("content",t),tabIndex:"-1",onKeyDown:this.handleKeyDown,onMouseDown:this.handleContentOnMouseDown,onMouseUp:this.handleContentOnMouseUp,onClick:this.handleContentOnClick,role:this.props.role,"aria-label":this.props.contentLabel},this.attributesFromObject("aria",n({modal:!0},this.props.aria)),this.attributesFromObject("data",this.props.data||{}),{"data-testid":this.props.testId}),i=this.props.contentElement(c,l);return this.props.overlayElement(r,i)}}]),g}(l.Component);h.defaultProps={style:{overlay:{},content:{}},defaultStyles:{}},h.propTypes={isOpen:a.default.bool.isRequired,defaultStyles:a.default.shape({content:a.default.object,overlay:a.default.object}),style:a.default.shape({content:a.default.object,overlay:a.default.object}),className:a.default.oneOfType([a.default.string,a.default.object]),overlayClassName:a.default.oneOfType([a.default.string,a.default.object]),parentSelector:a.default.func,bodyOpenClassName:a.default.string,htmlOpenClassName:a.default.string,ariaHideApp:a.default.bool,appElement:a.default.oneOfType([a.default.instanceOf(A.default),a.default.instanceOf(s.SafeHTMLCollection),a.default.instanceOf(s.SafeNodeList),a.default.arrayOf(a.default.instanceOf(A.default))]),onAfterOpen:a.default.func,onAfterClose:a.default.func,onRequestClose:a.default.func,closeTimeoutMS:a.default.number,shouldFocusAfterRender:a.default.bool,shouldCloseOnOverlayClick:a.default.bool,shouldReturnFocusAfterClose:a.default.bool,preventScroll:a.default.bool,role:a.default.string,contentLabel:a.default.string,aria:a.default.object,data:a.default.object,children:a.default.node,shouldCloseOnEsc:a.default.bool,overlayRef:a.default.func,contentRef:a.default.func,id:a.default.string,overlayElement:a.default.func,contentElement:a.default.func,testId:a.default.string},g.default=h,e.exports=g.default},858:function(e,g,t){"use strict";Object.defineProperty(g,"__esModule",{value:!0}),g.resetState=function(){a&&(a.removeAttribute?a.removeAttribute("aria-hidden"):null!=a.length?a.forEach((function(e){return e.removeAttribute("aria-hidden")})):document.querySelectorAll(a).forEach((function(e){return e.removeAttribute("aria-hidden")})));a=null},g.log=function(){0},g.assertNodeList=o,g.setElement=function(e){var g=e;if("string"===typeof g&&l.canUseDOM){var t=document.querySelectorAll(g);o(t,g),g=t}return a=g||a},g.validateElement=r,g.hide=function(e){var g=!0,t=!1,n=void 0;try{for(var I,C=r(e)[Symbol.iterator]();!(g=(I=C.next()).done);g=!0){I.value.setAttribute("aria-hidden","true")}}catch(l){t=!0,n=l}finally{try{!g&&C.return&&C.return()}finally{if(t)throw n}}},g.show=function(e){var g=!0,t=!1,n=void 0;try{for(var I,C=r(e)[Symbol.iterator]();!(g=(I=C.next()).done);g=!0){I.value.removeAttribute("aria-hidden")}}catch(l){t=!0,n=l}finally{try{!g&&C.return&&C.return()}finally{if(t)throw n}}},g.documentNotReadyOrSSRTesting=function(){a=null};var n,I=t(391),C=(n=I)&&n.__esModule?n:{default:n},l=t(663);var a=null;function o(e,g){if(!e||!e.length)throw new Error("react-modal: No elements were found for selector "+g+".")}function r(e){var g=e||a;return g?Array.isArray(g)||g instanceof HTMLCollection||g instanceof NodeList?g:[g]:((0,C.default)(!1,["react-modal: App element is not defined.","Please use `Modal.setAppElement(el)` or set `appElement={el}`.","This is needed so screen readers don't see main content","when modal is opened. It is not recommended, but you can opt-out","by setting `ariaHideApp={false}`."].join(" ")),[])}},670:function(e,g,t){"use strict";Object.defineProperty(g,"__esModule",{value:!0}),g.resetState=function(){for(var e=[l,a],g=0;g<e.length;g++){var t=e[g];t&&(t.parentNode&&t.parentNode.removeChild(t))}l=a=null,o=[]},g.log=function(){console.log("bodyTrap ----------"),console.log(o.length);for(var e=[l,a],g=0;g<e.length;g++){var t=e[g]||{};console.log(t.nodeName,t.className,t.id)}console.log("edn bodyTrap ----------")};var n,I=t(484),C=(n=I)&&n.__esModule?n:{default:n};var l=void 0,a=void 0,o=[];function r(){0!==o.length&&o[o.length-1].focusContent()}C.default.subscribe((function(e,g){l||a||((l=document.createElement("div")).setAttribute("data-react-modal-body-trap",""),l.style.position="absolute",l.style.opacity="0",l.setAttribute("tabindex","0"),l.addEventListener("focus",r),(a=l.cloneNode()).addEventListener("focus",r)),(o=g).length>0?(document.body.firstChild!==l&&document.body.insertBefore(l,document.body.firstChild),document.body.lastChild!==a&&document.body.appendChild(a)):(l.parentElement&&l.parentElement.removeChild(l),a.parentElement&&a.parentElement.removeChild(a))}))},942:function(e,g){"use strict";Object.defineProperty(g,"__esModule",{value:!0}),g.resetState=function(){var e=document.getElementsByTagName("html")[0];for(var g in t)I(e,t[g]);var C=document.body;for(var l in n)I(C,n[l]);t={},n={}},g.log=function(){0};var t={},n={};function I(e,g){e.classList.remove(g)}g.add=function(e,g){return I=e.classList,C="html"==e.nodeName.toLowerCase()?t:n,void g.split(" ").forEach((function(e){!function(e,g){e[g]||(e[g]=0),e[g]+=1}(C,e),I.add(e)}));var I,C},g.remove=function(e,g){return I=e.classList,C="html"==e.nodeName.toLowerCase()?t:n,void g.split(" ").forEach((function(e){!function(e,g){e[g]&&(e[g]-=1)}(C,e),0===C[e]&&I.remove(e)}));var I,C}},844:function(e,g,t){"use strict";Object.defineProperty(g,"__esModule",{value:!0}),g.resetState=function(){l=[]},g.log=function(){0},g.handleBlur=r,g.handleFocus=c,g.markForFocusLater=function(){l.push(document.activeElement)},g.returnFocus=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],g=null;try{return void(0!==l.length&&(g=l.pop()).focus({preventScroll:e}))}catch(t){console.warn(["You tried to return focus to",g,"but it is not in the DOM anymore"].join(" "))}},g.popWithoutFocus=function(){l.length>0&&l.pop()},g.setupScopedFocus=function(e){a=e,window.addEventListener?(window.addEventListener("blur",r,!1),document.addEventListener("focus",c,!0)):(window.attachEvent("onBlur",r),document.attachEvent("onFocus",c))},g.teardownScopedFocus=function(){a=null,window.addEventListener?(window.removeEventListener("blur",r),document.removeEventListener("focus",c)):(window.detachEvent("onBlur",r),document.detachEvent("onFocus",c))};var n,I=t(750),C=(n=I)&&n.__esModule?n:{default:n};var l=[],a=null,o=!1;function r(){o=!0}function c(){if(o){if(o=!1,!a)return;setTimeout((function(){a.contains(document.activeElement)||((0,C.default)(a)[0]||a).focus()}),0)}}},484:function(e,g){"use strict";Object.defineProperty(g,"__esModule",{value:!0}),g.log=function(){console.log("portalOpenInstances ----------"),console.log(n.openInstances.length),n.openInstances.forEach((function(e){return console.log(e)})),console.log("end portalOpenInstances ----------")},g.resetState=function(){n=new t};var t=function e(){var g=this;!function(e,g){if(!(e instanceof g))throw new TypeError("Cannot call a class as a function")}(this,e),this.register=function(e){-1===g.openInstances.indexOf(e)&&(g.openInstances.push(e),g.emit("register"))},this.deregister=function(e){var t=g.openInstances.indexOf(e);-1!==t&&(g.openInstances.splice(t,1),g.emit("deregister"))},this.subscribe=function(e){g.subscribers.push(e)},this.emit=function(e){g.subscribers.forEach((function(t){return t(e,g.openInstances.slice())}))},this.openInstances=[],this.subscribers=[]},n=new t;g.default=n},663:function(e,g,t){"use strict";Object.defineProperty(g,"__esModule",{value:!0}),g.canUseDOM=g.SafeNodeList=g.SafeHTMLCollection=void 0;var n,I=t(618);var C=((n=I)&&n.__esModule?n:{default:n}).default,l=C.canUseDOM?window.HTMLElement:{};g.SafeHTMLCollection=C.canUseDOM?window.HTMLCollection:{},g.SafeNodeList=C.canUseDOM?window.NodeList:{},g.canUseDOM=C.canUseDOM;g.default=l},870:function(e,g,t){"use strict";Object.defineProperty(g,"__esModule",{value:!0}),g.default=function(e,g){var t=(0,C.default)(e);if(!t.length)return void g.preventDefault();var n=void 0,I=g.shiftKey,a=t[0],o=t[t.length-1],r=l();if(e===r){if(!I)return;n=o}o!==r||I||(n=a);a===r&&I&&(n=o);if(n)return g.preventDefault(),void n.focus();var c=/(\bChrome\b|\bSafari\b)\//.exec(navigator.userAgent);if(null==c||"Chrome"==c[1]||null!=/\biPod\b|\biPad\b/g.exec(navigator.userAgent))return;var i=t.indexOf(r);i>-1&&(i+=I?-1:1);if("undefined"===typeof(n=t[i]))return g.preventDefault(),void(n=I?o:a).focus();g.preventDefault(),n.focus()};var n,I=t(750),C=(n=I)&&n.__esModule?n:{default:n};function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;return e.activeElement.shadowRoot?l(e.activeElement.shadowRoot):e.activeElement}e.exports=g.default},750:function(e,g){"use strict";Object.defineProperty(g,"__esModule",{value:!0}),g.default=function e(g){var t=[].slice.call(g.querySelectorAll("*"),0).reduce((function(g,t){return g.concat(t.shadowRoot?e(t.shadowRoot):[t])}),[]);return t.filter(a)};var t="none",n="contents",I=/input|select|textarea|button|object|iframe/;function C(e){var g=e.offsetWidth<=0&&e.offsetHeight<=0;if(g&&!e.innerHTML)return!0;try{var I=window.getComputedStyle(e),C=I.getPropertyValue("display");return g?C!==n&&function(e,g){return"visible"!==g.getPropertyValue("overflow")||e.scrollWidth<=0&&e.scrollHeight<=0}(e,I):C===t}catch(l){return console.warn("Failed to inspect element style"),!1}}function l(e,g){var t=e.nodeName.toLowerCase();return(I.test(t)&&!e.disabled||"a"===t&&e.href||g)&&function(e){for(var g=e,t=e.getRootNode&&e.getRootNode();g&&g!==document.body;){if(t&&g===t&&(g=t.host.parentNode),C(g))return!1;g=g.parentNode}return!0}(e)}function a(e){var g=e.getAttribute("tabindex");null===g&&(g=void 0);var t=isNaN(g);return(t||g>=0)&&l(e,!t)}e.exports=g.default},948:function(e,g,t){"use strict";Object.defineProperty(g,"__esModule",{value:!0});var n,I=t(240),C=(n=I)&&n.__esModule?n:{default:n};g.default=C.default,e.exports=g.default},8:function(e,g,t){e.exports=function(e){"use strict";function g(e){if(e&&e.__esModule)return e;var g=Object.create(null);return e&&Object.keys(e).forEach((function(t){if("default"!==t){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(g,t,n.get?n:{enumerable:!0,get:function(){return e[t]}})}})),g.default=e,Object.freeze(g)}var t=g(e);function n(){return n=Object.assign?Object.assign.bind():function(e){for(var g=1;g<arguments.length;g++){var t=arguments[g];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},n.apply(this,arguments)}function I(e,g,t){return g in e?Object.defineProperty(e,g,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[g]=t,e}function C(e){if(Array.isArray(e))return e}function l(e,g){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,I,C=[],l=!0,a=!1;try{for(t=t.call(e);!(l=(n=t.next()).done)&&(C.push(n.value),!g||C.length!==g);l=!0);}catch(o){a=!0,I=o}finally{try{l||null==t.return||t.return()}finally{if(a)throw I}}return C}}function a(e,g){(null==g||g>e.length)&&(g=e.length);for(var t=0,n=new Array(g);t<g;t++)n[t]=e[t];return n}function o(e,g){if(e){if("string"===typeof e)return a(e,g);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?a(e,g):void 0}}function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,g){return C(e)||l(e,g)||o(e,g)||r()}function i(e,g){if(null==e)return{};var t,n,I={},C=Object.keys(e);for(n=0;n<C.length;n++)t=C[n],g.indexOf(t)>=0||(I[t]=e[t]);return I}function s(e,g){if(null==e)return{};var t,n,I=i(e,g);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(e);for(n=0;n<C.length;n++)t=C[n],g.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(I[t]=e[t])}return I}var A={exports:{}},d={exports:{}},u={},m="function"===typeof Symbol&&Symbol.for,b=m?Symbol.for("react.element"):60103,Z=m?Symbol.for("react.portal"):60106,h=m?Symbol.for("react.fragment"):60107,p=m?Symbol.for("react.strict_mode"):60108,G=m?Symbol.for("react.profiler"):60114,y=m?Symbol.for("react.provider"):60109,B=m?Symbol.for("react.context"):60110,f=m?Symbol.for("react.async_mode"):60111,S=m?Symbol.for("react.concurrent_mode"):60111,v=m?Symbol.for("react.forward_ref"):60112,W=m?Symbol.for("react.suspense"):60113,V=m?Symbol.for("react.suspense_list"):60120,R=m?Symbol.for("react.memo"):60115,k=m?Symbol.for("react.lazy"):60116,X=m?Symbol.for("react.block"):60121,J=m?Symbol.for("react.fundamental"):60117,Y=m?Symbol.for("react.responder"):60118,H=m?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var g=e.$$typeof;switch(g){case b:switch(e=e.type){case f:case S:case h:case G:case p:case W:return e;default:switch(e=e&&e.$$typeof){case B:case v:case k:case R:case y:return e;default:return g}}case Z:return g}}}function N(e){return w(e)===S}u.AsyncMode=f,u.ConcurrentMode=S,u.ContextConsumer=B,u.ContextProvider=y,u.Element=b,u.ForwardRef=v,u.Fragment=h,u.Lazy=k,u.Memo=R,u.Portal=Z,u.Profiler=G,u.StrictMode=p,u.Suspense=W,u.isAsyncMode=function(e){return N(e)||w(e)===f},u.isConcurrentMode=N,u.isContextConsumer=function(e){return w(e)===B},u.isContextProvider=function(e){return w(e)===y},u.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===b},u.isForwardRef=function(e){return w(e)===v},u.isFragment=function(e){return w(e)===h},u.isLazy=function(e){return w(e)===k},u.isMemo=function(e){return w(e)===R},u.isPortal=function(e){return w(e)===Z},u.isProfiler=function(e){return w(e)===G},u.isStrictMode=function(e){return w(e)===p},u.isSuspense=function(e){return w(e)===W},u.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===h||e===S||e===G||e===p||e===W||e===V||"object"===typeof e&&null!==e&&(e.$$typeof===k||e.$$typeof===R||e.$$typeof===y||e.$$typeof===B||e.$$typeof===v||e.$$typeof===J||e.$$typeof===Y||e.$$typeof===H||e.$$typeof===X)},u.typeOf=w,d.exports=u;Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;function K(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var g={},t=0;t<10;t++)g["_"+String.fromCharCode(t)]=t;var n=Object.getOwnPropertyNames(g).map((function(e){return g[e]}));if("0123456789"!==n.join(""))return!1;var I={};return"abcdefghijklmnopqrst".split("").forEach((function(e){I[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},I)).join("")}catch(C){return!1}}K()&&Object.assign;var F="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";function x(e,g,t,n,I){}Function.call.bind(Object.prototype.hasOwnProperty),x.resetWarningCache=function(){},d.exports;var E=F;function z(){}function M(){}M.resetWarningCache=z;var U=function(){function e(e,g,t,n,I,C){if(C!==E){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}function g(){return e}e.isRequired=e;var t={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:g,element:e,elementType:e,instanceOf:g,node:e,objectOf:g,oneOf:g,oneOfType:g,shape:g,exact:g,checkPropTypes:M,resetWarningCache:z};return t.PropTypes=t,t};A.exports=U();var D=A.exports;function Q(e,g){var t=atob(e);if(g){for(var n=new Uint8Array(t.length),I=0,C=t.length;I<C;++I)n[I]=t.charCodeAt(I);return String.fromCharCode.apply(null,new Uint16Array(n.buffer))}return t}function L(e,g,t){var n=void 0===g?null:g,I=Q(e,void 0!==t&&t),C=I.indexOf("\n",10)+1,l=I.substring(C)+(n?"//# sourceMappingURL="+n:""),a=new Blob([l],{type:"application/javascript"});return URL.createObjectURL(a)}function T(e,g,t){var n;return function(I){return n=n||L(e,g,t),new Worker(n,I)}}var j=T("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewoJJ3VzZSBzdHJpY3QnOwoKCXZhciBjb21tb25qc0dsb2JhbCA9IHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbFRoaXMgOiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHt9OwoKCWZ1bmN0aW9uIGdldEF1Z21lbnRlZE5hbWVzcGFjZShuKSB7CgkJaWYgKG4uX19lc01vZHVsZSkgcmV0dXJuIG47CgkJdmFyIGEgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkoe30sICdfX2VzTW9kdWxlJywge3ZhbHVlOiB0cnVlfSk7CgkJT2JqZWN0LmtleXMobikuZm9yRWFjaChmdW5jdGlvbiAoaykgewoJCQl2YXIgZCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iobiwgayk7CgkJCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShhLCBrLCBkLmdldCA/IGQgOiB7CgkJCQllbnVtZXJhYmxlOiB0cnVlLAoJCQkJZ2V0OiBmdW5jdGlvbiAoKSB7CgkJCQkJcmV0dXJuIG5ba107CgkJCQl9CgkJCX0pOwoJCX0pOwoJCXJldHVybiBhOwoJfQoKCXZhciBCaW5hcnlCaXRtYXAkMSA9IHt9OwoKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBFeGNlcHRpb24kMSA9IHt9OwoKCWZ1bmN0aW9uIGZpeFByb3RvKHRhcmdldCwgcHJvdG90eXBlKSB7CgkgIHZhciBzZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZjsKCSAgc2V0UHJvdG90eXBlT2YgPyBzZXRQcm90b3R5cGVPZih0YXJnZXQsIHByb3RvdHlwZSkgOiB0YXJnZXQuX19wcm90b19fID0gcHJvdG90eXBlOwoJfQoJZnVuY3Rpb24gZml4U3RhY2sodGFyZ2V0LCBmbikgewoJICBpZiAoZm4gPT09IHZvaWQgMCkgewoJICAgIGZuID0gdGFyZ2V0LmNvbnN0cnVjdG9yOwoJICB9CgoJICB2YXIgY2FwdHVyZVN0YWNrVHJhY2UgPSBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZTsKCSAgY2FwdHVyZVN0YWNrVHJhY2UgJiYgY2FwdHVyZVN0YWNrVHJhY2UodGFyZ2V0LCBmbik7Cgl9CgoJdmFyIF9fZXh0ZW5kcyRrID0gZnVuY3Rpb24gKCkgewoJICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCB7CgkgICAgICBfX3Byb3RvX186IFtdCgkgICAgfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICBkLl9fcHJvdG9fXyA9IGI7CgkgICAgfSB8fCBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgZm9yICh2YXIgcCBpbiBiKSB7IGlmIChiLmhhc093blByb3BlcnR5KHApKSB7IGRbcF0gPSBiW3BdOyB9IH0KCSAgICB9OwoKCSAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgfTsKCgkgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgoJICAgIGZ1bmN0aW9uIF9fKCkgewoJICAgICAgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7CgkgICAgfQoKCSAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgIH07Cgl9KCk7CgoJdmFyIEN1c3RvbUVycm9yID0gZnVuY3Rpb24gKF9zdXBlcikgewoJICBfX2V4dGVuZHMkayhDdXN0b21FcnJvciwgX3N1cGVyKTsKCgkgIGZ1bmN0aW9uIEN1c3RvbUVycm9yKG1lc3NhZ2UpIHsKCSAgICB2YXIgX25ld1RhcmdldCA9IHRoaXMuY29uc3RydWN0b3I7CgoJICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIG1lc3NhZ2UpIHx8IHRoaXM7CgoJICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfdGhpcywgJ25hbWUnLCB7CgkgICAgICB2YWx1ZTogX25ld1RhcmdldC5uYW1lLAoJICAgICAgZW51bWVyYWJsZTogZmFsc2UsCgkgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICB9KTsKCSAgICBmaXhQcm90byhfdGhpcywgX25ld1RhcmdldC5wcm90b3R5cGUpOwoJICAgIGZpeFN0YWNrKF90aGlzKTsKCSAgICByZXR1cm4gX3RoaXM7CgkgIH0KCgkgIHJldHVybiBDdXN0b21FcnJvcjsKCX0oRXJyb3IpOwoKCXZhciBfX3NwcmVhZEFycmF5cyA9IGZ1bmN0aW9uICgpIHsKCSAgdmFyIGFyZ3VtZW50cyQxID0gYXJndW1lbnRzOwoKCSAgZm9yICh2YXIgcyA9IDAsIGkgPSAwLCBpbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBpbDsgaSsrKSB7IHMgKz0gYXJndW1lbnRzJDFbaV0ubGVuZ3RoOyB9CgoJICBmb3IgKHZhciByID0gQXJyYXkocyksIGsgPSAwLCBpID0gMDsgaSA8IGlsOyBpKyspIHsgZm9yICh2YXIgYSA9IGFyZ3VtZW50c1tpXSwgaiA9IDAsIGpsID0gYS5sZW5ndGg7IGogPCBqbDsgaisrLCBrKyspIHsgcltrXSA9IGFbal07IH0gfQoKCSAgcmV0dXJuIHI7Cgl9OwoJZnVuY3Rpb24gY3VzdG9tRXJyb3JGYWN0b3J5KGZuLCBwYXJlbnQpIHsKCSAgaWYgKHBhcmVudCA9PT0gdm9pZCAwKSB7CgkgICAgcGFyZW50ID0gRXJyb3I7CgkgIH0KCgkgIGZ1bmN0aW9uIEN1c3RvbUVycm9yKCkgewoJICAgIHZhciBhcmd1bWVudHMkMSA9IGFyZ3VtZW50czsKCgkgICAgdmFyIGFyZ3MgPSBbXTsKCgkgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzJDFbX2ldOwoJICAgIH0KCgkgICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIEN1c3RvbUVycm9yKSkgeyByZXR1cm4gbmV3IChDdXN0b21FcnJvci5iaW5kLmFwcGx5KEN1c3RvbUVycm9yLCBfX3NwcmVhZEFycmF5cyhbdm9pZCAwXSwgYXJncykpKSgpOyB9CgkgICAgcGFyZW50LmFwcGx5KHRoaXMsIGFyZ3MpOwoJICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnbmFtZScsIHsKCSAgICAgIHZhbHVlOiBmbi5uYW1lIHx8IHBhcmVudC5uYW1lLAoJICAgICAgZW51bWVyYWJsZTogZmFsc2UsCgkgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICB9KTsKCSAgICBmbi5hcHBseSh0aGlzLCBhcmdzKTsKCSAgICBmaXhTdGFjayh0aGlzLCBDdXN0b21FcnJvcik7CgkgIH0KCgkgIHJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhDdXN0b21FcnJvciwgewoJICAgIHByb3RvdHlwZTogewoJICAgICAgdmFsdWU6IE9iamVjdC5jcmVhdGUocGFyZW50LnByb3RvdHlwZSwgewoJICAgICAgICBjb25zdHJ1Y3RvcjogewoJICAgICAgICAgIHZhbHVlOiBDdXN0b21FcnJvciwKCSAgICAgICAgICB3cml0YWJsZTogdHJ1ZSwKCSAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICAgICAgfQoJICAgICAgfSkKCSAgICB9CgkgIH0pOwoJfQoKCXZhciBjdXN0b21FcnJvciA9IC8qI19fUFVSRV9fKi9PYmplY3QuZnJlZXplKHsKCQlfX3Byb3RvX186IG51bGwsCgkJQ3VzdG9tRXJyb3I6IEN1c3RvbUVycm9yLAoJCWN1c3RvbUVycm9yRmFjdG9yeTogY3VzdG9tRXJyb3JGYWN0b3J5Cgl9KTsKCgl2YXIgcmVxdWlyZSQkMCA9IC8qQF9fUFVSRV9fKi9nZXRBdWdtZW50ZWROYW1lc3BhY2UoY3VzdG9tRXJyb3IpOwoKCXZhciBfX2V4dGVuZHMkaiA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIHRzX2N1c3RvbV9lcnJvcl8xID0gcmVxdWlyZSQkMDsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyRqKEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICAvKioKCSAgICAgKiBBbGxvd3MgRXhjZXB0aW9uIHRvIGJlIGNvbnN0cnVjdGVkIGRpcmVjdGx5CgkgICAgICogd2l0aCBzb21lIG1lc3NhZ2UgYW5kIHByb3RvdHlwZSBkZWZpbml0aW9uLgoJICAgICAqLwoJICAgIGZ1bmN0aW9uIEV4Y2VwdGlvbihtZXNzYWdlKSB7CgkgICAgICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IHVuZGVmaW5lZDsgfQoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBtZXNzYWdlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5tZXNzYWdlID0gbWVzc2FnZTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBFeGNlcHRpb24ucHJvdG90eXBlLmdldEtpbmQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBleCA9IHRoaXMuY29uc3RydWN0b3I7CgkgICAgICAgIHJldHVybiBleC5raW5kOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogSXQncyB0eXBlZCBhcyBzdHJpbmcgc28gaXQgY2FuIGJlIGV4dGVuZGVkIGFuZCBvdmVycmlkZW4uCgkgICAgICovCgkgICAgRXhjZXB0aW9uLmtpbmQgPSAnRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gRXhjZXB0aW9uOwoJfSh0c19jdXN0b21fZXJyb3JfMS5DdXN0b21FcnJvcikpOwoJRXhjZXB0aW9uJDEuZGVmYXVsdCA9IEV4Y2VwdGlvbjsKCgl2YXIgX19leHRlbmRzJGkgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBFeGNlcHRpb25fMSQ5ID0gRXhjZXB0aW9uJDE7CgkvKioKCSAqIEN1c3RvbSBFcnJvciBjbGFzcyBvZiB0eXBlIEV4Y2VwdGlvbi4KCSAqLwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkaShJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCkgewoJICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7CgkgICAgfQoJICAgIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi5raW5kID0gJ0lsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbic7CgkgICAgcmV0dXJuIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbjsKCX0oRXhjZXB0aW9uXzEkOS5kZWZhdWx0KSk7CglJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMS5kZWZhdWx0ID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmluYXJ5Qml0bWFwJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSRhID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7Cgl2YXIgQmluYXJ5Qml0bWFwID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEJpbmFyeUJpdG1hcChiaW5hcml6ZXIpIHsKCSAgICAgICAgdGhpcy5iaW5hcml6ZXIgPSBiaW5hcml6ZXI7CgkgICAgICAgIGlmIChiaW5hcml6ZXIgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSRhLmRlZmF1bHQoJ0JpbmFyaXplciBtdXN0IGJlIG5vbi1udWxsLicpOwoJICAgICAgICB9CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gVGhlIHdpZHRoIG9mIHRoZSBiaXRtYXAuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldFdpZHRoKCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSBoZWlnaHQgb2YgdGhlIGJpdG1hcC4KCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmdldEhlaWdodCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldEhlaWdodCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29udmVydHMgb25lIHJvdyBvZiBsdW1pbmFuY2UgZGF0YSB0byAxIGJpdCBkYXRhLiBNYXkgYWN0dWFsbHkgZG8gdGhlIGNvbnZlcnNpb24sIG9yIHJldHVybgoJICAgICAqIGNhY2hlZCBkYXRhLiBDYWxsZXJzIHNob3VsZCBhc3N1bWUgdGhpcyBtZXRob2QgaXMgZXhwZW5zaXZlIGFuZCBjYWxsIGl0IGFzIHNlbGRvbSBhcyBwb3NzaWJsZS4KCSAgICAgKiBUaGlzIG1ldGhvZCBpcyBpbnRlbmRlZCBmb3IgZGVjb2RpbmcgMUQgYmFyY29kZXMgYW5kIG1heSBjaG9vc2UgdG8gYXBwbHkgc2hhcnBlbmluZy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB5IFRoZSByb3cgdG8gZmV0Y2gsIHdoaWNoIG11c3QgYmUgaW4gWzAsIGJpdG1hcCBoZWlnaHQpCgkgICAgICogQHBhcmFtIHJvdyBBbiBvcHRpb25hbCBwcmVhbGxvY2F0ZWQgYXJyYXkuIElmIG51bGwgb3IgdG9vIHNtYWxsLCBpdCB3aWxsIGJlIGlnbm9yZWQuCgkgICAgICogICAgICAgICAgICBJZiB1c2VkLCB0aGUgQmluYXJpemVyIHdpbGwgY2FsbCBCaXRBcnJheS5jbGVhcigpLiBBbHdheXMgdXNlIHRoZSByZXR1cm5lZCBvYmplY3QuCgkgICAgICogQHJldHVybiBUaGUgYXJyYXkgb2YgYml0cyBmb3IgdGhpcyByb3cgKHRydWUgbWVhbnMgYmxhY2spLgoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgcm93IGNhbid0IGJlIGJpbmFyaXplZAoJICAgICAqLwoJICAgIEJpbmFyeUJpdG1hcC5wcm90b3R5cGUuZ2V0QmxhY2tSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldEJsYWNrUm93KHksIHJvdyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDb252ZXJ0cyBhIDJEIGFycmF5IG9mIGx1bWluYW5jZSBkYXRhIHRvIDEgYml0LiBBcyBhYm92ZSwgYXNzdW1lIHRoaXMgbWV0aG9kIGlzIGV4cGVuc2l2ZQoJICAgICAqIGFuZCBkbyBub3QgY2FsbCBpdCByZXBlYXRlZGx5LiBUaGlzIG1ldGhvZCBpcyBpbnRlbmRlZCBmb3IgZGVjb2RpbmcgMkQgYmFyY29kZXMgYW5kIG1heSBvcgoJICAgICAqIG1heSBub3QgYXBwbHkgc2hhcnBlbmluZy4gVGhlcmVmb3JlLCBhIHJvdyBmcm9tIHRoaXMgbWF0cml4IG1heSBub3QgYmUgaWRlbnRpY2FsIHRvIG9uZQoJICAgICAqIGZldGNoZWQgdXNpbmcgZ2V0QmxhY2tSb3coKSwgc28gZG9uJ3QgbWl4IGFuZCBtYXRjaCBiZXR3ZWVuIHRoZW0uCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIFRoZSAyRCBhcnJheSBvZiBiaXRzIGZvciB0aGUgaW1hZ2UgKHRydWUgbWVhbnMgYmxhY2spLgoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgaW1hZ2UgY2FuJ3QgYmUgYmluYXJpemVkIHRvIG1ha2UgYSBtYXRyaXgKCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmdldEJsYWNrTWF0cml4ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBUaGUgbWF0cml4IGlzIGNyZWF0ZWQgb24gZGVtYW5kIHRoZSBmaXJzdCB0aW1lIGl0IGlzIHJlcXVlc3RlZCwgdGhlbiBjYWNoZWQuIFRoZXJlIGFyZSB0d28KCSAgICAgICAgLy8gcmVhc29ucyBmb3IgdGhpczoKCSAgICAgICAgLy8gMS4gVGhpcyB3b3JrIHdpbGwgbmV2ZXIgYmUgZG9uZSBpZiB0aGUgY2FsbGVyIG9ubHkgaW5zdGFsbHMgMUQgUmVhZGVyIG9iamVjdHMsIG9yIGlmIGEKCSAgICAgICAgLy8gICAgMUQgUmVhZGVyIGZpbmRzIGEgYmFyY29kZSBiZWZvcmUgdGhlIDJEIFJlYWRlcnMgcnVuLgoJICAgICAgICAvLyAyLiBUaGlzIHdvcmsgd2lsbCBvbmx5IGJlIGRvbmUgb25jZSBldmVuIGlmIHRoZSBjYWxsZXIgaW5zdGFsbHMgbXVsdGlwbGUgMkQgUmVhZGVycy4KCSAgICAgICAgaWYgKHRoaXMubWF0cml4ID09PSBudWxsIHx8IHRoaXMubWF0cml4ID09PSB1bmRlZmluZWQpIHsKCSAgICAgICAgICAgIHRoaXMubWF0cml4ID0gdGhpcy5iaW5hcml6ZXIuZ2V0QmxhY2tNYXRyaXgoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5tYXRyaXg7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFdoZXRoZXIgdGhpcyBiaXRtYXAgY2FuIGJlIGNyb3BwZWQuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5pc0Nyb3BTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmJpbmFyaXplci5nZXRMdW1pbmFuY2VTb3VyY2UoKS5pc0Nyb3BTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggY3JvcHBlZCBpbWFnZSBkYXRhLiBJbXBsZW1lbnRhdGlvbnMgbWF5IGtlZXAgYSByZWZlcmVuY2UgdG8gdGhlCgkgICAgICogb3JpZ2luYWwgZGF0YSByYXRoZXIgdGhhbiBhIGNvcHkuIE9ubHkgY2FsbGFibGUgaWYgaXNDcm9wU3VwcG9ydGVkKCkgaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBsZWZ0IFRoZSBsZWZ0IGNvb3JkaW5hdGUsIHdoaWNoIG11c3QgYmUgaW4gWzAsZ2V0V2lkdGgoKSkKCSAgICAgKiBAcGFyYW0gdG9wIFRoZSB0b3AgY29vcmRpbmF0ZSwgd2hpY2ggbXVzdCBiZSBpbiBbMCxnZXRIZWlnaHQoKSkKCSAgICAgKiBAcGFyYW0gd2lkdGggVGhlIHdpZHRoIG9mIHRoZSByZWN0YW5nbGUgdG8gY3JvcC4KCSAgICAgKiBAcGFyYW0gaGVpZ2h0IFRoZSBoZWlnaHQgb2YgdGhlIHJlY3RhbmdsZSB0byBjcm9wLgoJICAgICAqIEByZXR1cm4gQSBjcm9wcGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5jcm9wID0gZnVuY3Rpb24gKGxlZnQgLyppbnQqLywgdG9wIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHZhciBuZXdTb3VyY2UgPSB0aGlzLmJpbmFyaXplci5nZXRMdW1pbmFuY2VTb3VyY2UoKS5jcm9wKGxlZnQsIHRvcCwgd2lkdGgsIGhlaWdodCk7CgkgICAgICAgIHJldHVybiBuZXcgQmluYXJ5Qml0bWFwKHRoaXMuYmluYXJpemVyLmNyZWF0ZUJpbmFyaXplcihuZXdTb3VyY2UpKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIGJpdG1hcCBzdXBwb3J0cyBjb3VudGVyLWNsb2Nrd2lzZSByb3RhdGlvbi4KCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmlzUm90YXRlU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkuaXNSb3RhdGVTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggcm90YXRlZCBpbWFnZSBkYXRhIGJ5IDkwIGRlZ3JlZXMgY291bnRlcmNsb2Nrd2lzZS4KCSAgICAgKiBPbmx5IGNhbGxhYmxlIGlmIHtAbGluayAjaXNSb3RhdGVTdXBwb3J0ZWQoKX0gaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gQSByb3RhdGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3U291cmNlID0gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkucm90YXRlQ291bnRlckNsb2Nrd2lzZSgpOwoJICAgICAgICByZXR1cm4gbmV3IEJpbmFyeUJpdG1hcCh0aGlzLmJpbmFyaXplci5jcmVhdGVCaW5hcml6ZXIobmV3U291cmNlKSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIGEgbmV3IG9iamVjdCB3aXRoIHJvdGF0ZWQgaW1hZ2UgZGF0YSBieSA0NSBkZWdyZWVzIGNvdW50ZXJjbG9ja3dpc2UuCgkgICAgICogT25seSBjYWxsYWJsZSBpZiB7QGxpbmsgI2lzUm90YXRlU3VwcG9ydGVkKCl9IGlzIHRydWUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIEEgcm90YXRlZCB2ZXJzaW9uIG9mIHRoaXMgb2JqZWN0LgoJICAgICAqLwoJICAgIEJpbmFyeUJpdG1hcC5wcm90b3R5cGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3U291cmNlID0gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1KCk7CgkgICAgICAgIHJldHVybiBuZXcgQmluYXJ5Qml0bWFwKHRoaXMuYmluYXJpemVyLmNyZWF0ZUJpbmFyaXplcihuZXdTb3VyY2UpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QmxhY2tNYXRyaXgoKS50b1N0cmluZygpOwoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlIC8qOiBOb3RGb3VuZEV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICByZXR1cm4gJyc7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHJldHVybiBCaW5hcnlCaXRtYXA7Cgl9KCkpOwoJdmFyIF9kZWZhdWx0JDMgPSBCaW5hcnlCaXRtYXAkMS5kZWZhdWx0ID0gQmluYXJ5Qml0bWFwOwoKCXZhciBIeWJyaWRCaW5hcml6ZXIkMSA9IHt9OwoKCXZhciBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMSA9IHt9OwoKCXZhciBCaW5hcml6ZXIkMSA9IHt9OwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmluYXJpemVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogVGhpcyBjbGFzcyBoaWVyYXJjaHkgcHJvdmlkZXMgYSBzZXQgb2YgbWV0aG9kcyB0byBjb252ZXJ0IGx1bWluYW5jZSBkYXRhIHRvIDEgYml0IGRhdGEuCgkgKiBJdCBhbGxvd3MgdGhlIGFsZ29yaXRobSB0byB2YXJ5IHBvbHltb3JwaGljYWxseSwgZm9yIGV4YW1wbGUgYWxsb3dpbmcgYSB2ZXJ5IGV4cGVuc2l2ZQoJICogdGhyZXNob2xkaW5nIHRlY2huaXF1ZSBmb3Igc2VydmVycyBhbmQgYSBmYXN0IG9uZSBmb3IgbW9iaWxlLiBJdCBhbHNvIHBlcm1pdHMgdGhlIGltcGxlbWVudGF0aW9uCgkgKiB0byB2YXJ5LCBlLmcuIGEgSk5JIHZlcnNpb24gZm9yIEFuZHJvaWQgYW5kIGEgSmF2YSBmYWxsYmFjayB2ZXJzaW9uIGZvciBvdGhlciBwbGF0Zm9ybXMuCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqLwoJdmFyIEJpbmFyaXplciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBCaW5hcml6ZXIoc291cmNlKSB7CgkgICAgICAgIHRoaXMuc291cmNlID0gc291cmNlOwoJICAgIH0KCSAgICBCaW5hcml6ZXIucHJvdG90eXBlLmdldEx1bWluYW5jZVNvdXJjZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlOwoJICAgIH07CgkgICAgQmluYXJpemVyLnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlLmdldFdpZHRoKCk7CgkgICAgfTsKCSAgICBCaW5hcml6ZXIucHJvdG90eXBlLmdldEhlaWdodCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlLmdldEhlaWdodCgpOwoJICAgIH07CgkgICAgcmV0dXJuIEJpbmFyaXplcjsKCX0oKSk7CglCaW5hcml6ZXIkMS5kZWZhdWx0ID0gQmluYXJpemVyOwoKCXZhciBCaXRBcnJheSQxID0ge307CgoJdmFyIEFycmF5cyQxID0ge307CgoJdmFyIFN5c3RlbSQxID0ge307CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN5c3RlbSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3lzdGVtID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIFN5c3RlbSgpIHsKCSAgICB9CgkgICAgLy8gcHVibGljIHN0YXRpYyB2b2lkIGFycmF5Y29weShPYmplY3Qgc3JjLCBpbnQgc3JjUG9zLCBPYmplY3QgZGVzdCwgaW50IGRlc3RQb3MsIGludCBsZW5ndGgpCgkgICAgLyoqCgkgICAgICogTWFrZXMgYSBjb3B5IG9mIGEgYXJyYXkuCgkgICAgICovCgkgICAgU3lzdGVtLmFycmF5Y29weSA9IGZ1bmN0aW9uIChzcmMsIHNyY1BvcywgZGVzdCwgZGVzdFBvcywgbGVuZ3RoKSB7CgkgICAgICAgIC8vIFRPRE86IGJldHRlciB1c2Ugc3BsaXQgb3Igc2V0PwoJICAgICAgICB3aGlsZSAobGVuZ3RoLS0pIHsKCSAgICAgICAgICAgIGRlc3RbZGVzdFBvcysrXSA9IHNyY1tzcmNQb3MrK107CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIGN1cnJlbnQgdGltZSBpbiBtaWxsaXNlY29uZHMuCgkgICAgICovCgkgICAgU3lzdGVtLmN1cnJlbnRUaW1lTWlsbGlzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gRGF0ZS5ub3coKTsKCSAgICB9OwoJICAgIHJldHVybiBTeXN0ZW07Cgl9KCkpOwoJU3lzdGVtJDEuZGVmYXVsdCA9IFN5c3RlbTsKCgl2YXIgQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiQxID0ge307CgoJdmFyIF9fZXh0ZW5kcyRoID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDggPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkaChJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbi5raW5kID0gJ0luZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24nOwoJICAgIHJldHVybiBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQ4LmRlZmF1bHQpKTsKCUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMS5kZWZhdWx0ID0gSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbjsKCgl2YXIgX19leHRlbmRzJGcgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uXzEgPSBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDE7CgkvKioKCSAqIEN1c3RvbSBFcnJvciBjbGFzcyBvZiB0eXBlIEV4Y2VwdGlvbi4KCSAqLwoJdmFyIEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZyhBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uKGluZGV4LCBtZXNzYWdlKSB7CgkgICAgICAgIGlmIChpbmRleCA9PT0gdm9pZCAwKSB7IGluZGV4ID0gdW5kZWZpbmVkOyB9CgkgICAgICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IHVuZGVmaW5lZDsgfQoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBtZXNzYWdlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5pbmRleCA9IGluZGV4OwoJICAgICAgICBfdGhpcy5tZXNzYWdlID0gbWVzc2FnZTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24ua2luZCA9ICdBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24nOwoJICAgIHJldHVybiBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb247Cgl9KEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMS5kZWZhdWx0KSk7CglBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMS5kZWZhdWx0ID0gQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uOwoKCXZhciBfX3ZhbHVlcyQ3ID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFycmF5cyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3lzdGVtXzEkNSA9IFN5c3RlbSQxOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDkgPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMSA9IEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiQxOwoJdmFyIEFycmF5cyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBBcnJheXMoKSB7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEFzc2lnbnMgdGhlIHNwZWNpZmllZCBpbnQgdmFsdWUgdG8gZWFjaCBlbGVtZW50IG9mIHRoZSBzcGVjaWZpZWQgYXJyYXkKCSAgICAgKiBvZiBpbnRzLgoJICAgICAqCgkgICAgICogQHBhcmFtIGEgdGhlIGFycmF5IHRvIGJlIGZpbGxlZAoJICAgICAqIEBwYXJhbSB2YWwgdGhlIHZhbHVlIHRvIGJlIHN0b3JlZCBpbiBhbGwgZWxlbWVudHMgb2YgdGhlIGFycmF5CgkgICAgICovCgkgICAgQXJyYXlzLmZpbGwgPSBmdW5jdGlvbiAoYSwgdmFsKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBhLmxlbmd0aDsgaSA8IGxlbjsgaSsrKQoJICAgICAgICAgICAgYVtpXSA9IHZhbDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEFzc2lnbnMgdGhlIHNwZWNpZmllZCBpbnQgdmFsdWUgdG8gZWFjaCBlbGVtZW50IG9mIHRoZSBzcGVjaWZpZWQKCSAgICAgKiByYW5nZSBvZiB0aGUgc3BlY2lmaWVkIGFycmF5IG9mIGludHMuICBUaGUgcmFuZ2UgdG8gYmUgZmlsbGVkCgkgICAgICogZXh0ZW5kcyBmcm9tIGluZGV4IHtAY29kZSBmcm9tSW5kZXh9LCBpbmNsdXNpdmUsIHRvIGluZGV4CgkgICAgICoge0Bjb2RlIHRvSW5kZXh9LCBleGNsdXNpdmUuICAoSWYge0Bjb2RlIGZyb21JbmRleD09dG9JbmRleH0sIHRoZQoJICAgICAqIHJhbmdlIHRvIGJlIGZpbGxlZCBpcyBlbXB0eS4pCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYSB0aGUgYXJyYXkgdG8gYmUgZmlsbGVkCgkgICAgICogQHBhcmFtIGZyb21JbmRleCB0aGUgaW5kZXggb2YgdGhlIGZpcnN0IGVsZW1lbnQgKGluY2x1c2l2ZSkgdG8gYmUKCSAgICAgKiAgICAgICAgZmlsbGVkIHdpdGggdGhlIHNwZWNpZmllZCB2YWx1ZQoJICAgICAqIEBwYXJhbSB0b0luZGV4IHRoZSBpbmRleCBvZiB0aGUgbGFzdCBlbGVtZW50IChleGNsdXNpdmUpIHRvIGJlCgkgICAgICogICAgICAgIGZpbGxlZCB3aXRoIHRoZSBzcGVjaWZpZWQgdmFsdWUKCSAgICAgKiBAcGFyYW0gdmFsIHRoZSB2YWx1ZSB0byBiZSBzdG9yZWQgaW4gYWxsIGVsZW1lbnRzIG9mIHRoZSBhcnJheQoJICAgICAqIEB0aHJvd3MgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uIGlmIHtAY29kZSBmcm9tSW5kZXggPiB0b0luZGV4fQoJICAgICAqIEB0aHJvd3MgQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uIGlmIHtAY29kZSBmcm9tSW5kZXggPCAwfSBvcgoJICAgICAqICAgICAgICAge0Bjb2RlIHRvSW5kZXggPiBhLmxlbmd0aH0KCSAgICAgKi8KCSAgICBBcnJheXMuZmlsbFdpdGhpbiA9IGZ1bmN0aW9uIChhLCBmcm9tSW5kZXgsIHRvSW5kZXgsIHZhbCkgewoJICAgICAgICBBcnJheXMucmFuZ2VDaGVjayhhLmxlbmd0aCwgZnJvbUluZGV4LCB0b0luZGV4KTsKCSAgICAgICAgZm9yICh2YXIgaSA9IGZyb21JbmRleDsgaSA8IHRvSW5kZXg7IGkrKykKCSAgICAgICAgICAgIGFbaV0gPSB2YWw7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDaGVja3MgdGhhdCB7QGNvZGUgZnJvbUluZGV4fSBhbmQge0Bjb2RlIHRvSW5kZXh9IGFyZSBpbgoJICAgICAqIHRoZSByYW5nZSBhbmQgdGhyb3dzIGFuIGV4Y2VwdGlvbiBpZiB0aGV5IGFyZW4ndC4KCSAgICAgKi8KCSAgICBBcnJheXMucmFuZ2VDaGVjayA9IGZ1bmN0aW9uIChhcnJheUxlbmd0aCwgZnJvbUluZGV4LCB0b0luZGV4KSB7CgkgICAgICAgIGlmIChmcm9tSW5kZXggPiB0b0luZGV4KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkOS5kZWZhdWx0KCdmcm9tSW5kZXgoJyArIGZyb21JbmRleCArICcpID4gdG9JbmRleCgnICsgdG9JbmRleCArICcpJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGZyb21JbmRleCA8IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMS5kZWZhdWx0KGZyb21JbmRleCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRvSW5kZXggPiBhcnJheUxlbmd0aCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbl8xLmRlZmF1bHQodG9JbmRleCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIEFycmF5cy5hc0xpc3QgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBhcmdzID0gW107CgkgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7CgkgICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGFyZ3M7CgkgICAgfTsKCSAgICBBcnJheXMuY3JlYXRlID0gZnVuY3Rpb24gKHJvd3MsIGNvbHMsIHZhbHVlKSB7CgkgICAgICAgIHZhciBhcnIgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiByb3dzIH0pOwoJICAgICAgICByZXR1cm4gYXJyLm1hcChmdW5jdGlvbiAoeCkgeyByZXR1cm4gQXJyYXkuZnJvbSh7IGxlbmd0aDogY29scyB9KS5maWxsKHZhbHVlKTsgfSk7CgkgICAgfTsKCSAgICBBcnJheXMuY3JlYXRlSW50MzJBcnJheSA9IGZ1bmN0aW9uIChyb3dzLCBjb2xzLCB2YWx1ZSkgewoJICAgICAgICB2YXIgYXJyID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogcm93cyB9KTsKCSAgICAgICAgcmV0dXJuIGFyci5tYXAoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIEludDMyQXJyYXkuZnJvbSh7IGxlbmd0aDogY29scyB9KS5maWxsKHZhbHVlKTsgfSk7CgkgICAgfTsKCSAgICBBcnJheXMuZXF1YWxzID0gZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsKCSAgICAgICAgaWYgKCFmaXJzdCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIGlmICghc2Vjb25kKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKCFmaXJzdC5sZW5ndGgpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoIXNlY29uZC5sZW5ndGgpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZmlyc3QubGVuZ3RoICE9PSBzZWNvbmQubGVuZ3RoKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gZmlyc3QubGVuZ3RoOyBpIDwgbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgaWYgKGZpcnN0W2ldICE9PSBzZWNvbmRbaV0pIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICBBcnJheXMuaGFzaENvZGUgPSBmdW5jdGlvbiAoYSkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgaWYgKGEgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiAwOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSAxOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgYV8xID0gX192YWx1ZXMkNyhhKSwgYV8xXzEgPSBhXzEubmV4dCgpOyAhYV8xXzEuZG9uZTsgYV8xXzEgPSBhXzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBhXzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICByZXN1bHQgPSAzMSAqIHJlc3VsdCArIGVsZW1lbnQ7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChhXzFfMSAmJiAhYV8xXzEuZG9uZSAmJiAoX2EgPSBhXzEucmV0dXJuKSkgX2EuY2FsbChhXzEpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZmluYWxseSB7IGlmIChlXzEpIHRocm93IGVfMS5lcnJvcjsgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgfTsKCSAgICBBcnJheXMuZmlsbFVpbnQ4QXJyYXkgPSBmdW5jdGlvbiAoYSwgdmFsdWUpIHsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgIT09IGEubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIGFbaV0gPSB2YWx1ZTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgQXJyYXlzLmNvcHlPZiA9IGZ1bmN0aW9uIChvcmlnaW5hbCwgbmV3TGVuZ3RoKSB7CgkgICAgICAgIHJldHVybiBvcmlnaW5hbC5zbGljZSgwLCBuZXdMZW5ndGgpOwoJICAgIH07CgkgICAgQXJyYXlzLmNvcHlPZlVpbnQ4QXJyYXkgPSBmdW5jdGlvbiAob3JpZ2luYWwsIG5ld0xlbmd0aCkgewoJICAgICAgICBpZiAob3JpZ2luYWwubGVuZ3RoIDw9IG5ld0xlbmd0aCkgewoJICAgICAgICAgICAgdmFyIG5ld0FycmF5ID0gbmV3IFVpbnQ4QXJyYXkobmV3TGVuZ3RoKTsKCSAgICAgICAgICAgIG5ld0FycmF5LnNldChvcmlnaW5hbCk7CgkgICAgICAgICAgICByZXR1cm4gbmV3QXJyYXk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG9yaWdpbmFsLnNsaWNlKDAsIG5ld0xlbmd0aCk7CgkgICAgfTsKCSAgICBBcnJheXMuY29weU9mUmFuZ2UgPSBmdW5jdGlvbiAob3JpZ2luYWwsIGZyb20sIHRvKSB7CgkgICAgICAgIHZhciBuZXdMZW5ndGggPSB0byAtIGZyb207CgkgICAgICAgIHZhciBjb3B5ID0gbmV3IEludDMyQXJyYXkobmV3TGVuZ3RoKTsKCSAgICAgICAgU3lzdGVtXzEkNS5kZWZhdWx0LmFycmF5Y29weShvcmlnaW5hbCwgZnJvbSwgY29weSwgMCwgbmV3TGVuZ3RoKTsKCSAgICAgICAgcmV0dXJuIGNvcHk7CgkgICAgfTsKCSAgICAvKgoJICAgICogUmV0dXJucyB0aGUgaW5kZXggb2Ygb2YgdGhlIGVsZW1lbnQgaW4gYSBzb3J0ZWQgYXJyYXkgb3IgKC1uLTEpIHdoZXJlIG4gaXMgdGhlIGluc2VydGlvbiBwb2ludAoJICAgICogZm9yIHRoZSBuZXcgZWxlbWVudC4KCSAgICAqIFBhcmFtZXRlcnM6CgkgICAgKiAgICAgYXIgLSBBIHNvcnRlZCBhcnJheQoJICAgICogICAgIGVsIC0gQW4gZWxlbWVudCB0byBzZWFyY2ggZm9yCgkgICAgKiAgICAgY29tcGFyYXRvciAtIEEgY29tcGFyYXRvciBmdW5jdGlvbi4gVGhlIGZ1bmN0aW9uIHRha2VzIHR3byBhcmd1bWVudHM6IChhLCBiKSBhbmQgcmV0dXJuczoKCSAgICAqICAgICAgICBhIG5lZ2F0aXZlIG51bWJlciAgaWYgYSBpcyBsZXNzIHRoYW4gYjsKCSAgICAqICAgICAgICAwIGlmIGEgaXMgZXF1YWwgdG8gYjsKCSAgICAqICAgICAgICBhIHBvc2l0aXZlIG51bWJlciBvZiBhIGlzIGdyZWF0ZXIgdGhhbiBiLgoJICAgICogVGhlIGFycmF5IG1heSBjb250YWluIGR1cGxpY2F0ZSBlbGVtZW50cy4gSWYgdGhlcmUgYXJlIG1vcmUgdGhhbiBvbmUgZXF1YWwgZWxlbWVudHMgaW4gdGhlIGFycmF5LAoJICAgICogdGhlIHJldHVybmVkIHZhbHVlIGNhbiBiZSB0aGUgaW5kZXggb2YgYW55IG9uZSBvZiB0aGUgZXF1YWwgZWxlbWVudHMuCgkgICAgKgoJICAgICogaHR0cDovL2pzZmlkZGxlLm5ldC9hcnl6aG92L3BrZnN0NTUwLwoJICAgICovCgkgICAgQXJyYXlzLmJpbmFyeVNlYXJjaCA9IGZ1bmN0aW9uIChhciwgZWwsIGNvbXBhcmF0b3IpIHsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gY29tcGFyYXRvcikgewoJICAgICAgICAgICAgY29tcGFyYXRvciA9IEFycmF5cy5udW1iZXJDb21wYXJhdG9yOwoJICAgICAgICB9CgkgICAgICAgIHZhciBtID0gMDsKCSAgICAgICAgdmFyIG4gPSBhci5sZW5ndGggLSAxOwoJICAgICAgICB3aGlsZSAobSA8PSBuKSB7CgkgICAgICAgICAgICB2YXIgayA9IChuICsgbSkgPj4gMTsKCSAgICAgICAgICAgIHZhciBjbXAgPSBjb21wYXJhdG9yKGVsLCBhcltrXSk7CgkgICAgICAgICAgICBpZiAoY21wID4gMCkgewoJICAgICAgICAgICAgICAgIG0gPSBrICsgMTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKGNtcCA8IDApIHsKCSAgICAgICAgICAgICAgICBuID0gayAtIDE7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gazsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gLW0gLSAxOwoJICAgIH07CgkgICAgQXJyYXlzLm51bWJlckNvbXBhcmF0b3IgPSBmdW5jdGlvbiAoYSwgYikgewoJICAgICAgICByZXR1cm4gYSAtIGI7CgkgICAgfTsKCSAgICByZXR1cm4gQXJyYXlzOwoJfSgpKTsKCUFycmF5cyQxLmRlZmF1bHQgPSBBcnJheXM7CgoJdmFyIEludGVnZXIkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbnRlZ2VyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogUG9ueWZpbGwgZm9yIEphdmEncyBJbnRlZ2VyIGNsYXNzLgoJICovCgl2YXIgSW50ZWdlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBJbnRlZ2VyKCkgewoJICAgIH0KCSAgICBJbnRlZ2VyLm51bWJlck9mVHJhaWxpbmdaZXJvcyA9IGZ1bmN0aW9uIChpKSB7CgkgICAgICAgIHZhciB5OwoJICAgICAgICBpZiAoaSA9PT0gMCkKCSAgICAgICAgICAgIHJldHVybiAzMjsKCSAgICAgICAgdmFyIG4gPSAzMTsKCSAgICAgICAgeSA9IGkgPDwgMTY7CgkgICAgICAgIGlmICh5ICE9PSAwKSB7CgkgICAgICAgICAgICBuIC09IDE2OwoJICAgICAgICAgICAgaSA9IHk7CgkgICAgICAgIH0KCSAgICAgICAgeSA9IGkgPDwgODsKCSAgICAgICAgaWYgKHkgIT09IDApIHsKCSAgICAgICAgICAgIG4gLT0gODsKCSAgICAgICAgICAgIGkgPSB5OwoJICAgICAgICB9CgkgICAgICAgIHkgPSBpIDw8IDQ7CgkgICAgICAgIGlmICh5ICE9PSAwKSB7CgkgICAgICAgICAgICBuIC09IDQ7CgkgICAgICAgICAgICBpID0geTsKCSAgICAgICAgfQoJICAgICAgICB5ID0gaSA8PCAyOwoJICAgICAgICBpZiAoeSAhPT0gMCkgewoJICAgICAgICAgICAgbiAtPSAyOwoJICAgICAgICAgICAgaSA9IHk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG4gLSAoKGkgPDwgMSkgPj4+IDMxKTsKCSAgICB9OwoJICAgIEludGVnZXIubnVtYmVyT2ZMZWFkaW5nWmVyb3MgPSBmdW5jdGlvbiAoaSkgewoJICAgICAgICAvLyBIRCwgRmlndXJlIDUtNgoJICAgICAgICBpZiAoaSA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIDMyOwoJICAgICAgICB9CgkgICAgICAgIHZhciBuID0gMTsKCSAgICAgICAgaWYgKGkgPj4+IDE2ID09PSAwKSB7CgkgICAgICAgICAgICBuICs9IDE2OwoJICAgICAgICAgICAgaSA8PD0gMTY7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGkgPj4+IDI0ID09PSAwKSB7CgkgICAgICAgICAgICBuICs9IDg7CgkgICAgICAgICAgICBpIDw8PSA4OwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID4+PiAyOCA9PT0gMCkgewoJICAgICAgICAgICAgbiArPSA0OwoJICAgICAgICAgICAgaSA8PD0gNDsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaSA+Pj4gMzAgPT09IDApIHsKCSAgICAgICAgICAgIG4gKz0gMjsKCSAgICAgICAgICAgIGkgPDw9IDI7CgkgICAgICAgIH0KCSAgICAgICAgbiAtPSBpID4+PiAzMTsKCSAgICAgICAgcmV0dXJuIG47CgkgICAgfTsKCSAgICBJbnRlZ2VyLnRvSGV4U3RyaW5nID0gZnVuY3Rpb24gKGkpIHsKCSAgICAgICAgcmV0dXJuIGkudG9TdHJpbmcoMTYpOwoJICAgIH07CgkgICAgSW50ZWdlci50b0JpbmFyeVN0cmluZyA9IGZ1bmN0aW9uIChpbnROdW1iZXIpIHsKCSAgICAgICAgcmV0dXJuIFN0cmluZyhwYXJzZUludChTdHJpbmcoaW50TnVtYmVyKSwgMikpOwoJICAgIH07CgkgICAgLy8gUmV0dXJucyB0aGUgbnVtYmVyIG9mIG9uZS1iaXRzIGluIHRoZSB0d28ncyBjb21wbGVtZW50IGJpbmFyeSByZXByZXNlbnRhdGlvbiBvZiB0aGUgc3BlY2lmaWVkIGludCB2YWx1ZS4gVGhpcyBmdW5jdGlvbiBpcyBzb21ldGltZXMgcmVmZXJyZWQgdG8gYXMgdGhlIHBvcHVsYXRpb24gY291bnQuCgkgICAgLy8gUmV0dXJuczoKCSAgICAvLyB0aGUgbnVtYmVyIG9mIG9uZS1iaXRzIGluIHRoZSB0d28ncyBjb21wbGVtZW50IGJpbmFyeSByZXByZXNlbnRhdGlvbiBvZiB0aGUgc3BlY2lmaWVkIGludCB2YWx1ZS4KCSAgICBJbnRlZ2VyLmJpdENvdW50ID0gZnVuY3Rpb24gKGkpIHsKCSAgICAgICAgLy8gSEQsIEZpZ3VyZSA1LTIKCSAgICAgICAgaSA9IGkgLSAoKGkgPj4+IDEpICYgMHg1NTU1NTU1NSk7CgkgICAgICAgIGkgPSAoaSAmIDB4MzMzMzMzMzMpICsgKChpID4+PiAyKSAmIDB4MzMzMzMzMzMpOwoJICAgICAgICBpID0gKGkgKyAoaSA+Pj4gNCkpICYgMHgwZjBmMGYwZjsKCSAgICAgICAgaSA9IGkgKyAoaSA+Pj4gOCk7CgkgICAgICAgIGkgPSBpICsgKGkgPj4+IDE2KTsKCSAgICAgICAgcmV0dXJuIGkgJiAweDNmOwoJICAgIH07CgkgICAgSW50ZWdlci50cnVuY0RpdmlzaW9uID0gZnVuY3Rpb24gKGRpdmlkZW5kLCBkaXZpc29yKSB7CgkgICAgICAgIHJldHVybiBNYXRoLnRydW5jKGRpdmlkZW5kIC8gZGl2aXNvcik7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDb252ZXJ0cyBBIHN0cmluZyB0byBhbiBpbnRlZ2VyLgoJICAgICAqIEBwYXJhbSBzIEEgc3RyaW5nIHRvIGNvbnZlcnQgaW50byBhIG51bWJlci4KCSAgICAgKiBAcGFyYW0gcmFkaXggQSB2YWx1ZSBiZXR3ZWVuIDIgYW5kIDM2IHRoYXQgc3BlY2lmaWVzIHRoZSBiYXNlIG9mIHRoZSBudW1iZXIgaW4gbnVtU3RyaW5nLiBJZiB0aGlzIGFyZ3VtZW50IGlzIG5vdCBzdXBwbGllZCwgc3RyaW5ncyB3aXRoIGEgcHJlZml4IG9mICcweCcgYXJlIGNvbnNpZGVyZWQgaGV4YWRlY2ltYWwuIEFsbCBvdGhlciBzdHJpbmdzIGFyZSBjb25zaWRlcmVkIGRlY2ltYWwuCgkgICAgICovCgkgICAgSW50ZWdlci5wYXJzZUludCA9IGZ1bmN0aW9uIChudW0sIHJhZGl4KSB7CgkgICAgICAgIGlmIChyYWRpeCA9PT0gdm9pZCAwKSB7IHJhZGl4ID0gdW5kZWZpbmVkOyB9CgkgICAgICAgIHJldHVybiBwYXJzZUludChudW0sIHJhZGl4KTsKCSAgICB9OwoJICAgIEludGVnZXIuTUlOX1ZBTFVFXzMyX0JJVFMgPSAtMjE0NzQ4MzY0ODsKCSAgICBJbnRlZ2VyLk1BWF9WQUxVRSA9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSOwoJICAgIHJldHVybiBJbnRlZ2VyOwoJfSgpKTsKCUludGVnZXIkMS5kZWZhdWx0ID0gSW50ZWdlcjsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdEFycmF5JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5czsqLwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDggPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcnJheXNfMSQxID0gQXJyYXlzJDE7Cgl2YXIgSW50ZWdlcl8xJDIgPSBJbnRlZ2VyJDE7Cgl2YXIgU3lzdGVtXzEkNCA9IFN5c3RlbSQxOwoJLyoqCgkgKiA8cD5BIHNpbXBsZSwgZmFzdCBhcnJheSBvZiBiaXRzLCByZXByZXNlbnRlZCBjb21wYWN0bHkgYnkgYW4gYXJyYXkgb2YgaW50cyBpbnRlcm5hbGx5LjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgQml0QXJyYXkgLyppbXBsZW1lbnRzIENsb25lYWJsZSovID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3RvcigpIHsKCSAgICAvLyAgIHRoaXMuc2l6ZSA9IDAKCSAgICAvLyAgIHRoaXMuYml0cyA9IG5ldyBJbnQzMkFycmF5KDEpCgkgICAgLy8gfQoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3RvcihzaXplPzogbnVtYmVyIC8qaW50Ki8pIHsKCSAgICAvLyAgIGlmICh1bmRlZmluZWQgPT09IHNpemUpIHsKCSAgICAvLyAgICAgdGhpcy5zaXplID0gMAoJICAgIC8vICAgfSBlbHNlIHsKCSAgICAvLyAgICAgdGhpcy5zaXplID0gc2l6ZQoJICAgIC8vICAgfQoJICAgIC8vICAgdGhpcy5iaXRzID0gdGhpcy5tYWtlQXJyYXkoc2l6ZSkKCSAgICAvLyB9CgkgICAgLy8gRm9yIHRlc3Rpbmcgb25seQoJICAgIGZ1bmN0aW9uIEJpdEFycmF5KHNpemUgLyppbnQqLywgYml0cykgewoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSBzaXplKSB7CgkgICAgICAgICAgICB0aGlzLnNpemUgPSAwOwoJICAgICAgICAgICAgdGhpcy5iaXRzID0gbmV3IEludDMyQXJyYXkoMSk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICB0aGlzLnNpemUgPSBzaXplOwoJICAgICAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gYml0cyB8fCBudWxsID09PSBiaXRzKSB7CgkgICAgICAgICAgICAgICAgdGhpcy5iaXRzID0gQml0QXJyYXkubWFrZUFycmF5KHNpemUpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhpcy5iaXRzID0gYml0czsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgIH0KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZ2V0U2l6ZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZTsKCSAgICB9OwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXRTaXplSW5CeXRlcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoKHRoaXMuc2l6ZSArIDcpIC8gOCk7CgkgICAgfTsKCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZW5zdXJlQ2FwYWNpdHkgPSBmdW5jdGlvbiAoc2l6ZSAvKmludCovKSB7CgkgICAgICAgIGlmIChzaXplID4gdGhpcy5iaXRzLmxlbmd0aCAqIDMyKSB7CgkgICAgICAgICAgICB2YXIgbmV3Qml0cyA9IEJpdEFycmF5Lm1ha2VBcnJheShzaXplKTsKCSAgICAgICAgICAgIFN5c3RlbV8xJDQuZGVmYXVsdC5hcnJheWNvcHkodGhpcy5iaXRzLCAwLCBuZXdCaXRzLCAwLCB0aGlzLmJpdHMubGVuZ3RoKTsKCSAgICAgICAgICAgIHRoaXMuYml0cyA9IG5ld0JpdHM7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBpIGJpdCB0byBnZXQKCSAgICAgKiBAcmV0dXJuIHRydWUgaWZmIGJpdCBpIGlzIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoaSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiAodGhpcy5iaXRzW01hdGguZmxvb3IoaSAvIDMyKV0gJiAoMSA8PCAoaSAmIDB4MUYpKSkgIT09IDA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGJpdCBpLgoJICAgICAqCgkgICAgICogQHBhcmFtIGkgYml0IHRvIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoaSAvKmludCovKSB7CgkgICAgICAgIHRoaXMuYml0c1tNYXRoLmZsb29yKGkgLyAzMildIHw9IDEgPDwgKGkgJiAweDFGKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEZsaXBzIGJpdCBpLgoJICAgICAqCgkgICAgICogQHBhcmFtIGkgYml0IHRvIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5mbGlwID0gZnVuY3Rpb24gKGkgLyppbnQqLykgewoJICAgICAgICB0aGlzLmJpdHNbTWF0aC5mbG9vcihpIC8gMzIpXSBePSAxIDw8IChpICYgMHgxRik7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gZnJvbSBmaXJzdCBiaXQgdG8gY2hlY2sKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIGZpcnN0IGJpdCB0aGF0IGlzIHNldCwgc3RhcnRpbmcgZnJvbSB0aGUgZ2l2ZW4gaW5kZXgsIG9yIHNpemUgaWYgbm9uZSBhcmUgc2V0CgkgICAgICogIGF0IG9yIGJleW9uZCB0aGlzIGdpdmVuIGluZGV4CgkgICAgICogQHNlZSAjZ2V0TmV4dFVuc2V0KGludCkKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZ2V0TmV4dFNldCA9IGZ1bmN0aW9uIChmcm9tIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIHNpemUgPSB0aGlzLnNpemU7CgkgICAgICAgIGlmIChmcm9tID49IHNpemUpIHsKCSAgICAgICAgICAgIHJldHVybiBzaXplOwoJICAgICAgICB9CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IE1hdGguZmxvb3IoZnJvbSAvIDMyKTsKCSAgICAgICAgdmFyIGN1cnJlbnRCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgLy8gbWFzayBvZmYgbGVzc2VyIGJpdHMgZmlyc3QKCSAgICAgICAgY3VycmVudEJpdHMgJj0gfigoMSA8PCAoZnJvbSAmIDB4MUYpKSAtIDEpOwoJICAgICAgICB2YXIgbGVuZ3RoID0gYml0cy5sZW5ndGg7CgkgICAgICAgIHdoaWxlIChjdXJyZW50Qml0cyA9PT0gMCkgewoJICAgICAgICAgICAgaWYgKCsrYml0c09mZnNldCA9PT0gbGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIHNpemU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjdXJyZW50Qml0cyA9IGJpdHNbYml0c09mZnNldF07CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdCA9IChiaXRzT2Zmc2V0ICogMzIpICsgSW50ZWdlcl8xJDIuZGVmYXVsdC5udW1iZXJPZlRyYWlsaW5nWmVyb3MoY3VycmVudEJpdHMpOwoJICAgICAgICByZXR1cm4gcmVzdWx0ID4gc2l6ZSA/IHNpemUgOiByZXN1bHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gZnJvbSBpbmRleCB0byBzdGFydCBsb29raW5nIGZvciB1bnNldCBiaXQKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIG5leHQgdW5zZXQgYml0LCBvciB7QGNvZGUgc2l6ZX0gaWYgbm9uZSBhcmUgdW5zZXQgdW50aWwgdGhlIGVuZAoJICAgICAqIEBzZWUgI2dldE5leHRTZXQoaW50KQoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXROZXh0VW5zZXQgPSBmdW5jdGlvbiAoZnJvbSAvKmludCovKSB7CgkgICAgICAgIHZhciBzaXplID0gdGhpcy5zaXplOwoJICAgICAgICBpZiAoZnJvbSA+PSBzaXplKSB7CgkgICAgICAgICAgICByZXR1cm4gc2l6ZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgdmFyIGJpdHNPZmZzZXQgPSBNYXRoLmZsb29yKGZyb20gLyAzMik7CgkgICAgICAgIHZhciBjdXJyZW50Qml0cyA9IH5iaXRzW2JpdHNPZmZzZXRdOwoJICAgICAgICAvLyBtYXNrIG9mZiBsZXNzZXIgYml0cyBmaXJzdAoJICAgICAgICBjdXJyZW50Qml0cyAmPSB+KCgxIDw8IChmcm9tICYgMHgxRikpIC0gMSk7CgkgICAgICAgIHZhciBsZW5ndGggPSBiaXRzLmxlbmd0aDsKCSAgICAgICAgd2hpbGUgKGN1cnJlbnRCaXRzID09PSAwKSB7CgkgICAgICAgICAgICBpZiAoKytiaXRzT2Zmc2V0ID09PSBsZW5ndGgpIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gc2l6ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGN1cnJlbnRCaXRzID0gfmJpdHNbYml0c09mZnNldF07CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdCA9IChiaXRzT2Zmc2V0ICogMzIpICsgSW50ZWdlcl8xJDIuZGVmYXVsdC5udW1iZXJPZlRyYWlsaW5nWmVyb3MoY3VycmVudEJpdHMpOwoJICAgICAgICByZXR1cm4gcmVzdWx0ID4gc2l6ZSA/IHNpemUgOiByZXN1bHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGEgYmxvY2sgb2YgMzIgYml0cywgc3RhcnRpbmcgYXQgYml0IGkuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gaSBmaXJzdCBiaXQgdG8gc2V0CgkgICAgICogQHBhcmFtIG5ld0JpdHMgdGhlIG5ldyB2YWx1ZSBvZiB0aGUgbmV4dCAzMiBiaXRzLiBOb3RlIGFnYWluIHRoYXQgdGhlIGxlYXN0LXNpZ25pZmljYW50IGJpdAoJICAgICAqIGNvcnJlc3BvbmRzIHRvIGJpdCBpLCB0aGUgbmV4dC1sZWFzdC1zaWduaWZpY2FudCB0byBpKzEsIGFuZCBzbyBvbi4KCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuc2V0QnVsayA9IGZ1bmN0aW9uIChpIC8qaW50Ki8sIG5ld0JpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLmJpdHNbTWF0aC5mbG9vcihpIC8gMzIpXSA9IG5ld0JpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGEgcmFuZ2Ugb2YgYml0cy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGFydCBzdGFydCBvZiByYW5nZSwgaW5jbHVzaXZlLgoJICAgICAqIEBwYXJhbSBlbmQgZW5kIG9mIHJhbmdlLCBleGNsdXNpdmUKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuc2V0UmFuZ2UgPSBmdW5jdGlvbiAoc3RhcnQgLyppbnQqLywgZW5kIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGVuZCA8IHN0YXJ0IHx8IHN0YXJ0IDwgMCB8fCBlbmQgPiB0aGlzLnNpemUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ4LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZW5kID09PSBzdGFydCkgewoJICAgICAgICAgICAgcmV0dXJuOwoJICAgICAgICB9CgkgICAgICAgIGVuZC0tOyAvLyB3aWxsIGJlIGVhc2llciB0byB0cmVhdCB0aGlzIGFzIHRoZSBsYXN0IGFjdHVhbGx5IHNldCBiaXQgLS0gaW5jbHVzaXZlCgkgICAgICAgIHZhciBmaXJzdEludCA9IE1hdGguZmxvb3Ioc3RhcnQgLyAzMik7CgkgICAgICAgIHZhciBsYXN0SW50ID0gTWF0aC5mbG9vcihlbmQgLyAzMik7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICBmb3IgKHZhciBpID0gZmlyc3RJbnQ7IGkgPD0gbGFzdEludDsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgZmlyc3RCaXQgPSBpID4gZmlyc3RJbnQgPyAwIDogc3RhcnQgJiAweDFGOwoJICAgICAgICAgICAgdmFyIGxhc3RCaXQgPSBpIDwgbGFzdEludCA/IDMxIDogZW5kICYgMHgxRjsKCSAgICAgICAgICAgIC8vIE9uZXMgZnJvbSBmaXJzdEJpdCB0byBsYXN0Qml0LCBpbmNsdXNpdmUKCSAgICAgICAgICAgIHZhciBtYXNrID0gKDIgPDwgbGFzdEJpdCkgLSAoMSA8PCBmaXJzdEJpdCk7CgkgICAgICAgICAgICBiaXRzW2ldIHw9IG1hc2s7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIENsZWFycyBhbGwgYml0cyAoc2V0cyB0byBmYWxzZSkuCgkgICAgICovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbWF4ID0gdGhpcy5iaXRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWF4OyBpKyspIHsKCSAgICAgICAgICAgIGJpdHNbaV0gPSAwOwoJICAgICAgICB9CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBFZmZpY2llbnQgbWV0aG9kIHRvIGNoZWNrIGlmIGEgcmFuZ2Ugb2YgYml0cyBpcyBzZXQsIG9yIG5vdCBzZXQuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gc3RhcnQgc3RhcnQgb2YgcmFuZ2UsIGluY2x1c2l2ZS4KCSAgICAgKiBAcGFyYW0gZW5kIGVuZCBvZiByYW5nZSwgZXhjbHVzaXZlCgkgICAgICogQHBhcmFtIHZhbHVlIGlmIHRydWUsIGNoZWNrcyB0aGF0IGJpdHMgaW4gcmFuZ2UgYXJlIHNldCwgb3RoZXJ3aXNlIGNoZWNrcyB0aGF0IHRoZXkgYXJlIG5vdCBzZXQKCSAgICAgKiBAcmV0dXJuIHRydWUgaWZmIGFsbCBiaXRzIGFyZSBzZXQgb3Igbm90IHNldCBpbiByYW5nZSwgYWNjb3JkaW5nIHRvIHZhbHVlIGFyZ3VtZW50CgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgZW5kIGlzIGxlc3MgdGhhbiBzdGFydCBvciB0aGUgcmFuZ2UgaXMgbm90IGNvbnRhaW5lZCBpbiB0aGUgYXJyYXkKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuaXNSYW5nZSA9IGZ1bmN0aW9uIChzdGFydCAvKmludCovLCBlbmQgLyppbnQqLywgdmFsdWUpIHsKCSAgICAgICAgaWYgKGVuZCA8IHN0YXJ0IHx8IHN0YXJ0IDwgMCB8fCBlbmQgPiB0aGlzLnNpemUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ4LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZW5kID09PSBzdGFydCkgewoJICAgICAgICAgICAgcmV0dXJuIHRydWU7IC8vIGVtcHR5IHJhbmdlIG1hdGNoZXMKCSAgICAgICAgfQoJICAgICAgICBlbmQtLTsgLy8gd2lsbCBiZSBlYXNpZXIgdG8gdHJlYXQgdGhpcyBhcyB0aGUgbGFzdCBhY3R1YWxseSBzZXQgYml0IC0tIGluY2x1c2l2ZQoJICAgICAgICB2YXIgZmlyc3RJbnQgPSBNYXRoLmZsb29yKHN0YXJ0IC8gMzIpOwoJICAgICAgICB2YXIgbGFzdEludCA9IE1hdGguZmxvb3IoZW5kIC8gMzIpOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgaSA9IGZpcnN0SW50OyBpIDw9IGxhc3RJbnQ7IGkrKykgewoJICAgICAgICAgICAgdmFyIGZpcnN0Qml0ID0gaSA+IGZpcnN0SW50ID8gMCA6IHN0YXJ0ICYgMHgxRjsKCSAgICAgICAgICAgIHZhciBsYXN0Qml0ID0gaSA8IGxhc3RJbnQgPyAzMSA6IGVuZCAmIDB4MUY7CgkgICAgICAgICAgICAvLyBPbmVzIGZyb20gZmlyc3RCaXQgdG8gbGFzdEJpdCwgaW5jbHVzaXZlCgkgICAgICAgICAgICB2YXIgbWFzayA9ICgyIDw8IGxhc3RCaXQpIC0gKDEgPDwgZmlyc3RCaXQpICYgMHhGRkZGRkZGRjsKCSAgICAgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiAmIDB4RkZGRkZGRkYgYWRkZWQgdG8gZGlzY2FyZCBhbnl0aGluZyBhZnRlciAzMiBiaXRzLCBhcyBFUyBoYXMgNTMgYml0cwoJICAgICAgICAgICAgLy8gUmV0dXJuIGZhbHNlIGlmIHdlJ3JlIGxvb2tpbmcgZm9yIDFzIGFuZCB0aGUgbWFza2VkIGJpdHNbaV0gaXNuJ3QgYWxsIDFzIChpczogdGhhdCwKCSAgICAgICAgICAgIC8vIGVxdWFscyB0aGUgbWFzaywgb3Igd2UncmUgbG9va2luZyBmb3IgMHMgYW5kIHRoZSBtYXNrZWQgcG9ydGlvbiBpcyBub3QgYWxsIDBzCgkgICAgICAgICAgICBpZiAoKGJpdHNbaV0gJiBtYXNrKSAhPT0gKHZhbHVlID8gbWFzayA6IDApKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiB0cnVlOwoJICAgIH07CgkgICAgQml0QXJyYXkucHJvdG90eXBlLmFwcGVuZEJpdCA9IGZ1bmN0aW9uIChiaXQpIHsKCSAgICAgICAgdGhpcy5lbnN1cmVDYXBhY2l0eSh0aGlzLnNpemUgKyAxKTsKCSAgICAgICAgaWYgKGJpdCkgewoJICAgICAgICAgICAgdGhpcy5iaXRzW01hdGguZmxvb3IodGhpcy5zaXplIC8gMzIpXSB8PSAxIDw8ICh0aGlzLnNpemUgJiAweDFGKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLnNpemUrKzsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEFwcGVuZHMgdGhlIGxlYXN0LXNpZ25pZmljYW50IGJpdHMsIGZyb20gdmFsdWUsIGluIG9yZGVyIGZyb20gbW9zdC1zaWduaWZpY2FudCB0bwoJICAgICAqIGxlYXN0LXNpZ25pZmljYW50LiBGb3IgZXhhbXBsZSwgYXBwZW5kaW5nIDYgYml0cyBmcm9tIDB4MDAwMDAxRSB3aWxsIGFwcGVuZCB0aGUgYml0cwoJICAgICAqIDAsIDEsIDEsIDEsIDEsIDAgaW4gdGhhdCBvcmRlci4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB2YWx1ZSB7QGNvZGUgaW50fSBjb250YWluaW5nIGJpdHMgdG8gYXBwZW5kCgkgICAgICogQHBhcmFtIG51bUJpdHMgYml0cyBmcm9tIHZhbHVlIHRvIGFwcGVuZAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5hcHBlbmRCaXRzID0gZnVuY3Rpb24gKHZhbHVlIC8qaW50Ki8sIG51bUJpdHMgLyppbnQqLykgewoJICAgICAgICBpZiAobnVtQml0cyA8IDAgfHwgbnVtQml0cyA+IDMyKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkOC5kZWZhdWx0KCdOdW0gYml0cyBtdXN0IGJlIGJldHdlZW4gMCBhbmQgMzInKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLmVuc3VyZUNhcGFjaXR5KHRoaXMuc2l6ZSArIG51bUJpdHMpOwoJICAgICAgICAvLyBjb25zdCBhcHBlbmRCaXQgPSB0aGlzLmFwcGVuZEJpdDsKCSAgICAgICAgZm9yICh2YXIgbnVtQml0c0xlZnQgPSBudW1CaXRzOyBudW1CaXRzTGVmdCA+IDA7IG51bUJpdHNMZWZ0LS0pIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kQml0KCgodmFsdWUgPj4gKG51bUJpdHNMZWZ0IC0gMSkpICYgMHgwMSkgPT09IDEpOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBCaXRBcnJheS5wcm90b3R5cGUuYXBwZW5kQml0QXJyYXkgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgdmFyIG90aGVyU2l6ZSA9IG90aGVyLnNpemU7CgkgICAgICAgIHRoaXMuZW5zdXJlQ2FwYWNpdHkodGhpcy5zaXplICsgb3RoZXJTaXplKTsKCSAgICAgICAgLy8gY29uc3QgYXBwZW5kQml0ID0gdGhpcy5hcHBlbmRCaXQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb3RoZXJTaXplOyBpKyspIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kQml0KG90aGVyLmdldChpKSk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS54b3IgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKHRoaXMuc2l6ZSAhPT0gb3RoZXIuc2l6ZSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDguZGVmYXVsdCgnU2l6ZXMgZG9uXCd0IG1hdGNoJyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IGJpdHMubGVuZ3RoOyBpIDwgbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgLy8gVGhlIGxhc3QgaW50IGNvdWxkIGJlIGluY29tcGxldGUgKGkuZS4gbm90IGhhdmUgMzIgYml0cyBpbgoJICAgICAgICAgICAgLy8gaXQpIGJ1dCB0aGVyZSBpcyBubyBwcm9ibGVtIHNpbmNlIDAgWE9SIDAgPT0gMC4KCSAgICAgICAgICAgIGJpdHNbaV0gXj0gb3RoZXIuYml0c1tpXTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYml0T2Zmc2V0IGZpcnN0IGJpdCB0byBzdGFydCB3cml0aW5nCgkgICAgICogQHBhcmFtIGFycmF5IGFycmF5IHRvIHdyaXRlIGludG8uIEJ5dGVzIGFyZSB3cml0dGVuIG1vc3Qtc2lnbmlmaWNhbnQgYnl0ZSBmaXJzdC4gVGhpcyBpcyB0aGUgb3Bwb3NpdGUKCSAgICAgKiAgb2YgdGhlIGludGVybmFsIHJlcHJlc2VudGF0aW9uLCB3aGljaCBpcyBleHBvc2VkIGJ5IHtAbGluayAjZ2V0Qml0QXJyYXkoKX0KCSAgICAgKiBAcGFyYW0gb2Zmc2V0IHBvc2l0aW9uIGluIGFycmF5IHRvIHN0YXJ0IHdyaXRpbmcKCSAgICAgKiBAcGFyYW0gbnVtQnl0ZXMgaG93IG1hbnkgYnl0ZXMgdG8gd3JpdGUKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUudG9CeXRlcyA9IGZ1bmN0aW9uIChiaXRPZmZzZXQgLyppbnQqLywgYXJyYXksIG9mZnNldCAvKmludCovLCBudW1CeXRlcyAvKmludCovKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtQnl0ZXM7IGkrKykgewoJICAgICAgICAgICAgdmFyIHRoZUJ5dGUgPSAwOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCA4OyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAodGhpcy5nZXQoYml0T2Zmc2V0KSkgewoJICAgICAgICAgICAgICAgICAgICB0aGVCeXRlIHw9IDEgPDwgKDcgLSBqKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgYml0T2Zmc2V0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBhcnJheVtvZmZzZXQgKyBpXSA9IC8qKGJ5dGUpKi8gdGhlQnl0ZTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB1bmRlcmx5aW5nIGFycmF5IG9mIGludHMuIFRoZSBmaXJzdCBlbGVtZW50IGhvbGRzIHRoZSBmaXJzdCAzMiBiaXRzLCBhbmQgdGhlIGxlYXN0CgkgICAgICogICAgICAgICBzaWduaWZpY2FudCBiaXQgaXMgYml0IDAuCgkgICAgICovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLmdldEJpdEFycmF5ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRzOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV2ZXJzZXMgYWxsIGJpdHMgaW4gdGhlIGFycmF5LgoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5yZXZlcnNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3Qml0cyA9IG5ldyBJbnQzMkFycmF5KHRoaXMuYml0cy5sZW5ndGgpOwoJICAgICAgICAvLyByZXZlcnNlIGFsbCBpbnQncyBmaXJzdAoJICAgICAgICB2YXIgbGVuID0gTWF0aC5mbG9vcigodGhpcy5zaXplIC0gMSkgLyAzMik7CgkgICAgICAgIHZhciBvbGRCaXRzTGVuID0gbGVuICsgMTsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb2xkQml0c0xlbjsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgeCA9IGJpdHNbaV07CgkgICAgICAgICAgICB4ID0gKCh4ID4+IDEpICYgMHg1NTU1NTU1NSkgfCAoKHggJiAweDU1NTU1NTU1KSA8PCAxKTsKCSAgICAgICAgICAgIHggPSAoKHggPj4gMikgJiAweDMzMzMzMzMzKSB8ICgoeCAmIDB4MzMzMzMzMzMpIDw8IDIpOwoJICAgICAgICAgICAgeCA9ICgoeCA+PiA0KSAmIDB4MGYwZjBmMGYpIHwgKCh4ICYgMHgwZjBmMGYwZikgPDwgNCk7CgkgICAgICAgICAgICB4ID0gKCh4ID4+IDgpICYgMHgwMGZmMDBmZikgfCAoKHggJiAweDAwZmYwMGZmKSA8PCA4KTsKCSAgICAgICAgICAgIHggPSAoKHggPj4gMTYpICYgMHgwMDAwZmZmZikgfCAoKHggJiAweDAwMDBmZmZmKSA8PCAxNik7CgkgICAgICAgICAgICBuZXdCaXRzW2xlbiAtIGldID0gLyooaW50KSovIHg7CgkgICAgICAgIH0KCSAgICAgICAgLy8gbm93IGNvcnJlY3QgdGhlIGludCdzIGlmIHRoZSBiaXQgc2l6ZSBpc24ndCBhIG11bHRpcGxlIG9mIDMyCgkgICAgICAgIGlmICh0aGlzLnNpemUgIT09IG9sZEJpdHNMZW4gKiAzMikgewoJICAgICAgICAgICAgdmFyIGxlZnRPZmZzZXQgPSBvbGRCaXRzTGVuICogMzIgLSB0aGlzLnNpemU7CgkgICAgICAgICAgICB2YXIgY3VycmVudEludCA9IG5ld0JpdHNbMF0gPj4+IGxlZnRPZmZzZXQ7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IG9sZEJpdHNMZW47IGkrKykgewoJICAgICAgICAgICAgICAgIHZhciBuZXh0SW50ID0gbmV3Qml0c1tpXTsKCSAgICAgICAgICAgICAgICBjdXJyZW50SW50IHw9IG5leHRJbnQgPDwgKDMyIC0gbGVmdE9mZnNldCk7CgkgICAgICAgICAgICAgICAgbmV3Qml0c1tpIC0gMV0gPSBjdXJyZW50SW50OwoJICAgICAgICAgICAgICAgIGN1cnJlbnRJbnQgPSBuZXh0SW50ID4+PiBsZWZ0T2Zmc2V0OwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgbmV3Qml0c1tvbGRCaXRzTGVuIC0gMV0gPSBjdXJyZW50SW50OwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0cyA9IG5ld0JpdHM7CgkgICAgfTsKCSAgICBCaXRBcnJheS5tYWtlQXJyYXkgPSBmdW5jdGlvbiAoc2l6ZSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiBuZXcgSW50MzJBcnJheShNYXRoLmZsb29yKChzaXplICsgMzEpIC8gMzIpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gKG8pIHsKCSAgICAgICAgaWYgKCEobyBpbnN0YW5jZW9mIEJpdEFycmF5KSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLnNpemUgPT09IG90aGVyLnNpemUgJiYgQXJyYXlzXzEkMS5kZWZhdWx0LmVxdWFscyh0aGlzLmJpdHMsIG90aGVyLmJpdHMpOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDMxICogdGhpcy5zaXplICsgQXJyYXlzXzEkMS5kZWZhdWx0Lmhhc2hDb2RlKHRoaXMuYml0cyk7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgcmVzdWx0ID0gJyc7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBzaXplID0gdGhpcy5zaXplOyBpIDwgc2l6ZTsgaSsrKSB7CgkgICAgICAgICAgICBpZiAoKGkgJiAweDA3KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdCArPSAnICc7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByZXN1bHQgKz0gdGhpcy5nZXQoaSkgPyAnWCcgOiAnLic7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgQml0QXJyYXkodGhpcy5zaXplLCB0aGlzLmJpdHMuc2xpY2UoKSk7CgkgICAgfTsKCSAgICByZXR1cm4gQml0QXJyYXk7Cgl9KCkpOwoJQml0QXJyYXkkMS5kZWZhdWx0ID0gQml0QXJyYXk7CgoJdmFyIEJpdE1hdHJpeCQxID0ge307CgoJdmFyIFN0cmluZ0J1aWxkZXIkMSA9IHt9OwoKCXZhciBTdHJpbmdVdGlscyQxID0ge307CgoJdmFyIERlY29kZUhpbnRUeXBlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KERlY29kZUhpbnRUeXBlJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcgeyovCgkvKioKCSAqIEVuY2Fwc3VsYXRlcyBhIHR5cGUgb2YgaGludCB0aGF0IGEgY2FsbGVyIG1heSBwYXNzIHRvIGEgYmFyY29kZSByZWFkZXIgdG8gaGVscCBpdAoJICogbW9yZSBxdWlja2x5IG9yIGFjY3VyYXRlbHkgZGVjb2RlIGl0LiBJdCBpcyB1cCB0byBpbXBsZW1lbnRhdGlvbnMgdG8gZGVjaWRlIHdoYXQsCgkgKiBpZiBhbnl0aGluZywgdG8gZG8gd2l0aCB0aGUgaW5mb3JtYXRpb24gdGhhdCBpcyBzdXBwbGllZC4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBzZWUgUmVhZGVyI2RlY29kZShCaW5hcnlCaXRtYXAsamF2YS51dGlsLk1hcCkKCSAqLwoJdmFyIERlY29kZUhpbnRUeXBlOwoJKGZ1bmN0aW9uIChEZWNvZGVIaW50VHlwZSkgewoJICAgIC8qKgoJICAgICAqIFVuc3BlY2lmaWVkLCBhcHBsaWNhdGlvbi1zcGVjaWZpYyBoaW50LiBNYXBzIHRvIGFuIHVuc3BlY2lmaWVkIHtAbGluayBPYmplY3R9LgoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJPVEhFUiJdID0gMF0gPSAiT1RIRVIiOyAvKihPYmplY3QuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBJbWFnZSBpcyBhIHB1cmUgbW9ub2Nocm9tZSBpbWFnZSBvZiBhIGJhcmNvZGUuIERvZXNuJ3QgbWF0dGVyIHdoYXQgaXQgbWFwcyB0bzsKCSAgICAgKiB1c2Uge0BsaW5rIEJvb2xlYW4jVFJVRX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIlBVUkVfQkFSQ09ERSJdID0gMV0gPSAiUFVSRV9CQVJDT0RFIjsgLyooVm9pZC5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIEltYWdlIGlzIGtub3duIHRvIGJlIG9mIG9uZSBvZiBhIGZldyBwb3NzaWJsZSBmb3JtYXRzLgoJICAgICAqIE1hcHMgdG8gYSB7QGxpbmsgTGlzdH0gb2Yge0BsaW5rIEJhcmNvZGVGb3JtYXR9cy4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiUE9TU0lCTEVfRk9STUFUUyJdID0gMl0gPSAiUE9TU0lCTEVfRk9STUFUUyI7IC8qKExpc3QuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBTcGVuZCBtb3JlIHRpbWUgdG8gdHJ5IHRvIGZpbmQgYSBiYXJjb2RlOyBvcHRpbWl6ZSBmb3IgYWNjdXJhY3ksIG5vdCBzcGVlZC4KCSAgICAgKiBEb2Vzbid0IG1hdHRlciB3aGF0IGl0IG1hcHMgdG87IHVzZSB7QGxpbmsgQm9vbGVhbiNUUlVFfS4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiVFJZX0hBUkRFUiJdID0gM10gPSAiVFJZX0hBUkRFUiI7IC8qKFZvaWQuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBTcGVjaWZpZXMgd2hhdCBjaGFyYWN0ZXIgZW5jb2RpbmcgdG8gdXNlIHdoZW4gZGVjb2RpbmcsIHdoZXJlIGFwcGxpY2FibGUgKHR5cGUgU3RyaW5nKQoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJDSEFSQUNURVJfU0VUIl0gPSA0XSA9ICJDSEFSQUNURVJfU0VUIjsgLyooU3RyaW5nLmNsYXNzKSovCgkgICAgLyoqCgkgICAgICogQWxsb3dlZCBsZW5ndGhzIG9mIGVuY29kZWQgZGF0YSAtLSByZWplY3QgYW55dGhpbmcgZWxzZS4gTWFwcyB0byBhbiB7QGNvZGUgSW50MzJBcnJheX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIkFMTE9XRURfTEVOR1RIUyJdID0gNV0gPSAiQUxMT1dFRF9MRU5HVEhTIjsgLyooSW50MzJBcnJheS5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIEFzc3VtZSBDb2RlIDM5IGNvZGVzIGVtcGxveSBhIGNoZWNrIGRpZ2l0LiBEb2Vzbid0IG1hdHRlciB3aGF0IGl0IG1hcHMgdG87CgkgICAgICogdXNlIHtAbGluayBCb29sZWFuI1RSVUV9LgoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJBU1NVTUVfQ09ERV8zOV9DSEVDS19ESUdJVCJdID0gNl0gPSAiQVNTVU1FX0NPREVfMzlfQ0hFQ0tfRElHSVQiOyAvKihWb2lkLmNsYXNzKSovCgkgICAgLyoqCgkgICAgICogQXNzdW1lIHRoZSBiYXJjb2RlIGlzIGJlaW5nIHByb2Nlc3NlZCBhcyBhIEdTMSBiYXJjb2RlLCBhbmQgbW9kaWZ5IGJlaGF2aW9yIGFzIG5lZWRlZC4KCSAgICAgKiBGb3IgZXhhbXBsZSB0aGlzIGFmZmVjdHMgRk5DMSBoYW5kbGluZyBmb3IgQ29kZSAxMjggKGFrYSBHUzEtMTI4KS4gRG9lc24ndCBtYXR0ZXIgd2hhdCBpdCBtYXBzIHRvOwoJICAgICAqIHVzZSB7QGxpbmsgQm9vbGVhbiNUUlVFfS4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiQVNTVU1FX0dTMSJdID0gN10gPSAiQVNTVU1FX0dTMSI7IC8qKFZvaWQuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBJZiB0cnVlLCByZXR1cm4gdGhlIHN0YXJ0IGFuZCBlbmQgZGlnaXRzIGluIGEgQ29kYWJhciBiYXJjb2RlIGluc3RlYWQgb2Ygc3RyaXBwaW5nIHRoZW0uIFRoZXkKCSAgICAgKiBhcmUgYWxwaGEsIHdoZXJlYXMgdGhlIHJlc3QgYXJlIG51bWVyaWMuIEJ5IGRlZmF1bHQsIHRoZXkgYXJlIHN0cmlwcGVkLCBidXQgdGhpcyBjYXVzZXMgdGhlbQoJICAgICAqIHRvIG5vdCBiZS4gRG9lc24ndCBtYXR0ZXIgd2hhdCBpdCBtYXBzIHRvOyB1c2Uge0BsaW5rIEJvb2xlYW4jVFJVRX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIlJFVFVSTl9DT0RBQkFSX1NUQVJUX0VORCJdID0gOF0gPSAiUkVUVVJOX0NPREFCQVJfU1RBUlRfRU5EIjsgLyooVm9pZC5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIFRoZSBjYWxsZXIgbmVlZHMgdG8gYmUgbm90aWZpZWQgdmlhIGNhbGxiYWNrIHdoZW4gYSBwb3NzaWJsZSB7QGxpbmsgUmVzdWx0UG9pbnR9CgkgICAgICogaXMgZm91bmQuIE1hcHMgdG8gYSB7QGxpbmsgUmVzdWx0UG9pbnRDYWxsYmFja30uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIk5FRURfUkVTVUxUX1BPSU5UX0NBTExCQUNLIl0gPSA5XSA9ICJORUVEX1JFU1VMVF9QT0lOVF9DQUxMQkFDSyI7IC8qKFJlc3VsdFBvaW50Q2FsbGJhY2suY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBBbGxvd2VkIGV4dGVuc2lvbiBsZW5ndGhzIGZvciBFQU4gb3IgVVBDIGJhcmNvZGVzLiBPdGhlciBmb3JtYXRzIHdpbGwgaWdub3JlIHRoaXMuCgkgICAgICogTWFwcyB0byBhbiB7QGNvZGUgSW50MzJBcnJheX0gb2YgdGhlIGFsbG93ZWQgZXh0ZW5zaW9uIGxlbmd0aHMsIGZvciBleGFtcGxlIFsyXSwgWzVdLCBvciBbMiwgNV0uCgkgICAgICogSWYgaXQgaXMgb3B0aW9uYWwgdG8gaGF2ZSBhbiBleHRlbnNpb24sIGRvIG5vdCBzZXQgdGhpcyBoaW50LiBJZiB0aGlzIGlzIHNldCwKCSAgICAgKiBhbmQgYSBVUEMgb3IgRUFOIGJhcmNvZGUgaXMgZm91bmQgYnV0IGFuIGV4dGVuc2lvbiBpcyBub3QsIHRoZW4gbm8gcmVzdWx0IHdpbGwgYmUgcmV0dXJuZWQKCSAgICAgKiBhdCBhbGwuCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIkFMTE9XRURfRUFOX0VYVEVOU0lPTlMiXSA9IDEwXSA9ICJBTExPV0VEX0VBTl9FWFRFTlNJT05TIjsgLyooSW50MzJBcnJheS5jbGFzcykqLwoJICAgIC8vIEVuZCBvZiBlbnVtZXJhdGlvbiB2YWx1ZXMuCgkgICAgLyoqCgkgICAgICogRGF0YSB0eXBlIHRoZSBoaW50IGlzIGV4cGVjdGluZy4KCSAgICAgKiBBbW9uZyB0aGUgcG9zc2libGUgdmFsdWVzIHRoZSB7QGxpbmsgVm9pZH0gc3RhbmRzIG91dCBhcyBiZWluZyB1c2VkIGZvcgoJICAgICAqIGhpbnRzIHRoYXQgZG8gbm90IGV4cGVjdCBhIHZhbHVlIHRvIGJlIHN1cHBsaWVkIChmbGFnIGhpbnRzKS4gU3VjaCBoaW50cwoJICAgICAqIHdpbGwgcG9zc2libHkgaGF2ZSB0aGVpciB2YWx1ZSBpZ25vcmVkLCBvciByZXBsYWNlZCBieSBhCgkgICAgICoge0BsaW5rIEJvb2xlYW4jVFJVRX0uIEhpbnQgc3VwcGxpZXJzIHNob3VsZCBwcm9iYWJseSB1c2UKCSAgICAgKiB7QGxpbmsgQm9vbGVhbiNUUlVFfSBhcyBkaXJlY3RlZCBieSB0aGUgYWN0dWFsIGhpbnQgZG9jdW1lbnRhdGlvbi4KCSAgICAgKi8KCSAgICAvLyBwcml2YXRlIHZhbHVlVHlwZTogQ2xhc3M8Pz4KCSAgICAvLyBEZWNvZGVIaW50VHlwZSh2YWx1ZVR5cGU6IENsYXNzPD8+KSB7CgkgICAgLy8gICB0aGlzLnZhbHVlVHlwZSA9IHZhbHVlVHlwZQoJICAgIC8vIH0KCSAgICAvLyBwdWJsaWMgZ2V0VmFsdWVUeXBlKCk6IENsYXNzPD8+IHsKCSAgICAvLyAgIHJldHVybiB2YWx1ZVR5cGUKCSAgICAvLyB9Cgl9KShEZWNvZGVIaW50VHlwZSB8fCAoRGVjb2RlSGludFR5cGUgPSB7fSkpOwoJRGVjb2RlSGludFR5cGUkMS5kZWZhdWx0ID0gRGVjb2RlSGludFR5cGU7CgoJdmFyIENoYXJhY3RlclNldEVDSSA9IHt9OwoKCXZhciBGb3JtYXRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZiA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShGb3JtYXRFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDcgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgRm9ybWF0RXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyRmKEZvcm1hdEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBGb3JtYXRFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgRm9ybWF0RXhjZXB0aW9uLmdldEZvcm1hdEluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEZvcm1hdEV4Y2VwdGlvbigpOwoJICAgIH07CgkgICAgRm9ybWF0RXhjZXB0aW9uLmtpbmQgPSAnRm9ybWF0RXhjZXB0aW9uJzsKCSAgICByZXR1cm4gRm9ybWF0RXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQ3LmRlZmF1bHQpKTsKCUZvcm1hdEV4Y2VwdGlvbiQxLmRlZmF1bHQgPSBGb3JtYXRFeGNlcHRpb247CgoJKGZ1bmN0aW9uIChleHBvcnRzKSB7CgkvKgoJICogQ29weXJpZ2h0IDIwMDggWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCWV4cG9ydHMuQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycyA9IHZvaWQgMDsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xID0gRm9ybWF0RXhjZXB0aW9uJDE7CgkvKmltcG9ydCBqYXZhLnV0aWwuSGFzaE1hcDsqLwoJLyppbXBvcnQgamF2YS51dGlsLk1hcDsqLwoJdmFyIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnM7CgkoZnVuY3Rpb24gKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMpIHsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkNwNDM3Il0gPSAwXSA9ICJDcDQzNyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEiXSA9IDFdID0gIklTTzg4NTlfMSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzIiXSA9IDJdID0gIklTTzg4NTlfMiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzMiXSA9IDNdID0gIklTTzg4NTlfMyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzQiXSA9IDRdID0gIklTTzg4NTlfNCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzUiXSA9IDVdID0gIklTTzg4NTlfNSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzYiXSA9IDZdID0gIklTTzg4NTlfNiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzciXSA9IDddID0gIklTTzg4NTlfNyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzgiXSA9IDhdID0gIklTTzg4NTlfOCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzkiXSA9IDldID0gIklTTzg4NTlfOSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEwIl0gPSAxMF0gPSAiSVNPODg1OV8xMCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzExIl0gPSAxMV0gPSAiSVNPODg1OV8xMSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEzIl0gPSAxMl0gPSAiSVNPODg1OV8xMyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE0Il0gPSAxM10gPSAiSVNPODg1OV8xNCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE1Il0gPSAxNF0gPSAiSVNPODg1OV8xNSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE2Il0gPSAxNV0gPSAiSVNPODg1OV8xNiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJTSklTIl0gPSAxNl0gPSAiU0pJUyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJDcDEyNTAiXSA9IDE3XSA9ICJDcDEyNTAiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siQ3AxMjUxIl0gPSAxOF0gPSAiQ3AxMjUxIjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkNwMTI1MiJdID0gMTldID0gIkNwMTI1MiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJDcDEyNTYiXSA9IDIwXSA9ICJDcDEyNTYiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siVW5pY29kZUJpZ1VubWFya2VkIl0gPSAyMV0gPSAiVW5pY29kZUJpZ1VubWFya2VkIjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIlVURjgiXSA9IDIyXSA9ICJVVEY4IjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkFTQ0lJIl0gPSAyM10gPSAiQVNDSUkiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siQmlnNSJdID0gMjRdID0gIkJpZzUiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siR0IxODAzMCJdID0gMjVdID0gIkdCMTgwMzAiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siRVVDX0tSIl0gPSAyNl0gPSAiRVVDX0tSIjsKCX0pKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMgPSBleHBvcnRzLkNoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMgfHwgKGV4cG9ydHMuQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycyA9IHt9KSk7CgkvKioKCSAqIEVuY2Fwc3VsYXRlcyBhIENoYXJhY3RlciBTZXQgRUNJLCBhY2NvcmRpbmcgdG8gIkV4dGVuZGVkIENoYW5uZWwgSW50ZXJwcmV0YXRpb25zIiA1LjMuMS4xCgkgKiBvZiBJU08gMTgwMDQuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIENoYXJhY3RlclNldEVDSSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBDaGFyYWN0ZXJTZXRFQ0kodmFsdWVJZGVudGlmaWVyLCB2YWx1ZXNQYXJhbSwgbmFtZSkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIG90aGVyRW5jb2RpbmdOYW1lcyA9IFtdOwoJICAgICAgICBmb3IgKHZhciBfaSA9IDM7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykgewoJICAgICAgICAgICAgb3RoZXJFbmNvZGluZ05hbWVzW19pIC0gM10gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMudmFsdWVJZGVudGlmaWVyID0gdmFsdWVJZGVudGlmaWVyOwoJICAgICAgICB0aGlzLm5hbWUgPSBuYW1lOwoJICAgICAgICBpZiAodHlwZW9mIHZhbHVlc1BhcmFtID09PSAnbnVtYmVyJykgewoJICAgICAgICAgICAgdGhpcy52YWx1ZXMgPSBJbnQzMkFycmF5LmZyb20oW3ZhbHVlc1BhcmFtXSk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICB0aGlzLnZhbHVlcyA9IHZhbHVlc1BhcmFtOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMub3RoZXJFbmNvZGluZ05hbWVzID0gb3RoZXJFbmNvZGluZ05hbWVzOwoJICAgICAgICBDaGFyYWN0ZXJTZXRFQ0kuVkFMVUVfSURFTlRJRklFUl9UT19FQ0kuc2V0KHZhbHVlSWRlbnRpZmllciwgdGhpcyk7CgkgICAgICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSS5zZXQobmFtZSwgdGhpcyk7CgkgICAgICAgIHZhciB2YWx1ZXMgPSB0aGlzLnZhbHVlczsKCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gdmFsdWVzLmxlbmd0aDsgaSAhPT0gbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgdmFyIHYgPSB2YWx1ZXNbaV07CgkgICAgICAgICAgICBDaGFyYWN0ZXJTZXRFQ0kuVkFMVUVTX1RPX0VDSS5zZXQodiwgdGhpcyk7CgkgICAgICAgIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIG90aGVyRW5jb2RpbmdOYW1lc18xID0gX192YWx1ZXMob3RoZXJFbmNvZGluZ05hbWVzKSwgb3RoZXJFbmNvZGluZ05hbWVzXzFfMSA9IG90aGVyRW5jb2RpbmdOYW1lc18xLm5leHQoKTsgIW90aGVyRW5jb2RpbmdOYW1lc18xXzEuZG9uZTsgb3RoZXJFbmNvZGluZ05hbWVzXzFfMSA9IG90aGVyRW5jb2RpbmdOYW1lc18xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgIHZhciBvdGhlck5hbWUgPSBvdGhlckVuY29kaW5nTmFtZXNfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSS5zZXQob3RoZXJOYW1lLCB0aGlzKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKG90aGVyRW5jb2RpbmdOYW1lc18xXzEgJiYgIW90aGVyRW5jb2RpbmdOYW1lc18xXzEuZG9uZSAmJiAoX2EgPSBvdGhlckVuY29kaW5nTmFtZXNfMS5yZXR1cm4pKSBfYS5jYWxsKG90aGVyRW5jb2RpbmdOYW1lc18xKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgIH0KCSAgICAvLyBDaGFyYWN0ZXJTZXRFQ0kodmFsdWU6IG51bWJlciAvKmludCovKSB7CgkgICAgLy8gICB0aGlzKG5ldyBJbnQzMkFycmF5IHt2YWx1ZX0pCgkgICAgLy8gfQoJICAgIC8vIENoYXJhY3RlclNldEVDSSh2YWx1ZTogbnVtYmVyIC8qaW50Ki8sIFN0cmluZy4uLiBvdGhlckVuY29kaW5nTmFtZXMpIHsKCSAgICAvLyAgIHRoaXMudmFsdWVzID0gbmV3IEludDMyQXJyYXkge3ZhbHVlfQoJICAgIC8vICAgdGhpcy5vdGhlckVuY29kaW5nTmFtZXMgPSBvdGhlckVuY29kaW5nTmFtZXMKCSAgICAvLyB9CgkgICAgLy8gQ2hhcmFjdGVyU2V0RUNJKHZhbHVlczogSW50MzJBcnJheSwgU3RyaW5nLi4uIG90aGVyRW5jb2RpbmdOYW1lcykgewoJICAgIC8vICAgdGhpcy52YWx1ZXMgPSB2YWx1ZXMKCSAgICAvLyAgIHRoaXMub3RoZXJFbmNvZGluZ05hbWVzID0gb3RoZXJFbmNvZGluZ05hbWVzCgkgICAgLy8gfQoJICAgIENoYXJhY3RlclNldEVDSS5wcm90b3R5cGUuZ2V0VmFsdWVJZGVudGlmaWVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZUlkZW50aWZpZXI7CgkgICAgfTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kucHJvdG90eXBlLmdldE5hbWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm5hbWU7CgkgICAgfTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kucHJvdG90eXBlLmdldFZhbHVlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZXNbMF07CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gdmFsdWUgY2hhcmFjdGVyIHNldCBFQ0kgdmFsdWUKCSAgICAgKiBAcmV0dXJuIHtAY29kZSBDaGFyYWN0ZXJTZXRFQ0l9IHJlcHJlc2VudGluZyBFQ0kgb2YgZ2l2ZW4gdmFsdWUsIG9yIG51bGwgaWYgaXQgaXMgbGVnYWwgYnV0CgkgICAgICogICB1bnN1cHBvcnRlZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIEVDSSB2YWx1ZSBpcyBpbnZhbGlkCgkgICAgICovCgkgICAgQ2hhcmFjdGVyU2V0RUNJLmdldENoYXJhY3RlclNldEVDSUJ5VmFsdWUgPSBmdW5jdGlvbiAodmFsdWUgLyppbnQqLykgewoJICAgICAgICBpZiAodmFsdWUgPCAwIHx8IHZhbHVlID49IDkwMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoJ2luY29yZWN0IHZhbHVlJyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGNoYXJhY3RlclNldCA9IENoYXJhY3RlclNldEVDSS5WQUxVRVNfVE9fRUNJLmdldCh2YWx1ZSk7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGNoYXJhY3RlclNldCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoJ2luY29yZWN0IHZhbHVlJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGNoYXJhY3RlclNldDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBuYW1lIGNoYXJhY3RlciBzZXQgRUNJIGVuY29kaW5nIG5hbWUKCSAgICAgKiBAcmV0dXJuIENoYXJhY3RlclNldEVDSSByZXByZXNlbnRpbmcgRUNJIGZvciBjaGFyYWN0ZXIgZW5jb2RpbmcsIG9yIG51bGwgaWYgaXQgaXMgbGVnYWwKCSAgICAgKiAgIGJ1dCB1bnN1cHBvcnRlZAoJICAgICAqLwoJICAgIENoYXJhY3RlclNldEVDSS5nZXRDaGFyYWN0ZXJTZXRFQ0lCeU5hbWUgPSBmdW5jdGlvbiAobmFtZSkgewoJICAgICAgICB2YXIgY2hhcmFjdGVyU2V0ID0gQ2hhcmFjdGVyU2V0RUNJLk5BTUVfVE9fRUNJLmdldChuYW1lKTsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gY2hhcmFjdGVyU2V0KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgnaW5jb3JlY3QgdmFsdWUnKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gY2hhcmFjdGVyU2V0OwoJICAgIH07CgkgICAgQ2hhcmFjdGVyU2V0RUNJLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICBpZiAoIShvIGluc3RhbmNlb2YgQ2hhcmFjdGVyU2V0RUNJKSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLmdldE5hbWUoKSA9PT0gb3RoZXIuZ2V0TmFtZSgpOwoJICAgIH07CgkgICAgQ2hhcmFjdGVyU2V0RUNJLlZBTFVFX0lERU5USUZJRVJfVE9fRUNJID0gbmV3IE1hcCgpOwoJICAgIENoYXJhY3RlclNldEVDSS5WQUxVRVNfVE9fRUNJID0gbmV3IE1hcCgpOwoJICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSSA9IG5ldyBNYXAoKTsKCSAgICAvLyBFbnVtIG5hbWUgaXMgYSBKYXZhIGVuY29kaW5nIHZhbGlkIGZvciBqYXZhLmxhbmcgYW5kIGphdmEuaW8KCSAgICAvLyBUWVBFU0NSSVBUUE9SVDogY2hhbmdlZCB0aGUgbWFpbiBsYWJlbCBmb3IgSVNPIGFzIHRoZSBUZXh0RW5jb2RlciBkaWQgbm90IHJlY29nbml6ZWQgdGhlbSBpbiB0aGUgZm9ybSBmcm9tIGphdmEKCSAgICAvLyAoZWcgSVNPODg1OV8xIG11c3QgYmUgSVNPODg1OTEgb3IgSVNPODg1OS0xIG9yIElTTy04ODU5LTEpCgkgICAgLy8gbGF0ZXIgb246IHdlbGwsIGV4Y2VwdCAxNiB3aWNoIGRvZXMgbm90IHdvcmsgd2l0aCBJU084ODU5MTYgc28gdXNlZCBJU08tODg1OS0xIGZvcm0gZm9yIGRlZmF1bHQKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuQ3A0MzcgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQ3A0MzcsIEludDMyQXJyYXkuZnJvbShbMCwgMl0pLCAnQ3A0MzcnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMSwgSW50MzJBcnJheS5mcm9tKFsxLCAzXSksICdJU08tODg1OS0xJywgJ0lTTzg4NTkxJywgJ0lTTzg4NTlfMScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzIgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8yLCA0LCAnSVNPLTg4NTktMicsICdJU084ODU5MicsICdJU084ODU5XzInKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8zID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMywgNSwgJ0lTTy04ODU5LTMnLCAnSVNPODg1OTMnLCAnSVNPODg1OV8zJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfNCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzQsIDYsICdJU08tODg1OS00JywgJ0lTTzg4NTk0JywgJ0lTTzg4NTlfNCcpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV81LCA3LCAnSVNPLTg4NTktNScsICdJU084ODU5NScsICdJU084ODU5XzUnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV82ID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfNiwgOCwgJ0lTTy04ODU5LTYnLCAnSVNPODg1OTYnLCAnSVNPODg1OV82Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfNyA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzcsIDksICdJU08tODg1OS03JywgJ0lTTzg4NTk3JywgJ0lTTzg4NTlfNycpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzggPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV84LCAxMCwgJ0lTTy04ODU5LTgnLCAnSVNPODg1OTgnLCAnSVNPODg1OV84Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfOSA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzksIDExLCAnSVNPLTg4NTktOScsICdJU084ODU5OScsICdJU084ODU5XzknKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xMCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzEwLCAxMiwgJ0lTTy04ODU5LTEwJywgJ0lTTzg4NTkxMCcsICdJU084ODU5XzEwJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfMTEgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8xMSwgMTMsICdJU08tODg1OS0xMScsICdJU084ODU5MTEnLCAnSVNPODg1OV8xMScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzEzID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMTMsIDE1LCAnSVNPLTg4NTktMTMnLCAnSVNPODg1OTEzJywgJ0lTTzg4NTlfMTMnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xNCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzE0LCAxNiwgJ0lTTy04ODU5LTE0JywgJ0lTTzg4NTkxNCcsICdJU084ODU5XzE0Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfMTUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8xNSwgMTcsICdJU08tODg1OS0xNScsICdJU084ODU5MTUnLCAnSVNPODg1OV8xNScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzE2ID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMTYsIDE4LCAnSVNPLTg4NTktMTYnLCAnSVNPODg1OTE2JywgJ0lTTzg4NTlfMTYnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuU0pJUyA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5TSklTLCAyMCwgJ1NKSVMnLCAnU2hpZnRfSklTJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkNwMTI1MCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5DcDEyNTAsIDIxLCAnQ3AxMjUwJywgJ3dpbmRvd3MtMTI1MCcpOwoJICAgIENoYXJhY3RlclNldEVDSS5DcDEyNTEgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQ3AxMjUxLCAyMiwgJ0NwMTI1MScsICd3aW5kb3dzLTEyNTEnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuQ3AxMjUyID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLkNwMTI1MiwgMjMsICdDcDEyNTInLCAnd2luZG93cy0xMjUyJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkNwMTI1NiA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5DcDEyNTYsIDI0LCAnQ3AxMjU2JywgJ3dpbmRvd3MtMTI1NicpOwoJICAgIENoYXJhY3RlclNldEVDSS5Vbmljb2RlQmlnVW5tYXJrZWQgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuVW5pY29kZUJpZ1VubWFya2VkLCAyNSwgJ1VuaWNvZGVCaWdVbm1hcmtlZCcsICdVVEYtMTZCRScsICdVbmljb2RlQmlnJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLlVURjggPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuVVRGOCwgMjYsICdVVEY4JywgJ1VURi04Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkFTQ0lJID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLkFTQ0lJLCBJbnQzMkFycmF5LmZyb20oWzI3LCAxNzBdKSwgJ0FTQ0lJJywgJ1VTLUFTQ0lJJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkJpZzUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQmlnNSwgMjgsICdCaWc1Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkdCMTgwMzAgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuR0IxODAzMCwgMjksICdHQjE4MDMwJywgJ0dCMjMxMicsICdFVUNfQ04nLCAnR0JLJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkVVQ19LUiA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5FVUNfS1IsIDMwLCAnRVVDX0tSJywgJ0VVQy1LUicpOwoJICAgIHJldHVybiBDaGFyYWN0ZXJTZXRFQ0k7Cgl9KCkpOwoJZXhwb3J0cy5kZWZhdWx0ID0gQ2hhcmFjdGVyU2V0RUNJOwoKCX0oQ2hhcmFjdGVyU2V0RUNJKSk7CgoJdmFyIFN0cmluZ0VuY29kaW5nJDEgPSB7fTsKCgl2YXIgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNiA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZShVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbi5raW5kID0gJ1Vuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDYuZGVmYXVsdCkpOwoJVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24kMS5kZWZhdWx0ID0gVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb247CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0cmluZ0VuY29kaW5nJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbl8xJDEgPSBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiQxOwoJdmFyIENoYXJhY3RlclNldEVDSV8xJDIgPSBDaGFyYWN0ZXJTZXRFQ0k7CgkvKioKCSAqIFJlc3BvbnNpYmxlIGZvciBlbi9kZWNvZGluZyBzdHJpbmdzLgoJICovCgl2YXIgU3RyaW5nRW5jb2RpbmcgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nRW5jb2RpbmcoKSB7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIERlY29kZXMgc29tZSBVaW50OEFycmF5IHRvIGEgc3RyaW5nIGZvcm1hdC4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5kZWNvZGUgPSBmdW5jdGlvbiAoYnl0ZXMsIGVuY29kaW5nKSB7CgkgICAgICAgIHZhciBlbmNvZGluZ05hbWUgPSB0aGlzLmVuY29kaW5nTmFtZShlbmNvZGluZyk7CgkgICAgICAgIGlmICh0aGlzLmN1c3RvbURlY29kZXIpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmN1c3RvbURlY29kZXIoYnl0ZXMsIGVuY29kaW5nTmFtZSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gSW5jcmVhc2VzIGJyb3dzZXIgc3VwcG9ydC4KCSAgICAgICAgaWYgKHR5cGVvZiBUZXh0RGVjb2RlciA9PT0gJ3VuZGVmaW5lZCcgfHwgdGhpcy5zaG91bGREZWNvZGVPbkZhbGxiYWNrKGVuY29kaW5nTmFtZSkpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUZhbGxiYWNrKGJ5dGVzLCBlbmNvZGluZ05hbWUpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgVGV4dERlY29kZXIoZW5jb2RpbmdOYW1lKS5kZWNvZGUoYnl0ZXMpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ2hlY2tzIGlmIHRoZSBkZWNvZGluZyBtZXRob2Qgc2hvdWxkIHVzZSB0aGUgZmFsbGJhY2sgZm9yIGRlY29kaW5nCgkgICAgICogb25jZSBOb2RlIFRleHREZWNvZGVyIGRvZXNuJ3Qgc3VwcG9ydCBhbGwgZW5jb2RpbmcgZm9ybWF0cy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBlbmNvZGluZ05hbWUKCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5zaG91bGREZWNvZGVPbkZhbGxiYWNrID0gZnVuY3Rpb24gKGVuY29kaW5nTmFtZSkgewoJICAgICAgICByZXR1cm4gIVN0cmluZ0VuY29kaW5nLmlzQnJvd3NlcigpICYmIGVuY29kaW5nTmFtZSA9PT0gJ0lTTy04ODU5LTEnOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRW5jb2RlcyBzb21lIHN0cmluZyBpbnRvIGEgVWludDhBcnJheS4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5lbmNvZGUgPSBmdW5jdGlvbiAocywgZW5jb2RpbmcpIHsKCSAgICAgICAgdmFyIGVuY29kaW5nTmFtZSA9IHRoaXMuZW5jb2RpbmdOYW1lKGVuY29kaW5nKTsKCSAgICAgICAgaWYgKHRoaXMuY3VzdG9tRW5jb2RlcikgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3VzdG9tRW5jb2RlcihzLCBlbmNvZGluZ05hbWUpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEluY3JlYXNlcyBicm93c2VyIHN1cHBvcnQuCgkgICAgICAgIGlmICh0eXBlb2YgVGV4dEVuY29kZXIgPT09ICd1bmRlZmluZWQnKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5lbmNvZGVGYWxsYmFjayhzKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBUZXh0RW5jb2RlciBvbmx5IGVuY29kZXMgdG8gVVRGOCBieSBkZWZhdWx0IGFzIHNwZWNpZmllZCBieSBlbmNvZGluZy5zcGVjLndoYXR3Zy5vcmcKCSAgICAgICAgcmV0dXJuIG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShzKTsKCSAgICB9OwoJICAgIFN0cmluZ0VuY29kaW5nLmlzQnJvd3NlciA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB7fS50b1N0cmluZy5jYWxsKHdpbmRvdykgPT09ICdbb2JqZWN0IFdpbmRvd10nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIHN0cmluZyB2YWx1ZSBmcm9tIHNvbWUgZW5jb2RpbmcgY2hhcmFjdGVyIHNldC4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5lbmNvZGluZ05hbWUgPSBmdW5jdGlvbiAoZW5jb2RpbmcpIHsKCSAgICAgICAgcmV0dXJuIHR5cGVvZiBlbmNvZGluZyA9PT0gJ3N0cmluZycKCSAgICAgICAgICAgID8gZW5jb2RpbmcKCSAgICAgICAgICAgIDogZW5jb2RpbmcuZ2V0TmFtZSgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV0dXJucyBjaGFyYWN0ZXIgc2V0IGZyb20gc29tZSBlbmNvZGluZyBjaGFyYWN0ZXIgc2V0LgoJICAgICAqLwoJICAgIFN0cmluZ0VuY29kaW5nLmVuY29kaW5nQ2hhcmFjdGVyU2V0ID0gZnVuY3Rpb24gKGVuY29kaW5nKSB7CgkgICAgICAgIGlmIChlbmNvZGluZyBpbnN0YW5jZW9mIENoYXJhY3RlclNldEVDSV8xJDIuZGVmYXVsdCkgewoJICAgICAgICAgICAgcmV0dXJuIGVuY29kaW5nOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuZ2V0Q2hhcmFjdGVyU2V0RUNJQnlOYW1lKGVuY29kaW5nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJ1bnMgYSBmYWxsYmFjayBmb3IgdGhlIG5hdGl2ZSBkZWNvZGluZyBmdW5jaW9uLgoJICAgICAqLwoJICAgIFN0cmluZ0VuY29kaW5nLmRlY29kZUZhbGxiYWNrID0gZnVuY3Rpb24gKGJ5dGVzLCBlbmNvZGluZykgewoJICAgICAgICB2YXIgY2hhcmFjdGVyU2V0ID0gdGhpcy5lbmNvZGluZ0NoYXJhY3RlclNldChlbmNvZGluZyk7CgkgICAgICAgIGlmIChTdHJpbmdFbmNvZGluZy5pc0RlY29kZUZhbGxiYWNrU3VwcG9ydGVkKGNoYXJhY3RlclNldCkpIHsKCSAgICAgICAgICAgIHZhciBzID0gJyc7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoXzEgPSBieXRlcy5sZW5ndGg7IGkgPCBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGggPSBieXRlc1tpXS50b1N0cmluZygxNik7CgkgICAgICAgICAgICAgICAgaWYgKGgubGVuZ3RoIDwgMikgewoJICAgICAgICAgICAgICAgICAgICBoID0gJzAnICsgaDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgcyArPSAnJScgKyBoOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChzKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuVW5pY29kZUJpZ1VubWFya2VkKSkgewoJICAgICAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgbmV3IFVpbnQxNkFycmF5KGJ5dGVzLmJ1ZmZlcikpOwoJICAgICAgICB9CgkgICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgiRW5jb2RpbmcgIiArIHRoaXMuZW5jb2RpbmdOYW1lKGVuY29kaW5nKSArICIgbm90IHN1cHBvcnRlZCBieSBmYWxsYmFjay4iKTsKCSAgICB9OwoJICAgIFN0cmluZ0VuY29kaW5nLmlzRGVjb2RlRmFsbGJhY2tTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoY2hhcmFjdGVyU2V0KSB7CgkgICAgICAgIHJldHVybiBjaGFyYWN0ZXJTZXQuZXF1YWxzKENoYXJhY3RlclNldEVDSV8xJDIuZGVmYXVsdC5VVEY4KSB8fAoJICAgICAgICAgICAgY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuSVNPODg1OV8xKSB8fAoJICAgICAgICAgICAgY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuQVNDSUkpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUnVucyBhIGZhbGxiYWNrIGZvciB0aGUgbmF0aXZlIGVuY29kaW5nIGZ1bmNpb24uCgkgICAgICoKCSAgICAgKiBAc2VlIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xNzE5Mjg0NS80MzY3NjgzCgkgICAgICovCgkgICAgU3RyaW5nRW5jb2RpbmcuZW5jb2RlRmFsbGJhY2sgPSBmdW5jdGlvbiAocykgewoJICAgICAgICB2YXIgZW5jb2RlZFVSSXN0cmluZyA9IGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KHMpKSk7CgkgICAgICAgIHZhciBjaGFyTGlzdCA9IGVuY29kZWRVUklzdHJpbmcuc3BsaXQoJycpOwoJICAgICAgICB2YXIgdWludEFycmF5ID0gW107CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hhckxpc3QubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHVpbnRBcnJheS5wdXNoKGNoYXJMaXN0W2ldLmNoYXJDb2RlQXQoMCkpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheSh1aW50QXJyYXkpOwoJICAgIH07CgkgICAgcmV0dXJuIFN0cmluZ0VuY29kaW5nOwoJfSgpKTsKCVN0cmluZ0VuY29kaW5nJDEuZGVmYXVsdCA9IFN0cmluZ0VuY29kaW5nOwoKCS8qCgkgKiBDb3B5cmlnaHQgKEMpIDIwMTAgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0cmluZ1V0aWxzJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS5uaW8uY2hhcnNldC5DaGFyc2V0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgl2YXIgRGVjb2RlSGludFR5cGVfMSQzID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBDaGFyYWN0ZXJTZXRFQ0lfMSQxID0gQ2hhcmFjdGVyU2V0RUNJOwoJdmFyIFN0cmluZ0VuY29kaW5nXzEkMSA9IFN0cmluZ0VuY29kaW5nJDE7CgkvKioKCSAqIENvbW1vbiBzdHJpbmctcmVsYXRlZCBmdW5jdGlvbnMuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBhdXRob3IgQWxleCBEdXByZQoJICovCgl2YXIgU3RyaW5nVXRpbHMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nVXRpbHMoKSB7CgkgICAgfQoJICAgIC8vIFNISUZUX0pJUy5lcXVhbHNJZ25vcmVDYXNlKFBMQVRGT1JNX0RFRkFVTFRfRU5DT0RJTkcpIHx8CgkgICAgLy8gRVVDX0pQLmVxdWFsc0lnbm9yZUNhc2UoUExBVEZPUk1fREVGQVVMVF9FTkNPRElORyk7CgkgICAgU3RyaW5nVXRpbHMuY2FzdEFzTm9uVXRmOENoYXIgPSBmdW5jdGlvbiAoY29kZSwgZW5jb2RpbmcpIHsKCSAgICAgICAgaWYgKGVuY29kaW5nID09PSB2b2lkIDApIHsgZW5jb2RpbmcgPSBudWxsOyB9CgkgICAgICAgIC8vIElTTyA4ODU5LTEgaXMgdGhlIEphdmEgZGVmYXVsdCBhcyBVVEYtOCBpcyBKYXZhU2NyaXB0cwoJICAgICAgICAvLyB5b3UgY2FuIHNlZSB0aGlzIG1ldGhvZCBhcyBhIEphdmEgdmVyc2lvbiBvZiBTdHJpbmcuZnJvbUNoYXJDb2RlCgkgICAgICAgIHZhciBlID0gZW5jb2RpbmcgPyBlbmNvZGluZy5nZXROYW1lKCkgOiB0aGlzLklTTzg4NTkxOwoJICAgICAgICAvLyB1c2UgcGFzc2VkIGZvcm1hdCAoZnJvbUNoYXJDb2RlIHdpbGwgcmV0dXJuIFVURjggZW5jb2RpbmcpCgkgICAgICAgIHJldHVybiBTdHJpbmdFbmNvZGluZ18xJDEuZGVmYXVsdC5kZWNvZGUobmV3IFVpbnQ4QXJyYXkoW2NvZGVdKSwgZSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYnl0ZXMgYnl0ZXMgZW5jb2RpbmcgYSBzdHJpbmcsIHdob3NlIGVuY29kaW5nIHNob3VsZCBiZSBndWVzc2VkCgkgICAgICogQHBhcmFtIGhpbnRzIGRlY29kZSBoaW50cyBpZiBhcHBsaWNhYmxlCgkgICAgICogQHJldHVybiBuYW1lIG9mIGd1ZXNzZWQgZW5jb2Rpbmc7IGF0IHRoZSBtb21lbnQgd2lsbCBvbmx5IGd1ZXNzIG9uZSBvZjoKCSAgICAgKiAge0BsaW5rICNTSElGVF9KSVN9LCB7QGxpbmsgI1VURjh9LCB7QGxpbmsgI0lTTzg4NTkxfSwgb3IgdGhlIHBsYXRmb3JtCgkgICAgICogIGRlZmF1bHQgZW5jb2RpbmcgaWYgbm9uZSBvZiB0aGVzZSBjYW4gcG9zc2libHkgYmUgY29ycmVjdAoJICAgICAqLwoJICAgIFN0cmluZ1V0aWxzLmd1ZXNzRW5jb2RpbmcgPSBmdW5jdGlvbiAoYnl0ZXMsIGhpbnRzKSB7CgkgICAgICAgIGlmIChoaW50cyAhPT0gbnVsbCAmJiBoaW50cyAhPT0gdW5kZWZpbmVkICYmIHVuZGVmaW5lZCAhPT0gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEkMy5kZWZhdWx0LkNIQVJBQ1RFUl9TRVQpKSB7CgkgICAgICAgICAgICByZXR1cm4gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEkMy5kZWZhdWx0LkNIQVJBQ1RFUl9TRVQpLnRvU3RyaW5nKCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRm9yIG5vdywgbWVyZWx5IHRyaWVzIHRvIGRpc3Rpbmd1aXNoIElTTy04ODU5LTEsIFVURi04IGFuZCBTaGlmdF9KSVMsCgkgICAgICAgIC8vIHdoaWNoIHNob3VsZCBiZSBieSBmYXIgdGhlIG1vc3QgY29tbW9uIGVuY29kaW5ncy4KCSAgICAgICAgdmFyIGxlbmd0aCA9IGJ5dGVzLmxlbmd0aDsKCSAgICAgICAgdmFyIGNhbkJlSVNPODg1OTEgPSB0cnVlOwoJICAgICAgICB2YXIgY2FuQmVTaGlmdEpJUyA9IHRydWU7CgkgICAgICAgIHZhciBjYW5CZVVURjggPSB0cnVlOwoJICAgICAgICB2YXIgdXRmOEJ5dGVzTGVmdCA9IDA7CgkgICAgICAgIC8vIGludCB1dGY4TG93Q2hhcnMgPSAwCgkgICAgICAgIHZhciB1dGYyQnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciB1dGYzQnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciB1dGY0Qnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciBzamlzQnl0ZXNMZWZ0ID0gMDsKCSAgICAgICAgLy8gaW50IHNqaXNMb3dDaGFycyA9IDAKCSAgICAgICAgdmFyIHNqaXNLYXRha2FuYUNoYXJzID0gMDsKCSAgICAgICAgLy8gaW50IHNqaXNEb3VibGVCeXRlc0NoYXJzID0gMAoJICAgICAgICB2YXIgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgIHZhciBzamlzQ3VyRG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gMDsKCSAgICAgICAgdmFyIHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPSAwOwoJICAgICAgICB2YXIgc2ppc01heERvdWJsZUJ5dGVzV29yZExlbmd0aCA9IDA7CgkgICAgICAgIC8vIGludCBpc29Mb3dDaGFycyA9IDAKCSAgICAgICAgLy8gaW50IGlzb0hpZ2hDaGFycyA9IDAKCSAgICAgICAgdmFyIGlzb0hpZ2hPdGhlciA9IDA7CgkgICAgICAgIHZhciB1dGY4Ym9tID0gYnl0ZXMubGVuZ3RoID4gMyAmJgoJICAgICAgICAgICAgYnl0ZXNbMF0gPT09IC8qKGJ5dGUpICovIDB4RUYgJiYKCSAgICAgICAgICAgIGJ5dGVzWzFdID09PSAvKihieXRlKSAqLyAweEJCICYmCgkgICAgICAgICAgICBieXRlc1syXSA9PT0gLyooYnl0ZSkgKi8gMHhCRjsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGggJiYgKGNhbkJlSVNPODg1OTEgfHwgY2FuQmVTaGlmdEpJUyB8fCBjYW5CZVVURjgpOyBpKyspIHsKCSAgICAgICAgICAgIHZhciB2YWx1ZSA9IGJ5dGVzW2ldICYgMHhGRjsKCSAgICAgICAgICAgIC8vIFVURi04IHN0dWZmCgkgICAgICAgICAgICBpZiAoY2FuQmVVVEY4KSB7CgkgICAgICAgICAgICAgICAgaWYgKHV0ZjhCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDgwKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgY2FuQmVVVEY4ID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0LS07CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAoKHZhbHVlICYgMHg4MCkgIT09IDApIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKCh2YWx1ZSAmIDB4NDApID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBjYW5CZVVURjggPSBmYWxzZTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjhCeXRlc0xlZnQrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDIwKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjJCeXRlc0NoYXJzKys7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2YWx1ZSAmIDB4MTApID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjNCeXRlc0NoYXJzKys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDA4KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXRmNEJ5dGVzQ2hhcnMrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbkJlVVRGOCA9IGZhbHNlOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfSAvLyBlbHNlIHsKCSAgICAgICAgICAgICAgICAvLyB1dGY4TG93Q2hhcnMrKwoJICAgICAgICAgICAgICAgIC8vIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIC8vIElTTy04ODU5LTEgc3R1ZmYKCSAgICAgICAgICAgIGlmIChjYW5CZUlTTzg4NTkxKSB7CgkgICAgICAgICAgICAgICAgaWYgKHZhbHVlID4gMHg3RiAmJiB2YWx1ZSA8IDB4QTApIHsKCSAgICAgICAgICAgICAgICAgICAgY2FuQmVJU084ODU5MSA9IGZhbHNlOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIGlmICh2YWx1ZSA+IDB4OUYpIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlIDwgMHhDMCB8fCB2YWx1ZSA9PT0gMHhENyB8fCB2YWx1ZSA9PT0gMHhGNykgewoJICAgICAgICAgICAgICAgICAgICAgICAgaXNvSGlnaE90aGVyKys7CgkgICAgICAgICAgICAgICAgICAgIH0gLy8gZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIGlzb0hpZ2hDaGFycysrCgkgICAgICAgICAgICAgICAgICAgIC8vIH0KCSAgICAgICAgICAgICAgICB9IC8vIGVsc2UgewoJICAgICAgICAgICAgICAgIC8vIGlzb0xvd0NoYXJzKysKCSAgICAgICAgICAgICAgICAvLyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBTaGlmdF9KSVMgc3R1ZmYKCSAgICAgICAgICAgIGlmIChjYW5CZVNoaWZ0SklTKSB7CgkgICAgICAgICAgICAgICAgaWYgKHNqaXNCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA8IDB4NDAgfHwgdmFsdWUgPT09IDB4N0YgfHwgdmFsdWUgPiAweEZDKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBjYW5CZVNoaWZ0SklTID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBzamlzQnl0ZXNMZWZ0LS07CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUgPT09IDB4ODAgfHwgdmFsdWUgPT09IDB4QTAgfHwgdmFsdWUgPiAweEVGKSB7CgkgICAgICAgICAgICAgICAgICAgIGNhbkJlU2hpZnRKSVMgPSBmYWxzZTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUgPiAweEEwICYmIHZhbHVlIDwgMHhFMCkgewoJICAgICAgICAgICAgICAgICAgICBzamlzS2F0YWthbmFDaGFycysrOwoJICAgICAgICAgICAgICAgICAgICBzamlzQ3VyRG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gMDsKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCsrOwoJICAgICAgICAgICAgICAgICAgICBpZiAoc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA+IHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGgpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPSBzamlzQ3VyS2F0YWthbmFXb3JkTGVuZ3RoOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgaWYgKHZhbHVlID4gMHg3RikgewoJICAgICAgICAgICAgICAgICAgICBzamlzQnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgIC8vIHNqaXNEb3VibGVCeXRlc0NoYXJzKysKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgICAgICAgICAgICAgIHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGgrKzsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGggPiBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gc2ppc0N1ckRvdWJsZUJ5dGVzV29yZExlbmd0aDsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gc2ppc0xvd0NoYXJzKysKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgICAgICAgICAgICAgIHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGggPSAwOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBpZiAoY2FuQmVVVEY4ICYmIHV0ZjhCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICBjYW5CZVVURjggPSBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY2FuQmVTaGlmdEpJUyAmJiBzamlzQnl0ZXNMZWZ0ID4gMCkgewoJICAgICAgICAgICAgY2FuQmVTaGlmdEpJUyA9IGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIEVhc3kgLS0gaWYgdGhlcmUgaXMgQk9NIG9yIGF0IGxlYXN0IDEgdmFsaWQgbm90LXNpbmdsZSBieXRlIGNoYXJhY3RlciAoYW5kIG5vIGV2aWRlbmNlIGl0IGNhbid0IGJlIFVURi04KSwgZG9uZQoJICAgICAgICBpZiAoY2FuQmVVVEY4ICYmICh1dGY4Ym9tIHx8IHV0ZjJCeXRlc0NoYXJzICsgdXRmM0J5dGVzQ2hhcnMgKyB1dGY0Qnl0ZXNDaGFycyA+IDApKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuVVRGODsKCSAgICAgICAgfQoJICAgICAgICAvLyBFYXN5IC0tIGlmIGFzc3VtaW5nIFNoaWZ0X0pJUyBvciBhdCBsZWFzdCAzIHZhbGlkIGNvbnNlY3V0aXZlIG5vdC1hc2NpaSBjaGFyYWN0ZXJzIChhbmQgbm8gZXZpZGVuY2UgaXQgY2FuJ3QgYmUpLCBkb25lCgkgICAgICAgIGlmIChjYW5CZVNoaWZ0SklTICYmIChTdHJpbmdVdGlscy5BU1NVTUVfU0hJRlRfSklTIHx8IHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPj0gMyB8fCBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoID49IDMpKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuU0hJRlRfSklTOwoJICAgICAgICB9CgkgICAgICAgIC8vIERpc3Rpbmd1aXNoaW5nIFNoaWZ0X0pJUyBhbmQgSVNPLTg4NTktMSBjYW4gYmUgYSBsaXR0bGUgdG91Z2ggZm9yIHNob3J0IHdvcmRzLiBUaGUgY3J1ZGUgaGV1cmlzdGljIGlzOgoJICAgICAgICAvLyAtIElmIHdlIHNhdwoJICAgICAgICAvLyAgIC0gb25seSB0d28gY29uc2VjdXRpdmUga2F0YWthbmEgY2hhcnMgaW4gdGhlIHdob2xlIHRleHQsIG9yCgkgICAgICAgIC8vICAgLSBhdCBsZWFzdCAxMCUgb2YgYnl0ZXMgdGhhdCBjb3VsZCBiZSAidXBwZXIiIG5vdC1hbHBoYW51bWVyaWMgTGF0aW4xLAoJICAgICAgICAvLyAtIHRoZW4gd2UgY29uY2x1ZGUgU2hpZnRfSklTLCBlbHNlIElTTy04ODU5LTEKCSAgICAgICAgaWYgKGNhbkJlSVNPODg1OTEgJiYgY2FuQmVTaGlmdEpJUykgewoJICAgICAgICAgICAgcmV0dXJuIChzamlzTWF4S2F0YWthbmFXb3JkTGVuZ3RoID09PSAyICYmIHNqaXNLYXRha2FuYUNoYXJzID09PSAyKSB8fCBpc29IaWdoT3RoZXIgKiAxMCA+PSBsZW5ndGgKCSAgICAgICAgICAgICAgICA/IFN0cmluZ1V0aWxzLlNISUZUX0pJUyA6IFN0cmluZ1V0aWxzLklTTzg4NTkxOwoJICAgICAgICB9CgkgICAgICAgIC8vIE90aGVyd2lzZSwgdHJ5IGluIG9yZGVyIElTTy04ODU5LTEsIFNoaWZ0IEpJUywgVVRGLTggYW5kIGZhbGwgYmFjayB0byBkZWZhdWx0IHBsYXRmb3JtIGVuY29kaW5nCgkgICAgICAgIGlmIChjYW5CZUlTTzg4NTkxKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuSVNPODg1OTE7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNhbkJlU2hpZnRKSVMpIHsKCSAgICAgICAgICAgIHJldHVybiBTdHJpbmdVdGlscy5TSElGVF9KSVM7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNhbkJlVVRGOCkgewoJICAgICAgICAgICAgcmV0dXJuIFN0cmluZ1V0aWxzLlVURjg7CgkgICAgICAgIH0KCSAgICAgICAgLy8gT3RoZXJ3aXNlLCB3ZSB0YWtlIGEgd2lsZCBndWVzcyB3aXRoIHBsYXRmb3JtIGVuY29kaW5nCgkgICAgICAgIHJldHVybiBTdHJpbmdVdGlscy5QTEFURk9STV9ERUZBVUxUX0VOQ09ESU5HOwoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKiBAc2VlIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xMzQzOTcxMS80MzY3NjgzCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYXBwZW5kIFRoZSBuZXcgc3RyaW5nIHRvIGFwcGVuZC4KCSAgICAgKiBAcGFyYW0gYXJncyBBcmd1bWV0cyB2YWx1ZXMgdG8gYmUgZm9ybWF0ZWQuCgkgICAgICovCgkgICAgU3RyaW5nVXRpbHMuZm9ybWF0ID0gZnVuY3Rpb24gKGFwcGVuZCkgewoJICAgICAgICB2YXIgYXJncyA9IFtdOwoJICAgICAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykgewoJICAgICAgICAgICAgYXJnc1tfaSAtIDFdID0gYXJndW1lbnRzW19pXTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgaSA9IC0xOwoJICAgICAgICBmdW5jdGlvbiBjYWxsYmFjayhleHAsIHAwLCBwMSwgcDIsIHAzLCBwNCkgewoJICAgICAgICAgICAgaWYgKGV4cCA9PT0gJyUlJykKCSAgICAgICAgICAgICAgICByZXR1cm4gJyUnOwoJICAgICAgICAgICAgaWYgKGFyZ3NbKytpXSA9PT0gdW5kZWZpbmVkKQoJICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7CgkgICAgICAgICAgICBleHAgPSBwMiA/IHBhcnNlSW50KHAyLnN1YnN0cigxKSkgOiB1bmRlZmluZWQ7CgkgICAgICAgICAgICB2YXIgYmFzZSA9IHAzID8gcGFyc2VJbnQocDMuc3Vic3RyKDEpKSA6IHVuZGVmaW5lZDsKCSAgICAgICAgICAgIHZhciB2YWw7CgkgICAgICAgICAgICBzd2l0Y2ggKHA0KSB7CgkgICAgICAgICAgICAgICAgY2FzZSAncyc6CgkgICAgICAgICAgICAgICAgICAgIHZhbCA9IGFyZ3NbaV07CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ2MnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBhcmdzW2ldWzBdOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICBjYXNlICdmJzoKCSAgICAgICAgICAgICAgICAgICAgdmFsID0gcGFyc2VGbG9hdChhcmdzW2ldKS50b0ZpeGVkKGV4cCk7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ3AnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBwYXJzZUZsb2F0KGFyZ3NbaV0pLnRvUHJlY2lzaW9uKGV4cCk7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ2UnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBwYXJzZUZsb2F0KGFyZ3NbaV0pLnRvRXhwb25lbnRpYWwoZXhwKTsKCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgY2FzZSAneCc6CgkgICAgICAgICAgICAgICAgICAgIHZhbCA9IHBhcnNlSW50KGFyZ3NbaV0pLnRvU3RyaW5nKGJhc2UgPyBiYXNlIDogMTYpOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICBjYXNlICdkJzoKCSAgICAgICAgICAgICAgICAgICAgdmFsID0gcGFyc2VGbG9hdChwYXJzZUludChhcmdzW2ldLCBiYXNlID8gYmFzZSA6IDEwKS50b1ByZWNpc2lvbihleHApKS50b0ZpeGVkKDApOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhbCA9IHR5cGVvZiB2YWwgPT09ICdvYmplY3QnID8gSlNPTi5zdHJpbmdpZnkodmFsKSA6ICgrdmFsKS50b1N0cmluZyhiYXNlKTsKCSAgICAgICAgICAgIHZhciBzaXplID0gcGFyc2VJbnQocDEpOyAvKiBwYWRkaW5nIHNpemUgKi8KCSAgICAgICAgICAgIHZhciBjaCA9IHAxICYmIChwMVswXSArICcnKSA9PT0gJzAnID8gJzAnIDogJyAnOyAvKiBpc251bGw/ICovCgkgICAgICAgICAgICB3aGlsZSAodmFsLmxlbmd0aCA8IHNpemUpCgkgICAgICAgICAgICAgICAgdmFsID0gcDAgIT09IHVuZGVmaW5lZCA/IHZhbCArIGNoIDogY2ggKyB2YWw7IC8qIGlzbWludXM/ICovCgkgICAgICAgICAgICByZXR1cm4gdmFsOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZWdleCA9IC8lKC0pPygwP1swLTldKyk/KFsuXVswLTldKyk/KFsjXVswLTldKyk/KFtzY2ZwZXhkJV0pL2c7CgkgICAgICAgIHJldHVybiBhcHBlbmQucmVwbGFjZShyZWdleCwgY2FsbGJhY2spOwoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKi8KCSAgICBTdHJpbmdVdGlscy5nZXRCeXRlcyA9IGZ1bmN0aW9uIChzdHIsIGVuY29kaW5nKSB7CgkgICAgICAgIHJldHVybiBTdHJpbmdFbmNvZGluZ18xJDEuZGVmYXVsdC5lbmNvZGUoc3RyLCBlbmNvZGluZyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIHRoZSBjaGFyY29kZSBhdCB0aGUgc3BlY2lmaWVkIGluZGV4IG9yIGF0IGluZGV4IHplcm8uCgkgICAgICovCgkgICAgU3RyaW5nVXRpbHMuZ2V0Q2hhckNvZGUgPSBmdW5jdGlvbiAoc3RyLCBpbmRleCkgewoJICAgICAgICBpZiAoaW5kZXggPT09IHZvaWQgMCkgeyBpbmRleCA9IDA7IH0KCSAgICAgICAgcmV0dXJuIHN0ci5jaGFyQ29kZUF0KGluZGV4KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgY2hhciBmb3IgZ2l2ZW4gY2hhcmNvZGUKCSAgICAgKi8KCSAgICBTdHJpbmdVdGlscy5nZXRDaGFyQXQgPSBmdW5jdGlvbiAoY2hhckNvZGUpIHsKCSAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoY2hhckNvZGUpOwoJICAgIH07CgkgICAgU3RyaW5nVXRpbHMuU0hJRlRfSklTID0gQ2hhcmFjdGVyU2V0RUNJXzEkMS5kZWZhdWx0LlNKSVMuZ2V0TmFtZSgpOyAvLyAiU0pJUyIKCSAgICBTdHJpbmdVdGlscy5HQjIzMTIgPSAnR0IyMzEyJzsKCSAgICBTdHJpbmdVdGlscy5JU084ODU5MSA9IENoYXJhY3RlclNldEVDSV8xJDEuZGVmYXVsdC5JU084ODU5XzEuZ2V0TmFtZSgpOyAvLyAiSVNPODg1OV8xIgoJICAgIFN0cmluZ1V0aWxzLkVVQ19KUCA9ICdFVUNfSlAnOwoJICAgIFN0cmluZ1V0aWxzLlVURjggPSBDaGFyYWN0ZXJTZXRFQ0lfMSQxLmRlZmF1bHQuVVRGOC5nZXROYW1lKCk7IC8vICJVVEY4IgoJICAgIFN0cmluZ1V0aWxzLlBMQVRGT1JNX0RFRkFVTFRfRU5DT0RJTkcgPSBTdHJpbmdVdGlscy5VVEY4OyAvLyAiVVRGOCIvL0NoYXJzZXQuZGVmYXVsdENoYXJzZXQoKS5uYW1lKCkKCSAgICBTdHJpbmdVdGlscy5BU1NVTUVfU0hJRlRfSklTID0gZmFsc2U7CgkgICAgcmV0dXJuIFN0cmluZ1V0aWxzOwoJfSgpKTsKCVN0cmluZ1V0aWxzJDEuZGVmYXVsdCA9IFN0cmluZ1V0aWxzOwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdHJpbmdCdWlsZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBTdHJpbmdVdGlsc18xJDEgPSBTdHJpbmdVdGlscyQxOwoJdmFyIFN0cmluZ0J1aWxkZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nQnVpbGRlcih2YWx1ZSkgewoJICAgICAgICBpZiAodmFsdWUgPT09IHZvaWQgMCkgeyB2YWx1ZSA9ICcnOyB9CgkgICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTsKCSAgICB9CgkgICAgU3RyaW5nQnVpbGRlci5wcm90b3R5cGUuZW5hYmxlRGVjb2RpbmcgPSBmdW5jdGlvbiAoZW5jb2RpbmcpIHsKCSAgICAgICAgdGhpcy5lbmNvZGluZyA9IGVuY29kaW5nOwoJICAgICAgICByZXR1cm4gdGhpczsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmFwcGVuZCA9IGZ1bmN0aW9uIChzKSB7CgkgICAgICAgIGlmICh0eXBlb2YgcyA9PT0gJ3N0cmluZycpIHsKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gcy50b1N0cmluZygpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgaWYgKHRoaXMuZW5jb2RpbmcpIHsKCSAgICAgICAgICAgIC8vIHVzZSBwYXNzZWQgZm9ybWF0IChmcm9tQ2hhckNvZGUgd2lsbCByZXR1cm4gVVRGOCBlbmNvZGluZykKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gU3RyaW5nVXRpbHNfMSQxLmRlZmF1bHQuY2FzdEFzTm9uVXRmOENoYXIocywgdGhpcy5lbmNvZGluZyk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAvLyBjb3JyZWN0bHkgY29udmVydHMgZnJvbSBVVEYtOCwgYnV0IG5vdCBvdGhlciBlbmNvZGluZ3MKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShzKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpczsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmFwcGVuZENoYXJzID0gZnVuY3Rpb24gKHN0ciwgb2Zmc2V0LCBsZW4pIHsKCSAgICAgICAgZm9yICh2YXIgaSA9IG9mZnNldDsgb2Zmc2V0IDwgb2Zmc2V0ICsgbGVuOyBpKyspIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kKHN0cltpXSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXM7CgkgICAgfTsKCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5sZW5ndGggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlLmxlbmd0aDsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmNoYXJBdCA9IGZ1bmN0aW9uIChuKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlLmNoYXJBdChuKTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmRlbGV0ZUNoYXJBdCA9IGZ1bmN0aW9uIChuKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIHRoaXMudmFsdWUuc3Vic3RyaW5nKG4gKyAxKTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLnNldENoYXJBdCA9IGZ1bmN0aW9uIChuLCBjKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIGMgKyB0aGlzLnZhbHVlLnN1YnN0cihuICsgMSk7CgkgICAgfTsKCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5zdWJzdHJpbmcgPSBmdW5jdGlvbiAoc3RhcnQsIGVuZCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZS5zdWJzdHJpbmcoc3RhcnQsIGVuZCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAbm90ZSBoZWxwZXIgbWV0aG9kIGZvciBSU1MgRXhwYW5kZWQKCSAgICAgKi8KCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5zZXRMZW5ndGhUb1plcm8gPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSAnJzsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmluc2VydCA9IGZ1bmN0aW9uIChuLCBjKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIGMgKyB0aGlzLnZhbHVlLnN1YnN0cihuICsgYy5sZW5ndGgpOwoJICAgIH07CgkgICAgcmV0dXJuIFN0cmluZ0J1aWxkZXI7Cgl9KCkpOwoJU3RyaW5nQnVpbGRlciQxLmRlZmF1bHQgPSBTdHJpbmdCdWlsZGVyOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQml0TWF0cml4JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5czsqLwoJdmFyIEJpdEFycmF5XzEkMSA9IEJpdEFycmF5JDE7Cgl2YXIgU3lzdGVtXzEkMyA9IFN5c3RlbSQxOwoJdmFyIEFycmF5c18xID0gQXJyYXlzJDE7Cgl2YXIgU3RyaW5nQnVpbGRlcl8xJDIgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNyA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5SZXByZXNlbnRzIGEgMkQgbWF0cml4IG9mIGJpdHMuIEluIGZ1bmN0aW9uIGFyZ3VtZW50cyBiZWxvdywgYW5kIHRocm91Z2hvdXQgdGhlIGNvbW1vbgoJICogbW9kdWxlLCB4IGlzIHRoZSBjb2x1bW4gcG9zaXRpb24sIGFuZCB5IGlzIHRoZSByb3cgcG9zaXRpb24uIFRoZSBvcmRlcmluZyBpcyBhbHdheXMgeCwgeS4KCSAqIFRoZSBvcmlnaW4gaXMgYXQgdGhlIHRvcC1sZWZ0LjwvcD4KCSAqCgkgKiA8cD5JbnRlcm5hbGx5IHRoZSBiaXRzIGFyZSByZXByZXNlbnRlZCBpbiBhIDEtRCBhcnJheSBvZiAzMi1iaXQgaW50cy4gSG93ZXZlciwgZWFjaCByb3cgYmVnaW5zCgkgKiB3aXRoIGEgbmV3IGludC4gVGhpcyBpcyBkb25lIGludGVudGlvbmFsbHkgc28gdGhhdCB3ZSBjYW4gY29weSBvdXQgYSByb3cgaW50byBhIEJpdEFycmF5IHZlcnkKCSAqIGVmZmljaWVudGx5LjwvcD4KCSAqCgkgKiA8cD5UaGUgb3JkZXJpbmcgb2YgYml0cyBpcyByb3ctbWFqb3IuIFdpdGhpbiBlYWNoIGludCwgdGhlIGxlYXN0IHNpZ25pZmljYW50IGJpdHMgYXJlIHVzZWQgZmlyc3QsCgkgKiBtZWFuaW5nIHRoZXkgcmVwcmVzZW50IGxvd2VyIHggdmFsdWVzLiBUaGlzIGlzIGNvbXBhdGlibGUgd2l0aCBCaXRBcnJheSdzIGltcGxlbWVudGF0aW9uLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqLwoJdmFyIEJpdE1hdHJpeCAvKmltcGxlbWVudHMgQ2xvbmVhYmxlKi8gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQ3JlYXRlcyBhbiBlbXB0eSBzcXVhcmUge0BsaW5rIEJpdE1hdHJpeH0uCgkgICAgICoKCSAgICAgKiBAcGFyYW0gZGltZW5zaW9uIGhlaWdodCBhbmQgd2lkdGgKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IoZGltZW5zaW9uOiBudW1iZXIgLyppbnQqLykgewoJICAgIC8vICAgdGhpcyhkaW1lbnNpb24sIGRpbWVuc2lvbikKCSAgICAvLyB9CgkgICAgLyoqCgkgICAgICogQ3JlYXRlcyBhbiBlbXB0eSB7QGxpbmsgQml0TWF0cml4fS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB3aWR0aCBiaXQgbWF0cml4IHdpZHRoCgkgICAgICogQHBhcmFtIGhlaWdodCBiaXQgbWF0cml4IGhlaWdodAoJICAgICAqLwoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3Rvcih3aWR0aDogbnVtYmVyIC8qaW50Ki8sIGhlaWdodDogbnVtYmVyIC8qaW50Ki8pIHsKCSAgICAvLyAgIGlmICh3aWR0aCA8IDEgfHwgaGVpZ2h0IDwgMSkgewoJICAgIC8vICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCJCb3RoIGRpbWVuc2lvbnMgbXVzdCBiZSBncmVhdGVyIHRoYW4gMCIpCgkgICAgLy8gICB9CgkgICAgLy8gICB0aGlzLndpZHRoID0gd2lkdGgKCSAgICAvLyAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0CgkgICAgLy8gICB0aGlzLnJvd1NpemUgPSAod2lkdGggKyAzMSkgLyAzMgoJICAgIC8vICAgYml0cyA9IG5ldyBpbnRbcm93U2l6ZSAqIGhlaWdodF07CgkgICAgLy8gfQoJICAgIGZ1bmN0aW9uIEJpdE1hdHJpeCh3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLywgcm93U2l6ZSAvKmludCovLCBiaXRzKSB7CgkgICAgICAgIHRoaXMud2lkdGggPSB3aWR0aDsKCSAgICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7CgkgICAgICAgIHRoaXMucm93U2l6ZSA9IHJvd1NpemU7CgkgICAgICAgIHRoaXMuYml0cyA9IGJpdHM7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGhlaWdodCB8fCBudWxsID09PSBoZWlnaHQpIHsKCSAgICAgICAgICAgIGhlaWdodCA9IHdpZHRoOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0OwoJICAgICAgICBpZiAod2lkdGggPCAxIHx8IGhlaWdodCA8IDEpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ0JvdGggZGltZW5zaW9ucyBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAwJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gcm93U2l6ZSB8fCBudWxsID09PSByb3dTaXplKSB7CgkgICAgICAgICAgICByb3dTaXplID0gTWF0aC5mbG9vcigod2lkdGggKyAzMSkgLyAzMik7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yb3dTaXplID0gcm93U2l6ZTsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gYml0cyB8fCBudWxsID09PSBiaXRzKSB7CgkgICAgICAgICAgICB0aGlzLmJpdHMgPSBuZXcgSW50MzJBcnJheSh0aGlzLnJvd1NpemUgKiB0aGlzLmhlaWdodCk7CgkgICAgICAgIH0KCSAgICB9CgkgICAgLyoqCgkgICAgICogSW50ZXJwcmV0cyBhIDJEIGFycmF5IG9mIGJvb2xlYW5zIGFzIGEge0BsaW5rIEJpdE1hdHJpeH0sIHdoZXJlICJ0cnVlIiBtZWFucyBhbiAib24iIGJpdC4KCSAgICAgKgoJICAgICAqIEBmdW5jdGlvbiBwYXJzZQoJICAgICAqIEBwYXJhbSBpbWFnZSBiaXRzIG9mIHRoZSBpbWFnZSwgYXMgYSByb3ctbWFqb3IgMkQgYXJyYXkuIEVsZW1lbnRzIGFyZSBhcnJheXMgcmVwcmVzZW50aW5nIHJvd3MKCSAgICAgKiBAcmV0dXJuIHtAbGluayBCaXRNYXRyaXh9IHJlcHJlc2VudGF0aW9uIG9mIGltYWdlCgkgICAgICovCgkgICAgQml0TWF0cml4LnBhcnNlRnJvbUJvb2xlYW5BcnJheSA9IGZ1bmN0aW9uIChpbWFnZSkgewoJICAgICAgICB2YXIgaGVpZ2h0ID0gaW1hZ2UubGVuZ3RoOwoJICAgICAgICB2YXIgd2lkdGggPSBpbWFnZVswXS5sZW5ndGg7CgkgICAgICAgIHZhciBiaXRzID0gbmV3IEJpdE1hdHJpeCh3aWR0aCwgaGVpZ2h0KTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBoZWlnaHQ7IGkrKykgewoJICAgICAgICAgICAgdmFyIGltYWdlSSA9IGltYWdlW2ldOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB3aWR0aDsgaisrKSB7CgkgICAgICAgICAgICAgICAgaWYgKGltYWdlSVtqXSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLnNldChqLCBpKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKgoJICAgICAqIEBmdW5jdGlvbiBwYXJzZQoJICAgICAqIEBwYXJhbSBzdHJpbmdSZXByZXNlbnRhdGlvbgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcKCSAgICAgKiBAcGFyYW0gdW5zZXRTdHJpbmcKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucGFyc2VGcm9tU3RyaW5nID0gZnVuY3Rpb24gKHN0cmluZ1JlcHJlc2VudGF0aW9uLCBzZXRTdHJpbmcsIHVuc2V0U3RyaW5nKSB7CgkgICAgICAgIGlmIChzdHJpbmdSZXByZXNlbnRhdGlvbiA9PT0gbnVsbCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnc3RyaW5nUmVwcmVzZW50YXRpb24gY2Fubm90IGJlIG51bGwnKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IG5ldyBBcnJheShzdHJpbmdSZXByZXNlbnRhdGlvbi5sZW5ndGgpOwoJICAgICAgICB2YXIgYml0c1BvcyA9IDA7CgkgICAgICAgIHZhciByb3dTdGFydFBvcyA9IDA7CgkgICAgICAgIHZhciByb3dMZW5ndGggPSAtMTsKCSAgICAgICAgdmFyIG5Sb3dzID0gMDsKCSAgICAgICAgdmFyIHBvcyA9IDA7CgkgICAgICAgIHdoaWxlIChwb3MgPCBzdHJpbmdSZXByZXNlbnRhdGlvbi5sZW5ndGgpIHsKCSAgICAgICAgICAgIGlmIChzdHJpbmdSZXByZXNlbnRhdGlvbi5jaGFyQXQocG9zKSA9PT0gJ1xuJyB8fAoJICAgICAgICAgICAgICAgIHN0cmluZ1JlcHJlc2VudGF0aW9uLmNoYXJBdChwb3MpID09PSAnXHInKSB7CgkgICAgICAgICAgICAgICAgaWYgKGJpdHNQb3MgPiByb3dTdGFydFBvcykgewoJICAgICAgICAgICAgICAgICAgICBpZiAocm93TGVuZ3RoID09PSAtMSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcm93TGVuZ3RoID0gYml0c1BvcyAtIHJvd1N0YXJ0UG9zOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGJpdHNQb3MgLSByb3dTdGFydFBvcyAhPT0gcm93TGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdyb3cgbGVuZ3RocyBkbyBub3QgbWF0Y2gnKTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICByb3dTdGFydFBvcyA9IGJpdHNQb3M7CgkgICAgICAgICAgICAgICAgICAgIG5Sb3dzKys7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHBvcysrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSBpZiAoc3RyaW5nUmVwcmVzZW50YXRpb24uc3Vic3RyaW5nKHBvcywgcG9zICsgc2V0U3RyaW5nLmxlbmd0aCkgPT09IHNldFN0cmluZykgewoJICAgICAgICAgICAgICAgIHBvcyArPSBzZXRTdHJpbmcubGVuZ3RoOwoJICAgICAgICAgICAgICAgIGJpdHNbYml0c1Bvc10gPSB0cnVlOwoJICAgICAgICAgICAgICAgIGJpdHNQb3MrKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHN0cmluZ1JlcHJlc2VudGF0aW9uLnN1YnN0cmluZyhwb3MsIHBvcyArIHVuc2V0U3RyaW5nLmxlbmd0aCkgPT09IHVuc2V0U3RyaW5nKSB7CgkgICAgICAgICAgICAgICAgcG9zICs9IHVuc2V0U3RyaW5nLmxlbmd0aDsKCSAgICAgICAgICAgICAgICBiaXRzW2JpdHNQb3NdID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgYml0c1BvcysrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnaWxsZWdhbCBjaGFyYWN0ZXIgZW5jb3VudGVyZWQ6ICcgKyBzdHJpbmdSZXByZXNlbnRhdGlvbi5zdWJzdHJpbmcocG9zKSk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gbm8gRU9MIGF0IGVuZD8KCSAgICAgICAgaWYgKGJpdHNQb3MgPiByb3dTdGFydFBvcykgewoJICAgICAgICAgICAgaWYgKHJvd0xlbmd0aCA9PT0gLTEpIHsKCSAgICAgICAgICAgICAgICByb3dMZW5ndGggPSBiaXRzUG9zIC0gcm93U3RhcnRQb3M7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIGlmIChiaXRzUG9zIC0gcm93U3RhcnRQb3MgIT09IHJvd0xlbmd0aCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ3JvdyBsZW5ndGhzIGRvIG5vdCBtYXRjaCcpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgblJvd3MrKzsKCSAgICAgICAgfQoJICAgICAgICB2YXIgbWF0cml4ID0gbmV3IEJpdE1hdHJpeChyb3dMZW5ndGgsIG5Sb3dzKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBiaXRzUG9zOyBpKyspIHsKCSAgICAgICAgICAgIGlmIChiaXRzW2ldKSB7CgkgICAgICAgICAgICAgICAgbWF0cml4LnNldChNYXRoLmZsb29yKGkgJSByb3dMZW5ndGgpLCBNYXRoLmZsb29yKGkgLyByb3dMZW5ndGgpKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbWF0cml4OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+R2V0cyB0aGUgcmVxdWVzdGVkIGJpdCwgd2hlcmUgdHJ1ZSBtZWFucyBibGFjay48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0geCBUaGUgaG9yaXpvbnRhbCBjb21wb25lbnQgKGkuZS4gd2hpY2ggY29sdW1uKQoJICAgICAqIEBwYXJhbSB5IFRoZSB2ZXJ0aWNhbCBjb21wb25lbnQgKGkuZS4gd2hpY2ggcm93KQoJICAgICAqIEByZXR1cm4gdmFsdWUgb2YgZ2l2ZW4gYml0IGluIG1hdHJpeAoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKHggLyppbnQqLywgeSAvKmludCovKSB7CgkgICAgICAgIHZhciBvZmZzZXQgPSB5ICogdGhpcy5yb3dTaXplICsgTWF0aC5mbG9vcih4IC8gMzIpOwoJICAgICAgICByZXR1cm4gKCh0aGlzLmJpdHNbb2Zmc2V0XSA+Pj4gKHggJiAweDFmKSkgJiAxKSAhPT0gMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlNldHMgdGhlIGdpdmVuIGJpdCB0byB0cnVlLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB4IFRoZSBob3Jpem9udGFsIGNvbXBvbmVudCAoaS5lLiB3aGljaCBjb2x1bW4pCgkgICAgICogQHBhcmFtIHkgVGhlIHZlcnRpY2FsIGNvbXBvbmVudCAoaS5lLiB3aGljaCByb3cpCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdIHw9ICgxIDw8ICh4ICYgMHgxZikpICYgMHhGRkZGRkZGRjsKCSAgICB9OwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUudW5zZXQgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdICY9IH4oKDEgPDwgKHggJiAweDFmKSkgJiAweEZGRkZGRkZGKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkZsaXBzIHRoZSBnaXZlbiBiaXQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIHggVGhlIGhvcml6b250YWwgY29tcG9uZW50IChpLmUuIHdoaWNoIGNvbHVtbikKCSAgICAgKiBAcGFyYW0geSBUaGUgdmVydGljYWwgY29tcG9uZW50IChpLmUuIHdoaWNoIHJvdykKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmZsaXAgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdIF49ICgoMSA8PCAoeCAmIDB4MWYpKSAmIDB4RkZGRkZGRkYpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRXhjbHVzaXZlLW9yIChYT1IpOiBGbGlwIHRoZSBiaXQgaW4gdGhpcyB7QGNvZGUgQml0TWF0cml4fSBpZiB0aGUgY29ycmVzcG9uZGluZwoJICAgICAqIG1hc2sgYml0IGlzIHNldC4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBtYXNrIFhPUiBtYXNrCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS54b3IgPSBmdW5jdGlvbiAobWFzaykgewoJICAgICAgICBpZiAodGhpcy53aWR0aCAhPT0gbWFzay5nZXRXaWR0aCgpIHx8IHRoaXMuaGVpZ2h0ICE9PSBtYXNrLmdldEhlaWdodCgpCgkgICAgICAgICAgICB8fCB0aGlzLnJvd1NpemUgIT09IG1hc2suZ2V0Um93U2l6ZSgpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdpbnB1dCBtYXRyaXggZGltZW5zaW9ucyBkbyBub3QgbWF0Y2gnKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcm93QXJyYXkgPSBuZXcgQml0QXJyYXlfMSQxLmRlZmF1bHQoTWF0aC5mbG9vcih0aGlzLndpZHRoIC8gMzIpICsgMSk7CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgeSA9IDAsIGhlaWdodCA9IHRoaXMuaGVpZ2h0OyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIHZhciBvZmZzZXQgPSB5ICogcm93U2l6ZTsKCSAgICAgICAgICAgIHZhciByb3cgPSBtYXNrLmdldFJvdyh5LCByb3dBcnJheSkuZ2V0Qml0QXJyYXkoKTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgcm93U2l6ZTsgeCsrKSB7CgkgICAgICAgICAgICAgICAgYml0c1tvZmZzZXQgKyB4XSBePSByb3dbeF07CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIENsZWFycyBhbGwgYml0cyAoc2V0cyB0byBmYWxzZSkuCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIHZhciBtYXggPSBiaXRzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXg7IGkrKykgewoJICAgICAgICAgICAgYml0c1tpXSA9IDA7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlNldHMgYSBzcXVhcmUgcmVnaW9uIG9mIHRoZSBiaXQgbWF0cml4IHRvIHRydWUuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGxlZnQgVGhlIGhvcml6b250YWwgcG9zaXRpb24gdG8gYmVnaW4gYXQgKGluY2x1c2l2ZSkKCSAgICAgKiBAcGFyYW0gdG9wIFRoZSB2ZXJ0aWNhbCBwb3NpdGlvbiB0byBiZWdpbiBhdCAoaW5jbHVzaXZlKQoJICAgICAqIEBwYXJhbSB3aWR0aCBUaGUgd2lkdGggb2YgdGhlIHJlZ2lvbgoJICAgICAqIEBwYXJhbSBoZWlnaHQgVGhlIGhlaWdodCBvZiB0aGUgcmVnaW9uCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5zZXRSZWdpb24gPSBmdW5jdGlvbiAobGVmdCAvKmludCovLCB0b3AgLyppbnQqLywgd2lkdGggLyppbnQqLywgaGVpZ2h0IC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKHRvcCA8IDAgfHwgbGVmdCA8IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ0xlZnQgYW5kIHRvcCBtdXN0IGJlIG5vbm5lZ2F0aXZlJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGhlaWdodCA8IDEgfHwgd2lkdGggPCAxKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdIZWlnaHQgYW5kIHdpZHRoIG11c3QgYmUgYXQgbGVhc3QgMScpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByaWdodCA9IGxlZnQgKyB3aWR0aDsKCSAgICAgICAgdmFyIGJvdHRvbSA9IHRvcCArIGhlaWdodDsKCSAgICAgICAgaWYgKGJvdHRvbSA+IHRoaXMuaGVpZ2h0IHx8IHJpZ2h0ID4gdGhpcy53aWR0aCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnVGhlIHJlZ2lvbiBtdXN0IGZpdCBpbnNpZGUgdGhlIG1hdHJpeCcpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgeSA9IHRvcDsgeSA8IGJvdHRvbTsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb2Zmc2V0ID0geSAqIHJvd1NpemU7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gbGVmdDsgeCA8IHJpZ2h0OyB4KyspIHsKCSAgICAgICAgICAgICAgICBiaXRzW29mZnNldCArIE1hdGguZmxvb3IoeCAvIDMyKV0gfD0gKCgxIDw8ICh4ICYgMHgxZikpICYgMHhGRkZGRkZGRik7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEEgZmFzdCBtZXRob2QgdG8gcmV0cmlldmUgb25lIHJvdyBvZiBkYXRhIGZyb20gdGhlIG1hdHJpeCBhcyBhIEJpdEFycmF5LgoJICAgICAqCgkgICAgICogQHBhcmFtIHkgVGhlIHJvdyB0byByZXRyaWV2ZQoJICAgICAqIEBwYXJhbSByb3cgQW4gb3B0aW9uYWwgY2FsbGVyLWFsbG9jYXRlZCBCaXRBcnJheSwgd2lsbCBiZSBhbGxvY2F0ZWQgaWYgbnVsbCBvciB0b28gc21hbGwKCSAgICAgKiBAcmV0dXJuIFRoZSByZXN1bHRpbmcgQml0QXJyYXkgLSB0aGlzIHJlZmVyZW5jZSBzaG91bGQgYWx3YXlzIGJlIHVzZWQgZXZlbiB3aGVuIHBhc3NpbmcKCSAgICAgKiAgICAgICAgIHlvdXIgb3duIHJvdwoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0Um93ID0gZnVuY3Rpb24gKHkgLyppbnQqLywgcm93KSB7CgkgICAgICAgIGlmIChyb3cgPT09IG51bGwgfHwgcm93ID09PSB1bmRlZmluZWQgfHwgcm93LmdldFNpemUoKSA8IHRoaXMud2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBCaXRBcnJheV8xJDEuZGVmYXVsdCh0aGlzLndpZHRoKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHJvdy5jbGVhcigpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiByb3dTaXplOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHJvd1NpemU7IHgrKykgewoJICAgICAgICAgICAgcm93LnNldEJ1bGsoeCAqIDMyLCBiaXRzW29mZnNldCArIHhdKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcm93OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIHkgcm93IHRvIHNldAoJICAgICAqIEBwYXJhbSByb3cge0BsaW5rIEJpdEFycmF5fSB0byBjb3B5IGZyb20KCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLnNldFJvdyA9IGZ1bmN0aW9uICh5IC8qaW50Ki8sIHJvdykgewoJICAgICAgICBTeXN0ZW1fMSQzLmRlZmF1bHQuYXJyYXljb3B5KHJvdy5nZXRCaXRBcnJheSgpLCAwLCB0aGlzLmJpdHMsIHkgKiB0aGlzLnJvd1NpemUsIHRoaXMucm93U2l6ZSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBNb2RpZmllcyB0aGlzIHtAY29kZSBCaXRNYXRyaXh9IHRvIHJlcHJlc2VudCB0aGUgc2FtZSBidXQgcm90YXRlZCAxODAgZGVncmVlcwoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUucm90YXRlMTgwID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgd2lkdGggPSB0aGlzLmdldFdpZHRoKCk7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgdG9wUm93ID0gbmV3IEJpdEFycmF5XzEkMS5kZWZhdWx0KHdpZHRoKTsKCSAgICAgICAgdmFyIGJvdHRvbVJvdyA9IG5ldyBCaXRBcnJheV8xJDEuZGVmYXVsdCh3aWR0aCk7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IE1hdGguZmxvb3IoKGhlaWdodCArIDEpIC8gMik7IGkgPCBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICB0b3BSb3cgPSB0aGlzLmdldFJvdyhpLCB0b3BSb3cpOwoJICAgICAgICAgICAgYm90dG9tUm93ID0gdGhpcy5nZXRSb3coaGVpZ2h0IC0gMSAtIGksIGJvdHRvbVJvdyk7CgkgICAgICAgICAgICB0b3BSb3cucmV2ZXJzZSgpOwoJICAgICAgICAgICAgYm90dG9tUm93LnJldmVyc2UoKTsKCSAgICAgICAgICAgIHRoaXMuc2V0Um93KGksIGJvdHRvbVJvdyk7CgkgICAgICAgICAgICB0aGlzLnNldFJvdyhoZWlnaHQgLSAxIC0gaSwgdG9wUm93KTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICogVGhpcyBpcyB1c2VmdWwgaW4gZGV0ZWN0aW5nIHRoZSBlbmNsb3NpbmcgcmVjdGFuZ2xlIG9mIGEgJ3B1cmUnIGJhcmNvZGUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIHtAY29kZSBsZWZ0LHRvcCx3aWR0aCxoZWlnaHR9IGVuY2xvc2luZyByZWN0YW5nbGUgb2YgYWxsIDEgYml0cywgb3IgbnVsbCBpZiBpdCBpcyBhbGwgd2hpdGUKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmdldEVuY2xvc2luZ1JlY3RhbmdsZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHdpZHRoID0gdGhpcy53aWR0aDsKCSAgICAgICAgdmFyIGhlaWdodCA9IHRoaXMuaGVpZ2h0OwoJICAgICAgICB2YXIgcm93U2l6ZSA9IHRoaXMucm93U2l6ZTsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIHZhciBsZWZ0ID0gd2lkdGg7CgkgICAgICAgIHZhciB0b3AgPSBoZWlnaHQ7CgkgICAgICAgIHZhciByaWdodCA9IC0xOwoJICAgICAgICB2YXIgYm90dG9tID0gLTE7CgkgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIHgzMiA9IDA7IHgzMiA8IHJvd1NpemU7IHgzMisrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHRoZUJpdHMgPSBiaXRzW3kgKiByb3dTaXplICsgeDMyXTsKCSAgICAgICAgICAgICAgICBpZiAodGhlQml0cyAhPT0gMCkgewoJICAgICAgICAgICAgICAgICAgICBpZiAoeSA8IHRvcCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgdG9wID0geTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBpZiAoeSA+IGJvdHRvbSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgYm90dG9tID0geTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBpZiAoeDMyICogMzIgPCBsZWZ0KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYml0ID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgoKHRoZUJpdHMgPDwgKDMxIC0gYml0KSkgJiAweEZGRkZGRkZGKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpdCsrOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh4MzIgKiAzMiArIGJpdCkgPCBsZWZ0KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCA9IHgzMiAqIDMyICsgYml0OwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGlmICh4MzIgKiAzMiArIDMxID4gcmlnaHQpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBiaXQgPSAzMTsKCSAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgodGhlQml0cyA+Pj4gYml0KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpdC0tOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh4MzIgKiAzMiArIGJpdCkgPiByaWdodCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0ID0geDMyICogMzIgKyBiaXQ7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHJpZ2h0IDwgbGVmdCB8fCBib3R0b20gPCB0b3ApIHsKCSAgICAgICAgICAgIHJldHVybiBudWxsOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW2xlZnQsIHRvcCwgcmlnaHQgLSBsZWZ0ICsgMSwgYm90dG9tIC0gdG9wICsgMV0pOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogVGhpcyBpcyB1c2VmdWwgaW4gZGV0ZWN0aW5nIGEgY29ybmVyIG9mIGEgJ3B1cmUnIGJhcmNvZGUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIHtAY29kZSB4LHl9IGNvb3JkaW5hdGUgb2YgdG9wLWxlZnQtbW9zdCAxIGJpdCwgb3IgbnVsbCBpZiBpdCBpcyBhbGwgd2hpdGUKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmdldFRvcExlZnRPbkJpdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJvd1NpemUgPSB0aGlzLnJvd1NpemU7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IDA7CgkgICAgICAgIHdoaWxlIChiaXRzT2Zmc2V0IDwgYml0cy5sZW5ndGggJiYgYml0c1tiaXRzT2Zmc2V0XSA9PT0gMCkgewoJICAgICAgICAgICAgYml0c09mZnNldCsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChiaXRzT2Zmc2V0ID09PSBiaXRzLmxlbmd0aCkgewoJICAgICAgICAgICAgcmV0dXJuIG51bGw7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHkgPSBiaXRzT2Zmc2V0IC8gcm93U2l6ZTsKCSAgICAgICAgdmFyIHggPSAoYml0c09mZnNldCAlIHJvd1NpemUpICogMzI7CgkgICAgICAgIHZhciB0aGVCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgdmFyIGJpdCA9IDA7CgkgICAgICAgIHdoaWxlICgoKHRoZUJpdHMgPDwgKDMxIC0gYml0KSkgJiAweEZGRkZGRkZGKSA9PT0gMCkgewoJICAgICAgICAgICAgYml0Kys7CgkgICAgICAgIH0KCSAgICAgICAgeCArPSBiaXQ7CgkgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW3gsIHldKTsKCSAgICB9OwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0Qm90dG9tUmlnaHRPbkJpdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJvd1NpemUgPSB0aGlzLnJvd1NpemU7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IGJpdHMubGVuZ3RoIC0gMTsKCSAgICAgICAgd2hpbGUgKGJpdHNPZmZzZXQgPj0gMCAmJiBiaXRzW2JpdHNPZmZzZXRdID09PSAwKSB7CgkgICAgICAgICAgICBiaXRzT2Zmc2V0LS07CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGJpdHNPZmZzZXQgPCAwKSB7CgkgICAgICAgICAgICByZXR1cm4gbnVsbDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgeSA9IE1hdGguZmxvb3IoYml0c09mZnNldCAvIHJvd1NpemUpOwoJICAgICAgICB2YXIgeCA9IE1hdGguZmxvb3IoYml0c09mZnNldCAlIHJvd1NpemUpICogMzI7CgkgICAgICAgIHZhciB0aGVCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgdmFyIGJpdCA9IDMxOwoJICAgICAgICB3aGlsZSAoKHRoZUJpdHMgPj4+IGJpdCkgPT09IDApIHsKCSAgICAgICAgICAgIGJpdC0tOwoJICAgICAgICB9CgkgICAgICAgIHggKz0gYml0OwoJICAgICAgICByZXR1cm4gSW50MzJBcnJheS5mcm9tKFt4LCB5XSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSB3aWR0aCBvZiB0aGUgbWF0cml4CgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMud2lkdGg7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSBoZWlnaHQgb2YgdGhlIG1hdHJpeAoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0SGVpZ2h0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5oZWlnaHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSByb3cgc2l6ZSBvZiB0aGUgbWF0cml4CgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5nZXRSb3dTaXplID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yb3dTaXplOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gKG8pIHsKCSAgICAgICAgaWYgKCEobyBpbnN0YW5jZW9mIEJpdE1hdHJpeCkpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgb3RoZXIgPSBvOwoJICAgICAgICByZXR1cm4gdGhpcy53aWR0aCA9PT0gb3RoZXIud2lkdGggJiYgdGhpcy5oZWlnaHQgPT09IG90aGVyLmhlaWdodCAmJiB0aGlzLnJvd1NpemUgPT09IG90aGVyLnJvd1NpemUgJiYKCSAgICAgICAgICAgIEFycmF5c18xLmRlZmF1bHQuZXF1YWxzKHRoaXMuYml0cywgb3RoZXIuYml0cyk7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGhhc2ggPSB0aGlzLndpZHRoOwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgdGhpcy53aWR0aDsKCSAgICAgICAgaGFzaCA9IDMxICogaGFzaCArIHRoaXMuaGVpZ2h0OwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgdGhpcy5yb3dTaXplOwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgQXJyYXlzXzEuZGVmYXVsdC5oYXNoQ29kZSh0aGlzLmJpdHMpOwoJICAgICAgICByZXR1cm4gaGFzaDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIHVzaW5nICJYIiBmb3Igc2V0IGFuZCAiICIgZm9yIHVuc2V0IGJpdHMKCSAgICAgKi8KCSAgICAvKkBPdmVycmlkZSovCgkgICAgLy8gcHVibGljIHRvU3RyaW5nKCk6IHN0cmluZyB7CgkgICAgLy8gICByZXR1cm4gdG9TdHJpbmcoIjogIlgsICIgICIpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgYSBzZXQgYml0CgkgICAgICogQHBhcmFtIHVuc2V0U3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGFuIHVuc2V0IGJpdAoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGVudGlyZSBtYXRyaXggdXRpbGl6aW5nIGdpdmVuIHN0cmluZ3MKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgdG9TdHJpbmcoc2V0U3RyaW5nOiBzdHJpbmcgPSAiWCAiLCB1bnNldFN0cmluZzogc3RyaW5nID0gIiAgIik6IHN0cmluZyB7CgkgICAgLy8gICByZXR1cm4gdGhpcy5idWlsZFRvU3RyaW5nKHNldFN0cmluZywgdW5zZXRTdHJpbmcsICJcbiIpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgYSBzZXQgYml0CgkgICAgICogQHBhcmFtIHVuc2V0U3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGFuIHVuc2V0IGJpdAoJICAgICAqIEBwYXJhbSBsaW5lU2VwYXJhdG9yIG5ld2xpbmUgY2hhcmFjdGVyIGluIHN0cmluZyByZXByZXNlbnRhdGlvbgoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGVudGlyZSBtYXRyaXggdXRpbGl6aW5nIGdpdmVuIHN0cmluZ3MgYW5kIGxpbmUgc2VwYXJhdG9yCgkgICAgICogQGRlcHJlY2F0ZWQgY2FsbCB7QGxpbmsgI3RvU3RyaW5nKFN0cmluZyxTdHJpbmcpfSBvbmx5LCB3aGljaCB1c2VzIFxuIGxpbmUgc2VwYXJhdG9yIGFsd2F5cwoJICAgICAqLwoJICAgIC8vIEBEZXByZWNhdGVkCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uIChzZXRTdHJpbmcsIHVuc2V0U3RyaW5nLCBsaW5lU2VwYXJhdG9yKSB7CgkgICAgICAgIGlmIChzZXRTdHJpbmcgPT09IHZvaWQgMCkgeyBzZXRTdHJpbmcgPSAnWCAnOyB9CgkgICAgICAgIGlmICh1bnNldFN0cmluZyA9PT0gdm9pZCAwKSB7IHVuc2V0U3RyaW5nID0gJyAgJzsgfQoJICAgICAgICBpZiAobGluZVNlcGFyYXRvciA9PT0gdm9pZCAwKSB7IGxpbmVTZXBhcmF0b3IgPSAnXG4nOyB9CgkgICAgICAgIHJldHVybiB0aGlzLmJ1aWxkVG9TdHJpbmcoc2V0U3RyaW5nLCB1bnNldFN0cmluZywgbGluZVNlcGFyYXRvcik7CgkgICAgfTsKCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmJ1aWxkVG9TdHJpbmcgPSBmdW5jdGlvbiAoc2V0U3RyaW5nLCB1bnNldFN0cmluZywgbGluZVNlcGFyYXRvcikgewoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFN0cmluZ0J1aWxkZXJfMSQyLmRlZmF1bHQoKTsKCSAgICAgICAgLy8gcmVzdWx0LmFwcGVuZChsaW5lU2VwYXJhdG9yKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDAsIGhlaWdodCA9IHRoaXMuaGVpZ2h0OyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwLCB3aWR0aCA9IHRoaXMud2lkdGg7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCh0aGlzLmdldCh4LCB5KSA/IHNldFN0cmluZyA6IHVuc2V0U3RyaW5nKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQobGluZVNlcGFyYXRvcik7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdC50b1N0cmluZygpOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgQml0TWF0cml4KHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0LCB0aGlzLnJvd1NpemUsIHRoaXMuYml0cy5zbGljZSgpKTsKCSAgICB9OwoJICAgIHJldHVybiBCaXRNYXRyaXg7Cgl9KCkpOwoJQml0TWF0cml4JDEuZGVmYXVsdCA9IEJpdE1hdHJpeDsKCgl2YXIgTm90Rm91bmRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShOb3RGb3VuZEV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNSA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBOb3RGb3VuZEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZChOb3RGb3VuZEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBOb3RGb3VuZEV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBOb3RGb3VuZEV4Y2VwdGlvbi5nZXROb3RGb3VuZEluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IE5vdEZvdW5kRXhjZXB0aW9uKCk7CgkgICAgfTsKCSAgICBOb3RGb3VuZEV4Y2VwdGlvbi5raW5kID0gJ05vdEZvdW5kRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gTm90Rm91bmRFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDUuZGVmYXVsdCkpOwoJTm90Rm91bmRFeGNlcHRpb24kMS5kZWZhdWx0ID0gTm90Rm91bmRFeGNlcHRpb247CgoJLyoKCSAqIENvcHlyaWdodCAyMDA5IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMkYyA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5jb21tb24geyovCgl2YXIgQmluYXJpemVyXzEgPSBCaW5hcml6ZXIkMTsKCXZhciBCaXRBcnJheV8xID0gQml0QXJyYXkkMTsKCXZhciBCaXRNYXRyaXhfMSQ1ID0gQml0TWF0cml4JDE7Cgl2YXIgTm90Rm91bmRFeGNlcHRpb25fMSQ2ID0gTm90Rm91bmRFeGNlcHRpb24kMTsKCS8qKgoJICogVGhpcyBCaW5hcml6ZXIgaW1wbGVtZW50YXRpb24gdXNlcyB0aGUgb2xkIFpYaW5nIGdsb2JhbCBoaXN0b2dyYW0gYXBwcm9hY2guIEl0IGlzIHN1aXRhYmxlCgkgKiBmb3IgbG93LWVuZCBtb2JpbGUgZGV2aWNlcyB3aGljaCBkb24ndCBoYXZlIGVub3VnaCBDUFUgb3IgbWVtb3J5IHRvIHVzZSBhIGxvY2FsIHRocmVzaG9sZGluZwoJICogYWxnb3JpdGhtLiBIb3dldmVyLCBiZWNhdXNlIGl0IHBpY2tzIGEgZ2xvYmFsIGJsYWNrIHBvaW50LCBpdCBjYW5ub3QgaGFuZGxlIGRpZmZpY3VsdCBzaGFkb3dzCgkgKiBhbmQgZ3JhZGllbnRzLgoJICoKCSAqIEZhc3RlciBtb2JpbGUgZGV2aWNlcyBhbmQgYWxsIGRlc2t0b3AgYXBwbGljYXRpb25zIHNob3VsZCBwcm9iYWJseSB1c2UgSHlicmlkQmluYXJpemVyIGluc3RlYWQuCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGMoR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcihzb3VyY2UpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgc291cmNlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5sdW1pbmFuY2VzID0gR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkVNUFRZOwoJICAgICAgICBfdGhpcy5idWNrZXRzID0gbmV3IEludDMyQXJyYXkoR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkxVTUlOQU5DRV9CVUNLRVRTKTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICAvLyBBcHBsaWVzIHNpbXBsZSBzaGFycGVuaW5nIHRvIHRoZSByb3cgZGF0YSB0byBpbXByb3ZlIHBlcmZvcm1hbmNlIG9mIHRoZSAxRCBSZWFkZXJzLgoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIucHJvdG90eXBlLmdldEJsYWNrUm93ID0gZnVuY3Rpb24gKHkgLyppbnQqLywgcm93KSB7CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgaWYgKHJvdyA9PT0gdW5kZWZpbmVkIHx8IHJvdyA9PT0gbnVsbCB8fCByb3cuZ2V0U2l6ZSgpIDwgd2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBCaXRBcnJheV8xLmRlZmF1bHQod2lkdGgpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgcm93LmNsZWFyKCk7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5pbml0QXJyYXlzKHdpZHRoKTsKCSAgICAgICAgdmFyIGxvY2FsTHVtaW5hbmNlcyA9IHNvdXJjZS5nZXRSb3coeSwgdGhpcy5sdW1pbmFuY2VzKTsKCSAgICAgICAgdmFyIGxvY2FsQnVja2V0cyA9IHRoaXMuYnVja2V0czsKCSAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICBsb2NhbEJ1Y2tldHNbKGxvY2FsTHVtaW5hbmNlc1t4XSAmIDB4ZmYpID4+IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfU0hJRlRdKys7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGJsYWNrUG9pbnQgPSBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuZXN0aW1hdGVCbGFja1BvaW50KGxvY2FsQnVja2V0cyk7CgkgICAgICAgIGlmICh3aWR0aCA8IDMpIHsKCSAgICAgICAgICAgIC8vIFNwZWNpYWwgY2FzZSBmb3IgdmVyeSBzbWFsbCBpbWFnZXMKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgd2lkdGg7IHgrKykgewoJICAgICAgICAgICAgICAgIGlmICgobG9jYWxMdW1pbmFuY2VzW3hdICYgMHhmZikgPCBibGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgIHJvdy5zZXQoeCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdmFyIGxlZnQgPSBsb2NhbEx1bWluYW5jZXNbMF0gJiAweGZmOwoJICAgICAgICAgICAgdmFyIGNlbnRlciA9IGxvY2FsTHVtaW5hbmNlc1sxXSAmIDB4ZmY7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMTsgeCA8IHdpZHRoIC0gMTsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHJpZ2h0ID0gbG9jYWxMdW1pbmFuY2VzW3ggKyAxXSAmIDB4ZmY7CgkgICAgICAgICAgICAgICAgLy8gQSBzaW1wbGUgLTEgNCAtMSBib3ggZmlsdGVyIHdpdGggYSB3ZWlnaHQgb2YgMi4KCSAgICAgICAgICAgICAgICBpZiAoKChjZW50ZXIgKiA0KSAtIGxlZnQgLSByaWdodCkgLyAyIDwgYmxhY2tQb2ludCkgewoJICAgICAgICAgICAgICAgICAgICByb3cuc2V0KHgpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBsZWZ0ID0gY2VudGVyOwoJICAgICAgICAgICAgICAgIGNlbnRlciA9IHJpZ2h0OwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByb3c7CgkgICAgfTsKCSAgICAvLyBEb2VzIG5vdCBzaGFycGVuIHRoZSBkYXRhLCBhcyB0aGlzIGNhbGwgaXMgaW50ZW5kZWQgdG8gb25seSBiZSB1c2VkIGJ5IDJEIFJlYWRlcnMuCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5wcm90b3R5cGUuZ2V0QmxhY2tNYXRyaXggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IHNvdXJjZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIG1hdHJpeCA9IG5ldyBCaXRNYXRyaXhfMSQ1LmRlZmF1bHQod2lkdGgsIGhlaWdodCk7CgkgICAgICAgIC8vIFF1aWNrbHkgY2FsY3VsYXRlcyB0aGUgaGlzdG9ncmFtIGJ5IHNhbXBsaW5nIGZvdXIgcm93cyBmcm9tIHRoZSBpbWFnZS4gVGhpcyBwcm92ZWQgdG8gYmUKCSAgICAgICAgLy8gbW9yZSByb2J1c3Qgb24gdGhlIGJsYWNrYm94IHRlc3RzIHRoYW4gc2FtcGxpbmcgYSBkaWFnb25hbCBhcyB3ZSB1c2VkIHRvIGRvLgoJICAgICAgICB0aGlzLmluaXRBcnJheXMod2lkdGgpOwoJICAgICAgICB2YXIgbG9jYWxCdWNrZXRzID0gdGhpcy5idWNrZXRzOwoJICAgICAgICBmb3IgKHZhciB5ID0gMTsgeSA8IDU7IHkrKykgewoJICAgICAgICAgICAgdmFyIHJvdyA9IE1hdGguZmxvb3IoKGhlaWdodCAqIHkpIC8gNSk7CgkgICAgICAgICAgICB2YXIgbG9jYWxMdW1pbmFuY2VzXzEgPSBzb3VyY2UuZ2V0Um93KHJvdywgdGhpcy5sdW1pbmFuY2VzKTsKCSAgICAgICAgICAgIHZhciByaWdodCA9IE1hdGguZmxvb3IoKHdpZHRoICogNCkgLyA1KTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSBNYXRoLmZsb29yKHdpZHRoIC8gNSk7IHggPCByaWdodDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBpeGVsID0gbG9jYWxMdW1pbmFuY2VzXzFbeF0gJiAweGZmOwoJICAgICAgICAgICAgICAgIGxvY2FsQnVja2V0c1twaXhlbCA+PiBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUXSsrOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciBibGFja1BvaW50ID0gR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLmVzdGltYXRlQmxhY2tQb2ludChsb2NhbEJ1Y2tldHMpOwoJICAgICAgICAvLyBXZSBkZWxheSByZWFkaW5nIHRoZSBlbnRpcmUgaW1hZ2UgbHVtaW5hbmNlIHVudGlsIHRoZSBibGFjayBwb2ludCBlc3RpbWF0aW9uIHN1Y2NlZWRzLgoJICAgICAgICAvLyBBbHRob3VnaCB3ZSBlbmQgdXAgcmVhZGluZyBmb3VyIHJvd3MgdHdpY2UsIGl0IGlzIGNvbnNpc3RlbnQgd2l0aCBvdXIgbW90dG8gb2YKCSAgICAgICAgLy8gImZhaWwgcXVpY2tseSIgd2hpY2ggaXMgbmVjZXNzYXJ5IGZvciBjb250aW51b3VzIHNjYW5uaW5nLgoJICAgICAgICB2YXIgbG9jYWxMdW1pbmFuY2VzID0gc291cmNlLmdldE1hdHJpeCgpOwoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb2Zmc2V0ID0geSAqIHdpZHRoOwoJICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBpeGVsID0gbG9jYWxMdW1pbmFuY2VzW29mZnNldCArIHhdICYgMHhmZjsKCSAgICAgICAgICAgICAgICBpZiAocGl4ZWwgPCBibGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgIG1hdHJpeC5zZXQoeCwgeSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBtYXRyaXg7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLnByb3RvdHlwZS5jcmVhdGVCaW5hcml6ZXIgPSBmdW5jdGlvbiAoc291cmNlKSB7CgkgICAgICAgIHJldHVybiBuZXcgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyKHNvdXJjZSk7CgkgICAgfTsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIucHJvdG90eXBlLmluaXRBcnJheXMgPSBmdW5jdGlvbiAobHVtaW5hbmNlU2l6ZSAvKmludCovKSB7CgkgICAgICAgIGlmICh0aGlzLmx1bWluYW5jZXMubGVuZ3RoIDwgbHVtaW5hbmNlU2l6ZSkgewoJICAgICAgICAgICAgdGhpcy5sdW1pbmFuY2VzID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KGx1bWluYW5jZVNpemUpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBidWNrZXRzID0gdGhpcy5idWNrZXRzOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQlVDS0VUUzsgeCsrKSB7CgkgICAgICAgICAgICBidWNrZXRzW3hdID0gMDsKCSAgICAgICAgfQoJICAgIH07CgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLmVzdGltYXRlQmxhY2tQb2ludCA9IGZ1bmN0aW9uIChidWNrZXRzKSB7CgkgICAgICAgIC8vIEZpbmQgdGhlIHRhbGxlc3QgcGVhayBpbiB0aGUgaGlzdG9ncmFtLgoJICAgICAgICB2YXIgbnVtQnVja2V0cyA9IGJ1Y2tldHMubGVuZ3RoOwoJICAgICAgICB2YXIgbWF4QnVja2V0Q291bnQgPSAwOwoJICAgICAgICB2YXIgZmlyc3RQZWFrID0gMDsKCSAgICAgICAgdmFyIGZpcnN0UGVha1NpemUgPSAwOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG51bUJ1Y2tldHM7IHgrKykgewoJICAgICAgICAgICAgaWYgKGJ1Y2tldHNbeF0gPiBmaXJzdFBlYWtTaXplKSB7CgkgICAgICAgICAgICAgICAgZmlyc3RQZWFrID0geDsKCSAgICAgICAgICAgICAgICBmaXJzdFBlYWtTaXplID0gYnVja2V0c1t4XTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmIChidWNrZXRzW3hdID4gbWF4QnVja2V0Q291bnQpIHsKCSAgICAgICAgICAgICAgICBtYXhCdWNrZXRDb3VudCA9IGJ1Y2tldHNbeF07CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gRmluZCB0aGUgc2Vjb25kLXRhbGxlc3QgcGVhayB3aGljaCBpcyBzb21ld2hhdCBmYXIgZnJvbSB0aGUgdGFsbGVzdCBwZWFrLgoJICAgICAgICB2YXIgc2Vjb25kUGVhayA9IDA7CgkgICAgICAgIHZhciBzZWNvbmRQZWFrU2NvcmUgPSAwOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG51bUJ1Y2tldHM7IHgrKykgewoJICAgICAgICAgICAgdmFyIGRpc3RhbmNlVG9CaWdnZXN0ID0geCAtIGZpcnN0UGVhazsKCSAgICAgICAgICAgIC8vIEVuY291cmFnZSBtb3JlIGRpc3RhbnQgc2Vjb25kIHBlYWtzIGJ5IG11bHRpcGx5aW5nIGJ5IHNxdWFyZSBvZiBkaXN0YW5jZS4KCSAgICAgICAgICAgIHZhciBzY29yZSA9IGJ1Y2tldHNbeF0gKiBkaXN0YW5jZVRvQmlnZ2VzdCAqIGRpc3RhbmNlVG9CaWdnZXN0OwoJICAgICAgICAgICAgaWYgKHNjb3JlID4gc2Vjb25kUGVha1Njb3JlKSB7CgkgICAgICAgICAgICAgICAgc2Vjb25kUGVhayA9IHg7CgkgICAgICAgICAgICAgICAgc2Vjb25kUGVha1Njb3JlID0gc2NvcmU7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTWFrZSBzdXJlIGZpcnN0UGVhayBjb3JyZXNwb25kcyB0byB0aGUgYmxhY2sgcGVhay4KCSAgICAgICAgaWYgKGZpcnN0UGVhayA+IHNlY29uZFBlYWspIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gZmlyc3RQZWFrOwoJICAgICAgICAgICAgZmlyc3RQZWFrID0gc2Vjb25kUGVhazsKCSAgICAgICAgICAgIHNlY29uZFBlYWsgPSB0ZW1wOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHRoZXJlIGlzIHRvbyBsaXR0bGUgY29udHJhc3QgaW4gdGhlIGltYWdlIHRvIHBpY2sgYSBtZWFuaW5nZnVsIGJsYWNrIHBvaW50LCB0aHJvdyByYXRoZXIKCSAgICAgICAgLy8gdGhhbiB3YXN0ZSB0aW1lIHRyeWluZyB0byBkZWNvZGUgdGhlIGltYWdlLCBhbmQgcmlzayBmYWxzZSBwb3NpdGl2ZXMuCgkgICAgICAgIGlmIChzZWNvbmRQZWFrIC0gZmlyc3RQZWFrIDw9IG51bUJ1Y2tldHMgLyAxNikgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRmluZCBhIHZhbGxleSBiZXR3ZWVuIHRoZW0gdGhhdCBpcyBsb3cgYW5kIGNsb3NlciB0byB0aGUgd2hpdGUgcGVhay4KCSAgICAgICAgdmFyIGJlc3RWYWxsZXkgPSBzZWNvbmRQZWFrIC0gMTsKCSAgICAgICAgdmFyIGJlc3RWYWxsZXlTY29yZSA9IC0xOwoJICAgICAgICBmb3IgKHZhciB4ID0gc2Vjb25kUGVhayAtIDE7IHggPiBmaXJzdFBlYWs7IHgtLSkgewoJICAgICAgICAgICAgdmFyIGZyb21GaXJzdCA9IHggLSBmaXJzdFBlYWs7CgkgICAgICAgICAgICB2YXIgc2NvcmUgPSBmcm9tRmlyc3QgKiBmcm9tRmlyc3QgKiAoc2Vjb25kUGVhayAtIHgpICogKG1heEJ1Y2tldENvdW50IC0gYnVja2V0c1t4XSk7CgkgICAgICAgICAgICBpZiAoc2NvcmUgPiBiZXN0VmFsbGV5U2NvcmUpIHsKCSAgICAgICAgICAgICAgICBiZXN0VmFsbGV5ID0geDsKCSAgICAgICAgICAgICAgICBiZXN0VmFsbGV5U2NvcmUgPSBzY29yZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gYmVzdFZhbGxleSA8PCBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUOwoJICAgIH07CgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkxVTUlOQU5DRV9CSVRTID0gNTsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUID0gOCAtIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQklUUzsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX0JVQ0tFVFMgPSAxIDw8IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQklUUzsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuRU1QVFkgPSBVaW50OENsYW1wZWRBcnJheS5mcm9tKFswXSk7CgkgICAgcmV0dXJuIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcjsKCX0oQmluYXJpemVyXzEuZGVmYXVsdCkpOwoJR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyJDEuZGVmYXVsdCA9IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcjsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fZXh0ZW5kcyRiID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEh5YnJpZEJpbmFyaXplciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyXzEgPSBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMTsKCXZhciBCaXRNYXRyaXhfMSQ0ID0gQml0TWF0cml4JDE7CgkvKioKCSAqIFRoaXMgY2xhc3MgaW1wbGVtZW50cyBhIGxvY2FsIHRocmVzaG9sZGluZyBhbGdvcml0aG0sIHdoaWNoIHdoaWxlIHNsb3dlciB0aGFuIHRoZQoJICogR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLCBpcyBmYWlybHkgZWZmaWNpZW50IGZvciB3aGF0IGl0IGRvZXMuIEl0IGlzIGRlc2lnbmVkIGZvcgoJICogaGlnaCBmcmVxdWVuY3kgaW1hZ2VzIG9mIGJhcmNvZGVzIHdpdGggYmxhY2sgZGF0YSBvbiB3aGl0ZSBiYWNrZ3JvdW5kcy4gRm9yIHRoaXMgYXBwbGljYXRpb24sCgkgKiBpdCBkb2VzIGEgbXVjaCBiZXR0ZXIgam9iIHRoYW4gYSBnbG9iYWwgYmxhY2twb2ludCB3aXRoIHNldmVyZSBzaGFkb3dzIGFuZCBncmFkaWVudHMuCgkgKiBIb3dldmVyIGl0IHRlbmRzIHRvIHByb2R1Y2UgYXJ0aWZhY3RzIG9uIGxvd2VyIGZyZXF1ZW5jeSBpbWFnZXMgYW5kIGlzIHRoZXJlZm9yZSBub3QKCSAqIGEgZ29vZCBnZW5lcmFsIHB1cnBvc2UgYmluYXJpemVyIGZvciB1c2VzIG91dHNpZGUgWlhpbmcuCgkgKgoJICogVGhpcyBjbGFzcyBleHRlbmRzIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplciwgdXNpbmcgdGhlIG9sZGVyIGhpc3RvZ3JhbSBhcHByb2FjaCBmb3IgMUQgcmVhZGVycywKCSAqIGFuZCB0aGUgbmV3ZXIgbG9jYWwgYXBwcm9hY2ggZm9yIDJEIHJlYWRlcnMuIDFEIGRlY29kaW5nIHVzaW5nIGEgcGVyLXJvdyBoaXN0b2dyYW0gaXMgYWxyZWFkeQoJICogaW5oZXJlbnRseSBsb2NhbCwgYW5kIG9ubHkgZmFpbHMgZm9yIGhvcml6b250YWwgZ3JhZGllbnRzLiBXZSBjYW4gcmV2aXNpdCB0aGF0IHByb2JsZW0gbGF0ZXIsCgkgKiBidXQgZm9yIG5vdyBpdCB3YXMgbm90IGEgd2luIHRvIHVzZSBsb2NhbCBibG9ja3MgZm9yIDFELgoJICoKCSAqIFRoaXMgQmluYXJpemVyIGlzIHRoZSBkZWZhdWx0IGZvciB0aGUgdW5pdCB0ZXN0cyBhbmQgdGhlIHJlY29tbWVuZGVkIGNsYXNzIGZvciBsaWJyYXJ5IHVzZXJzLgoJICoKCSAqIEBhdXRob3IgZHN3aXRraW5AZ29vZ2xlLmNvbSAoRGFuaWVsIFN3aXRraW4pCgkgKi8KCXZhciBIeWJyaWRCaW5hcml6ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGIoSHlicmlkQmluYXJpemVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEh5YnJpZEJpbmFyaXplcihzb3VyY2UpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgc291cmNlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5tYXRyaXggPSBudWxsOwoJICAgICAgICByZXR1cm4gX3RoaXM7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIENhbGN1bGF0ZXMgdGhlIGZpbmFsIEJpdE1hdHJpeCBvbmNlIGZvciBhbGwgcmVxdWVzdHMuIFRoaXMgY291bGQgYmUgY2FsbGVkIG9uY2UgZnJvbSB0aGUKCSAgICAgKiBjb25zdHJ1Y3RvciBpbnN0ZWFkLCBidXQgdGhlcmUgYXJlIHNvbWUgYWR2YW50YWdlcyB0byBkb2luZyBpdCBsYXppbHksIHN1Y2ggYXMgbWFraW5nCgkgICAgICogcHJvZmlsaW5nIGVhc2llciwgYW5kIG5vdCBkb2luZyBoZWF2eSBsaWZ0aW5nIHdoZW4gY2FsbGVycyBkb24ndCBleHBlY3QgaXQuCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEh5YnJpZEJpbmFyaXplci5wcm90b3R5cGUuZ2V0QmxhY2tNYXRyaXggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLm1hdHJpeCAhPT0gbnVsbCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMubWF0cml4OwoJICAgICAgICB9CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IHNvdXJjZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgaWYgKHdpZHRoID49IEh5YnJpZEJpbmFyaXplci5NSU5JTVVNX0RJTUVOU0lPTiAmJiBoZWlnaHQgPj0gSHlicmlkQmluYXJpemVyLk1JTklNVU1fRElNRU5TSU9OKSB7CgkgICAgICAgICAgICB2YXIgbHVtaW5hbmNlcyA9IHNvdXJjZS5nZXRNYXRyaXgoKTsKCSAgICAgICAgICAgIHZhciBzdWJXaWR0aCA9IHdpZHRoID4+IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKCh3aWR0aCAmIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0spICE9PSAwKSB7CgkgICAgICAgICAgICAgICAgc3ViV2lkdGgrKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhciBzdWJIZWlnaHQgPSBoZWlnaHQgPj4gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7CgkgICAgICAgICAgICBpZiAoKGhlaWdodCAmIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0spICE9PSAwKSB7CgkgICAgICAgICAgICAgICAgc3ViSGVpZ2h0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgYmxhY2tQb2ludHMgPSBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlQmxhY2tQb2ludHMobHVtaW5hbmNlcywgc3ViV2lkdGgsIHN1YkhlaWdodCwgd2lkdGgsIGhlaWdodCk7CgkgICAgICAgICAgICB2YXIgbmV3TWF0cml4ID0gbmV3IEJpdE1hdHJpeF8xJDQuZGVmYXVsdCh3aWR0aCwgaGVpZ2h0KTsKCSAgICAgICAgICAgIEh5YnJpZEJpbmFyaXplci5jYWxjdWxhdGVUaHJlc2hvbGRGb3JCbG9jayhsdW1pbmFuY2VzLCBzdWJXaWR0aCwgc3ViSGVpZ2h0LCB3aWR0aCwgaGVpZ2h0LCBibGFja1BvaW50cywgbmV3TWF0cml4KTsKCSAgICAgICAgICAgIHRoaXMubWF0cml4ID0gbmV3TWF0cml4OwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgLy8gSWYgdGhlIGltYWdlIGlzIHRvbyBzbWFsbCwgZmFsbCBiYWNrIHRvIHRoZSBnbG9iYWwgaGlzdG9ncmFtIGFwcHJvYWNoLgoJICAgICAgICAgICAgdGhpcy5tYXRyaXggPSBfc3VwZXIucHJvdG90eXBlLmdldEJsYWNrTWF0cml4LmNhbGwodGhpcyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMubWF0cml4OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEh5YnJpZEJpbmFyaXplci5wcm90b3R5cGUuY3JlYXRlQmluYXJpemVyID0gZnVuY3Rpb24gKHNvdXJjZSkgewoJICAgICAgICByZXR1cm4gbmV3IEh5YnJpZEJpbmFyaXplcihzb3VyY2UpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRm9yIGVhY2ggYmxvY2sgaW4gdGhlIGltYWdlLCBjYWxjdWxhdGUgdGhlIGF2ZXJhZ2UgYmxhY2sgcG9pbnQgdXNpbmcgYSA1eDUgZ3JpZAoJICAgICAqIG9mIHRoZSBibG9ja3MgYXJvdW5kIGl0LiBBbHNvIGhhbmRsZXMgdGhlIGNvcm5lciBjYXNlcyAoZnJhY3Rpb25hbCBibG9ja3MgYXJlIGNvbXB1dGVkIGJhc2VkCgkgICAgICogb24gdGhlIGxhc3QgcGl4ZWxzIGluIHRoZSByb3cvY29sdW1uIHdoaWNoIGFyZSBhbHNvIHVzZWQgaW4gdGhlIHByZXZpb3VzIGJsb2NrKS4KCSAgICAgKi8KCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlVGhyZXNob2xkRm9yQmxvY2sgPSBmdW5jdGlvbiAobHVtaW5hbmNlcywgc3ViV2lkdGggLyppbnQqLywgc3ViSGVpZ2h0IC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovLCBibGFja1BvaW50cywgbWF0cml4KSB7CgkgICAgICAgIHZhciBtYXhZT2Zmc2V0ID0gaGVpZ2h0IC0gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7CgkgICAgICAgIHZhciBtYXhYT2Zmc2V0ID0gd2lkdGggLSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBzdWJIZWlnaHQ7IHkrKykgewoJICAgICAgICAgICAgdmFyIHlvZmZzZXQgPSB5IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKHlvZmZzZXQgPiBtYXhZT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgeW9mZnNldCA9IG1heFlPZmZzZXQ7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgdG9wXzEgPSBIeWJyaWRCaW5hcml6ZXIuY2FwKHksIDIsIHN1YkhlaWdodCAtIDMpOwoJICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBzdWJXaWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHhvZmZzZXQgPSB4IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgICAgIGlmICh4b2Zmc2V0ID4gbWF4WE9mZnNldCkgewoJICAgICAgICAgICAgICAgICAgICB4b2Zmc2V0ID0gbWF4WE9mZnNldDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgdmFyIGxlZnQgPSBIeWJyaWRCaW5hcml6ZXIuY2FwKHgsIDIsIHN1YldpZHRoIC0gMyk7CgkgICAgICAgICAgICAgICAgdmFyIHN1bSA9IDA7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgeiA9IC0yOyB6IDw9IDI7IHorKykgewoJICAgICAgICAgICAgICAgICAgICB2YXIgYmxhY2tSb3cgPSBibGFja1BvaW50c1t0b3BfMSArIHpdOwoJICAgICAgICAgICAgICAgICAgICBzdW0gKz0gYmxhY2tSb3dbbGVmdCAtIDJdICsgYmxhY2tSb3dbbGVmdCAtIDFdICsgYmxhY2tSb3dbbGVmdF0gKyBibGFja1Jvd1tsZWZ0ICsgMV0gKyBibGFja1Jvd1tsZWZ0ICsgMl07CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHZhciBhdmVyYWdlID0gc3VtIC8gMjU7CgkgICAgICAgICAgICAgICAgSHlicmlkQmluYXJpemVyLnRocmVzaG9sZEJsb2NrKGx1bWluYW5jZXMsIHhvZmZzZXQsIHlvZmZzZXQsIGF2ZXJhZ2UsIHdpZHRoLCBtYXRyaXgpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FwID0gZnVuY3Rpb24gKHZhbHVlIC8qaW50Ki8sIG1pbiAvKmludCovLCBtYXggLyppbnQqLykgewoJICAgICAgICByZXR1cm4gdmFsdWUgPCBtaW4gPyBtaW4gOiB2YWx1ZSA+IG1heCA/IG1heCA6IHZhbHVlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQXBwbGllcyBhIHNpbmdsZSB0aHJlc2hvbGQgdG8gYSBibG9jayBvZiBwaXhlbHMuCgkgICAgICovCgkgICAgSHlicmlkQmluYXJpemVyLnRocmVzaG9sZEJsb2NrID0gZnVuY3Rpb24gKGx1bWluYW5jZXMsIHhvZmZzZXQgLyppbnQqLywgeW9mZnNldCAvKmludCovLCB0aHJlc2hvbGQgLyppbnQqLywgc3RyaWRlIC8qaW50Ki8sIG1hdHJpeCkgewoJICAgICAgICBmb3IgKHZhciB5ID0gMCwgb2Zmc2V0ID0geW9mZnNldCAqIHN0cmlkZSArIHhvZmZzZXQ7IHkgPCBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsgeSsrLCBvZmZzZXQgKz0gc3RyaWRlKSB7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFOyB4KyspIHsKCSAgICAgICAgICAgICAgICAvLyBDb21wYXJpc29uIG5lZWRzIHRvIGJlIDw9IHNvIHRoYXQgYmxhY2sgPT0gMCBwaXhlbHMgYXJlIGJsYWNrIGV2ZW4gaWYgdGhlIHRocmVzaG9sZCBpcyAwLgoJICAgICAgICAgICAgICAgIGlmICgobHVtaW5hbmNlc1tvZmZzZXQgKyB4XSAmIDB4RkYpIDw9IHRocmVzaG9sZCkgewoJICAgICAgICAgICAgICAgICAgICBtYXRyaXguc2V0KHhvZmZzZXQgKyB4LCB5b2Zmc2V0ICsgeSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDYWxjdWxhdGVzIGEgc2luZ2xlIGJsYWNrIHBvaW50IGZvciBlYWNoIGJsb2NrIG9mIHBpeGVscyBhbmQgc2F2ZXMgaXQgYXdheS4KCSAgICAgKiBTZWUgdGhlIGZvbGxvd2luZyB0aHJlYWQgZm9yIGEgZGlzY3Vzc2lvbiBvZiB0aGlzIGFsZ29yaXRobToKCSAgICAgKiAgaHR0cDovL2dyb3Vwcy5nb29nbGUuY29tL2dyb3VwL3p4aW5nL2Jyb3dzZV90aHJlYWQvdGhyZWFkL2QwNmVmYTJjMzVhN2RkYzAKCSAgICAgKi8KCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlQmxhY2tQb2ludHMgPSBmdW5jdGlvbiAobHVtaW5hbmNlcywgc3ViV2lkdGggLyppbnQqLywgc3ViSGVpZ2h0IC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHZhciBtYXhZT2Zmc2V0ID0gaGVpZ2h0IC0gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7CgkgICAgICAgIHZhciBtYXhYT2Zmc2V0ID0gd2lkdGggLSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsKCSAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOndoaXRlc3BhY2UKCSAgICAgICAgdmFyIGJsYWNrUG9pbnRzID0gbmV3IEFycmF5KHN1YkhlaWdodCk7IC8vIHN1YldpZHRoCgkgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgc3ViSGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGJsYWNrUG9pbnRzW3ldID0gbmV3IEludDMyQXJyYXkoc3ViV2lkdGgpOwoJICAgICAgICAgICAgdmFyIHlvZmZzZXQgPSB5IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKHlvZmZzZXQgPiBtYXhZT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgeW9mZnNldCA9IG1heFlPZmZzZXQ7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHN1YldpZHRoOyB4KyspIHsKCSAgICAgICAgICAgICAgICB2YXIgeG9mZnNldCA9IHggPDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7CgkgICAgICAgICAgICAgICAgaWYgKHhvZmZzZXQgPiBtYXhYT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgICAgIHhvZmZzZXQgPSBtYXhYT2Zmc2V0OwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB2YXIgc3VtID0gMDsKCSAgICAgICAgICAgICAgICB2YXIgbWluID0gMHhGRjsKCSAgICAgICAgICAgICAgICB2YXIgbWF4ID0gMDsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciB5eSA9IDAsIG9mZnNldCA9IHlvZmZzZXQgKiB3aWR0aCArIHhvZmZzZXQ7IHl5IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHl5KyssIG9mZnNldCArPSB3aWR0aCkgewoJICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB4eCA9IDA7IHh4IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHh4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwaXhlbCA9IGx1bWluYW5jZXNbb2Zmc2V0ICsgeHhdICYgMHhGRjsKCSAgICAgICAgICAgICAgICAgICAgICAgIHN1bSArPSBwaXhlbDsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIHN0aWxsIGxvb2tpbmcgZm9yIGdvb2QgY29udHJhc3QKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwaXhlbCA8IG1pbikgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbiA9IHBpeGVsOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBpeGVsID4gbWF4KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4ID0gcGl4ZWw7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgLy8gc2hvcnQtY2lyY3VpdCBtaW4vbWF4IHRlc3RzIG9uY2UgZHluYW1pYyByYW5nZSBpcyBtZXQKCSAgICAgICAgICAgICAgICAgICAgaWYgKG1heCAtIG1pbiA+IEh5YnJpZEJpbmFyaXplci5NSU5fRFlOQU1JQ19SQU5HRSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gZmluaXNoIHRoZSByZXN0IG9mIHRoZSByb3dzIHF1aWNrbHkKCSAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoeXkrKywgb2Zmc2V0ICs9IHdpZHRoOyB5eSA8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFOyB5eSsrLCBvZmZzZXQgKz0gd2lkdGgpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB4eCA9IDA7IHh4IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHh4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VtICs9IGx1bWluYW5jZXNbb2Zmc2V0ICsgeHhdICYgMHhGRjsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgLy8gVGhlIGRlZmF1bHQgZXN0aW1hdGUgaXMgdGhlIGF2ZXJhZ2Ugb2YgdGhlIHZhbHVlcyBpbiB0aGUgYmxvY2suCgkgICAgICAgICAgICAgICAgdmFyIGF2ZXJhZ2UgPSBzdW0gPj4gKEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSICogMik7CgkgICAgICAgICAgICAgICAgaWYgKG1heCAtIG1pbiA8PSBIeWJyaWRCaW5hcml6ZXIuTUlOX0RZTkFNSUNfUkFOR0UpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gSWYgdmFyaWF0aW9uIHdpdGhpbiB0aGUgYmxvY2sgaXMgbG93LCBhc3N1bWUgdGhpcyBpcyBhIGJsb2NrIHdpdGggb25seSBsaWdodCBvciBvbmx5CgkgICAgICAgICAgICAgICAgICAgIC8vIGRhcmsgcGl4ZWxzLiBJbiB0aGF0IGNhc2Ugd2UgZG8gbm90IHdhbnQgdG8gdXNlIHRoZSBhdmVyYWdlLCBhcyBpdCB3b3VsZCBkaXZpZGUgdGhpcwoJICAgICAgICAgICAgICAgICAgICAvLyBsb3cgY29udHJhc3QgYXJlYSBpbnRvIGJsYWNrIGFuZCB3aGl0ZSBwaXhlbHMsIGVzc2VudGlhbGx5IGNyZWF0aW5nIGRhdGEgb3V0IG9mIG5vaXNlLgoJICAgICAgICAgICAgICAgICAgICAvLwoJICAgICAgICAgICAgICAgICAgICAvLyBUaGUgZGVmYXVsdCBhc3N1bXB0aW9uIGlzIHRoYXQgdGhlIGJsb2NrIGlzIGxpZ2h0L2JhY2tncm91bmQuIFNpbmNlIG5vIGVzdGltYXRlIGZvcgoJICAgICAgICAgICAgICAgICAgICAvLyB0aGUgbGV2ZWwgb2YgZGFyayBwaXhlbHMgZXhpc3RzIGxvY2FsbHksIHVzZSBoYWxmIHRoZSBtaW4gZm9yIHRoZSBibG9jay4KCSAgICAgICAgICAgICAgICAgICAgYXZlcmFnZSA9IG1pbiAvIDI7CgkgICAgICAgICAgICAgICAgICAgIGlmICh5ID4gMCAmJiB4ID4gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29ycmVjdCB0aGUgIndoaXRlIGJhY2tncm91bmQiIGFzc3VtcHRpb24gZm9yIGJsb2NrcyB0aGF0IGhhdmUgbmVpZ2hib3JzIGJ5IGNvbXBhcmluZwoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHBpeGVscyBpbiB0aGlzIGJsb2NrIHRvIHRoZSBwcmV2aW91c2x5IGNhbGN1bGF0ZWQgYmxhY2sgcG9pbnRzLiBUaGlzIGlzIGJhc2VkIG9uCgkgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGUgZmFjdCB0aGF0IGRhcmsgYmFyY29kZSBzeW1ib2xvZ3kgaXMgYWx3YXlzIHN1cnJvdW5kZWQgYnkgc29tZSBhbW91bnQgb2YgbGlnaHQKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJhY2tncm91bmQgZm9yIHdoaWNoIHJlYXNvbmFibGUgYmxhY2sgcG9pbnQgZXN0aW1hdGVzIHdlcmUgbWFkZS4gVGhlIGJwIGVzdGltYXRlZCBhdAoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIGJvdW5kYXJpZXMgaXMgdXNlZCBmb3IgdGhlIGludGVyaW9yLgoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIChtaW4gPCBicCkgaXMgYXJiaXRyYXJ5IGJ1dCB3b3JrcyBiZXR0ZXIgdGhhbiBvdGhlciBoZXVyaXN0aWNzIHRoYXQgd2VyZSB0cmllZC4KCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhdmVyYWdlTmVpZ2hib3JCbGFja1BvaW50ID0gKGJsYWNrUG9pbnRzW3kgLSAxXVt4XSArICgyICogYmxhY2tQb2ludHNbeV1beCAtIDFdKSArIGJsYWNrUG9pbnRzW3kgLSAxXVt4IC0gMV0pIC8gNDsKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtaW4gPCBhdmVyYWdlTmVpZ2hib3JCbGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXZlcmFnZSA9IGF2ZXJhZ2VOZWlnaGJvckJsYWNrUG9pbnQ7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgYmxhY2tQb2ludHNbeV1beF0gPSBhdmVyYWdlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBibGFja1BvaW50czsKCSAgICB9OwoJICAgIC8vIFRoaXMgY2xhc3MgdXNlcyA1eDUgYmxvY2tzIHRvIGNvbXB1dGUgbG9jYWwgbHVtaW5hbmNlLCB3aGVyZSBlYWNoIGJsb2NrIGlzIDh4OCBwaXhlbHMuCgkgICAgLy8gU28gdGhpcyBpcyB0aGUgc21hbGxlc3QgZGltZW5zaW9uIGluIGVhY2ggYXhpcyB3ZSBjYW4gYWNjZXB0LgoJICAgIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSID0gMzsKCSAgICBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRSA9IDEgPDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7IC8vIC4uLjAxMDAuLi4wMAoJICAgIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0sgPSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRSAtIDE7IC8vIC4uLjAwMTEuLi4xMQoJICAgIEh5YnJpZEJpbmFyaXplci5NSU5JTVVNX0RJTUVOU0lPTiA9IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFICogNTsKCSAgICBIeWJyaWRCaW5hcml6ZXIuTUlOX0RZTkFNSUNfUkFOR0UgPSAyNDsKCSAgICByZXR1cm4gSHlicmlkQmluYXJpemVyOwoJfShHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXJfMS5kZWZhdWx0KSk7Cgl2YXIgX2RlZmF1bHQkMiA9IEh5YnJpZEJpbmFyaXplciQxLmRlZmF1bHQgPSBIeWJyaWRCaW5hcml6ZXI7CgoJdmFyIFJHQkx1bWluYW5jZVNvdXJjZSQxID0ge307CgoJdmFyIEludmVydGVkTHVtaW5hbmNlU291cmNlJDEgPSB7fTsKCgl2YXIgTHVtaW5hbmNlU291cmNlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEx1bWluYW5jZVNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3RyaW5nQnVpbGRlcl8xJDEgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMSA9IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uJDE7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nIHsqLwoJLyoqCgkgKiBUaGUgcHVycG9zZSBvZiB0aGlzIGNsYXNzIGhpZXJhcmNoeSBpcyB0byBhYnN0cmFjdCBkaWZmZXJlbnQgYml0bWFwIGltcGxlbWVudGF0aW9ucyBhY3Jvc3MKCSAqIHBsYXRmb3JtcyBpbnRvIGEgc3RhbmRhcmQgaW50ZXJmYWNlIGZvciByZXF1ZXN0aW5nIGdyZXlzY2FsZSBsdW1pbmFuY2UgdmFsdWVzLiBUaGUgaW50ZXJmYWNlCgkgKiBvbmx5IHByb3ZpZGVzIGltbXV0YWJsZSBtZXRob2RzOyB0aGVyZWZvcmUgY3JvcCBhbmQgcm90YXRpb24gY3JlYXRlIGNvcGllcy4gVGhpcyBpcyB0byBlbnN1cmUKCSAqIHRoYXQgb25lIFJlYWRlciBkb2VzIG5vdCBtb2RpZnkgdGhlIG9yaWdpbmFsIGx1bWluYW5jZSBzb3VyY2UgYW5kIGxlYXZlIGl0IGluIGFuIHVua25vd24gc3RhdGUKCSAqIGZvciBvdGhlciBSZWFkZXJzIGluIHRoZSBjaGFpbi4KCSAqCgkgKiBAYXV0aG9yIGRzd2l0a2luQGdvb2dsZS5jb20gKERhbmllbCBTd2l0a2luKQoJICovCgl2YXIgTHVtaW5hbmNlU291cmNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEx1bWluYW5jZVNvdXJjZSh3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICB0aGlzLndpZHRoID0gd2lkdGg7CgkgICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0OwoJICAgIH0KCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSB3aWR0aCBvZiB0aGUgYml0bWFwLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuZ2V0V2lkdGggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLndpZHRoOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBUaGUgaGVpZ2h0IG9mIHRoZSBiaXRtYXAuCgkgICAgICovCgkgICAgTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRIZWlnaHQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmhlaWdodDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIHN1YmNsYXNzIHN1cHBvcnRzIGNyb3BwaW5nLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNDcm9wU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIGEgbmV3IG9iamVjdCB3aXRoIGNyb3BwZWQgaW1hZ2UgZGF0YS4gSW1wbGVtZW50YXRpb25zIG1heSBrZWVwIGEgcmVmZXJlbmNlIHRvIHRoZQoJICAgICAqIG9yaWdpbmFsIGRhdGEgcmF0aGVyIHRoYW4gYSBjb3B5LiBPbmx5IGNhbGxhYmxlIGlmIGlzQ3JvcFN1cHBvcnRlZCgpIGlzIHRydWUuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gbGVmdCBUaGUgbGVmdCBjb29yZGluYXRlLCB3aGljaCBtdXN0IGJlIGluIFswLGdldFdpZHRoKCkpCgkgICAgICogQHBhcmFtIHRvcCBUaGUgdG9wIGNvb3JkaW5hdGUsIHdoaWNoIG11c3QgYmUgaW4gWzAsZ2V0SGVpZ2h0KCkpCgkgICAgICogQHBhcmFtIHdpZHRoIFRoZSB3aWR0aCBvZiB0aGUgcmVjdGFuZ2xlIHRvIGNyb3AuCgkgICAgICogQHBhcmFtIGhlaWdodCBUaGUgaGVpZ2h0IG9mIHRoZSByZWN0YW5nbGUgdG8gY3JvcC4KCSAgICAgKiBAcmV0dXJuIEEgY3JvcHBlZCB2ZXJzaW9uIG9mIHRoaXMgb2JqZWN0LgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuY3JvcCA9IGZ1bmN0aW9uIChsZWZ0IC8qaW50Ki8sIHRvcCAvKmludCovLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMS5kZWZhdWx0KCdUaGlzIGx1bWluYW5jZSBzb3VyY2UgZG9lcyBub3Qgc3VwcG9ydCBjcm9wcGluZy4nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIHN1YmNsYXNzIHN1cHBvcnRzIGNvdW50ZXItY2xvY2t3aXNlIHJvdGF0aW9uLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNSb3RhdGVTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggcm90YXRlZCBpbWFnZSBkYXRhIGJ5IDkwIGRlZ3JlZXMgY291bnRlcmNsb2Nrd2lzZS4KCSAgICAgKiBPbmx5IGNhbGxhYmxlIGlmIHtAbGluayAjaXNSb3RhdGVTdXBwb3J0ZWQoKX0gaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gQSByb3RhdGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMS5kZWZhdWx0KCdUaGlzIGx1bWluYW5jZSBzb3VyY2UgZG9lcyBub3Qgc3VwcG9ydCByb3RhdGlvbiBieSA5MCBkZWdyZWVzLicpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV0dXJucyBhIG5ldyBvYmplY3Qgd2l0aCByb3RhdGVkIGltYWdlIGRhdGEgYnkgNDUgZGVncmVlcyBjb3VudGVyY2xvY2t3aXNlLgoJICAgICAqIE9ubHkgY2FsbGFibGUgaWYge0BsaW5rICNpc1JvdGF0ZVN1cHBvcnRlZCgpfSBpcyB0cnVlLgoJICAgICAqCgkgICAgICogQHJldHVybiBBIHJvdGF0ZWQgdmVyc2lvbiBvZiB0aGlzIG9iamVjdC4KCSAgICAgKi8KCSAgICBMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLnJvdGF0ZUNvdW50ZXJDbG9ja3dpc2U0NSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uXzEuZGVmYXVsdCgnVGhpcyBsdW1pbmFuY2Ugc291cmNlIGRvZXMgbm90IHN1cHBvcnQgcm90YXRpb24gYnkgNDUgZGVncmVlcy4nKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgcm93ID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KHRoaXMud2lkdGgpOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFN0cmluZ0J1aWxkZXJfMSQxLmRlZmF1bHQoKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCB0aGlzLmhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgc291cmNlUm93ID0gdGhpcy5nZXRSb3coeSwgcm93KTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgdGhpcy53aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGx1bWluYW5jZSA9IHNvdXJjZVJvd1t4XSAmIDB4RkY7CgkgICAgICAgICAgICAgICAgdmFyIGMgPSB2b2lkIDA7CgkgICAgICAgICAgICAgICAgaWYgKGx1bWluYW5jZSA8IDB4NDApIHsKCSAgICAgICAgICAgICAgICAgICAgYyA9ICcjJzsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAobHVtaW5hbmNlIDwgMHg4MCkgewoJICAgICAgICAgICAgICAgICAgICBjID0gJysnOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIGlmIChsdW1pbmFuY2UgPCAweEMwKSB7CgkgICAgICAgICAgICAgICAgICAgIGMgPSAnLic7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICBjID0gJyAnOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICByZXN1bHQuYXBwZW5kKGMpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCgnXG4nKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0LnRvU3RyaW5nKCk7CgkgICAgfTsKCSAgICByZXR1cm4gTHVtaW5hbmNlU291cmNlOwoJfSgpKTsKCUx1bWluYW5jZVNvdXJjZSQxLmRlZmF1bHQgPSBMdW1pbmFuY2VTb3VyY2U7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA5IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMkYSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbnZlcnRlZEx1bWluYW5jZVNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgTHVtaW5hbmNlU291cmNlXzEkMSA9IEx1bWluYW5jZVNvdXJjZSQxOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogQSB3cmFwcGVyIGltcGxlbWVudGF0aW9uIG9mIHtAbGluayBMdW1pbmFuY2VTb3VyY2V9IHdoaWNoIGludmVydHMgdGhlIGx1bWluYW5jZXMgaXQgcmV0dXJucyAtLSBibGFjayBiZWNvbWVzCgkgKiB3aGl0ZSBhbmQgdmljZSB2ZXJzYSwgYW5kIGVhY2ggdmFsdWUgYmVjb21lcyAoMjU1LXZhbHVlKS4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGEoSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UsIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UoZGVsZWdhdGUpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZGVsZWdhdGUuZ2V0V2lkdGgoKSwgZGVsZWdhdGUuZ2V0SGVpZ2h0KCkpIHx8IHRoaXM7CgkgICAgICAgIF90aGlzLmRlbGVnYXRlID0gZGVsZWdhdGU7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgdmFyIHNvdXJjZVJvdyA9IHRoaXMuZGVsZWdhdGUuZ2V0Um93KHksIHJvdyk7CgkgICAgICAgIHZhciB3aWR0aCA9IHRoaXMuZ2V0V2lkdGgoKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB3aWR0aDsgaSsrKSB7CgkgICAgICAgICAgICBzb3VyY2VSb3dbaV0gPSAvKihieXRlKSovICgyNTUgLSAoc291cmNlUm93W2ldICYgMHhGRikpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBzb3VyY2VSb3c7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLmdldE1hdHJpeCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIG1hdHJpeCA9IHRoaXMuZGVsZWdhdGUuZ2V0TWF0cml4KCk7CgkgICAgICAgIHZhciBsZW5ndGggPSB0aGlzLmdldFdpZHRoKCkgKiB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgaW52ZXJ0ZWRNYXRyaXggPSBuZXcgVWludDhDbGFtcGVkQXJyYXkobGVuZ3RoKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgewoJICAgICAgICAgICAgaW52ZXJ0ZWRNYXRyaXhbaV0gPSAvKihieXRlKSovICgyNTUgLSAobWF0cml4W2ldICYgMHhGRikpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBpbnZlcnRlZE1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNDcm9wU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5kZWxlZ2F0ZS5pc0Nyb3BTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuY3JvcCA9IGZ1bmN0aW9uIChsZWZ0IC8qaW50Ki8sIHRvcCAvKmludCovLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUuY3JvcChsZWZ0LCB0b3AsIHdpZHRoLCBoZWlnaHQpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNSb3RhdGVTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlbGVnYXRlLmlzUm90YXRlU3VwcG9ydGVkKCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIG9yaWdpbmFsIGRlbGVnYXRlIHtAbGluayBMdW1pbmFuY2VTb3VyY2V9IHNpbmNlIGludmVydCB1bmRvZXMgaXRzZWxmCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5pbnZlcnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlbGVnYXRlOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUucm90YXRlQ291bnRlckNsb2Nrd2lzZSgpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1KCkpOwoJICAgIH07CgkgICAgcmV0dXJuIEludmVydGVkTHVtaW5hbmNlU291cmNlOwoJfShMdW1pbmFuY2VTb3VyY2VfMSQxLmRlZmF1bHQpKTsKCUludmVydGVkTHVtaW5hbmNlU291cmNlJDEuZGVmYXVsdCA9IEludmVydGVkTHVtaW5hbmNlU291cmNlOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDkgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoUkdCTHVtaW5hbmNlU291cmNlJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcgeyovCgkgLy8gcmVxdWlyZWQgYmVjYXVzZSBvZiBjaXJjdWxhciBkZXBlbmRlbmNpZXMgYmV0d2VlbiBMdW1pbmFuY2VTb3VyY2UgYW5kIEludmVydGVkTHVtaW5hbmNlU291cmNlCgl2YXIgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2VfMSA9IEludmVydGVkTHVtaW5hbmNlU291cmNlJDE7Cgl2YXIgTHVtaW5hbmNlU291cmNlXzEgPSBMdW1pbmFuY2VTb3VyY2UkMTsKCXZhciBTeXN0ZW1fMSQyID0gU3lzdGVtJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNiA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBUaGlzIGNsYXNzIGlzIHVzZWQgdG8gaGVscCBkZWNvZGUgaW1hZ2VzIGZyb20gZmlsZXMgd2hpY2ggYXJyaXZlIGFzIFJHQiBkYXRhIGZyb20KCSAqIGFuIEFSR0IgcGl4ZWwgYXJyYXkuIEl0IGRvZXMgbm90IHN1cHBvcnQgcm90YXRpb24uCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBhdXRob3IgQmV0YW1pbm9zCgkgKi8KCXZhciBSR0JMdW1pbmFuY2VTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDkoUkdCTHVtaW5hbmNlU291cmNlLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIFJHQkx1bWluYW5jZVNvdXJjZShsdW1pbmFuY2VzLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLywgZGF0YVdpZHRoIC8qaW50Ki8sIGRhdGFIZWlnaHQgLyppbnQqLywgbGVmdCAvKmludCovLCB0b3AgLyppbnQqLykgewoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB3aWR0aCwgaGVpZ2h0KSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5kYXRhV2lkdGggPSBkYXRhV2lkdGg7CgkgICAgICAgIF90aGlzLmRhdGFIZWlnaHQgPSBkYXRhSGVpZ2h0OwoJICAgICAgICBfdGhpcy5sZWZ0ID0gbGVmdDsKCSAgICAgICAgX3RoaXMudG9wID0gdG9wOwoJICAgICAgICBpZiAobHVtaW5hbmNlcy5CWVRFU19QRVJfRUxFTUVOVCA9PT0gNCkgeyAvLyBJbnQzMkFycmF5CgkgICAgICAgICAgICB2YXIgc2l6ZSA9IHdpZHRoICogaGVpZ2h0OwoJICAgICAgICAgICAgdmFyIGx1bWluYW5jZXNVaW50OEFycmF5ID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KHNpemUpOwoJICAgICAgICAgICAgZm9yICh2YXIgb2Zmc2V0ID0gMDsgb2Zmc2V0IDwgc2l6ZTsgb2Zmc2V0KyspIHsKCSAgICAgICAgICAgICAgICB2YXIgcGl4ZWwgPSBsdW1pbmFuY2VzW29mZnNldF07CgkgICAgICAgICAgICAgICAgdmFyIHIgPSAocGl4ZWwgPj4gMTYpICYgMHhmZjsgLy8gcmVkCgkgICAgICAgICAgICAgICAgdmFyIGcyID0gKHBpeGVsID4+IDcpICYgMHgxZmU7IC8vIDIgKiBncmVlbgoJICAgICAgICAgICAgICAgIHZhciBiID0gcGl4ZWwgJiAweGZmOyAvLyBibHVlCgkgICAgICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIGdyZWVuLWZhdm91cmluZyBhdmVyYWdlIGNoZWFwbHkKCSAgICAgICAgICAgICAgICBsdW1pbmFuY2VzVWludDhBcnJheVtvZmZzZXRdID0gLyooYnl0ZSkgKi8gKChyICsgZzIgKyBiKSAvIDQpICYgMHhGRjsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIF90aGlzLmx1bWluYW5jZXMgPSBsdW1pbmFuY2VzVWludDhBcnJheTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIF90aGlzLmx1bWluYW5jZXMgPSBsdW1pbmFuY2VzOwoJICAgICAgICB9CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGRhdGFXaWR0aCkgewoJICAgICAgICAgICAgX3RoaXMuZGF0YVdpZHRoID0gd2lkdGg7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gZGF0YUhlaWdodCkgewoJICAgICAgICAgICAgX3RoaXMuZGF0YUhlaWdodCA9IGhlaWdodDsKCSAgICAgICAgfQoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSBsZWZ0KSB7CgkgICAgICAgICAgICBfdGhpcy5sZWZ0ID0gMDsKCSAgICAgICAgfQoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSB0b3ApIHsKCSAgICAgICAgICAgIF90aGlzLnRvcCA9IDA7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKF90aGlzLmxlZnQgKyB3aWR0aCA+IF90aGlzLmRhdGFXaWR0aCB8fCBfdGhpcy50b3AgKyBoZWlnaHQgPiBfdGhpcy5kYXRhSGVpZ2h0KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNi5kZWZhdWx0KCdDcm9wIHJlY3RhbmdsZSBkb2VzIG5vdCBmaXQgd2l0aGluIGltYWdlIGRhdGEuJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICAvKkBPdmVycmlkZSovCgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgaWYgKHkgPCAwIHx8IHkgPj0gdGhpcy5nZXRIZWlnaHQoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDYuZGVmYXVsdCgnUmVxdWVzdGVkIHJvdyBpcyBvdXRzaWRlIHRoZSBpbWFnZTogJyArIHkpOwoJICAgICAgICB9CgkgICAgICAgIHZhciB3aWR0aCA9IHRoaXMuZ2V0V2lkdGgoKTsKCSAgICAgICAgaWYgKHJvdyA9PT0gbnVsbCB8fCByb3cgPT09IHVuZGVmaW5lZCB8fCByb3cubGVuZ3RoIDwgd2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBVaW50OENsYW1wZWRBcnJheSh3aWR0aCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG9mZnNldCA9ICh5ICsgdGhpcy50b3ApICogdGhpcy5kYXRhV2lkdGggKyB0aGlzLmxlZnQ7CgkgICAgICAgIFN5c3RlbV8xJDIuZGVmYXVsdC5hcnJheWNvcHkodGhpcy5sdW1pbmFuY2VzLCBvZmZzZXQsIHJvdywgMCwgd2lkdGgpOwoJICAgICAgICByZXR1cm4gcm93OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJHQkx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuZ2V0TWF0cml4ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgd2lkdGggPSB0aGlzLmdldFdpZHRoKCk7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICAvLyBJZiB0aGUgY2FsbGVyIGFza3MgZm9yIHRoZSBlbnRpcmUgdW5kZXJseWluZyBpbWFnZSwgc2F2ZSB0aGUgY29weSBhbmQgZ2l2ZSB0aGVtIHRoZQoJICAgICAgICAvLyBvcmlnaW5hbCBkYXRhLiBUaGUgZG9jcyBzcGVjaWZpY2FsbHkgd2FybiB0aGF0IHJlc3VsdC5sZW5ndGggbXVzdCBiZSBpZ25vcmVkLgoJICAgICAgICBpZiAod2lkdGggPT09IHRoaXMuZGF0YVdpZHRoICYmIGhlaWdodCA9PT0gdGhpcy5kYXRhSGVpZ2h0KSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5sdW1pbmFuY2VzOwoJICAgICAgICB9CgkgICAgICAgIHZhciBhcmVhID0gd2lkdGggKiBoZWlnaHQ7CgkgICAgICAgIHZhciBtYXRyaXggPSBuZXcgVWludDhDbGFtcGVkQXJyYXkoYXJlYSk7CgkgICAgICAgIHZhciBpbnB1dE9mZnNldCA9IHRoaXMudG9wICogdGhpcy5kYXRhV2lkdGggKyB0aGlzLmxlZnQ7CgkgICAgICAgIC8vIElmIHRoZSB3aWR0aCBtYXRjaGVzIHRoZSBmdWxsIHdpZHRoIG9mIHRoZSB1bmRlcmx5aW5nIGRhdGEsIHBlcmZvcm0gYSBzaW5nbGUgY29weS4KCSAgICAgICAgaWYgKHdpZHRoID09PSB0aGlzLmRhdGFXaWR0aCkgewoJICAgICAgICAgICAgU3lzdGVtXzEkMi5kZWZhdWx0LmFycmF5Y29weSh0aGlzLmx1bWluYW5jZXMsIGlucHV0T2Zmc2V0LCBtYXRyaXgsIDAsIGFyZWEpOwoJICAgICAgICAgICAgcmV0dXJuIG1hdHJpeDsKCSAgICAgICAgfQoJICAgICAgICAvLyBPdGhlcndpc2UgY29weSBvbmUgY3JvcHBlZCByb3cgYXQgYSB0aW1lLgoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb3V0cHV0T2Zmc2V0ID0geSAqIHdpZHRoOwoJICAgICAgICAgICAgU3lzdGVtXzEkMi5kZWZhdWx0LmFycmF5Y29weSh0aGlzLmx1bWluYW5jZXMsIGlucHV0T2Zmc2V0LCBtYXRyaXgsIG91dHB1dE9mZnNldCwgd2lkdGgpOwoJICAgICAgICAgICAgaW5wdXRPZmZzZXQgKz0gdGhpcy5kYXRhV2lkdGg7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBSR0JMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLmlzQ3JvcFN1cHBvcnRlZCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5jcm9wID0gZnVuY3Rpb24gKGxlZnQgLyppbnQqLywgdG9wIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHJldHVybiBuZXcgUkdCTHVtaW5hbmNlU291cmNlKHRoaXMubHVtaW5hbmNlcywgd2lkdGgsIGhlaWdodCwgdGhpcy5kYXRhV2lkdGgsIHRoaXMuZGF0YUhlaWdodCwgdGhpcy5sZWZ0ICsgbGVmdCwgdGhpcy50b3AgKyB0b3ApOwoJICAgIH07CgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5pbnZlcnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2VfMS5kZWZhdWx0KHRoaXMpOwoJICAgIH07CgkgICAgcmV0dXJuIFJHQkx1bWluYW5jZVNvdXJjZTsKCX0oTHVtaW5hbmNlU291cmNlXzEuZGVmYXVsdCkpOwoJdmFyIF9kZWZhdWx0JDEgPSBSR0JMdW1pbmFuY2VTb3VyY2UkMS5kZWZhdWx0ID0gUkdCTHVtaW5hbmNlU291cmNlOwoKCXZhciBRUkNvZGVSZWFkZXIkMSA9IHt9OwoKCXZhciBCYXJjb2RlRm9ybWF0JDEgPSB7fTsKCgkvKgoJICogRGlyZWN0IHBvcnQgdG8gVHlwZVNjcmlwdCBvZiBaWGluZyBieSBBZHJpYW4gVG/ImWPEgwoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmFyY29kZUZvcm1hdCQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogRW51bWVyYXRlcyBiYXJjb2RlIGZvcm1hdHMga25vd24gdG8gdGhpcyBwYWNrYWdlLiBQbGVhc2Uga2VlcCBhbHBoYWJldGl6ZWQuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEJhcmNvZGVGb3JtYXQ7CgkoZnVuY3Rpb24gKEJhcmNvZGVGb3JtYXQpIHsKCSAgICAvKiogQXp0ZWMgMkQgYmFyY29kZSBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJBWlRFQyJdID0gMF0gPSAiQVpURUMiOwoJICAgIC8qKiBDT0RBQkFSIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREFCQVIiXSA9IDFdID0gIkNPREFCQVIiOwoJICAgIC8qKiBDb2RlIDM5IDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREVfMzkiXSA9IDJdID0gIkNPREVfMzkiOwoJICAgIC8qKiBDb2RlIDkzIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREVfOTMiXSA9IDNdID0gIkNPREVfOTMiOwoJICAgIC8qKiBDb2RlIDEyOCAxRCBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJDT0RFXzEyOCJdID0gNF0gPSAiQ09ERV8xMjgiOwoJICAgIC8qKiBEYXRhIE1hdHJpeCAyRCBiYXJjb2RlIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkRBVEFfTUFUUklYIl0gPSA1XSA9ICJEQVRBX01BVFJJWCI7CgkgICAgLyoqIEVBTi04IDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkVBTl84Il0gPSA2XSA9ICJFQU5fOCI7CgkgICAgLyoqIEVBTi0xMyAxRCBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJFQU5fMTMiXSA9IDddID0gIkVBTl8xMyI7CgkgICAgLyoqIElURiAoSW50ZXJsZWF2ZWQgVHdvIG9mIEZpdmUpIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIklURiJdID0gOF0gPSAiSVRGIjsKCSAgICAvKiogTWF4aUNvZGUgMkQgYmFyY29kZSBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJNQVhJQ09ERSJdID0gOV0gPSAiTUFYSUNPREUiOwoJICAgIC8qKiBQREY0MTcgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUERGXzQxNyJdID0gMTBdID0gIlBERl80MTciOwoJICAgIC8qKiBRUiBDb2RlIDJEIGJhcmNvZGUgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUVJfQ09ERSJdID0gMTFdID0gIlFSX0NPREUiOwoJICAgIC8qKiBSU1MgMTQgKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlJTU18xNCJdID0gMTJdID0gIlJTU18xNCI7CgkgICAgLyoqIFJTUyBFWFBBTkRFRCAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUlNTX0VYUEFOREVEIl0gPSAxM10gPSAiUlNTX0VYUEFOREVEIjsKCSAgICAvKiogVVBDLUEgMUQgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiVVBDX0EiXSA9IDE0XSA9ICJVUENfQSI7CgkgICAgLyoqIFVQQy1FIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlVQQ19FIl0gPSAxNV0gPSAiVVBDX0UiOwoJICAgIC8qKiBVUEMvRUFOIGV4dGVuc2lvbiBmb3JtYXQuIE5vdCBhIHN0YW5kLWFsb25lIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlVQQ19FQU5fRVhURU5TSU9OIl0gPSAxNl0gPSAiVVBDX0VBTl9FWFRFTlNJT04iOwoJfSkoQmFyY29kZUZvcm1hdCB8fCAoQmFyY29kZUZvcm1hdCA9IHt9KSk7CglCYXJjb2RlRm9ybWF0JDEuZGVmYXVsdCA9IEJhcmNvZGVGb3JtYXQ7CgoJdmFyIFJlc3VsdCQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZXN1bHQkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIFN5c3RlbV8xJDEgPSBTeXN0ZW0kMTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGVjb2RpbmcgYSBiYXJjb2RlIHdpdGhpbiBhbiBpbWFnZS48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFJlc3VsdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IocHJpdmF0ZSB0ZXh0OiBzdHJpbmcsCgkgICAgLy8gICAgICAgICAgICAgICBVaW50OEFycmF5IHJhd0J5dGVzLAoJICAgIC8vICAgICAgICAgICAgICAgUmVzdWx0UG9jb25zdCByZXN1bHRQb2ludHM6IEludDMyQXJyYXksCgkgICAgLy8gICAgICAgICAgICAgICBCYXJjb2RlRm9ybWF0IGZvcm1hdCkgewoJICAgIC8vICAgdGhpcyh0ZXh0LCByYXdCeXRlcywgcmVzdWx0UG9pbnRzLCBmb3JtYXQsIFN5c3RlbS5jdXJyZW50VGltZU1pbGxpcygpKQoJICAgIC8vIH0KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IodGV4dDogc3RyaW5nLAoJICAgIC8vICAgICAgICAgICAgICAgVWludDhBcnJheSByYXdCeXRlcywKCSAgICAvLyAgICAgICAgICAgICAgIFJlc3VsdFBvY29uc3QgcmVzdWx0UG9pbnRzOiBJbnQzMkFycmF5LAoJICAgIC8vICAgICAgICAgICAgICAgQmFyY29kZUZvcm1hdCBmb3JtYXQsCgkgICAgLy8gICAgICAgICAgICAgICBsb25nIHRpbWVzdGFtcCkgewoJICAgIC8vICAgdGhpcyh0ZXh0LCByYXdCeXRlcywgcmF3Qnl0ZXMgPT0gbnVsbCA/IDAgOiA4ICogcmF3Qnl0ZXMubGVuZ3RoLAoJICAgIC8vICAgICAgICByZXN1bHRQb2ludHMsIGZvcm1hdCwgdGltZXN0YW1wKQoJICAgIC8vIH0KCSAgICBmdW5jdGlvbiBSZXN1bHQodGV4dCwgcmF3Qnl0ZXMsIG51bUJpdHMsIHJlc3VsdFBvaW50cywgZm9ybWF0LCB0aW1lc3RhbXApIHsKCSAgICAgICAgaWYgKG51bUJpdHMgPT09IHZvaWQgMCkgeyBudW1CaXRzID0gcmF3Qnl0ZXMgPT0gbnVsbCA/IDAgOiA4ICogcmF3Qnl0ZXMubGVuZ3RoOyB9CgkgICAgICAgIGlmICh0aW1lc3RhbXAgPT09IHZvaWQgMCkgeyB0aW1lc3RhbXAgPSBTeXN0ZW1fMSQxLmRlZmF1bHQuY3VycmVudFRpbWVNaWxsaXMoKTsgfQoJICAgICAgICB0aGlzLnRleHQgPSB0ZXh0OwoJICAgICAgICB0aGlzLnJhd0J5dGVzID0gcmF3Qnl0ZXM7CgkgICAgICAgIHRoaXMubnVtQml0cyA9IG51bUJpdHM7CgkgICAgICAgIHRoaXMucmVzdWx0UG9pbnRzID0gcmVzdWx0UG9pbnRzOwoJICAgICAgICB0aGlzLmZvcm1hdCA9IGZvcm1hdDsKCSAgICAgICAgdGhpcy50aW1lc3RhbXAgPSB0aW1lc3RhbXA7CgkgICAgICAgIHRoaXMudGV4dCA9IHRleHQ7CgkgICAgICAgIHRoaXMucmF3Qnl0ZXMgPSByYXdCeXRlczsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gbnVtQml0cyB8fCBudWxsID09PSBudW1CaXRzKSB7CgkgICAgICAgICAgICB0aGlzLm51bUJpdHMgPSAocmF3Qnl0ZXMgPT09IG51bGwgfHwgcmF3Qnl0ZXMgPT09IHVuZGVmaW5lZCkgPyAwIDogOCAqIHJhd0J5dGVzLmxlbmd0aDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHRoaXMubnVtQml0cyA9IG51bUJpdHM7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludHMgPSByZXN1bHRQb2ludHM7CgkgICAgICAgIHRoaXMuZm9ybWF0ID0gZm9ybWF0OwoJICAgICAgICB0aGlzLnJlc3VsdE1ldGFkYXRhID0gbnVsbDsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gdGltZXN0YW1wIHx8IG51bGwgPT09IHRpbWVzdGFtcCkgewoJICAgICAgICAgICAgdGhpcy50aW1lc3RhbXAgPSBTeXN0ZW1fMSQxLmRlZmF1bHQuY3VycmVudFRpbWVNaWxsaXMoKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHRoaXMudGltZXN0YW1wID0gdGltZXN0YW1wOwoJICAgICAgICB9CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcmF3IHRleHQgZW5jb2RlZCBieSB0aGUgYmFyY29kZQoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0VGV4dCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMudGV4dDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcmF3IGJ5dGVzIGVuY29kZWQgYnkgdGhlIGJhcmNvZGUsIGlmIGFwcGxpY2FibGUsIG90aGVyd2lzZSB7QGNvZGUgbnVsbH0KCSAgICAgKi8KCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFJhd0J5dGVzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yYXdCeXRlczsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaG93IG1hbnkgYml0cyBvZiB7QGxpbmsgI2dldFJhd0J5dGVzKCl9IGFyZSB2YWxpZDsgdHlwaWNhbGx5IDggdGltZXMgaXRzIGxlbmd0aAoJICAgICAqIEBzaW5jZSAzLjMuMAoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0TnVtQml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMubnVtQml0czsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcG9pbnRzIHJlbGF0ZWQgdG8gdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLiBUaGVzZSBhcmUgdHlwaWNhbGx5IHBvaW50cwoJICAgICAqICAgICAgICAgaWRlbnRpZnlpbmcgZmluZGVyIHBhdHRlcm5zIG9yIHRoZSBjb3JuZXJzIG9mIHRoZSBiYXJjb2RlLiBUaGUgZXhhY3QgbWVhbmluZyBpcwoJICAgICAqICAgICAgICAgc3BlY2lmaWMgdG8gdGhlIHR5cGUgb2YgYmFyY29kZSB0aGF0IHdhcyBkZWNvZGVkLgoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0UmVzdWx0UG9pbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRQb2ludHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHtAbGluayBCYXJjb2RlRm9ybWF0fSByZXByZXNlbnRpbmcgdGhlIGZvcm1hdCBvZiB0aGUgYmFyY29kZSB0aGF0IHdhcyBkZWNvZGVkCgkgICAgICovCgkgICAgUmVzdWx0LnByb3RvdHlwZS5nZXRCYXJjb2RlRm9ybWF0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHtAbGluayBNYXB9IG1hcHBpbmcge0BsaW5rIFJlc3VsdE1ldGFkYXRhVHlwZX0ga2V5cyB0byB2YWx1ZXMuIE1heSBiZQoJICAgICAqICAge0Bjb2RlIG51bGx9LiBUaGlzIGNvbnRhaW5zIG9wdGlvbmFsIG1ldGFkYXRhIGFib3V0IHdoYXQgd2FzIGRldGVjdGVkIGFib3V0IHRoZSBiYXJjb2RlLAoJICAgICAqICAgbGlrZSBvcmllbnRhdGlvbi4KCSAgICAgKi8KCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFJlc3VsdE1ldGFkYXRhID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRNZXRhZGF0YTsKCSAgICB9OwoJICAgIFJlc3VsdC5wcm90b3R5cGUucHV0TWV0YWRhdGEgPSBmdW5jdGlvbiAodHlwZSwgdmFsdWUpIHsKCSAgICAgICAgaWYgKHRoaXMucmVzdWx0TWV0YWRhdGEgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHRoaXMucmVzdWx0TWV0YWRhdGEgPSBuZXcgTWFwKCk7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YS5zZXQodHlwZSwgdmFsdWUpOwoJICAgIH07CgkgICAgUmVzdWx0LnByb3RvdHlwZS5wdXRBbGxNZXRhZGF0YSA9IGZ1bmN0aW9uIChtZXRhZGF0YSkgewoJICAgICAgICBpZiAobWV0YWRhdGEgIT09IG51bGwpIHsKCSAgICAgICAgICAgIGlmICh0aGlzLnJlc3VsdE1ldGFkYXRhID09PSBudWxsKSB7CgkgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YSA9IG1ldGFkYXRhOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YSA9IG5ldyBNYXAobWV0YWRhdGEpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZXN1bHQucHJvdG90eXBlLmFkZFJlc3VsdFBvaW50cyA9IGZ1bmN0aW9uIChuZXdQb2ludHMpIHsKCSAgICAgICAgdmFyIG9sZFBvaW50cyA9IHRoaXMucmVzdWx0UG9pbnRzOwoJICAgICAgICBpZiAob2xkUG9pbnRzID09PSBudWxsKSB7CgkgICAgICAgICAgICB0aGlzLnJlc3VsdFBvaW50cyA9IG5ld1BvaW50czsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChuZXdQb2ludHMgIT09IG51bGwgJiYgbmV3UG9pbnRzLmxlbmd0aCA+IDApIHsKCSAgICAgICAgICAgIHZhciBhbGxQb2ludHMgPSBuZXcgQXJyYXkob2xkUG9pbnRzLmxlbmd0aCArIG5ld1BvaW50cy5sZW5ndGgpOwoJICAgICAgICAgICAgU3lzdGVtXzEkMS5kZWZhdWx0LmFycmF5Y29weShvbGRQb2ludHMsIDAsIGFsbFBvaW50cywgMCwgb2xkUG9pbnRzLmxlbmd0aCk7CgkgICAgICAgICAgICBTeXN0ZW1fMSQxLmRlZmF1bHQuYXJyYXljb3B5KG5ld1BvaW50cywgMCwgYWxsUG9pbnRzLCBvbGRQb2ludHMubGVuZ3RoLCBuZXdQb2ludHMubGVuZ3RoKTsKCSAgICAgICAgICAgIHRoaXMucmVzdWx0UG9pbnRzID0gYWxsUG9pbnRzOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFRpbWVzdGFtcCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMudGltZXN0YW1wOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnRleHQ7CgkgICAgfTsKCSAgICByZXR1cm4gUmVzdWx0OwoJfSgpKTsKCVJlc3VsdCQxLmRlZmF1bHQgPSBSZXN1bHQ7CgoJdmFyIFJlc3VsdE1ldGFkYXRhVHlwZSQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA4IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZXN1bHRNZXRhZGF0YVR5cGUkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogUmVwcmVzZW50cyBzb21lIHR5cGUgb2YgbWV0YWRhdGEgYWJvdXQgdGhlIHJlc3VsdCBvZiB0aGUgZGVjb2RpbmcgdGhhdCB0aGUgZGVjb2RlcgoJICogd2lzaGVzIHRvIGNvbW11bmljYXRlIGJhY2sgdG8gdGhlIGNhbGxlci4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUmVzdWx0TWV0YWRhdGFUeXBlOwoJKGZ1bmN0aW9uIChSZXN1bHRNZXRhZGF0YVR5cGUpIHsKCSAgICAvKioKCSAgICAgKiBVbnNwZWNpZmllZCwgYXBwbGljYXRpb24tc3BlY2lmaWMgbWV0YWRhdGEuIE1hcHMgdG8gYW4gdW5zcGVjaWZpZWQge0BsaW5rIE9iamVjdH0uCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiT1RIRVIiXSA9IDBdID0gIk9USEVSIjsKCSAgICAvKioKCSAgICAgKiBEZW5vdGVzIHRoZSBsaWtlbHkgYXBwcm94aW1hdGUgb3JpZW50YXRpb24gb2YgdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLiBUaGlzIHZhbHVlCgkgICAgICogaXMgZ2l2ZW4gYXMgZGVncmVlcyByb3RhdGVkIGNsb2Nrd2lzZSBmcm9tIHRoZSBub3JtYWwsIHVwcmlnaHQgb3JpZW50YXRpb24uCgkgICAgICogRm9yIGV4YW1wbGUgYSAxRCBiYXJjb2RlIHdoaWNoIHdhcyBmb3VuZCBieSByZWFkaW5nIHRvcC10by1ib3R0b20gd291bGQgYmUKCSAgICAgKiBzYWlkIHRvIGhhdmUgb3JpZW50YXRpb24gIjkwIi4gVGhpcyBrZXkgbWFwcyB0byBhbiB7QGxpbmsgSW50ZWdlcn0gd2hvc2UKCSAgICAgKiB2YWx1ZSBpcyBpbiB0aGUgcmFuZ2UgWzAsMzYwKS4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJPUklFTlRBVElPTiJdID0gMV0gPSAiT1JJRU5UQVRJT04iOwoJICAgIC8qKgoJICAgICAqIDxwPjJEIGJhcmNvZGUgZm9ybWF0cyB0eXBpY2FsbHkgZW5jb2RlIHRleHQsIGJ1dCBhbGxvdyBmb3IgYSBzb3J0IG9mICdieXRlIG1vZGUnCgkgICAgICogd2hpY2ggaXMgc29tZXRpbWVzIHVzZWQgdG8gZW5jb2RlIGJpbmFyeSBkYXRhLiBXaGlsZSB7QGxpbmsgUmVzdWx0fSBtYWtlcyBhdmFpbGFibGUKCSAgICAgKiB0aGUgY29tcGxldGUgcmF3IGJ5dGVzIGluIHRoZSBiYXJjb2RlIGZvciB0aGVzZSBmb3JtYXRzLCBpdCBkb2VzIG5vdCBvZmZlciB0aGUgYnl0ZXMKCSAgICAgKiBmcm9tIHRoZSBieXRlIHNlZ21lbnRzIGFsb25lLjwvcD4KCSAgICAgKgoJICAgICAqIDxwPlRoaXMgbWFwcyB0byBhIHtAbGluayBqYXZhLnV0aWwuTGlzdH0gb2YgYnl0ZSBhcnJheXMgY29ycmVzcG9uZGluZyB0byB0aGUKCSAgICAgKiByYXcgYnl0ZXMgaW4gdGhlIGJ5dGUgc2VnbWVudHMgaW4gdGhlIGJhcmNvZGUsIGluIG9yZGVyLjwvcD4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJCWVRFX1NFR01FTlRTIl0gPSAyXSA9ICJCWVRFX1NFR01FTlRTIjsKCSAgICAvKioKCSAgICAgKiBFcnJvciBjb3JyZWN0aW9uIGxldmVsIHVzZWQsIGlmIGFwcGxpY2FibGUuIFRoZSB2YWx1ZSB0eXBlIGRlcGVuZHMgb24gdGhlCgkgICAgICogZm9ybWF0LCBidXQgaXMgdHlwaWNhbGx5IGEgU3RyaW5nLgoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwiXSA9IDNdID0gIkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwiOwoJICAgIC8qKgoJICAgICAqIEZvciBzb21lIHBlcmlvZGljYWxzLCBpbmRpY2F0ZXMgdGhlIGlzc3VlIG51bWJlciBhcyBhbiB7QGxpbmsgSW50ZWdlcn0uCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiSVNTVUVfTlVNQkVSIl0gPSA0XSA9ICJJU1NVRV9OVU1CRVIiOwoJICAgIC8qKgoJICAgICAqIEZvciBzb21lIHByb2R1Y3RzLCBpbmRpY2F0ZXMgdGhlIHN1Z2dlc3RlZCByZXRhaWwgcHJpY2UgaW4gdGhlIGJhcmNvZGUgYXMgYQoJICAgICAqIGZvcm1hdHRlZCB7QGxpbmsgU3RyaW5nfS4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJTVUdHRVNURURfUFJJQ0UiXSA9IDVdID0gIlNVR0dFU1RFRF9QUklDRSI7CgkgICAgLyoqCgkgICAgICogRm9yIHNvbWUgcHJvZHVjdHMsIHRoZSBwb3NzaWJsZSBjb3VudHJ5IG9mIG1hbnVmYWN0dXJlIGFzIGEge0BsaW5rIFN0cmluZ30gZGVub3RpbmcgdGhlCgkgICAgICogSVNPIGNvdW50cnkgY29kZS4gU29tZSBtYXAgdG8gbXVsdGlwbGUgcG9zc2libGUgY291bnRyaWVzLCBsaWtlICJVUy9DQSIuCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiUE9TU0lCTEVfQ09VTlRSWSJdID0gNl0gPSAiUE9TU0lCTEVfQ09VTlRSWSI7CgkgICAgLyoqCgkgICAgICogRm9yIHNvbWUgcHJvZHVjdHMsIHRoZSBleHRlbnNpb24gdGV4dAoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIlVQQ19FQU5fRVhURU5TSU9OIl0gPSA3XSA9ICJVUENfRUFOX0VYVEVOU0lPTiI7CgkgICAgLyoqCgkgICAgICogUERGNDE3LXNwZWNpZmljIG1ldGFkYXRhCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiUERGNDE3X0VYVFJBX01FVEFEQVRBIl0gPSA4XSA9ICJQREY0MTdfRVhUUkFfTUVUQURBVEEiOwoJICAgIC8qKgoJICAgICAqIElmIHRoZSBjb2RlIGZvcm1hdCBzdXBwb3J0cyBzdHJ1Y3R1cmVkIGFwcGVuZCBhbmQgdGhlIGN1cnJlbnQgc2Nhbm5lZCBjb2RlIGlzIHBhcnQgb2Ygb25lIHRoZW4gdGhlCgkgICAgICogc2VxdWVuY2UgbnVtYmVyIGlzIGdpdmVuIHdpdGggaXQuCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiU1RSVUNUVVJFRF9BUFBFTkRfU0VRVUVOQ0UiXSA9IDldID0gIlNUUlVDVFVSRURfQVBQRU5EX1NFUVVFTkNFIjsKCSAgICAvKioKCSAgICAgKiBJZiB0aGUgY29kZSBmb3JtYXQgc3VwcG9ydHMgc3RydWN0dXJlZCBhcHBlbmQgYW5kIHRoZSBjdXJyZW50IHNjYW5uZWQgY29kZSBpcyBwYXJ0IG9mIG9uZSB0aGVuIHRoZQoJICAgICAqIHBhcml0eSBpcyBnaXZlbiB3aXRoIGl0LgoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIlNUUlVDVFVSRURfQVBQRU5EX1BBUklUWSJdID0gMTBdID0gIlNUUlVDVFVSRURfQVBQRU5EX1BBUklUWSI7Cgl9KShSZXN1bHRNZXRhZGF0YVR5cGUgfHwgKFJlc3VsdE1ldGFkYXRhVHlwZSA9IHt9KSk7CglSZXN1bHRNZXRhZGF0YVR5cGUkMS5kZWZhdWx0ID0gUmVzdWx0TWV0YWRhdGFUeXBlOwoKCXZhciBEZWNvZGVyJDEgPSB7fTsKCgl2YXIgQ2hlY2tzdW1FeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkOCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShDaGVja3N1bUV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNCA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBDaGVja3N1bUV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkOChDaGVja3N1bUV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBDaGVja3N1bUV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBDaGVja3N1bUV4Y2VwdGlvbi5nZXRDaGVja3N1bUluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IENoZWNrc3VtRXhjZXB0aW9uKCk7CgkgICAgfTsKCSAgICBDaGVja3N1bUV4Y2VwdGlvbi5raW5kID0gJ0NoZWNrc3VtRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gQ2hlY2tzdW1FeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDQuZGVmYXVsdCkpOwoJQ2hlY2tzdW1FeGNlcHRpb24kMS5kZWZhdWx0ID0gQ2hlY2tzdW1FeGNlcHRpb247CgoJdmFyIEdlbmVyaWNHRiQxID0ge307CgoJdmFyIEdlbmVyaWNHRlBvbHkkMSA9IHt9OwoKCXZhciBBYnN0cmFjdEdlbmVyaWNHRiQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShBYnN0cmFjdEdlbmVyaWNHRiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5UaGlzIGNsYXNzIGNvbnRhaW5zIHV0aWxpdHkgbWV0aG9kcyBmb3IgcGVyZm9ybWluZyBtYXRoZW1hdGljYWwgb3BlcmF0aW9ucyBvdmVyCgkgKiB0aGUgR2Fsb2lzIEZpZWxkcy4gT3BlcmF0aW9ucyB1c2UgYSBnaXZlbiBwcmltaXRpdmUgcG9seW5vbWlhbCBpbiBjYWxjdWxhdGlvbnMuPC9wPgoJICoKCSAqIDxwPlRocm91Z2hvdXQgdGhpcyBwYWNrYWdlLCBlbGVtZW50cyBvZiB0aGUgR0YgYXJlIHJlcHJlc2VudGVkIGFzIGFuIHtAY29kZSBpbnR9CgkgKiBmb3IgY29udmVuaWVuY2UgYW5kIHNwZWVkIChidXQgYXQgdGhlIGNvc3Qgb2YgbWVtb3J5KS4KCSAqIDwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBEYXZpZCBPbGl2aWVyCgkgKi8KCXZhciBBYnN0cmFjdEdlbmVyaWNHRiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBBYnN0cmFjdEdlbmVyaWNHRigpIHsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiAyIHRvIHRoZSBwb3dlciBvZiBhIGluIEdGKHNpemUpCgkgICAgICovCgkgICAgQWJzdHJhY3RHZW5lcmljR0YucHJvdG90eXBlLmV4cCA9IGZ1bmN0aW9uIChhKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmV4cFRhYmxlW2FdOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBiYXNlIDIgbG9nIG9mIGEgaW4gR0Yoc2l6ZSkKCSAgICAgKi8KCSAgICBBYnN0cmFjdEdlbmVyaWNHRi5wcm90b3R5cGUubG9nID0gZnVuY3Rpb24gKGEgLyppbnQqLykgewoJICAgICAgICBpZiAoYSA9PT0gMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDUuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiB0aGlzLmxvZ1RhYmxlW2FdOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogSW1wbGVtZW50cyBib3RoIGFkZGl0aW9uIGFuZCBzdWJ0cmFjdGlvbiAtLSB0aGV5IGFyZSB0aGUgc2FtZSBpbiBHRihzaXplKS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gc3VtL2RpZmZlcmVuY2Ugb2YgYSBhbmQgYgoJICAgICAqLwoJICAgIEFic3RyYWN0R2VuZXJpY0dGLmFkZE9yU3VidHJhY3QgPSBmdW5jdGlvbiAoYSAvKmludCovLCBiIC8qaW50Ki8pIHsKCSAgICAgICAgcmV0dXJuIGEgXiBiOwoJICAgIH07CgkgICAgcmV0dXJuIEFic3RyYWN0R2VuZXJpY0dGOwoJfSgpKTsKCUFic3RyYWN0R2VuZXJpY0dGJDEuZGVmYXVsdCA9IEFic3RyYWN0R2VuZXJpY0dGOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoR2VuZXJpY0dGUG9seSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbi5yZWVkc29sb21vbiB7Ki8KCXZhciBBYnN0cmFjdEdlbmVyaWNHRl8xJDEgPSBBYnN0cmFjdEdlbmVyaWNHRiQxOwoJdmFyIFN5c3RlbV8xID0gU3lzdGVtJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNCA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5SZXByZXNlbnRzIGEgcG9seW5vbWlhbCB3aG9zZSBjb2VmZmljaWVudHMgYXJlIGVsZW1lbnRzIG9mIGEgR0YuCgkgKiBJbnN0YW5jZXMgb2YgdGhpcyBjbGFzcyBhcmUgaW1tdXRhYmxlLjwvcD4KCSAqCgkgKiA8cD5NdWNoIGNyZWRpdCBpcyBkdWUgdG8gV2lsbGlhbSBSdWNrbGlkZ2Ugc2luY2UgcG9ydGlvbnMgb2YgdGhpcyBjb2RlIGFyZSBhbiBpbmRpcmVjdAoJICogcG9ydCBvZiBoaXMgQysrIFJlZWQtU29sb21vbiBpbXBsZW1lbnRhdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEdlbmVyaWNHRlBvbHkgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGZpZWxkIHRoZSB7QGxpbmsgR2VuZXJpY0dGfSBpbnN0YW5jZSByZXByZXNlbnRpbmcgdGhlIGZpZWxkIHRvIHVzZQoJICAgICAqIHRvIHBlcmZvcm0gY29tcHV0YXRpb25zCgkgICAgICogQHBhcmFtIGNvZWZmaWNpZW50cyBjb2VmZmljaWVudHMgYXMgaW50cyByZXByZXNlbnRpbmcgZWxlbWVudHMgb2YgR0Yoc2l6ZSksIGFycmFuZ2VkCgkgICAgICogZnJvbSBtb3N0IHNpZ25pZmljYW50IChoaWdoZXN0LXBvd2VyIHRlcm0pIGNvZWZmaWNpZW50IHRvIGxlYXN0IHNpZ25pZmljYW50CgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgYXJndW1lbnQgaXMgbnVsbCBvciBlbXB0eSwKCSAgICAgKiBvciBpZiBsZWFkaW5nIGNvZWZmaWNpZW50IGlzIDAgYW5kIHRoaXMgaXMgbm90IGEKCSAgICAgKiBjb25zdGFudCBwb2x5bm9taWFsICh0aGF0IGlzLCBpdCBpcyBub3QgdGhlIG1vbm9taWFsICIwIikKCSAgICAgKi8KCSAgICBmdW5jdGlvbiBHZW5lcmljR0ZQb2x5KGZpZWxkLCBjb2VmZmljaWVudHMpIHsKCSAgICAgICAgaWYgKGNvZWZmaWNpZW50cy5sZW5ndGggPT09IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLmZpZWxkID0gZmllbGQ7CgkgICAgICAgIHZhciBjb2VmZmljaWVudHNMZW5ndGggPSBjb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICBpZiAoY29lZmZpY2llbnRzTGVuZ3RoID4gMSAmJiBjb2VmZmljaWVudHNbMF0gPT09IDApIHsKCSAgICAgICAgICAgIC8vIExlYWRpbmcgdGVybSBtdXN0IGJlIG5vbi16ZXJvIGZvciBhbnl0aGluZyBleGNlcHQgdGhlIGNvbnN0YW50IHBvbHlub21pYWwgIjAiCgkgICAgICAgICAgICB2YXIgZmlyc3ROb25aZXJvID0gMTsKCSAgICAgICAgICAgIHdoaWxlIChmaXJzdE5vblplcm8gPCBjb2VmZmljaWVudHNMZW5ndGggJiYgY29lZmZpY2llbnRzW2ZpcnN0Tm9uWmVyb10gPT09IDApIHsKCSAgICAgICAgICAgICAgICBmaXJzdE5vblplcm8rKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmIChmaXJzdE5vblplcm8gPT09IGNvZWZmaWNpZW50c0xlbmd0aCkgewoJICAgICAgICAgICAgICAgIHRoaXMuY29lZmZpY2llbnRzID0gSW50MzJBcnJheS5mcm9tKFswXSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICB0aGlzLmNvZWZmaWNpZW50cyA9IG5ldyBJbnQzMkFycmF5KGNvZWZmaWNpZW50c0xlbmd0aCAtIGZpcnN0Tm9uWmVybyk7CgkgICAgICAgICAgICAgICAgU3lzdGVtXzEuZGVmYXVsdC5hcnJheWNvcHkoY29lZmZpY2llbnRzLCBmaXJzdE5vblplcm8sIHRoaXMuY29lZmZpY2llbnRzLCAwLCB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGgpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdGhpcy5jb2VmZmljaWVudHMgPSBjb2VmZmljaWVudHM7CgkgICAgICAgIH0KCSAgICB9CgkgICAgR2VuZXJpY0dGUG9seS5wcm90b3R5cGUuZ2V0Q29lZmZpY2llbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGRlZ3JlZSBvZiB0aGlzIHBvbHlub21pYWwKCSAgICAgKi8KCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5nZXREZWdyZWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGggLSAxOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGlzIHBvbHlub21pYWwgaXMgdGhlIG1vbm9taWFsICIwIgoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmlzWmVybyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY29lZmZpY2llbnRzWzBdID09PSAwOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBjb2VmZmljaWVudCBvZiB4XmRlZ3JlZSB0ZXJtIGluIHRoaXMgcG9seW5vbWlhbAoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmdldENvZWZmaWNpZW50ID0gZnVuY3Rpb24gKGRlZ3JlZSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvZWZmaWNpZW50c1t0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGggLSAxIC0gZGVncmVlXTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gZXZhbHVhdGlvbiBvZiB0aGlzIHBvbHlub21pYWwgYXQgYSBnaXZlbiBwb2ludAoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmV2YWx1YXRlQXQgPSBmdW5jdGlvbiAoYSAvKmludCovKSB7CgkgICAgICAgIGlmIChhID09PSAwKSB7CgkgICAgICAgICAgICAvLyBKdXN0IHJldHVybiB0aGUgeF4wIGNvZWZmaWNpZW50CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRDb2VmZmljaWVudCgwKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgY29lZmZpY2llbnRzID0gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciByZXN1bHQ7CgkgICAgICAgIGlmIChhID09PSAxKSB7CgkgICAgICAgICAgICAvLyBKdXN0IHRoZSBzdW0gb2YgdGhlIGNvZWZmaWNpZW50cwoJICAgICAgICAgICAgcmVzdWx0ID0gMDsKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IGNvZWZmaWNpZW50cy5sZW5ndGg7IGkgIT09IGxlbmd0aF8xOyBpKyspIHsKCSAgICAgICAgICAgICAgICB2YXIgY29lZmZpY2llbnQgPSBjb2VmZmljaWVudHNbaV07CgkgICAgICAgICAgICAgICAgcmVzdWx0ID0gQWJzdHJhY3RHZW5lcmljR0ZfMSQxLmRlZmF1bHQuYWRkT3JTdWJ0cmFjdChyZXN1bHQsIGNvZWZmaWNpZW50KTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgICAgIH0KCSAgICAgICAgcmVzdWx0ID0gY29lZmZpY2llbnRzWzBdOwoJICAgICAgICB2YXIgc2l6ZSA9IGNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgc2l6ZTsgaSsrKSB7CgkgICAgICAgICAgICByZXN1bHQgPSBBYnN0cmFjdEdlbmVyaWNHRl8xJDEuZGVmYXVsdC5hZGRPclN1YnRyYWN0KGZpZWxkLm11bHRpcGx5KGEsIHJlc3VsdCksIGNvZWZmaWNpZW50c1tpXSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmFkZE9yU3VidHJhY3QgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKCF0aGlzLmZpZWxkLmVxdWFscyhvdGhlci5maWVsZCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoJ0dlbmVyaWNHRlBvbHlzIGRvIG5vdCBoYXZlIHNhbWUgR2VuZXJpY0dGIGZpZWxkJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRoaXMuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHJldHVybiBvdGhlcjsKCSAgICAgICAgfQoJICAgICAgICBpZiAob3RoZXIuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzbWFsbGVyQ29lZmZpY2llbnRzID0gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciBsYXJnZXJDb2VmZmljaWVudHMgPSBvdGhlci5jb2VmZmljaWVudHM7CgkgICAgICAgIGlmIChzbWFsbGVyQ29lZmZpY2llbnRzLmxlbmd0aCA+IGxhcmdlckNvZWZmaWNpZW50cy5sZW5ndGgpIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gc21hbGxlckNvZWZmaWNpZW50czsKCSAgICAgICAgICAgIHNtYWxsZXJDb2VmZmljaWVudHMgPSBsYXJnZXJDb2VmZmljaWVudHM7CgkgICAgICAgICAgICBsYXJnZXJDb2VmZmljaWVudHMgPSB0ZW1wOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzdW1EaWZmID0gbmV3IEludDMyQXJyYXkobGFyZ2VyQ29lZmZpY2llbnRzLmxlbmd0aCk7CgkgICAgICAgIHZhciBsZW5ndGhEaWZmID0gbGFyZ2VyQ29lZmZpY2llbnRzLmxlbmd0aCAtIHNtYWxsZXJDb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICAvLyBDb3B5IGhpZ2gtb3JkZXIgdGVybXMgb25seSBmb3VuZCBpbiBoaWdoZXItZGVncmVlIHBvbHlub21pYWwncyBjb2VmZmljaWVudHMKCSAgICAgICAgU3lzdGVtXzEuZGVmYXVsdC5hcnJheWNvcHkobGFyZ2VyQ29lZmZpY2llbnRzLCAwLCBzdW1EaWZmLCAwLCBsZW5ndGhEaWZmKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IGxlbmd0aERpZmY7IGkgPCBsYXJnZXJDb2VmZmljaWVudHMubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHN1bURpZmZbaV0gPSBBYnN0cmFjdEdlbmVyaWNHRl8xJDEuZGVmYXVsdC5hZGRPclN1YnRyYWN0KHNtYWxsZXJDb2VmZmljaWVudHNbaSAtIGxlbmd0aERpZmZdLCBsYXJnZXJDb2VmZmljaWVudHNbaV0pOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seSh0aGlzLmZpZWxkLCBzdW1EaWZmKTsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLm11bHRpcGx5ID0gZnVuY3Rpb24gKG90aGVyKSB7CgkgICAgICAgIGlmICghdGhpcy5maWVsZC5lcXVhbHMob3RoZXIuZmllbGQpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNC5kZWZhdWx0KCdHZW5lcmljR0ZQb2x5cyBkbyBub3QgaGF2ZSBzYW1lIEdlbmVyaWNHRiBmaWVsZCcpOwoJICAgICAgICB9CgkgICAgICAgIGlmICh0aGlzLmlzWmVybygpIHx8IG90aGVyLmlzWmVybygpKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5maWVsZC5nZXRaZXJvKCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGFDb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgdmFyIGFMZW5ndGggPSBhQ29lZmZpY2llbnRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGJDb2VmZmljaWVudHMgPSBvdGhlci5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciBiTGVuZ3RoID0gYkNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBwcm9kdWN0ID0gbmV3IEludDMyQXJyYXkoYUxlbmd0aCArIGJMZW5ndGggLSAxKTsKCSAgICAgICAgdmFyIGZpZWxkID0gdGhpcy5maWVsZDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhTGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHZhciBhQ29lZmYgPSBhQ29lZmZpY2llbnRzW2ldOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBiTGVuZ3RoOyBqKyspIHsKCSAgICAgICAgICAgICAgICBwcm9kdWN0W2kgKyBqXSA9IEFic3RyYWN0R2VuZXJpY0dGXzEkMS5kZWZhdWx0LmFkZE9yU3VidHJhY3QocHJvZHVjdFtpICsgal0sIGZpZWxkLm11bHRpcGx5KGFDb2VmZiwgYkNvZWZmaWNpZW50c1tqXSkpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seShmaWVsZCwgcHJvZHVjdCk7CgkgICAgfTsKCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5tdWx0aXBseVNjYWxhciA9IGZ1bmN0aW9uIChzY2FsYXIgLyppbnQqLykgewoJICAgICAgICBpZiAoc2NhbGFyID09PSAwKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5maWVsZC5nZXRaZXJvKCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHNjYWxhciA9PT0gMSkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXM7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHNpemUgPSB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIHZhciBwcm9kdWN0ID0gbmV3IEludDMyQXJyYXkoc2l6ZSk7CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplOyBpKyspIHsKCSAgICAgICAgICAgIHByb2R1Y3RbaV0gPSBmaWVsZC5tdWx0aXBseShjb2VmZmljaWVudHNbaV0sIHNjYWxhcik7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG5ldyBHZW5lcmljR0ZQb2x5KGZpZWxkLCBwcm9kdWN0KTsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLm11bHRpcGx5QnlNb25vbWlhbCA9IGZ1bmN0aW9uIChkZWdyZWUgLyppbnQqLywgY29lZmZpY2llbnQgLyppbnQqLykgewoJICAgICAgICBpZiAoZGVncmVlIDwgMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDQuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIGlmIChjb2VmZmljaWVudCA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmllbGQuZ2V0WmVybygpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgdmFyIHNpemUgPSBjb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICB2YXIgcHJvZHVjdCA9IG5ldyBJbnQzMkFycmF5KHNpemUgKyBkZWdyZWUpOwoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNpemU7IGkrKykgewoJICAgICAgICAgICAgcHJvZHVjdFtpXSA9IGZpZWxkLm11bHRpcGx5KGNvZWZmaWNpZW50c1tpXSwgY29lZmZpY2llbnQpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seShmaWVsZCwgcHJvZHVjdCk7CgkgICAgfTsKCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5kaXZpZGUgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKCF0aGlzLmZpZWxkLmVxdWFscyhvdGhlci5maWVsZCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoJ0dlbmVyaWNHRlBvbHlzIGRvIG5vdCBoYXZlIHNhbWUgR2VuZXJpY0dGIGZpZWxkJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKG90aGVyLmlzWmVybygpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNC5kZWZhdWx0KCdEaXZpZGUgYnkgMCcpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIHZhciBxdW90aWVudCA9IGZpZWxkLmdldFplcm8oKTsKCSAgICAgICAgdmFyIHJlbWFpbmRlciA9IHRoaXM7CgkgICAgICAgIHZhciBkZW5vbWluYXRvckxlYWRpbmdUZXJtID0gb3RoZXIuZ2V0Q29lZmZpY2llbnQob3RoZXIuZ2V0RGVncmVlKCkpOwoJICAgICAgICB2YXIgaW52ZXJzZURlbm9taW5hdG9yTGVhZGluZ1Rlcm0gPSBmaWVsZC5pbnZlcnNlKGRlbm9taW5hdG9yTGVhZGluZ1Rlcm0pOwoJICAgICAgICB3aGlsZSAocmVtYWluZGVyLmdldERlZ3JlZSgpID49IG90aGVyLmdldERlZ3JlZSgpICYmICFyZW1haW5kZXIuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHZhciBkZWdyZWVEaWZmZXJlbmNlID0gcmVtYWluZGVyLmdldERlZ3JlZSgpIC0gb3RoZXIuZ2V0RGVncmVlKCk7CgkgICAgICAgICAgICB2YXIgc2NhbGUgPSBmaWVsZC5tdWx0aXBseShyZW1haW5kZXIuZ2V0Q29lZmZpY2llbnQocmVtYWluZGVyLmdldERlZ3JlZSgpKSwgaW52ZXJzZURlbm9taW5hdG9yTGVhZGluZ1Rlcm0pOwoJICAgICAgICAgICAgdmFyIHRlcm0gPSBvdGhlci5tdWx0aXBseUJ5TW9ub21pYWwoZGVncmVlRGlmZmVyZW5jZSwgc2NhbGUpOwoJICAgICAgICAgICAgdmFyIGl0ZXJhdGlvblF1b3RpZW50ID0gZmllbGQuYnVpbGRNb25vbWlhbChkZWdyZWVEaWZmZXJlbmNlLCBzY2FsZSk7CgkgICAgICAgICAgICBxdW90aWVudCA9IHF1b3RpZW50LmFkZE9yU3VidHJhY3QoaXRlcmF0aW9uUXVvdGllbnQpOwoJICAgICAgICAgICAgcmVtYWluZGVyID0gcmVtYWluZGVyLmFkZE9yU3VidHJhY3QodGVybSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIFtxdW90aWVudCwgcmVtYWluZGVyXTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJlc3VsdCA9ICcnOwoJICAgICAgICBmb3IgKHZhciBkZWdyZWUgPSB0aGlzLmdldERlZ3JlZSgpOyBkZWdyZWUgPj0gMDsgZGVncmVlLS0pIHsKCSAgICAgICAgICAgIHZhciBjb2VmZmljaWVudCA9IHRoaXMuZ2V0Q29lZmZpY2llbnQoZGVncmVlKTsKCSAgICAgICAgICAgIGlmIChjb2VmZmljaWVudCAhPT0gMCkgewoJICAgICAgICAgICAgICAgIGlmIChjb2VmZmljaWVudCA8IDApIHsKCSAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICcgLSAnOwoJICAgICAgICAgICAgICAgICAgICBjb2VmZmljaWVudCA9IC1jb2VmZmljaWVudDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQubGVuZ3RoID4gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICcgKyAnOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGlmIChkZWdyZWUgPT09IDAgfHwgY29lZmZpY2llbnQgIT09IDEpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGFscGhhUG93ZXIgPSB0aGlzLmZpZWxkLmxvZyhjb2VmZmljaWVudCk7CgkgICAgICAgICAgICAgICAgICAgIGlmIChhbHBoYVBvd2VyID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gJzEnOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGFscGhhUG93ZXIgPT09IDEpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSAnYSc7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gJ2FeJzsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSBhbHBoYVBvd2VyOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGlmIChkZWdyZWUgIT09IDApIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKGRlZ3JlZSA9PT0gMSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICd4JzsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSAneF4nOwoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9IGRlZ3JlZTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgcmV0dXJuIEdlbmVyaWNHRlBvbHk7Cgl9KCkpOwoJR2VuZXJpY0dGUG9seSQxLmRlZmF1bHQgPSBHZW5lcmljR0ZQb2x5OwoKCXZhciBBcml0aG1ldGljRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgX19leHRlbmRzJDcgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoQXJpdGhtZXRpY0V4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkMyA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBBcml0aG1ldGljRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyQ3KEFyaXRobWV0aWNFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gQXJpdGhtZXRpY0V4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBBcml0aG1ldGljRXhjZXB0aW9uLmtpbmQgPSAnQXJpdGhtZXRpY0V4Y2VwdGlvbic7CgkgICAgcmV0dXJuIEFyaXRobWV0aWNFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDMuZGVmYXVsdCkpOwoJQXJpdGhtZXRpY0V4Y2VwdGlvbiQxLmRlZmF1bHQgPSBBcml0aG1ldGljRXhjZXB0aW9uOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDYgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoR2VuZXJpY0dGJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uLnJlZWRzb2xvbW9uIHsqLwoJdmFyIEdlbmVyaWNHRlBvbHlfMSQxID0gR2VuZXJpY0dGUG9seSQxOwoJdmFyIEFic3RyYWN0R2VuZXJpY0dGXzEgPSBBYnN0cmFjdEdlbmVyaWNHRiQxOwoJdmFyIEludGVnZXJfMSQxID0gSW50ZWdlciQxOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDMgPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcml0aG1ldGljRXhjZXB0aW9uXzEgPSBBcml0aG1ldGljRXhjZXB0aW9uJDE7CgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgY29udGFpbnMgdXRpbGl0eSBtZXRob2RzIGZvciBwZXJmb3JtaW5nIG1hdGhlbWF0aWNhbCBvcGVyYXRpb25zIG92ZXIKCSAqIHRoZSBHYWxvaXMgRmllbGRzLiBPcGVyYXRpb25zIHVzZSBhIGdpdmVuIHByaW1pdGl2ZSBwb2x5bm9taWFsIGluIGNhbGN1bGF0aW9ucy48L3A+CgkgKgoJICogPHA+VGhyb3VnaG91dCB0aGlzIHBhY2thZ2UsIGVsZW1lbnRzIG9mIHRoZSBHRiBhcmUgcmVwcmVzZW50ZWQgYXMgYW4ge0Bjb2RlIGludH0KCSAqIGZvciBjb252ZW5pZW5jZSBhbmQgc3BlZWQgKGJ1dCBhdCB0aGUgY29zdCBvZiBtZW1vcnkpLgoJICogPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKiBAYXV0aG9yIERhdmlkIE9saXZpZXIKCSAqLwoJdmFyIEdlbmVyaWNHRiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkNihHZW5lcmljR0YsIF9zdXBlcik7CgkgICAgLyoqCgkgICAgICogQ3JlYXRlIGEgcmVwcmVzZW50YXRpb24gb2YgR0Yoc2l6ZSkgdXNpbmcgdGhlIGdpdmVuIHByaW1pdGl2ZSBwb2x5bm9taWFsLgoJICAgICAqCgkgICAgICogQHBhcmFtIHByaW1pdGl2ZSBpcnJlZHVjaWJsZSBwb2x5bm9taWFsIHdob3NlIGNvZWZmaWNpZW50cyBhcmUgcmVwcmVzZW50ZWQgYnkKCSAgICAgKiAgdGhlIGJpdHMgb2YgYW4gaW50LCB3aGVyZSB0aGUgbGVhc3Qtc2lnbmlmaWNhbnQgYml0IHJlcHJlc2VudHMgdGhlIGNvbnN0YW50CgkgICAgICogIGNvZWZmaWNpZW50CgkgICAgICogQHBhcmFtIHNpemUgdGhlIHNpemUgb2YgdGhlIGZpZWxkCgkgICAgICogQHBhcmFtIGIgdGhlIGZhY3RvciBiIGluIHRoZSBnZW5lcmF0b3IgcG9seW5vbWlhbCBjYW4gYmUgMC0gb3IgMS1iYXNlZAoJICAgICAqICAoZyh4KSA9ICh4K2FeYikoeCthXihiKzEpKS4uLih4K2FeKGIrMnQtMSkpKS4KCSAgICAgKiAgSW4gbW9zdCBjYXNlcyBpdCBzaG91bGQgYmUgMSwgYnV0IGZvciBRUiBjb2RlIGl0IGlzIDAuCgkgICAgICovCgkgICAgZnVuY3Rpb24gR2VuZXJpY0dGKHByaW1pdGl2ZSAvKmludCovLCBzaXplIC8qaW50Ki8sIGdlbmVyYXRvckJhc2UgLyppbnQqLykgewoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5wcmltaXRpdmUgPSBwcmltaXRpdmU7CgkgICAgICAgIF90aGlzLnNpemUgPSBzaXplOwoJICAgICAgICBfdGhpcy5nZW5lcmF0b3JCYXNlID0gZ2VuZXJhdG9yQmFzZTsKCSAgICAgICAgdmFyIGV4cFRhYmxlID0gbmV3IEludDMyQXJyYXkoc2l6ZSk7CgkgICAgICAgIHZhciB4ID0gMTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplOyBpKyspIHsKCSAgICAgICAgICAgIGV4cFRhYmxlW2ldID0geDsKCSAgICAgICAgICAgIHggKj0gMjsgLy8gd2UncmUgYXNzdW1pbmcgdGhlIGdlbmVyYXRvciBhbHBoYSBpcyAyCgkgICAgICAgICAgICBpZiAoeCA+PSBzaXplKSB7CgkgICAgICAgICAgICAgICAgeCBePSBwcmltaXRpdmU7CgkgICAgICAgICAgICAgICAgeCAmPSBzaXplIC0gMTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBfdGhpcy5leHBUYWJsZSA9IGV4cFRhYmxlOwoJICAgICAgICB2YXIgbG9nVGFibGUgPSBuZXcgSW50MzJBcnJheShzaXplKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplIC0gMTsgaSsrKSB7CgkgICAgICAgICAgICBsb2dUYWJsZVtleHBUYWJsZVtpXV0gPSBpOwoJICAgICAgICB9CgkgICAgICAgIF90aGlzLmxvZ1RhYmxlID0gbG9nVGFibGU7CgkgICAgICAgIC8vIGxvZ1RhYmxlWzBdID09IDAgYnV0IHRoaXMgc2hvdWxkIG5ldmVyIGJlIHVzZWQKCSAgICAgICAgX3RoaXMuemVybyA9IG5ldyBHZW5lcmljR0ZQb2x5XzEkMS5kZWZhdWx0KF90aGlzLCBJbnQzMkFycmF5LmZyb20oWzBdKSk7CgkgICAgICAgIF90aGlzLm9uZSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEkMS5kZWZhdWx0KF90aGlzLCBJbnQzMkFycmF5LmZyb20oWzFdKSk7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5nZXRaZXJvID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy56ZXJvOwoJICAgIH07CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5nZXRPbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm9uZTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gdGhlIG1vbm9taWFsIHJlcHJlc2VudGluZyBjb2VmZmljaWVudCAqIHheZGVncmVlCgkgICAgICovCgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5idWlsZE1vbm9taWFsID0gZnVuY3Rpb24gKGRlZ3JlZSAvKmludCovLCBjb2VmZmljaWVudCAvKmludCovKSB7CgkgICAgICAgIGlmIChkZWdyZWUgPCAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkMy5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvZWZmaWNpZW50ID09PSAwKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy56ZXJvOwoJICAgICAgICB9CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSBuZXcgSW50MzJBcnJheShkZWdyZWUgKyAxKTsKCSAgICAgICAgY29lZmZpY2llbnRzWzBdID0gY29lZmZpY2llbnQ7CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seV8xJDEuZGVmYXVsdCh0aGlzLCBjb2VmZmljaWVudHMpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBtdWx0aXBsaWNhdGl2ZSBpbnZlcnNlIG9mIGEKCSAgICAgKi8KCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmludmVyc2UgPSBmdW5jdGlvbiAoYSAvKmludCovKSB7CgkgICAgICAgIGlmIChhID09PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgQXJpdGhtZXRpY0V4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5leHBUYWJsZVt0aGlzLnNpemUgLSB0aGlzLmxvZ1RhYmxlW2FdIC0gMV07CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHByb2R1Y3Qgb2YgYSBhbmQgYiBpbiBHRihzaXplKQoJICAgICAqLwoJICAgIEdlbmVyaWNHRi5wcm90b3R5cGUubXVsdGlwbHkgPSBmdW5jdGlvbiAoYSAvKmludCovLCBiIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGEgPT09IDAgfHwgYiA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIDA7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMuZXhwVGFibGVbKHRoaXMubG9nVGFibGVbYV0gKyB0aGlzLmxvZ1RhYmxlW2JdKSAlICh0aGlzLnNpemUgLSAxKV07CgkgICAgfTsKCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmdldFNpemUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnNpemU7CgkgICAgfTsKCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmdldEdlbmVyYXRvckJhc2UgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmdlbmVyYXRvckJhc2U7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICgnR0YoMHgnICsgSW50ZWdlcl8xJDEuZGVmYXVsdC50b0hleFN0cmluZyh0aGlzLnByaW1pdGl2ZSkgKyAnLCcgKyB0aGlzLnNpemUgKyAnKScpOwoJICAgIH07CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICByZXR1cm4gbyA9PT0gdGhpczsKCSAgICB9OwoJICAgIEdlbmVyaWNHRi5BWlRFQ19EQVRBXzEyID0gbmV3IEdlbmVyaWNHRigweDEwNjksIDQwOTYsIDEpOyAvLyB4XjEyICsgeF42ICsgeF41ICsgeF4zICsgMQoJICAgIEdlbmVyaWNHRi5BWlRFQ19EQVRBXzEwID0gbmV3IEdlbmVyaWNHRigweDQwOSwgMTAyNCwgMSk7IC8vIHheMTAgKyB4XjMgKyAxCgkgICAgR2VuZXJpY0dGLkFaVEVDX0RBVEFfNiA9IG5ldyBHZW5lcmljR0YoMHg0MywgNjQsIDEpOyAvLyB4XjYgKyB4ICsgMQoJICAgIEdlbmVyaWNHRi5BWlRFQ19QQVJBTSA9IG5ldyBHZW5lcmljR0YoMHgxMywgMTYsIDEpOyAvLyB4XjQgKyB4ICsgMQoJICAgIEdlbmVyaWNHRi5RUl9DT0RFX0ZJRUxEXzI1NiA9IG5ldyBHZW5lcmljR0YoMHgwMTFkLCAyNTYsIDApOyAvLyB4XjggKyB4XjQgKyB4XjMgKyB4XjIgKyAxCgkgICAgR2VuZXJpY0dGLkRBVEFfTUFUUklYX0ZJRUxEXzI1NiA9IG5ldyBHZW5lcmljR0YoMHgwMTJkLCAyNTYsIDEpOyAvLyB4XjggKyB4XjUgKyB4XjMgKyB4XjIgKyAxCgkgICAgR2VuZXJpY0dGLkFaVEVDX0RBVEFfOCA9IEdlbmVyaWNHRi5EQVRBX01BVFJJWF9GSUVMRF8yNTY7CgkgICAgR2VuZXJpY0dGLk1BWElDT0RFX0ZJRUxEXzY0ID0gR2VuZXJpY0dGLkFaVEVDX0RBVEFfNjsKCSAgICByZXR1cm4gR2VuZXJpY0dGOwoJfShBYnN0cmFjdEdlbmVyaWNHRl8xLmRlZmF1bHQpKTsKCUdlbmVyaWNHRiQxLmRlZmF1bHQgPSBHZW5lcmljR0Y7CgoJdmFyIFJlZWRTb2xvbW9uRGVjb2RlciQxID0ge307CgoJdmFyIFJlZWRTb2xvbW9uRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgX19leHRlbmRzJDUgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVlZFNvbG9tb25FeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDIgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgUmVlZFNvbG9tb25FeGNlcHRpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDUoUmVlZFNvbG9tb25FeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gUmVlZFNvbG9tb25FeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgUmVlZFNvbG9tb25FeGNlcHRpb24ua2luZCA9ICdSZWVkU29sb21vbkV4Y2VwdGlvbic7CgkgICAgcmV0dXJuIFJlZWRTb2xvbW9uRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQyLmRlZmF1bHQpKTsKCVJlZWRTb2xvbW9uRXhjZXB0aW9uJDEuZGVmYXVsdCA9IFJlZWRTb2xvbW9uRXhjZXB0aW9uOwoKCXZhciBJbGxlZ2FsU3RhdGVFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkNCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbGxlZ2FsU3RhdGVFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDEgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgSWxsZWdhbFN0YXRlRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyQ0KElsbGVnYWxTdGF0ZUV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBJbGxlZ2FsU3RhdGVFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgSWxsZWdhbFN0YXRlRXhjZXB0aW9uLmtpbmQgPSAnSWxsZWdhbFN0YXRlRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gSWxsZWdhbFN0YXRlRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQxLmRlZmF1bHQpKTsKCUlsbGVnYWxTdGF0ZUV4Y2VwdGlvbiQxLmRlZmF1bHQgPSBJbGxlZ2FsU3RhdGVFeGNlcHRpb247CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZWVkU29sb21vbkRlY29kZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5jb21tb24ucmVlZHNvbG9tb24geyovCgl2YXIgR2VuZXJpY0dGXzEkMSA9IEdlbmVyaWNHRiQxOwoJdmFyIEdlbmVyaWNHRlBvbHlfMSA9IEdlbmVyaWNHRlBvbHkkMTsKCXZhciBSZWVkU29sb21vbkV4Y2VwdGlvbl8xID0gUmVlZFNvbG9tb25FeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsU3RhdGVFeGNlcHRpb25fMSA9IElsbGVnYWxTdGF0ZUV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5JbXBsZW1lbnRzIFJlZWQtU29sb21vbiBkZWNvZGluZywgYXMgdGhlIG5hbWUgaW1wbGllcy48L3A+CgkgKgoJICogPHA+VGhlIGFsZ29yaXRobSB3aWxsIG5vdCBiZSBleHBsYWluZWQgaGVyZSwgYnV0IHRoZSBmb2xsb3dpbmcgcmVmZXJlbmNlcyB3ZXJlIGhlbHBmdWwKCSAqIGluIGNyZWF0aW5nIHRoaXMgaW1wbGVtZW50YXRpb246PC9wPgoJICoKCSAqIDx1bD4KCSAqIDxsaT5CcnVjZSBNYWdncy4KCSAqIDxhIGhyZWY9Imh0dHA6Ly93d3cuY3MuY211LmVkdS9hZnMvY3MuY211LmVkdS9wcm9qZWN0L3BzY2ljby1ndXliL3JlYWx3b3JsZC93d3cvcnNfZGVjb2RlLnBzIj4KCSAqICJEZWNvZGluZyBSZWVkLVNvbG9tb24gQ29kZXMiPC9hPiAoc2VlIGRpc2N1c3Npb24gb2YgRm9ybmV5J3MgRm9ybXVsYSk8L2xpPgoJICogPGxpPkouSS4gSGFsbC4gPGEgaHJlZj0id3d3Lm10aC5tc3UuZWR1L35qaGFsbC9jbGFzc2VzL2NvZGVub3Rlcy9HUlMucGRmIj4KCSAqICJDaGFwdGVyIDUuIEdlbmVyYWxpemVkIFJlZWQtU29sb21vbiBDb2RlcyI8L2E+CgkgKiAoc2VlIGRpc2N1c3Npb24gb2YgRXVjbGlkZWFuIGFsZ29yaXRobSk8L2xpPgoJICogPC91bD4KCSAqCgkgKiA8cD5NdWNoIGNyZWRpdCBpcyBkdWUgdG8gV2lsbGlhbSBSdWNrbGlkZ2Ugc2luY2UgcG9ydGlvbnMgb2YgdGhpcyBjb2RlIGFyZSBhbiBpbmRpcmVjdAoJICogcG9ydCBvZiBoaXMgQysrIFJlZWQtU29sb21vbiBpbXBsZW1lbnRhdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBhdXRob3IgV2lsbGlhbSBSdWNrbGlkZ2UKCSAqIEBhdXRob3Igc2FuZm9yZHNxdWlyZXMKCSAqLwoJdmFyIFJlZWRTb2xvbW9uRGVjb2RlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBSZWVkU29sb21vbkRlY29kZXIoZmllbGQpIHsKCSAgICAgICAgdGhpcy5maWVsZCA9IGZpZWxkOwoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5EZWNvZGVzIGdpdmVuIHNldCBvZiByZWNlaXZlZCBjb2Rld29yZHMsIHdoaWNoIGluY2x1ZGUgYm90aCBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uCgkgICAgICogY29kZXdvcmRzLiBSZWFsbHksIHRoaXMgbWVhbnMgaXQgdXNlcyBSZWVkLVNvbG9tb24gdG8gZGV0ZWN0IGFuZCBjb3JyZWN0IGVycm9ycywgaW4tcGxhY2UsCgkgICAgICogaW4gdGhlIGlucHV0LjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSByZWNlaXZlZCBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcwoJICAgICAqIEBwYXJhbSB0d29TIG51bWJlciBvZiBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyBhdmFpbGFibGUKCSAgICAgKiBAdGhyb3dzIFJlZWRTb2xvbW9uRXhjZXB0aW9uIGlmIGRlY29kaW5nIGZhaWxzIGZvciBhbnkgcmVhc29uCgkgICAgICovCgkgICAgUmVlZFNvbG9tb25EZWNvZGVyLnByb3RvdHlwZS5kZWNvZGUgPSBmdW5jdGlvbiAocmVjZWl2ZWQsIHR3b1MgLyppbnQqLykgewoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICB2YXIgcG9seSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEuZGVmYXVsdChmaWVsZCwgcmVjZWl2ZWQpOwoJICAgICAgICB2YXIgc3luZHJvbWVDb2VmZmljaWVudHMgPSBuZXcgSW50MzJBcnJheSh0d29TKTsKCSAgICAgICAgdmFyIG5vRXJyb3IgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHR3b1M7IGkrKykgewoJICAgICAgICAgICAgdmFyIGV2YWxSZXN1bHQgPSBwb2x5LmV2YWx1YXRlQXQoZmllbGQuZXhwKGkgKyBmaWVsZC5nZXRHZW5lcmF0b3JCYXNlKCkpKTsKCSAgICAgICAgICAgIHN5bmRyb21lQ29lZmZpY2llbnRzW3N5bmRyb21lQ29lZmZpY2llbnRzLmxlbmd0aCAtIDEgLSBpXSA9IGV2YWxSZXN1bHQ7CgkgICAgICAgICAgICBpZiAoZXZhbFJlc3VsdCAhPT0gMCkgewoJICAgICAgICAgICAgICAgIG5vRXJyb3IgPSBmYWxzZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBpZiAobm9FcnJvcikgewoJICAgICAgICAgICAgcmV0dXJuOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzeW5kcm9tZSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEuZGVmYXVsdChmaWVsZCwgc3luZHJvbWVDb2VmZmljaWVudHMpOwoJICAgICAgICB2YXIgc2lnbWFPbWVnYSA9IHRoaXMucnVuRXVjbGlkZWFuQWxnb3JpdGhtKGZpZWxkLmJ1aWxkTW9ub21pYWwodHdvUywgMSksIHN5bmRyb21lLCB0d29TKTsKCSAgICAgICAgdmFyIHNpZ21hID0gc2lnbWFPbWVnYVswXTsKCSAgICAgICAgdmFyIG9tZWdhID0gc2lnbWFPbWVnYVsxXTsKCSAgICAgICAgdmFyIGVycm9yTG9jYXRpb25zID0gdGhpcy5maW5kRXJyb3JMb2NhdGlvbnMoc2lnbWEpOwoJICAgICAgICB2YXIgZXJyb3JNYWduaXR1ZGVzID0gdGhpcy5maW5kRXJyb3JNYWduaXR1ZGVzKG9tZWdhLCBlcnJvckxvY2F0aW9ucyk7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZXJyb3JMb2NhdGlvbnMubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHZhciBwb3NpdGlvbiA9IHJlY2VpdmVkLmxlbmd0aCAtIDEgLSBmaWVsZC5sb2coZXJyb3JMb2NhdGlvbnNbaV0pOwoJICAgICAgICAgICAgaWYgKHBvc2l0aW9uIDwgMCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZWVkU29sb21vbkV4Y2VwdGlvbl8xLmRlZmF1bHQoJ0JhZCBlcnJvciBsb2NhdGlvbicpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVjZWl2ZWRbcG9zaXRpb25dID0gR2VuZXJpY0dGXzEkMS5kZWZhdWx0LmFkZE9yU3VidHJhY3QocmVjZWl2ZWRbcG9zaXRpb25dLCBlcnJvck1hZ25pdHVkZXNbaV0pOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZWVkU29sb21vbkRlY29kZXIucHJvdG90eXBlLnJ1bkV1Y2xpZGVhbkFsZ29yaXRobSA9IGZ1bmN0aW9uIChhLCBiLCBSIC8qaW50Ki8pIHsKCSAgICAgICAgLy8gQXNzdW1lIGEncyBkZWdyZWUgaXMgPj0gYidzCgkgICAgICAgIGlmIChhLmdldERlZ3JlZSgpIDwgYi5nZXREZWdyZWUoKSkgewoJICAgICAgICAgICAgdmFyIHRlbXAgPSBhOwoJICAgICAgICAgICAgYSA9IGI7CgkgICAgICAgICAgICBiID0gdGVtcDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICB2YXIgckxhc3QgPSBhOwoJICAgICAgICB2YXIgciA9IGI7CgkgICAgICAgIHZhciB0TGFzdCA9IGZpZWxkLmdldFplcm8oKTsKCSAgICAgICAgdmFyIHQgPSBmaWVsZC5nZXRPbmUoKTsKCSAgICAgICAgLy8gUnVuIEV1Y2xpZGVhbiBhbGdvcml0aG0gdW50aWwgcidzIGRlZ3JlZSBpcyBsZXNzIHRoYW4gUi8yCgkgICAgICAgIHdoaWxlIChyLmdldERlZ3JlZSgpID49IChSIC8gMiB8IDApKSB7CgkgICAgICAgICAgICB2YXIgckxhc3RMYXN0ID0gckxhc3Q7CgkgICAgICAgICAgICB2YXIgdExhc3RMYXN0ID0gdExhc3Q7CgkgICAgICAgICAgICByTGFzdCA9IHI7CgkgICAgICAgICAgICB0TGFzdCA9IHQ7CgkgICAgICAgICAgICAvLyBEaXZpZGUgckxhc3RMYXN0IGJ5IHJMYXN0LCB3aXRoIHF1b3RpZW50IGluIHEgYW5kIHJlbWFpbmRlciBpbiByCgkgICAgICAgICAgICBpZiAockxhc3QuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgICAgICAvLyBPb3BzLCBFdWNsaWRlYW4gYWxnb3JpdGhtIGFscmVhZHkgdGVybWluYXRlZD8KCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVlZFNvbG9tb25FeGNlcHRpb25fMS5kZWZhdWx0KCdyX3tpLTF9IHdhcyB6ZXJvJyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByID0gckxhc3RMYXN0OwoJICAgICAgICAgICAgdmFyIHEgPSBmaWVsZC5nZXRaZXJvKCk7CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3JMZWFkaW5nVGVybSA9IHJMYXN0LmdldENvZWZmaWNpZW50KHJMYXN0LmdldERlZ3JlZSgpKTsKCSAgICAgICAgICAgIHZhciBkbHRJbnZlcnNlID0gZmllbGQuaW52ZXJzZShkZW5vbWluYXRvckxlYWRpbmdUZXJtKTsKCSAgICAgICAgICAgIHdoaWxlIChyLmdldERlZ3JlZSgpID49IHJMYXN0LmdldERlZ3JlZSgpICYmICFyLmlzWmVybygpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRlZ3JlZURpZmYgPSByLmdldERlZ3JlZSgpIC0gckxhc3QuZ2V0RGVncmVlKCk7CgkgICAgICAgICAgICAgICAgdmFyIHNjYWxlID0gZmllbGQubXVsdGlwbHkoci5nZXRDb2VmZmljaWVudChyLmdldERlZ3JlZSgpKSwgZGx0SW52ZXJzZSk7CgkgICAgICAgICAgICAgICAgcSA9IHEuYWRkT3JTdWJ0cmFjdChmaWVsZC5idWlsZE1vbm9taWFsKGRlZ3JlZURpZmYsIHNjYWxlKSk7CgkgICAgICAgICAgICAgICAgciA9IHIuYWRkT3JTdWJ0cmFjdChyTGFzdC5tdWx0aXBseUJ5TW9ub21pYWwoZGVncmVlRGlmZiwgc2NhbGUpKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHQgPSBxLm11bHRpcGx5KHRMYXN0KS5hZGRPclN1YnRyYWN0KHRMYXN0TGFzdCk7CgkgICAgICAgICAgICBpZiAoci5nZXREZWdyZWUoKSA+PSByTGFzdC5nZXREZWdyZWUoKSkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsU3RhdGVFeGNlcHRpb25fMS5kZWZhdWx0KCdEaXZpc2lvbiBhbGdvcml0aG0gZmFpbGVkIHRvIHJlZHVjZSBwb2x5bm9taWFsPycpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciBzaWdtYVRpbGRlQXRaZXJvID0gdC5nZXRDb2VmZmljaWVudCgwKTsKCSAgICAgICAgaWYgKHNpZ21hVGlsZGVBdFplcm8gPT09IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBSZWVkU29sb21vbkV4Y2VwdGlvbl8xLmRlZmF1bHQoJ3NpZ21hVGlsZGUoMCkgd2FzIHplcm8nKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgaW52ZXJzZSA9IGZpZWxkLmludmVyc2Uoc2lnbWFUaWxkZUF0WmVybyk7CgkgICAgICAgIHZhciBzaWdtYSA9IHQubXVsdGlwbHlTY2FsYXIoaW52ZXJzZSk7CgkgICAgICAgIHZhciBvbWVnYSA9IHIubXVsdGlwbHlTY2FsYXIoaW52ZXJzZSk7CgkgICAgICAgIHJldHVybiBbc2lnbWEsIG9tZWdhXTsKCSAgICB9OwoJICAgIFJlZWRTb2xvbW9uRGVjb2Rlci5wcm90b3R5cGUuZmluZEVycm9yTG9jYXRpb25zID0gZnVuY3Rpb24gKGVycm9yTG9jYXRvcikgewoJICAgICAgICAvLyBUaGlzIGlzIGEgZGlyZWN0IGFwcGxpY2F0aW9uIG9mIENoaWVuJ3Mgc2VhcmNoCgkgICAgICAgIHZhciBudW1FcnJvcnMgPSBlcnJvckxvY2F0b3IuZ2V0RGVncmVlKCk7CgkgICAgICAgIGlmIChudW1FcnJvcnMgPT09IDEpIHsgLy8gc2hvcnRjdXQKCSAgICAgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW2Vycm9yTG9jYXRvci5nZXRDb2VmZmljaWVudCgxKV0pOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSBuZXcgSW50MzJBcnJheShudW1FcnJvcnMpOwoJICAgICAgICB2YXIgZSA9IDA7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgZmllbGQuZ2V0U2l6ZSgpICYmIGUgPCBudW1FcnJvcnM7IGkrKykgewoJICAgICAgICAgICAgaWYgKGVycm9yTG9jYXRvci5ldmFsdWF0ZUF0KGkpID09PSAwKSB7CgkgICAgICAgICAgICAgICAgcmVzdWx0W2VdID0gZmllbGQuaW52ZXJzZShpKTsKCSAgICAgICAgICAgICAgICBlKys7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGUgIT09IG51bUVycm9ycykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IFJlZWRTb2xvbW9uRXhjZXB0aW9uXzEuZGVmYXVsdCgnRXJyb3IgbG9jYXRvciBkZWdyZWUgZG9lcyBub3QgbWF0Y2ggbnVtYmVyIG9mIHJvb3RzJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIFJlZWRTb2xvbW9uRGVjb2Rlci5wcm90b3R5cGUuZmluZEVycm9yTWFnbml0dWRlcyA9IGZ1bmN0aW9uIChlcnJvckV2YWx1YXRvciwgZXJyb3JMb2NhdGlvbnMpIHsKCSAgICAgICAgLy8gVGhpcyBpcyBkaXJlY3RseSBhcHBseWluZyBGb3JuZXkncyBGb3JtdWxhCgkgICAgICAgIHZhciBzID0gZXJyb3JMb2NhdGlvbnMubGVuZ3RoOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IEludDMyQXJyYXkocyk7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgczsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgeGlJbnZlcnNlID0gZmllbGQuaW52ZXJzZShlcnJvckxvY2F0aW9uc1tpXSk7CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3IgPSAxOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBzOyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAoaSAhPT0gaikgewoJICAgICAgICAgICAgICAgICAgICAvLyBkZW5vbWluYXRvciA9IGZpZWxkLm11bHRpcGx5KGRlbm9taW5hdG9yLAoJICAgICAgICAgICAgICAgICAgICAvLyAgICBHZW5lcmljR0YuYWRkT3JTdWJ0cmFjdCgxLCBmaWVsZC5tdWx0aXBseShlcnJvckxvY2F0aW9uc1tqXSwgeGlJbnZlcnNlKSkpCgkgICAgICAgICAgICAgICAgICAgIC8vIEFib3ZlIHNob3VsZCB3b3JrIGJ1dCBmYWlscyBvbiBzb21lIEFwcGxlIGFuZCBMaW51eCBKREtzIGR1ZSB0byBhIEhvdHNwb3QgYnVnLgoJICAgICAgICAgICAgICAgICAgICAvLyBCZWxvdyBpcyBhIGZ1bm55LWxvb2tpbmcgd29ya2Fyb3VuZCBmcm9tIFN0ZXZlbiBQYXJrZXMKCSAgICAgICAgICAgICAgICAgICAgdmFyIHRlcm0gPSBmaWVsZC5tdWx0aXBseShlcnJvckxvY2F0aW9uc1tqXSwgeGlJbnZlcnNlKTsKCSAgICAgICAgICAgICAgICAgICAgdmFyIHRlcm1QbHVzMSA9ICh0ZXJtICYgMHgxKSA9PT0gMCA/IHRlcm0gfCAxIDogdGVybSAmIH4xOwoJICAgICAgICAgICAgICAgICAgICBkZW5vbWluYXRvciA9IGZpZWxkLm11bHRpcGx5KGRlbm9taW5hdG9yLCB0ZXJtUGx1czEpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdFtpXSA9IGZpZWxkLm11bHRpcGx5KGVycm9yRXZhbHVhdG9yLmV2YWx1YXRlQXQoeGlJbnZlcnNlKSwgZmllbGQuaW52ZXJzZShkZW5vbWluYXRvcikpOwoJICAgICAgICAgICAgaWYgKGZpZWxkLmdldEdlbmVyYXRvckJhc2UoKSAhPT0gMCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdFtpXSA9IGZpZWxkLm11bHRpcGx5KHJlc3VsdFtpXSwgeGlJbnZlcnNlKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgcmV0dXJuIFJlZWRTb2xvbW9uRGVjb2RlcjsKCX0oKSk7CglSZWVkU29sb21vbkRlY29kZXIkMS5kZWZhdWx0ID0gUmVlZFNvbG9tb25EZWNvZGVyOwoKCXZhciBCaXRNYXRyaXhQYXJzZXIkMSA9IHt9OwoKCXZhciBWZXJzaW9uJDEgPSB7fTsKCgl2YXIgRm9ybWF0SW5mb3JtYXRpb24kMSA9IHt9OwoKCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbCA9IHt9OwoKCXZhciBBcmd1bWVudEV4Y2VwdGlvbiQxID0ge307CgoJdmFyIF9fZXh0ZW5kcyQzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFyZ3VtZW50RXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBFeGNlcHRpb25fMSA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBBcmd1bWVudEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkMyhBcmd1bWVudEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBBcmd1bWVudEV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBBcmd1bWVudEV4Y2VwdGlvbi5raW5kID0gJ0FyZ3VtZW50RXhjZXB0aW9uJzsKCSAgICByZXR1cm4gQXJndW1lbnRFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xLmRlZmF1bHQpKTsKCUFyZ3VtZW50RXhjZXB0aW9uJDEuZGVmYXVsdCA9IEFyZ3VtZW50RXhjZXB0aW9uOwoKCShmdW5jdGlvbiAoZXhwb3J0cykgewoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CglleHBvcnRzLkVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzID0gdm9pZCAwOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBBcmd1bWVudEV4Y2VwdGlvbl8xID0gQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJdmFyIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzOwoJKGZ1bmN0aW9uIChFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcykgewoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzW0Vycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzWyJMIl0gPSAwXSA9ICJMIjsKCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlc1tFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlc1siTSJdID0gMV0gPSAiTSI7CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXNbRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXNbIlEiXSA9IDJdID0gIlEiOwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzW0Vycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzWyJIIl0gPSAzXSA9ICJIIjsKCX0pKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzID0gZXhwb3J0cy5FcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcyB8fCAoZXhwb3J0cy5FcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcyA9IHt9KSk7CgkvKioKCSAqIDxwPlNlZSBJU08gMTgwMDQ6MjAwNiwgNi41LjEuIFRoaXMgZW51bSBlbmNhcHN1bGF0ZXMgdGhlIGZvdXIgZXJyb3IgY29ycmVjdGlvbiBsZXZlbHMKCSAqIGRlZmluZWQgYnkgdGhlIFFSIGNvZGUgc3RhbmRhcmQuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBFcnJvckNvcnJlY3Rpb25MZXZlbCh2YWx1ZSwgc3RyaW5nVmFsdWUsIGJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuc3RyaW5nVmFsdWUgPSBzdHJpbmdWYWx1ZTsKCSAgICAgICAgdGhpcy5iaXRzID0gYml0czsKCSAgICAgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuc2V0KGJpdHMsIHRoaXMpOwoJICAgICAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5GT1JfVkFMVUUuc2V0KHZhbHVlLCB0aGlzKTsKCSAgICB9CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwucHJvdG90eXBlLmdldFZhbHVlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZTsKCSAgICB9OwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsLnByb3RvdHlwZS5nZXRCaXRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRzOwoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuZnJvbVN0cmluZyA9IGZ1bmN0aW9uIChzKSB7CgkgICAgICAgIHN3aXRjaCAocykgewoJICAgICAgICAgICAgY2FzZSAnTCc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5MOwoJICAgICAgICAgICAgY2FzZSAnTSc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5NOwoJICAgICAgICAgICAgY2FzZSAnUSc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5ROwoJICAgICAgICAgICAgY2FzZSAnSCc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5IOwoJICAgICAgICAgICAgZGVmYXVsdDogdGhyb3cgbmV3IEFyZ3VtZW50RXhjZXB0aW9uXzEuZGVmYXVsdChzICsgJ25vdCBhdmFpbGFibGUnKTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJpbmdWYWx1ZTsKCSAgICB9OwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICBpZiAoIShvIGluc3RhbmNlb2YgRXJyb3JDb3JyZWN0aW9uTGV2ZWwpKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG90aGVyID0gbzsKCSAgICAgICAgcmV0dXJuIHRoaXMudmFsdWUgPT09IG90aGVyLnZhbHVlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJpdHMgaW50IGNvbnRhaW5pbmcgdGhlIHR3byBiaXRzIGVuY29kaW5nIGEgUVIgQ29kZSdzIGVycm9yIGNvcnJlY3Rpb24gbGV2ZWwKCSAgICAgKiBAcmV0dXJuIEVycm9yQ29ycmVjdGlvbkxldmVsIHJlcHJlc2VudGluZyB0aGUgZW5jb2RlZCBlcnJvciBjb3JyZWN0aW9uIGxldmVsCgkgICAgICovCgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuZm9yQml0cyA9IGZ1bmN0aW9uIChiaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGJpdHMgPCAwIHx8IGJpdHMgPj0gRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuc2l6ZSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuZ2V0KGJpdHMpOwoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMgPSBuZXcgTWFwKCk7CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX1ZBTFVFID0gbmV3IE1hcCgpOwoJICAgIC8qKiBMID0gfjclIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5MID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLkwsICdMJywgMHgwMSk7CgkgICAgLyoqIE0gPSB+MTUlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5NID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLk0sICdNJywgMHgwMCk7CgkgICAgLyoqIFEgPSB+MjUlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5RID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLlEsICdRJywgMHgwMyk7CgkgICAgLyoqIEggPSB+MzAlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5IID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLkgsICdIJywgMHgwMik7CgkgICAgcmV0dXJuIEVycm9yQ29ycmVjdGlvbkxldmVsOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IEVycm9yQ29ycmVjdGlvbkxldmVsOwoKCX0oRXJyb3JDb3JyZWN0aW9uTGV2ZWwpKTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDYgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRm9ybWF0SW5mb3JtYXRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbF8xID0gRXJyb3JDb3JyZWN0aW9uTGV2ZWw7Cgl2YXIgSW50ZWdlcl8xID0gSW50ZWdlciQxOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgYSBRUiBDb2RlJ3MgZm9ybWF0IGluZm9ybWF0aW9uLCBpbmNsdWRpbmcgdGhlIGRhdGEgbWFzayB1c2VkIGFuZAoJICogZXJyb3IgY29ycmVjdGlvbiBsZXZlbC48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBzZWUgRGF0YU1hc2sKCSAqIEBzZWUgRXJyb3JDb3JyZWN0aW9uTGV2ZWwKCSAqLwoJdmFyIEZvcm1hdEluZm9ybWF0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEZvcm1hdEluZm9ybWF0aW9uKGZvcm1hdEluZm8gLyppbnQqLykgewoJICAgICAgICAvLyBCaXRzIDMsNAoJICAgICAgICB0aGlzLmVycm9yQ29ycmVjdGlvbkxldmVsID0gRXJyb3JDb3JyZWN0aW9uTGV2ZWxfMS5kZWZhdWx0LmZvckJpdHMoKGZvcm1hdEluZm8gPj4gMykgJiAweDAzKTsKCSAgICAgICAgLy8gQm90dG9tIDMgYml0cwoJICAgICAgICB0aGlzLmRhdGFNYXNrID0gLyooYnl0ZSkgKi8gKGZvcm1hdEluZm8gJiAweDA3KTsKCSAgICB9CgkgICAgRm9ybWF0SW5mb3JtYXRpb24ubnVtQml0c0RpZmZlcmluZyA9IGZ1bmN0aW9uIChhIC8qaW50Ki8sIGIgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gSW50ZWdlcl8xLmRlZmF1bHQuYml0Q291bnQoYSBeIGIpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIG1hc2tlZEZvcm1hdEluZm8xIGZvcm1hdCBpbmZvIGluZGljYXRvciwgd2l0aCBtYXNrIHN0aWxsIGFwcGxpZWQKCSAgICAgKiBAcGFyYW0gbWFza2VkRm9ybWF0SW5mbzIgc2Vjb25kIGNvcHkgb2Ygc2FtZSBpbmZvOyBib3RoIGFyZSBjaGVja2VkIGF0IHRoZSBzYW1lIHRpbWUKCSAgICAgKiAgdG8gZXN0YWJsaXNoIGJlc3QgbWF0Y2gKCSAgICAgKiBAcmV0dXJuIGluZm9ybWF0aW9uIGFib3V0IHRoZSBmb3JtYXQgaXQgc3BlY2lmaWVzLCBvciB7QGNvZGUgbnVsbH0KCSAgICAgKiAgaWYgZG9lc24ndCBzZWVtIHRvIG1hdGNoIGFueSBrbm93biBwYXR0ZXJuCgkgICAgICovCgkgICAgRm9ybWF0SW5mb3JtYXRpb24uZGVjb2RlRm9ybWF0SW5mb3JtYXRpb24gPSBmdW5jdGlvbiAobWFza2VkRm9ybWF0SW5mbzEgLyppbnQqLywgbWFza2VkRm9ybWF0SW5mbzIgLyppbnQqLykgewoJICAgICAgICB2YXIgZm9ybWF0SW5mbyA9IEZvcm1hdEluZm9ybWF0aW9uLmRvRGVjb2RlRm9ybWF0SW5mb3JtYXRpb24obWFza2VkRm9ybWF0SW5mbzEsIG1hc2tlZEZvcm1hdEluZm8yKTsKCSAgICAgICAgaWYgKGZvcm1hdEluZm8gIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiBmb3JtYXRJbmZvOwoJICAgICAgICB9CgkgICAgICAgIC8vIFNob3VsZCByZXR1cm4gbnVsbCwgYnV0LCBzb21lIFFSIGNvZGVzIGFwcGFyZW50bHkKCSAgICAgICAgLy8gZG8gbm90IG1hc2sgdGhpcyBpbmZvLiBUcnkgYWdhaW4gYnkgYWN0dWFsbHkgbWFza2luZyB0aGUgcGF0dGVybgoJICAgICAgICAvLyBmaXJzdAoJICAgICAgICByZXR1cm4gRm9ybWF0SW5mb3JtYXRpb24uZG9EZWNvZGVGb3JtYXRJbmZvcm1hdGlvbihtYXNrZWRGb3JtYXRJbmZvMSBeIEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX01BU0tfUVIsIG1hc2tlZEZvcm1hdEluZm8yIF4gRm9ybWF0SW5mb3JtYXRpb24uRk9STUFUX0lORk9fTUFTS19RUik7CgkgICAgfTsKCSAgICBGb3JtYXRJbmZvcm1hdGlvbi5kb0RlY29kZUZvcm1hdEluZm9ybWF0aW9uID0gZnVuY3Rpb24gKG1hc2tlZEZvcm1hdEluZm8xIC8qaW50Ki8sIG1hc2tlZEZvcm1hdEluZm8yIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGVfMSwgX2E7CgkgICAgICAgIC8vIEZpbmQgdGhlIGludCBpbiBGT1JNQVRfSU5GT19ERUNPREVfTE9PS1VQIHdpdGggZmV3ZXN0IGJpdHMgZGlmZmVyaW5nCgkgICAgICAgIHZhciBiZXN0RGlmZmVyZW5jZSA9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSOwoJICAgICAgICB2YXIgYmVzdEZvcm1hdEluZm8gPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgX2IgPSBfX3ZhbHVlcyQ2KEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX0RFQ09ERV9MT09LVVApLCBfYyA9IF9iLm5leHQoKTsgIV9jLmRvbmU7IF9jID0gX2IubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRlY29kZUluZm8gPSBfYy52YWx1ZTsKCSAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0SW5mbyA9IGRlY29kZUluZm9bMF07CgkgICAgICAgICAgICAgICAgaWYgKHRhcmdldEluZm8gPT09IG1hc2tlZEZvcm1hdEluZm8xIHx8IHRhcmdldEluZm8gPT09IG1hc2tlZEZvcm1hdEluZm8yKSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIEZvdW5kIGFuIGV4YWN0IG1hdGNoCgkgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRm9ybWF0SW5mb3JtYXRpb24oZGVjb2RlSW5mb1sxXSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHZhciBiaXRzRGlmZmVyZW5jZSA9IEZvcm1hdEluZm9ybWF0aW9uLm51bUJpdHNEaWZmZXJpbmcobWFza2VkRm9ybWF0SW5mbzEsIHRhcmdldEluZm8pOwoJICAgICAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgICAgIGJlc3RGb3JtYXRJbmZvID0gZGVjb2RlSW5mb1sxXTsKCSAgICAgICAgICAgICAgICAgICAgYmVzdERpZmZlcmVuY2UgPSBiaXRzRGlmZmVyZW5jZTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgaWYgKG1hc2tlZEZvcm1hdEluZm8xICE9PSBtYXNrZWRGb3JtYXRJbmZvMikgewoJICAgICAgICAgICAgICAgICAgICAvLyBhbHNvIHRyeSB0aGUgb3RoZXIgb3B0aW9uCgkgICAgICAgICAgICAgICAgICAgIGJpdHNEaWZmZXJlbmNlID0gRm9ybWF0SW5mb3JtYXRpb24ubnVtQml0c0RpZmZlcmluZyhtYXNrZWRGb3JtYXRJbmZvMiwgdGFyZ2V0SW5mbyk7CgkgICAgICAgICAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBiZXN0Rm9ybWF0SW5mbyA9IGRlY29kZUluZm9bMV07CgkgICAgICAgICAgICAgICAgICAgICAgICBiZXN0RGlmZmVyZW5jZSA9IGJpdHNEaWZmZXJlbmNlOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzFfMSkgeyBlXzEgPSB7IGVycm9yOiBlXzFfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2MgJiYgIV9jLmRvbmUgJiYgKF9hID0gX2IucmV0dXJuKSkgX2EuY2FsbChfYik7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gSGFtbWluZyBkaXN0YW5jZSBvZiB0aGUgMzIgbWFza2VkIGNvZGVzIGlzIDcsIGJ5IGNvbnN0cnVjdGlvbiwgc28gPD0gMyBiaXRzCgkgICAgICAgIC8vIGRpZmZlcmluZyBtZWFucyB3ZSBmb3VuZCBhIG1hdGNoCgkgICAgICAgIGlmIChiZXN0RGlmZmVyZW5jZSA8PSAzKSB7CgkgICAgICAgICAgICByZXR1cm4gbmV3IEZvcm1hdEluZm9ybWF0aW9uKGJlc3RGb3JtYXRJbmZvKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbnVsbDsKCSAgICB9OwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLnByb3RvdHlwZS5nZXRFcnJvckNvcnJlY3Rpb25MZXZlbCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZXJyb3JDb3JyZWN0aW9uTGV2ZWw7CgkgICAgfTsKCSAgICBGb3JtYXRJbmZvcm1hdGlvbi5wcm90b3R5cGUuZ2V0RGF0YU1hc2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRhdGFNYXNrOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICh0aGlzLmVycm9yQ29ycmVjdGlvbkxldmVsLmdldEJpdHMoKSA8PCAzKSB8IHRoaXMuZGF0YU1hc2s7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgRm9ybWF0SW5mb3JtYXRpb24ucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIChvKSB7CgkgICAgICAgIGlmICghKG8gaW5zdGFuY2VvZiBGb3JtYXRJbmZvcm1hdGlvbikpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgb3RoZXIgPSBvOwoJICAgICAgICByZXR1cm4gdGhpcy5lcnJvckNvcnJlY3Rpb25MZXZlbCA9PT0gb3RoZXIuZXJyb3JDb3JyZWN0aW9uTGV2ZWwgJiYKCSAgICAgICAgICAgIHRoaXMuZGF0YU1hc2sgPT09IG90aGVyLmRhdGFNYXNrOwoJICAgIH07CgkgICAgRm9ybWF0SW5mb3JtYXRpb24uRk9STUFUX0lORk9fTUFTS19RUiA9IDB4NTQxMjsKCSAgICAvKioKCSAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYsIEFubmV4IEMsIFRhYmxlIEMuMQoJICAgICAqLwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX0RFQ09ERV9MT09LVVAgPSBbCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1NDEyLCAweDAwXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1MTI1LCAweDAxXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1RTdDLCAweDAyXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1QjRCLCAweDAzXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0NUY5LCAweDA0XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0MENFLCAweDA1XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0Rjk3LCAweDA2XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0QUEwLCAweDA3XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3N0M0LCAweDA4XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3MkYzLCAweDA5XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3REFBLCAweDBBXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3ODlELCAweDBCXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2NjJGLCAweDBDXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2MzE4LCAweDBEXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2QzQxLCAweDBFXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2OTc2LCAweDBGXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxNjg5LCAweDEwXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxM0JFLCAweDExXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxQ0U3LCAweDEyXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxOUQwLCAweDEzXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwNzYyLCAweDE0XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwMjU1LCAweDE1XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwRDBDLCAweDE2XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwODNCLCAweDE3XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzNTVGLCAweDE4XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzMDY4LCAweDE5XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzRjMxLCAweDFBXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzQTA2LCAweDFCXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyNEI0LCAweDFDXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyMTgzLCAweDFEXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyRURBLCAweDFFXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyQkVELCAweDFGXSksCgkgICAgXTsKCSAgICByZXR1cm4gRm9ybWF0SW5mb3JtYXRpb247Cgl9KCkpOwoJRm9ybWF0SW5mb3JtYXRpb24kMS5kZWZhdWx0ID0gRm9ybWF0SW5mb3JtYXRpb247CgoJdmFyIEVDQmxvY2tzJDEgPSB7fTsKCgl2YXIgX192YWx1ZXMkNSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX3ZhbHVlcykgfHwgZnVuY3Rpb24obykgewoJICAgIHZhciBzID0gdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwOwoJICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pOwoJICAgIGlmIChvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gIm51bWJlciIpIHJldHVybiB7CgkgICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7CgkgICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/ICJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLiIgOiAiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLiIpOwoJfTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFQ0Jsb2NrcyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIHNldCBvZiBlcnJvci1jb3JyZWN0aW9uIGJsb2NrcyBpbiBvbmUgc3ltYm9sIHZlcnNpb24uIE1vc3QgdmVyc2lvbnMgd2lsbAoJICogdXNlIGJsb2NrcyBvZiBkaWZmZXJpbmcgc2l6ZXMgd2l0aGluIG9uZSB2ZXJzaW9uLCBzbywgdGhpcyBlbmNhcHN1bGF0ZXMgdGhlIHBhcmFtZXRlcnMgZm9yCgkgKiBlYWNoIHNldCBvZiBibG9ja3MuIEl0IGFsc28gaG9sZHMgdGhlIG51bWJlciBvZiBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyBwZXIgYmxvY2sgc2luY2UgaXQKCSAqIHdpbGwgYmUgdGhlIHNhbWUgYWNyb3NzIGFsbCBibG9ja3Mgd2l0aGluIG9uZSB2ZXJzaW9uLjwvcD4KCSAqLwoJdmFyIEVDQmxvY2tzID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEVDQmxvY2tzKGVjQ29kZXdvcmRzUGVyQmxvY2sgLyppbnQqLykgewoJICAgICAgICB2YXIgZWNCbG9ja3MgPSBbXTsKCSAgICAgICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgICAgICAgIGVjQmxvY2tzW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuZWNDb2Rld29yZHNQZXJCbG9jayA9IGVjQ29kZXdvcmRzUGVyQmxvY2s7CgkgICAgICAgIHRoaXMuZWNCbG9ja3MgPSBlY0Jsb2NrczsKCSAgICB9CgkgICAgRUNCbG9ja3MucHJvdG90eXBlLmdldEVDQ29kZXdvcmRzUGVyQmxvY2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmVjQ29kZXdvcmRzUGVyQmxvY2s7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0TnVtQmxvY2tzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIHRvdGFsID0gMDsKCSAgICAgICAgdmFyIGVjQmxvY2tzID0gdGhpcy5lY0Jsb2NrczsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIGVjQmxvY2tzXzEgPSBfX3ZhbHVlcyQ1KGVjQmxvY2tzKSwgZWNCbG9ja3NfMV8xID0gZWNCbG9ja3NfMS5uZXh0KCk7ICFlY0Jsb2Nrc18xXzEuZG9uZTsgZWNCbG9ja3NfMV8xID0gZWNCbG9ja3NfMS5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZWNCbG9jayA9IGVjQmxvY2tzXzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbCArPSBlY0Jsb2NrLmdldENvdW50KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChlY0Jsb2Nrc18xXzEgJiYgIWVjQmxvY2tzXzFfMS5kb25lICYmIChfYSA9IGVjQmxvY2tzXzEucmV0dXJuKSkgX2EuY2FsbChlY0Jsb2Nrc18xKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdG90YWw7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0VG90YWxFQ0NvZGV3b3JkcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZWNDb2Rld29yZHNQZXJCbG9jayAqIHRoaXMuZ2V0TnVtQmxvY2tzKCk7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0RUNCbG9ja3MgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmVjQmxvY2tzOwoJICAgIH07CgkgICAgcmV0dXJuIEVDQmxvY2tzOwoJfSgpKTsKCUVDQmxvY2tzJDEuZGVmYXVsdCA9IEVDQmxvY2tzOwoKCXZhciBFQ0IkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFQ0IkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgdGhlIHBhcmFtZXRlcnMgZm9yIG9uZSBlcnJvci1jb3JyZWN0aW9uIGJsb2NrIGluIG9uZSBzeW1ib2wgdmVyc2lvbi4KCSAqIFRoaXMgaW5jbHVkZXMgdGhlIG51bWJlciBvZiBkYXRhIGNvZGV3b3JkcywgYW5kIHRoZSBudW1iZXIgb2YgdGltZXMgYSBibG9jayB3aXRoIHRoZXNlCgkgKiBwYXJhbWV0ZXJzIGlzIHVzZWQgY29uc2VjdXRpdmVseSBpbiB0aGUgUVIgY29kZSB2ZXJzaW9uJ3MgZm9ybWF0LjwvcD4KCSAqLwoJdmFyIEVDQiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBFQ0IoY291bnQgLyppbnQqLywgZGF0YUNvZGV3b3JkcyAvKmludCovKSB7CgkgICAgICAgIHRoaXMuY291bnQgPSBjb3VudDsKCSAgICAgICAgdGhpcy5kYXRhQ29kZXdvcmRzID0gZGF0YUNvZGV3b3JkczsKCSAgICB9CgkgICAgRUNCLnByb3RvdHlwZS5nZXRDb3VudCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY291bnQ7CgkgICAgfTsKCSAgICBFQ0IucHJvdG90eXBlLmdldERhdGFDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRhdGFDb2Rld29yZHM7CgkgICAgfTsKCSAgICByZXR1cm4gRUNCOwoJfSgpKTsKCUVDQiQxLmRlZmF1bHQgPSBFQ0I7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX3ZhbHVlcyQ0ID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFZlcnNpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBCaXRNYXRyaXhfMSQzID0gQml0TWF0cml4JDE7Cgl2YXIgRm9ybWF0SW5mb3JtYXRpb25fMSQxID0gRm9ybWF0SW5mb3JtYXRpb24kMTsKCXZhciBFQ0Jsb2Nrc18xID0gRUNCbG9ja3MkMTsKCXZhciBFQ0JfMSA9IEVDQiQxOwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xJDIgPSBGb3JtYXRFeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQyID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7CgkvKioKCSAqIFNlZSBJU08gMTgwMDQ6MjAwNiBBbm5leCBECgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFZlcnNpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gVmVyc2lvbih2ZXJzaW9uTnVtYmVyIC8qaW50Ki8sIGFsaWdubWVudFBhdHRlcm5DZW50ZXJzKSB7CgkgICAgICAgIHZhciBlXzEsIF9hOwoJICAgICAgICB2YXIgZWNCbG9ja3MgPSBbXTsKCSAgICAgICAgZm9yICh2YXIgX2kgPSAyOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgICAgICAgIGVjQmxvY2tzW19pIC0gMl0gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMudmVyc2lvbk51bWJlciA9IHZlcnNpb25OdW1iZXI7CgkgICAgICAgIHRoaXMuYWxpZ25tZW50UGF0dGVybkNlbnRlcnMgPSBhbGlnbm1lbnRQYXR0ZXJuQ2VudGVyczsKCSAgICAgICAgdGhpcy5lY0Jsb2NrcyA9IGVjQmxvY2tzOwoJICAgICAgICB2YXIgdG90YWwgPSAwOwoJICAgICAgICB2YXIgZWNDb2Rld29yZHMgPSBlY0Jsb2Nrc1swXS5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCk7CgkgICAgICAgIHZhciBlY2JBcnJheSA9IGVjQmxvY2tzWzBdLmdldEVDQmxvY2tzKCk7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICBmb3IgKHZhciBlY2JBcnJheV8xID0gX192YWx1ZXMkNChlY2JBcnJheSksIGVjYkFycmF5XzFfMSA9IGVjYkFycmF5XzEubmV4dCgpOyAhZWNiQXJyYXlfMV8xLmRvbmU7IGVjYkFycmF5XzFfMSA9IGVjYkFycmF5XzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGVjQmxvY2sgPSBlY2JBcnJheV8xXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgdG90YWwgKz0gZWNCbG9jay5nZXRDb3VudCgpICogKGVjQmxvY2suZ2V0RGF0YUNvZGV3b3JkcygpICsgZWNDb2Rld29yZHMpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzFfMSkgeyBlXzEgPSB7IGVycm9yOiBlXzFfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoZWNiQXJyYXlfMV8xICYmICFlY2JBcnJheV8xXzEuZG9uZSAmJiAoX2EgPSBlY2JBcnJheV8xLnJldHVybikpIF9hLmNhbGwoZWNiQXJyYXlfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy50b3RhbENvZGV3b3JkcyA9IHRvdGFsOwoJICAgIH0KCSAgICBWZXJzaW9uLnByb3RvdHlwZS5nZXRWZXJzaW9uTnVtYmVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52ZXJzaW9uTnVtYmVyOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0QWxpZ25tZW50UGF0dGVybkNlbnRlcnMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0VG90YWxDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnRvdGFsQ29kZXdvcmRzOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0RGltZW5zaW9uRm9yVmVyc2lvbiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDE3ICsgNCAqIHRoaXMudmVyc2lvbk51bWJlcjsKCSAgICB9OwoJICAgIFZlcnNpb24ucHJvdG90eXBlLmdldEVDQmxvY2tzRm9yTGV2ZWwgPSBmdW5jdGlvbiAoZWNMZXZlbCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lY0Jsb2Nrc1tlY0xldmVsLmdldFZhbHVlKCldOwoJICAgICAgICAvLyBUWVBFU0NSSVBUUE9SVDogb3JpZ2luYWwgd2FzIHVzaW5nIG9yZGluYWwsIGFuZCB1c2luZyB0aGUgb3JkZXIgb2YgbGV2ZWxzIGFzIGRlZmluZWQgaW4gRXJyb3JDb3JyZWN0aW9uTGV2ZWwgZW51bSAoTE1RSCkKCSAgICAgICAgLy8gSSB3aWxsIHVzZSB0aGUgZGlyZWN0IHZhbHVlIGZyb20gRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXMgZW51bSB3aGljaCBpbiB0eXBlc2NyaXB0IGdvZXMgdG8gYSBudW1iZXIKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkRlZHVjZXMgdmVyc2lvbiBpbmZvcm1hdGlvbiBwdXJlbHkgZnJvbSBRUiBDb2RlIGRpbWVuc2lvbnMuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGRpbWVuc2lvbiBkaW1lbnNpb24gaW4gbW9kdWxlcwoJICAgICAqIEByZXR1cm4gVmVyc2lvbiBmb3IgYSBRUiBDb2RlIG9mIHRoYXQgZGltZW5zaW9uCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgZGltZW5zaW9uIGlzIG5vdCAxIG1vZCA0CgkgICAgICovCgkgICAgVmVyc2lvbi5nZXRQcm92aXNpb25hbFZlcnNpb25Gb3JEaW1lbnNpb24gPSBmdW5jdGlvbiAoZGltZW5zaW9uIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGRpbWVuc2lvbiAlIDQgIT09IDEpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMSQyLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VmVyc2lvbkZvck51bWJlcigoZGltZW5zaW9uIC0gMTcpIC8gNCk7CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlnbm9yZWQgLyo6IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEkMi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFZlcnNpb24uZ2V0VmVyc2lvbkZvck51bWJlciA9IGZ1bmN0aW9uICh2ZXJzaW9uTnVtYmVyIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKHZlcnNpb25OdW1iZXIgPCAxIHx8IHZlcnNpb25OdW1iZXIgPiA0MCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDIuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBWZXJzaW9uLlZFUlNJT05TW3ZlcnNpb25OdW1iZXIgLSAxXTsKCSAgICB9OwoJICAgIFZlcnNpb24uZGVjb2RlVmVyc2lvbkluZm9ybWF0aW9uID0gZnVuY3Rpb24gKHZlcnNpb25CaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGJlc3REaWZmZXJlbmNlID0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgICAgIHZhciBiZXN0VmVyc2lvbiA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgVmVyc2lvbi5WRVJTSU9OX0RFQ09ERV9JTkZPLmxlbmd0aDsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgdGFyZ2V0VmVyc2lvbiA9IFZlcnNpb24uVkVSU0lPTl9ERUNPREVfSU5GT1tpXTsKCSAgICAgICAgICAgIC8vIERvIHRoZSB2ZXJzaW9uIGluZm8gYml0cyBtYXRjaCBleGFjdGx5PyBkb25lLgoJICAgICAgICAgICAgaWYgKHRhcmdldFZlcnNpb24gPT09IHZlcnNpb25CaXRzKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIFZlcnNpb24uZ2V0VmVyc2lvbkZvck51bWJlcihpICsgNyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBPdGhlcndpc2Ugc2VlIGlmIHRoaXMgaXMgdGhlIGNsb3Nlc3QgdG8gYSByZWFsIHZlcnNpb24gaW5mbyBiaXQgc3RyaW5nCgkgICAgICAgICAgICAvLyB3ZSBoYXZlIHNlZW4gc28gZmFyCgkgICAgICAgICAgICB2YXIgYml0c0RpZmZlcmVuY2UgPSBGb3JtYXRJbmZvcm1hdGlvbl8xJDEuZGVmYXVsdC5udW1CaXRzRGlmZmVyaW5nKHZlcnNpb25CaXRzLCB0YXJnZXRWZXJzaW9uKTsKCSAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgYmVzdFZlcnNpb24gPSBpICsgNzsKCSAgICAgICAgICAgICAgICBiZXN0RGlmZmVyZW5jZSA9IGJpdHNEaWZmZXJlbmNlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIFdlIGNhbiB0b2xlcmF0ZSB1cCB0byAzIGJpdHMgb2YgZXJyb3Igc2luY2Ugbm8gdHdvIHZlcnNpb24gaW5mbyBjb2Rld29yZHMgd2lsbAoJICAgICAgICAvLyBkaWZmZXIgaW4gbGVzcyB0aGFuIDggYml0cy4KCSAgICAgICAgaWYgKGJlc3REaWZmZXJlbmNlIDw9IDMpIHsKCSAgICAgICAgICAgIHJldHVybiBWZXJzaW9uLmdldFZlcnNpb25Gb3JOdW1iZXIoYmVzdFZlcnNpb24pOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHdlIGRpZG4ndCBmaW5kIGEgY2xvc2UgZW5vdWdoIG1hdGNoLCBmYWlsCgkgICAgICAgIHJldHVybiBudWxsOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogU2VlIElTTyAxODAwNDoyMDA2IEFubmV4IEUKCSAgICAgKi8KCSAgICBWZXJzaW9uLnByb3RvdHlwZS5idWlsZEZ1bmN0aW9uUGF0dGVybiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuZ2V0RGltZW5zaW9uRm9yVmVyc2lvbigpOwoJICAgICAgICB2YXIgYml0TWF0cml4ID0gbmV3IEJpdE1hdHJpeF8xJDMuZGVmYXVsdChkaW1lbnNpb24pOwoJICAgICAgICAvLyBUb3AgbGVmdCBmaW5kZXIgcGF0dGVybiArIHNlcGFyYXRvciArIGZvcm1hdAoJICAgICAgICBiaXRNYXRyaXguc2V0UmVnaW9uKDAsIDAsIDksIDkpOwoJICAgICAgICAvLyBUb3AgcmlnaHQgZmluZGVyIHBhdHRlcm4gKyBzZXBhcmF0b3IgKyBmb3JtYXQKCSAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbihkaW1lbnNpb24gLSA4LCAwLCA4LCA5KTsKCSAgICAgICAgLy8gQm90dG9tIGxlZnQgZmluZGVyIHBhdHRlcm4gKyBzZXBhcmF0b3IgKyBmb3JtYXQKCSAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbigwLCBkaW1lbnNpb24gLSA4LCA5LCA4KTsKCSAgICAgICAgLy8gQWxpZ25tZW50IHBhdHRlcm5zCgkgICAgICAgIHZhciBtYXggPSB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBtYXg7IHgrKykgewoJICAgICAgICAgICAgdmFyIGkgPSB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzW3hdIC0gMjsKCSAgICAgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgbWF4OyB5KyspIHsKCSAgICAgICAgICAgICAgICBpZiAoKHggPT09IDAgJiYgKHkgPT09IDAgfHwgeSA9PT0gbWF4IC0gMSkpIHx8ICh4ID09PSBtYXggLSAxICYmIHkgPT09IDApKSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIE5vIGFsaWdubWVudCBwYXR0ZXJucyBuZWFyIHRoZSB0aHJlZSBmaW5kZXIgcGF0dGVybnMKCSAgICAgICAgICAgICAgICAgICAgY29udGludWU7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24odGhpcy5hbGlnbm1lbnRQYXR0ZXJuQ2VudGVyc1t5XSAtIDIsIGksIDUsIDUpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIFZlcnRpY2FsIHRpbWluZyBwYXR0ZXJuCgkgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oNiwgOSwgMSwgZGltZW5zaW9uIC0gMTcpOwoJICAgICAgICAvLyBIb3Jpem9udGFsIHRpbWluZyBwYXR0ZXJuCgkgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oOSwgNiwgZGltZW5zaW9uIC0gMTcsIDEpOwoJICAgICAgICBpZiAodGhpcy52ZXJzaW9uTnVtYmVyID4gNikgewoJICAgICAgICAgICAgLy8gVmVyc2lvbiBpbmZvLCB0b3AgcmlnaHQKCSAgICAgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oZGltZW5zaW9uIC0gMTEsIDAsIDMsIDYpOwoJICAgICAgICAgICAgLy8gVmVyc2lvbiBpbmZvLCBib3R0b20gbGVmdAoJICAgICAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbigwLCBkaW1lbnNpb24gLSAxMSwgNiwgMyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdE1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBWZXJzaW9uLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICcnICsgdGhpcy52ZXJzaW9uTnVtYmVyOwoJICAgIH07CgkgICAgLyoqCgkgICAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYgQW5uZXggRC4KCSAgICAgICAqIEVsZW1lbnQgaSByZXByZXNlbnRzIHRoZSByYXcgdmVyc2lvbiBiaXRzIHRoYXQgc3BlY2lmeSB2ZXJzaW9uIGkgKyA3CgkgICAgICAgKi8KCSAgICBWZXJzaW9uLlZFUlNJT05fREVDT0RFX0lORk8gPSBJbnQzMkFycmF5LmZyb20oWwoJICAgICAgICAweDA3Qzk0LCAweDA4NUJDLCAweDA5QTk5LCAweDBBNEQzLCAweDBCQkY2LAoJICAgICAgICAweDBDNzYyLCAweDBEODQ3LCAweDBFNjBELCAweDBGOTI4LCAweDEwQjc4LAoJICAgICAgICAweDExNDVELCAweDEyQTE3LCAweDEzNTMyLCAweDE0OUE2LCAweDE1NjgzLAoJICAgICAgICAweDE2OEM5LCAweDE3N0VDLCAweDE4RUM0LCAweDE5MUUxLCAweDFBRkFCLAoJICAgICAgICAweDFCMDhFLCAweDFDQzFBLCAweDFEMzNGLCAweDFFRDc1LCAweDFGMjUwLAoJICAgICAgICAweDIwOUQ1LCAweDIxNkYwLCAweDIyOEJBLCAweDIzNzlGLCAweDI0QjBCLAoJICAgICAgICAweDI1NDJFLCAweDI2QTY0LCAweDI3NTQxLCAweDI4QzY5CgkgICAgXSk7CgkgICAgLyoqCgkgICAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYgNi41LjEgVGFibGUgOQoJICAgICAgICovCgkgICAgVmVyc2lvbi5WRVJTSU9OUyA9IFsKCSAgICAgICAgbmV3IFZlcnNpb24oMSwgbmV3IEludDMyQXJyYXkoMCksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoNywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxMCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxMywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxNywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgOSkpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMiwgSW50MzJBcnJheS5mcm9tKFs2LCAxOF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDEwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAzNCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE2LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAyOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAyMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMywgSW50MzJBcnJheS5mcm9tKFs2LCAyMl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE1LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA1NSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA0NCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oNCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA4MCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAyNCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA5KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbig1LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDEwOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCA0MykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExKSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTIpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDYsIEludDMyQXJyYXkuZnJvbShbNiwgMzRdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgNjgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDcsIEludDMyQXJyYXkuZnJvbShbNiwgMjIsIDM4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDc4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDMxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTMpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxNCkpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oOCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNCwgNDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgOTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMzgpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzOSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxOCksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE5KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDksIEludDMyQXJyYXkuZnJvbShbNiwgMjYsIDQ2XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCAzNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDM3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTAsIEludDMyQXJyYXkuZnJvbShbNiwgMjgsIDUwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDY4KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgNjkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDMpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA0NCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxOSksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDIwKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDExLCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIwLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA4MSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA1MCksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDUxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTIpLCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTIsIEludDMyQXJyYXkuZnJvbShbNiwgMzIsIDU4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDkyKSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgOTMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMzYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAyMCksIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDEzLCBJbnQzMkFycmF5LmZyb20oWzYsIDM0LCA2Ml0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMzcpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAzOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAyMCksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDEyLCAxMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDEyKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNDYsIDY2XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA0MCksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDQxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDE3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNSwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNDgsIDcwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDg3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgODgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgNDEpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCA0MikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNiwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTAsIDc0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDk4KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgOTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNywgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCA0NikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMTkpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAyMCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTcsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU0LCA3OF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxMDcpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAxMDgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjIpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDE4LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NiwgODJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgMTIwKSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDksIDQzKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxOSwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDE5LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1OCwgODZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTEzKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTE0KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDQ0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDQ1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDE3LCAyMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDksIDEzKSwgbmV3IEVDQl8xLmRlZmF1bHQoMTYsIDE0KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyMCwgSW50MzJBcnJheS5mcm9tKFs2LCAzNCwgNjIsIDkwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDEwNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDEwOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgzLCA0MSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCA0MikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDIxLCBJbnQzMkFycmF5LmZyb20oWzYsIDI4LCA1MCwgNzIsIDk0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgNDIpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDIyLCBJbnQzMkFycmF5LmZyb20oWzYsIDI2LCA1MCwgNzQsIDk4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDExMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNywgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNiwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMzQsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyMywgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTQsIDc4LCAxMDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIxKSwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgMTIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTQsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNiwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDI0LCBJbnQzMkFycmF5LmZyb20oWzYsIDI4LCA1NCwgODAsIDEwNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMTcpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMTgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTYsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMwLCAxNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE3KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyNSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMiwgNTgsIDg0LCAxMTBdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMTA2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTA3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDgsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjIsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMjYsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU4LCA4NiwgMTE0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAxMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxMTUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjgsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMzMsIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDI3LCBJbnQzMkFycmF5LmZyb20oWzYsIDM0LCA2MiwgOTAsIDExOF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAxMjIpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjIsIDQ1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMjMpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNiwgMjQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTIsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjgsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyOCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTAsIDc0LCA5OCwgMTIyXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDExNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAxMTgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgzMSwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzEsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyOSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTQsIDc4LCAxMDIsIDEyNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCAxMTYpLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCAxMTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjEsIDQ1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjMpLCBuZXcgRUNCXzEuZGVmYXVsdCgzNywgMjQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjYsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzMCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTIsIDc4LCAxMDQsIDEzMF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAxMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMTE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCA0NyksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCA0OCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNSwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjMsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjUsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzMSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTYsIDgyLCAxMDgsIDEzNF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxMywgMTE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjksIDQ3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQyLCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIzLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDI4LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzIsIEludDMyQXJyYXkuZnJvbShbNiwgMzQsIDYwLCA4NiwgMTEyLCAxMzhdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDExNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzUsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDM1LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzMsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU4LCA4NiwgMTE0LCAxNDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMSwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjksIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQ2LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzQsIEludDMyQXJyYXkuZnJvbShbNiwgMzQsIDYyLCA5MCwgMTE4LCAxNDZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNDQsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNywgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNTksIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDM1LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NCwgNzgsIDEwMiwgMTI2LCAxNTBdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTIsIDEyMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDEyMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxMiwgNDcpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNiwgNDgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMzksIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTQsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQxLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzYsIEludDMyQXJyYXkuZnJvbShbNiwgMjQsIDUwLCA3NiwgMTAyLCAxMjgsIDE1NF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMjEpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgMTIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzQsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQ2LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDY0LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzcsIEludDMyQXJyYXkuZnJvbShbNiwgMjgsIDU0LCA4MCwgMTA2LCAxMzIsIDE1OF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgMTIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIzKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDI5LCA0NiksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCA0NykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0OSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjQsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNDYsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzOCwgSW50MzJBcnJheS5mcm9tKFs2LCAzMiwgNTgsIDg0LCAxMTAsIDEzNiwgMTYyXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDEyMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDE4LCAxMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzIsIDQ3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQ4LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0MiwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgzMiwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDM5LCBJbnQzMkFycmF5LmZyb20oWzYsIDI2LCA1NCwgODIsIDExMCwgMTM4LCAxNjZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjAsIDExNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCg0MCwgNDcpLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCA0OCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0MywgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMiwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNjcsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbig0MCwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTgsIDg2LCAxMTQsIDE0MiwgMTcwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCAxMTgpLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTgsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzEsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDM0LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDM0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgyMCwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCg2MSwgMTYpKSkKCSAgICBdOwoJICAgIHJldHVybiBWZXJzaW9uOwoJfSgpKTsKCVZlcnNpb24kMS5kZWZhdWx0ID0gVmVyc2lvbjsKCgl2YXIgRGF0YU1hc2sgPSB7fTsKCgkoZnVuY3Rpb24gKGV4cG9ydHMpIHsKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJZXhwb3J0cy5EYXRhTWFza1ZhbHVlcyA9IHZvaWQgMDsKCXZhciBEYXRhTWFza1ZhbHVlczsKCShmdW5jdGlvbiAoRGF0YU1hc2tWYWx1ZXMpIHsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzAwMCJdID0gMF0gPSAiREFUQV9NQVNLXzAwMCI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18wMDEiXSA9IDFdID0gIkRBVEFfTUFTS18wMDEiOwoJICAgIERhdGFNYXNrVmFsdWVzW0RhdGFNYXNrVmFsdWVzWyJEQVRBX01BU0tfMDEwIl0gPSAyXSA9ICJEQVRBX01BU0tfMDEwIjsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzAxMSJdID0gM10gPSAiREFUQV9NQVNLXzAxMSI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18xMDAiXSA9IDRdID0gIkRBVEFfTUFTS18xMDAiOwoJICAgIERhdGFNYXNrVmFsdWVzW0RhdGFNYXNrVmFsdWVzWyJEQVRBX01BU0tfMTAxIl0gPSA1XSA9ICJEQVRBX01BU0tfMTAxIjsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzExMCJdID0gNl0gPSAiREFUQV9NQVNLXzExMCI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18xMTEiXSA9IDddID0gIkRBVEFfTUFTS18xMTEiOwoJfSkoRGF0YU1hc2tWYWx1ZXMgPSBleHBvcnRzLkRhdGFNYXNrVmFsdWVzIHx8IChleHBvcnRzLkRhdGFNYXNrVmFsdWVzID0ge30pKTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGRhdGEgbWFza3MgZm9yIHRoZSBkYXRhIGJpdHMgaW4gYSBRUiBjb2RlLCBwZXIgSVNPIDE4MDA0OjIwMDYgNi44LiBJbXBsZW1lbnRhdGlvbnMKCSAqIG9mIHRoaXMgY2xhc3MgY2FuIHVuLW1hc2sgYSByYXcgQml0TWF0cml4LiBGb3Igc2ltcGxpY2l0eSwgdGhleSB3aWxsIHVubWFzayB0aGUgZW50aXJlIEJpdE1hdHJpeCwKCSAqIGluY2x1ZGluZyBhcmVhcyB1c2VkIGZvciBmaW5kZXIgcGF0dGVybnMsIHRpbWluZyBwYXR0ZXJucywgZXRjLiBUaGVzZSBhcmVhcyBzaG91bGQgYmUgdW51c2VkCgkgKiBhZnRlciB0aGUgcG9pbnQgdGhleSBhcmUgdW5tYXNrZWQgYW55d2F5LjwvcD4KCSAqCgkgKiA8cD5Ob3RlIHRoYXQgdGhlIGRpYWdyYW0gaW4gc2VjdGlvbiA2LjguMSBpcyBtaXNsZWFkaW5nIHNpbmNlIGl0IGluZGljYXRlcyB0aGF0IGkgaXMgY29sdW1uIHBvc2l0aW9uCgkgKiBhbmQgaiBpcyByb3cgcG9zaXRpb24uIEluIGZhY3QsIGFzIHRoZSB0ZXh0IHNheXMsIGkgaXMgcm93IHBvc2l0aW9uIGFuZCBqIGlzIGNvbHVtbiBwb3NpdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERhdGFNYXNrID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8vIFNlZSBJU08gMTgwMDQ6MjAwNiA2LjguMQoJICAgIGZ1bmN0aW9uIERhdGFNYXNrKHZhbHVlLCBpc01hc2tlZCkgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuaXNNYXNrZWQgPSBpc01hc2tlZDsKCSAgICB9CgkgICAgLy8gRW5kIG9mIGVudW0gY29uc3RhbnRzLgoJICAgIC8qKgoJICAgICAqIDxwPkltcGxlbWVudGF0aW9ucyBvZiB0aGlzIG1ldGhvZCByZXZlcnNlIHRoZSBkYXRhIG1hc2tpbmcgcHJvY2VzcyBhcHBsaWVkIHRvIGEgUVIgQ29kZSBhbmQKCSAgICAgKiBtYWtlIGl0cyBiaXRzIHJlYWR5IHRvIHJlYWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGJpdHMgcmVwcmVzZW50YXRpb24gb2YgUVIgQ29kZSBiaXRzCgkgICAgICogQHBhcmFtIGRpbWVuc2lvbiBkaW1lbnNpb24gb2YgUVIgQ29kZSwgcmVwcmVzZW50ZWQgYnkgYml0cywgYmVpbmcgdW5tYXNrZWQKCSAgICAgKi8KCSAgICBEYXRhTWFzay5wcm90b3R5cGUudW5tYXNrQml0TWF0cml4ID0gZnVuY3Rpb24gKGJpdHMsIGRpbWVuc2lvbiAvKmludCovKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGltZW5zaW9uOyBpKyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgZGltZW5zaW9uOyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAodGhpcy5pc01hc2tlZChpLCBqKSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLmZsaXAoaiwgaSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBEYXRhTWFzay52YWx1ZXMgPSBuZXcgTWFwKFsKCSAgICAgICAgLyoqCgkgICAgICAgICAqIDAwMDogbWFzayBiaXRzIGZvciB3aGljaCAoeCArIHkpIG1vZCAyID09IDAKCSAgICAgICAgICovCgkgICAgICAgIFtEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMDAwLCBuZXcgRGF0YU1hc2soRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAwMCwgZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovKSB7IHJldHVybiAoKGkgKyBqKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAwMDE6IG1hc2sgYml0cyBmb3Igd2hpY2ggeCBtb2QgMiA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAwMSwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMDEsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKGkgJiAweDAxKSA9PT0gMDsgfSldLAoJICAgICAgICAvKioKCSAgICAgICAgICogMDEwOiBtYXNrIGJpdHMgZm9yIHdoaWNoIHkgbW9kIDMgPT0gMAoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMTAsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMDEwLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuIGogJSAzID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAwMTE6IG1hc2sgYml0cyBmb3Igd2hpY2ggKHggKyB5KSBtb2QgMyA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAxMSwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMTEsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKGkgKyBqKSAlIDMgPT09IDA7IH0pXSwKCSAgICAgICAgLyoqCgkgICAgICAgICAqIDEwMDogbWFzayBiaXRzIGZvciB3aGljaCAoeC8yICsgeS8zKSBtb2QgMiA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzEwMCwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMDAsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKChNYXRoLmZsb29yKGkgLyAyKSArIE1hdGguZmxvb3IoaiAvIDMpKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAxMDE6IG1hc2sgYml0cyBmb3Igd2hpY2ggeHkgbW9kIDIgKyB4eSBtb2QgMyA9PSAwCgkgICAgICAgICAqIGVxdWl2YWxlbnRseSwgc3VjaCB0aGF0IHh5IG1vZCA2ID09IDAKCSAgICAgICAgICovCgkgICAgICAgIFtEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTAxLCBuZXcgRGF0YU1hc2soRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzEwMSwgZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovKSB7IHJldHVybiAoaSAqIGopICUgNiA9PT0gMDsgfSldLAoJICAgICAgICAvKioKCSAgICAgICAgICogMTEwOiBtYXNrIGJpdHMgZm9yIHdoaWNoICh4eSBtb2QgMiArIHh5IG1vZCAzKSBtb2QgMiA9PSAwCgkgICAgICAgICAqIGVxdWl2YWxlbnRseSwgc3VjaCB0aGF0IHh5IG1vZCA2IDwgMwoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMTAsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTEwLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuICgoaSAqIGopICUgNikgPCAzOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAxMTE6IG1hc2sgYml0cyBmb3Igd2hpY2ggKCh4K3kpbW9kIDIgKyB4eSBtb2QgMykgbW9kIDIgPT0gMAoJICAgICAgICAgKiBlcXVpdmFsZW50bHksIHN1Y2ggdGhhdCAoeCArIHkgKyB4eSBtb2QgMykgbW9kIDIgPT0gMAoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMTEsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTExLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuICgoaSArIGogKyAoKGkgKiBqKSAlIDMpKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgXSk7CgkgICAgcmV0dXJuIERhdGFNYXNrOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IERhdGFNYXNrOwoKCX0oRGF0YU1hc2spKTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdE1hdHJpeFBhcnNlciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgVmVyc2lvbl8xJDEgPSBWZXJzaW9uJDE7Cgl2YXIgRm9ybWF0SW5mb3JtYXRpb25fMSA9IEZvcm1hdEluZm9ybWF0aW9uJDE7Cgl2YXIgRGF0YU1hc2tfMSA9IERhdGFNYXNrOwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xJDEgPSBGb3JtYXRFeGNlcHRpb24kMTsKCS8qKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEJpdE1hdHJpeFBhcnNlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYml0TWF0cml4IHtAbGluayBCaXRNYXRyaXh9IHRvIHBhcnNlCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgZGltZW5zaW9uIGlzIG5vdCA+PSAyMSBhbmQgMSBtb2QgNAoJICAgICAqLwoJICAgIGZ1bmN0aW9uIEJpdE1hdHJpeFBhcnNlcihiaXRNYXRyaXgpIHsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IGJpdE1hdHJpeC5nZXRIZWlnaHQoKTsKCSAgICAgICAgaWYgKGRpbWVuc2lvbiA8IDIxIHx8IChkaW1lbnNpb24gJiAweDAzKSAhPT0gMSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0TWF0cml4ID0gYml0TWF0cml4OwoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5SZWFkcyBmb3JtYXQgaW5mb3JtYXRpb24gZnJvbSBvbmUgb2YgaXRzIHR3byBsb2NhdGlvbnMgd2l0aGluIHRoZSBRUiBDb2RlLjwvcD4KCSAgICAgKgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEZvcm1hdEluZm9ybWF0aW9ufSBlbmNhcHN1bGF0aW5nIHRoZSBRUiBDb2RlJ3MgZm9ybWF0IGluZm8KCSAgICAgKiBAdGhyb3dzIEZvcm1hdEV4Y2VwdGlvbiBpZiBib3RoIGZvcm1hdCBpbmZvcm1hdGlvbiBsb2NhdGlvbnMgY2Fubm90IGJlIHBhcnNlZCBhcwoJICAgICAqIHRoZSB2YWxpZCBlbmNvZGluZyBvZiBmb3JtYXQgaW5mb3JtYXRpb24KCSAgICAgKi8KCSAgICBCaXRNYXRyaXhQYXJzZXIucHJvdG90eXBlLnJlYWRGb3JtYXRJbmZvcm1hdGlvbiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgaWYgKHRoaXMucGFyc2VkRm9ybWF0SW5mbyAhPT0gbnVsbCAmJiB0aGlzLnBhcnNlZEZvcm1hdEluZm8gIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VkRm9ybWF0SW5mbzsKCSAgICAgICAgfQoJICAgICAgICAvLyBSZWFkIHRvcC1sZWZ0IGZvcm1hdCBpbmZvIGJpdHMKCSAgICAgICAgdmFyIGZvcm1hdEluZm9CaXRzMSA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNjsgaSsrKSB7CgkgICAgICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoaSwgOCwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgfQoJICAgICAgICAvLyAuLiBhbmQgc2tpcCBhIGJpdCBpbiB0aGUgdGltaW5nIHBhdHRlcm4gLi4uCgkgICAgICAgIGZvcm1hdEluZm9CaXRzMSA9IHRoaXMuY29weUJpdCg3LCA4LCBmb3JtYXRJbmZvQml0czEpOwoJICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoOCwgOCwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgZm9ybWF0SW5mb0JpdHMxID0gdGhpcy5jb3B5Qml0KDgsIDcsIGZvcm1hdEluZm9CaXRzMSk7CgkgICAgICAgIC8vIC4uIGFuZCBza2lwIGEgYml0IGluIHRoZSB0aW1pbmcgcGF0dGVybiAuLi4KCSAgICAgICAgZm9yICh2YXIgaiA9IDU7IGogPj0gMDsgai0tKSB7CgkgICAgICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoOCwgaiwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBSZWFkIHRoZSB0b3AtcmlnaHQvYm90dG9tLWxlZnQgcGF0dGVybiB0b28KCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgZm9ybWF0SW5mb0JpdHMyID0gMDsKCSAgICAgICAgdmFyIGpNaW4gPSBkaW1lbnNpb24gLSA3OwoJICAgICAgICBmb3IgKHZhciBqID0gZGltZW5zaW9uIC0gMTsgaiA+PSBqTWluOyBqLS0pIHsKCSAgICAgICAgICAgIGZvcm1hdEluZm9CaXRzMiA9IHRoaXMuY29weUJpdCg4LCBqLCBmb3JtYXRJbmZvQml0czIpOwoJICAgICAgICB9CgkgICAgICAgIGZvciAodmFyIGkgPSBkaW1lbnNpb24gLSA4OyBpIDwgZGltZW5zaW9uOyBpKyspIHsKCSAgICAgICAgICAgIGZvcm1hdEluZm9CaXRzMiA9IHRoaXMuY29weUJpdChpLCA4LCBmb3JtYXRJbmZvQml0czIpOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMucGFyc2VkRm9ybWF0SW5mbyA9IEZvcm1hdEluZm9ybWF0aW9uXzEuZGVmYXVsdC5kZWNvZGVGb3JtYXRJbmZvcm1hdGlvbihmb3JtYXRJbmZvQml0czEsIGZvcm1hdEluZm9CaXRzMik7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZEZvcm1hdEluZm8gIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlZEZvcm1hdEluZm87CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+UmVhZHMgdmVyc2lvbiBpbmZvcm1hdGlvbiBmcm9tIG9uZSBvZiBpdHMgdHdvIGxvY2F0aW9ucyB3aXRoaW4gdGhlIFFSIENvZGUuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiB7QGxpbmsgVmVyc2lvbn0gZW5jYXBzdWxhdGluZyB0aGUgUVIgQ29kZSdzIHZlcnNpb24KCSAgICAgKiBAdGhyb3dzIEZvcm1hdEV4Y2VwdGlvbiBpZiBib3RoIHZlcnNpb24gaW5mb3JtYXRpb24gbG9jYXRpb25zIGNhbm5vdCBiZSBwYXJzZWQgYXMKCSAgICAgKiB0aGUgdmFsaWQgZW5jb2Rpbmcgb2YgdmVyc2lvbiBpbmZvcm1hdGlvbgoJICAgICAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUucmVhZFZlcnNpb24gPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZFZlcnNpb24gIT09IG51bGwgJiYgdGhpcy5wYXJzZWRWZXJzaW9uICE9PSB1bmRlZmluZWQpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgcHJvdmlzaW9uYWxWZXJzaW9uID0gTWF0aC5mbG9vcigoZGltZW5zaW9uIC0gMTcpIC8gNCk7CgkgICAgICAgIGlmIChwcm92aXNpb25hbFZlcnNpb24gPD0gNikgewoJICAgICAgICAgICAgcmV0dXJuIFZlcnNpb25fMSQxLmRlZmF1bHQuZ2V0VmVyc2lvbkZvck51bWJlcihwcm92aXNpb25hbFZlcnNpb24pOwoJICAgICAgICB9CgkgICAgICAgIC8vIFJlYWQgdG9wLXJpZ2h0IHZlcnNpb24gaW5mbzogMyB3aWRlIGJ5IDYgdGFsbAoJICAgICAgICB2YXIgdmVyc2lvbkJpdHMgPSAwOwoJICAgICAgICB2YXIgaWpNaW4gPSBkaW1lbnNpb24gLSAxMTsKCSAgICAgICAgZm9yICh2YXIgaiA9IDU7IGogPj0gMDsgai0tKSB7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gZGltZW5zaW9uIC0gOTsgaSA+PSBpak1pbjsgaS0tKSB7CgkgICAgICAgICAgICAgICAgdmVyc2lvbkJpdHMgPSB0aGlzLmNvcHlCaXQoaSwgaiwgdmVyc2lvbkJpdHMpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciB0aGVQYXJzZWRWZXJzaW9uID0gVmVyc2lvbl8xJDEuZGVmYXVsdC5kZWNvZGVWZXJzaW9uSW5mb3JtYXRpb24odmVyc2lvbkJpdHMpOwoJICAgICAgICBpZiAodGhlUGFyc2VkVmVyc2lvbiAhPT0gbnVsbCAmJiB0aGVQYXJzZWRWZXJzaW9uLmdldERpbWVuc2lvbkZvclZlcnNpb24oKSA9PT0gZGltZW5zaW9uKSB7CgkgICAgICAgICAgICB0aGlzLnBhcnNlZFZlcnNpb24gPSB0aGVQYXJzZWRWZXJzaW9uOwoJICAgICAgICAgICAgcmV0dXJuIHRoZVBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgLy8gSG1tLCBmYWlsZWQuIFRyeSBib3R0b20gbGVmdDogNiB3aWRlIGJ5IDMgdGFsbAoJICAgICAgICB2ZXJzaW9uQml0cyA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSA1OyBpID49IDA7IGktLSkgewoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IGRpbWVuc2lvbiAtIDk7IGogPj0gaWpNaW47IGotLSkgewoJICAgICAgICAgICAgICAgIHZlcnNpb25CaXRzID0gdGhpcy5jb3B5Qml0KGksIGosIHZlcnNpb25CaXRzKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICB0aGVQYXJzZWRWZXJzaW9uID0gVmVyc2lvbl8xJDEuZGVmYXVsdC5kZWNvZGVWZXJzaW9uSW5mb3JtYXRpb24odmVyc2lvbkJpdHMpOwoJICAgICAgICBpZiAodGhlUGFyc2VkVmVyc2lvbiAhPT0gbnVsbCAmJiB0aGVQYXJzZWRWZXJzaW9uLmdldERpbWVuc2lvbkZvclZlcnNpb24oKSA9PT0gZGltZW5zaW9uKSB7CgkgICAgICAgICAgICB0aGlzLnBhcnNlZFZlcnNpb24gPSB0aGVQYXJzZWRWZXJzaW9uOwoJICAgICAgICAgICAgcmV0dXJuIHRoZVBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgQml0TWF0cml4UGFyc2VyLnByb3RvdHlwZS5jb3B5Qml0ID0gZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovLCB2ZXJzaW9uQml0cyAvKmludCovKSB7CgkgICAgICAgIHZhciBiaXQgPSB0aGlzLmlzTWlycm9yID8gdGhpcy5iaXRNYXRyaXguZ2V0KGosIGkpIDogdGhpcy5iaXRNYXRyaXguZ2V0KGksIGopOwoJICAgICAgICByZXR1cm4gYml0ID8gKHZlcnNpb25CaXRzIDw8IDEpIHwgMHgxIDogdmVyc2lvbkJpdHMgPDwgMTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlJlYWRzIHRoZSBiaXRzIGluIHRoZSB7QGxpbmsgQml0TWF0cml4fSByZXByZXNlbnRpbmcgdGhlIGZpbmRlciBwYXR0ZXJuIGluIHRoZQoJICAgICAqIGNvcnJlY3Qgb3JkZXIgaW4gb3JkZXIgdG8gcmVjb25zdHJ1Y3QgdGhlIGNvZGV3b3JkcyBieXRlcyBjb250YWluZWQgd2l0aGluIHRoZQoJICAgICAqIFFSIENvZGUuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiBieXRlcyBlbmNvZGVkIHdpdGhpbiB0aGUgUVIgQ29kZQoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIHRoZSBleGFjdCBudW1iZXIgb2YgYnl0ZXMgZXhwZWN0ZWQgaXMgbm90IHJlYWQKCSAgICAgKi8KCSAgICBCaXRNYXRyaXhQYXJzZXIucHJvdG90eXBlLnJlYWRDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBmb3JtYXRJbmZvID0gdGhpcy5yZWFkRm9ybWF0SW5mb3JtYXRpb24oKTsKCSAgICAgICAgdmFyIHZlcnNpb24gPSB0aGlzLnJlYWRWZXJzaW9uKCk7CgkgICAgICAgIC8vIEdldCB0aGUgZGF0YSBtYXNrIGZvciB0aGUgZm9ybWF0IHVzZWQgaW4gdGhpcyBRUiBDb2RlLiBUaGlzIHdpbGwgZXhjbHVkZQoJICAgICAgICAvLyBzb21lIGJpdHMgZnJvbSByZWFkaW5nIGFzIHdlIHdpbmQgdGhyb3VnaCB0aGUgYml0IG1hdHJpeC4KCSAgICAgICAgdmFyIGRhdGFNYXNrID0gRGF0YU1hc2tfMS5kZWZhdWx0LnZhbHVlcy5nZXQoZm9ybWF0SW5mby5nZXREYXRhTWFzaygpKTsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICBkYXRhTWFzay51bm1hc2tCaXRNYXRyaXgodGhpcy5iaXRNYXRyaXgsIGRpbWVuc2lvbik7CgkgICAgICAgIHZhciBmdW5jdGlvblBhdHRlcm4gPSB2ZXJzaW9uLmJ1aWxkRnVuY3Rpb25QYXR0ZXJuKCk7CgkgICAgICAgIHZhciByZWFkaW5nVXAgPSB0cnVlOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFVpbnQ4QXJyYXkodmVyc2lvbi5nZXRUb3RhbENvZGV3b3JkcygpKTsKCSAgICAgICAgdmFyIHJlc3VsdE9mZnNldCA9IDA7CgkgICAgICAgIHZhciBjdXJyZW50Qnl0ZSA9IDA7CgkgICAgICAgIHZhciBiaXRzUmVhZCA9IDA7CgkgICAgICAgIC8vIFJlYWQgY29sdW1ucyBpbiBwYWlycywgZnJvbSByaWdodCB0byBsZWZ0CgkgICAgICAgIGZvciAodmFyIGogPSBkaW1lbnNpb24gLSAxOyBqID4gMDsgaiAtPSAyKSB7CgkgICAgICAgICAgICBpZiAoaiA9PT0gNikgewoJICAgICAgICAgICAgICAgIC8vIFNraXAgd2hvbGUgY29sdW1uIHdpdGggdmVydGljYWwgYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgICAgICAgICAgICAvLyBzYXZlcyB0aW1lIGFuZCBtYWtlcyB0aGUgb3RoZXIgY29kZSBwcm9jZWVkIG1vcmUgY2xlYW5seQoJICAgICAgICAgICAgICAgIGotLTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIC8vIFJlYWQgYWx0ZXJuYXRpbmdseSBmcm9tIGJvdHRvbSB0byB0b3AgdGhlbiB0b3AgdG8gYm90dG9tCgkgICAgICAgICAgICBmb3IgKHZhciBjb3VudCA9IDA7IGNvdW50IDwgZGltZW5zaW9uOyBjb3VudCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGkgPSByZWFkaW5nVXAgPyBkaW1lbnNpb24gLSAxIC0gY291bnQgOiBjb3VudDsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBjb2wgPSAwOyBjb2wgPCAyOyBjb2wrKykgewoJICAgICAgICAgICAgICAgICAgICAvLyBJZ25vcmUgYml0cyBjb3ZlcmVkIGJ5IHRoZSBmdW5jdGlvbiBwYXR0ZXJuCgkgICAgICAgICAgICAgICAgICAgIGlmICghZnVuY3Rpb25QYXR0ZXJuLmdldChqIC0gY29sLCBpKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVhZCBhIGJpdAoJICAgICAgICAgICAgICAgICAgICAgICAgYml0c1JlYWQrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRCeXRlIDw8PSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYml0TWF0cml4LmdldChqIC0gY29sLCBpKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRCeXRlIHw9IDE7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB3ZSd2ZSBtYWRlIGEgd2hvbGUgYnl0ZSwgc2F2ZSBpdCBvZmYKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChiaXRzUmVhZCA9PT0gOCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFtyZXN1bHRPZmZzZXQrK10gPSAvKihieXRlKSAqLyBjdXJyZW50Qnl0ZTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBiaXRzUmVhZCA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEJ5dGUgPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVhZGluZ1VwID0gIXJlYWRpbmdVcDsgLy8gcmVhZGluZ1VwIF49IHRydWU7IC8vIHJlYWRpbmdVcCA9ICFyZWFkaW5nVXA7IC8vIHN3aXRjaCBkaXJlY3Rpb25zCgkgICAgICAgIH0KCSAgICAgICAgaWYgKHJlc3VsdE9mZnNldCAhPT0gdmVyc2lvbi5nZXRUb3RhbENvZGV3b3JkcygpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEkMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldmVydCB0aGUgbWFzayByZW1vdmFsIGRvbmUgd2hpbGUgcmVhZGluZyB0aGUgY29kZSB3b3Jkcy4gVGhlIGJpdCBtYXRyaXggc2hvdWxkIHJldmVydCB0byBpdHMgb3JpZ2luYWwgc3RhdGUuCgkgICAgICovCgkgICAgQml0TWF0cml4UGFyc2VyLnByb3RvdHlwZS5yZW1hc2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZEZvcm1hdEluZm8gPT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybjsgLy8gV2UgaGF2ZSBubyBmb3JtYXQgaW5mb3JtYXRpb24sIGFuZCBoYXZlIG5vIGRhdGEgbWFzawoJICAgICAgICB9CgkgICAgICAgIHZhciBkYXRhTWFzayA9IERhdGFNYXNrXzEuZGVmYXVsdC52YWx1ZXNbdGhpcy5wYXJzZWRGb3JtYXRJbmZvLmdldERhdGFNYXNrKCldOwoJICAgICAgICB2YXIgZGltZW5zaW9uID0gdGhpcy5iaXRNYXRyaXguZ2V0SGVpZ2h0KCk7CgkgICAgICAgIGRhdGFNYXNrLnVubWFza0JpdE1hdHJpeCh0aGlzLmJpdE1hdHJpeCwgZGltZW5zaW9uKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFByZXBhcmUgdGhlIHBhcnNlciBmb3IgYSBtaXJyb3JlZCBvcGVyYXRpb24uCgkgICAgICogVGhpcyBmbGFnIGhhcyBlZmZlY3Qgb25seSBvbiB0aGUge0BsaW5rICNyZWFkRm9ybWF0SW5mb3JtYXRpb24oKX0gYW5kIHRoZQoJICAgICAqIHtAbGluayAjcmVhZFZlcnNpb24oKX0uIEJlZm9yZSBwcm9jZWVkaW5nIHdpdGgge0BsaW5rICNyZWFkQ29kZXdvcmRzKCl9IHRoZQoJICAgICAqIHtAbGluayAjbWlycm9yKCl9IG1ldGhvZCBzaG91bGQgYmUgY2FsbGVkLgoJICAgICAqCgkgICAgICogQHBhcmFtIG1pcnJvciBXaGV0aGVyIHRvIHJlYWQgdmVyc2lvbiBhbmQgZm9ybWF0IGluZm9ybWF0aW9uIG1pcnJvcmVkLgoJICAgICAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUuc2V0TWlycm9yID0gZnVuY3Rpb24gKGlzTWlycm9yKSB7CgkgICAgICAgIHRoaXMucGFyc2VkVmVyc2lvbiA9IG51bGw7CgkgICAgICAgIHRoaXMucGFyc2VkRm9ybWF0SW5mbyA9IG51bGw7CgkgICAgICAgIHRoaXMuaXNNaXJyb3IgPSBpc01pcnJvcjsKCSAgICB9OwoJICAgIC8qKiBNaXJyb3IgdGhlIGJpdCBtYXRyaXggaW4gb3JkZXIgdG8gYXR0ZW1wdCBhIHNlY29uZCByZWFkaW5nLiAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUubWlycm9yID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgYml0TWF0cml4ID0gdGhpcy5iaXRNYXRyaXg7CgkgICAgICAgIGZvciAodmFyIHggPSAwLCB3aWR0aCA9IGJpdE1hdHJpeC5nZXRXaWR0aCgpOyB4IDwgd2lkdGg7IHgrKykgewoJICAgICAgICAgICAgZm9yICh2YXIgeSA9IHggKyAxLCBoZWlnaHQgPSBiaXRNYXRyaXguZ2V0SGVpZ2h0KCk7IHkgPCBoZWlnaHQ7IHkrKykgewoJICAgICAgICAgICAgICAgIGlmIChiaXRNYXRyaXguZ2V0KHgsIHkpICE9PSBiaXRNYXRyaXguZ2V0KHksIHgpKSB7CgkgICAgICAgICAgICAgICAgICAgIGJpdE1hdHJpeC5mbGlwKHksIHgpOwoJICAgICAgICAgICAgICAgICAgICBiaXRNYXRyaXguZmxpcCh4LCB5KTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHJldHVybiBCaXRNYXRyaXhQYXJzZXI7Cgl9KCkpOwoJQml0TWF0cml4UGFyc2VyJDEuZGVmYXVsdCA9IEJpdE1hdHJpeFBhcnNlcjsKCgl2YXIgRGF0YUJsb2NrJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDMgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGF0YUJsb2NrJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQxID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIGJsb2NrIG9mIGRhdGEgd2l0aGluIGEgUVIgQ29kZS4gUVIgQ29kZXMgbWF5IHNwbGl0IHRoZWlyIGRhdGEgaW50bwoJICogbXVsdGlwbGUgYmxvY2tzLCBlYWNoIG9mIHdoaWNoIGlzIGEgdW5pdCBvZiBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3Jkcy4gRWFjaAoJICogaXMgcmVwcmVzZW50ZWQgYnkgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERhdGFCbG9jayA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBEYXRhQmxvY2sobnVtRGF0YUNvZGV3b3JkcyAvKmludCovLCBjb2Rld29yZHMpIHsKCSAgICAgICAgdGhpcy5udW1EYXRhQ29kZXdvcmRzID0gbnVtRGF0YUNvZGV3b3JkczsKCSAgICAgICAgdGhpcy5jb2Rld29yZHMgPSBjb2Rld29yZHM7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIDxwPldoZW4gUVIgQ29kZXMgdXNlIG11bHRpcGxlIGRhdGEgYmxvY2tzLCB0aGV5IGFyZSBhY3R1YWxseSBpbnRlcmxlYXZlZC4KCSAgICAgKiBUaGF0IGlzLCB0aGUgZmlyc3QgYnl0ZSBvZiBkYXRhIGJsb2NrIDEgdG8gbiBpcyB3cml0dGVuLCB0aGVuIHRoZSBzZWNvbmQgYnl0ZXMsIGFuZCBzbyBvbi4gVGhpcwoJICAgICAqIG1ldGhvZCB3aWxsIHNlcGFyYXRlIHRoZSBkYXRhIGludG8gb3JpZ2luYWwgYmxvY2tzLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSByYXdDb2Rld29yZHMgYnl0ZXMgYXMgcmVhZCBkaXJlY3RseSBmcm9tIHRoZSBRUiBDb2RlCgkgICAgICogQHBhcmFtIHZlcnNpb24gdmVyc2lvbiBvZiB0aGUgUVIgQ29kZQoJICAgICAqIEBwYXJhbSBlY0xldmVsIGVycm9yLWNvcnJlY3Rpb24gbGV2ZWwgb2YgdGhlIFFSIENvZGUKCSAgICAgKiBAcmV0dXJuIERhdGFCbG9ja3MgY29udGFpbmluZyBvcmlnaW5hbCBieXRlcywgImRlLWludGVybGVhdmVkIiBmcm9tIHJlcHJlc2VudGF0aW9uIGluIHRoZQoJICAgICAqICAgICAgICAgUVIgQ29kZQoJICAgICAqLwoJICAgIERhdGFCbG9jay5nZXREYXRhQmxvY2tzID0gZnVuY3Rpb24gKHJhd0NvZGV3b3JkcywgdmVyc2lvbiwgZWNMZXZlbCkgewoJICAgICAgICB2YXIgZV8xLCBfYSwgZV8yLCBfYjsKCSAgICAgICAgaWYgKHJhd0NvZGV3b3Jkcy5sZW5ndGggIT09IHZlcnNpb24uZ2V0VG90YWxDb2Rld29yZHMoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEZpZ3VyZSBvdXQgdGhlIG51bWJlciBhbmQgc2l6ZSBvZiBkYXRhIGJsb2NrcyB1c2VkIGJ5IHRoaXMgdmVyc2lvbiBhbmQKCSAgICAgICAgLy8gZXJyb3IgY29ycmVjdGlvbiBsZXZlbAoJICAgICAgICB2YXIgZWNCbG9ja3MgPSB2ZXJzaW9uLmdldEVDQmxvY2tzRm9yTGV2ZWwoZWNMZXZlbCk7CgkgICAgICAgIC8vIEZpcnN0IGNvdW50IHRoZSB0b3RhbCBudW1iZXIgb2YgZGF0YSBibG9ja3MKCSAgICAgICAgdmFyIHRvdGFsQmxvY2tzID0gMDsKCSAgICAgICAgdmFyIGVjQmxvY2tBcnJheSA9IGVjQmxvY2tzLmdldEVDQmxvY2tzKCk7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICBmb3IgKHZhciBlY0Jsb2NrQXJyYXlfMSA9IF9fdmFsdWVzJDMoZWNCbG9ja0FycmF5KSwgZWNCbG9ja0FycmF5XzFfMSA9IGVjQmxvY2tBcnJheV8xLm5leHQoKTsgIWVjQmxvY2tBcnJheV8xXzEuZG9uZTsgZWNCbG9ja0FycmF5XzFfMSA9IGVjQmxvY2tBcnJheV8xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgIHZhciBlY0Jsb2NrID0gZWNCbG9ja0FycmF5XzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbEJsb2NrcyArPSBlY0Jsb2NrLmdldENvdW50KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChlY0Jsb2NrQXJyYXlfMV8xICYmICFlY0Jsb2NrQXJyYXlfMV8xLmRvbmUgJiYgKF9hID0gZWNCbG9ja0FycmF5XzEucmV0dXJuKSkgX2EuY2FsbChlY0Jsb2NrQXJyYXlfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTm93IGVzdGFibGlzaCBEYXRhQmxvY2tzIG9mIHRoZSBhcHByb3ByaWF0ZSBzaXplIGFuZCBudW1iZXIgb2YgZGF0YSBjb2Rld29yZHMKCSAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBBcnJheSh0b3RhbEJsb2Nrcyk7CgkgICAgICAgIHZhciBudW1SZXN1bHRCbG9ja3MgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgZWNCbG9ja0FycmF5XzIgPSBfX3ZhbHVlcyQzKGVjQmxvY2tBcnJheSksIGVjQmxvY2tBcnJheV8yXzEgPSBlY0Jsb2NrQXJyYXlfMi5uZXh0KCk7ICFlY0Jsb2NrQXJyYXlfMl8xLmRvbmU7IGVjQmxvY2tBcnJheV8yXzEgPSBlY0Jsb2NrQXJyYXlfMi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZWNCbG9jayA9IGVjQmxvY2tBcnJheV8yXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlY0Jsb2NrLmdldENvdW50KCk7IGkrKykgewoJICAgICAgICAgICAgICAgICAgICB2YXIgbnVtRGF0YUNvZGV3b3JkcyA9IGVjQmxvY2suZ2V0RGF0YUNvZGV3b3JkcygpOwoJICAgICAgICAgICAgICAgICAgICB2YXIgbnVtQmxvY2tDb2Rld29yZHMgPSBlY0Jsb2Nrcy5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCkgKyBudW1EYXRhQ29kZXdvcmRzOwoJICAgICAgICAgICAgICAgICAgICByZXN1bHRbbnVtUmVzdWx0QmxvY2tzKytdID0gbmV3IERhdGFCbG9jayhudW1EYXRhQ29kZXdvcmRzLCBuZXcgVWludDhBcnJheShudW1CbG9ja0NvZGV3b3JkcykpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8yXzEpIHsgZV8yID0geyBlcnJvcjogZV8yXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGVjQmxvY2tBcnJheV8yXzEgJiYgIWVjQmxvY2tBcnJheV8yXzEuZG9uZSAmJiAoX2IgPSBlY0Jsb2NrQXJyYXlfMi5yZXR1cm4pKSBfYi5jYWxsKGVjQmxvY2tBcnJheV8yKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8yKSB0aHJvdyBlXzIuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICAvLyBBbGwgYmxvY2tzIGhhdmUgdGhlIHNhbWUgYW1vdW50IG9mIGRhdGEsIGV4Y2VwdCB0aGF0IHRoZSBsYXN0IG4KCSAgICAgICAgLy8gKHdoZXJlIG4gbWF5IGJlIDApIGhhdmUgMSBtb3JlIGJ5dGUuIEZpZ3VyZSBvdXQgd2hlcmUgdGhlc2Ugc3RhcnQuCgkgICAgICAgIHZhciBzaG9ydGVyQmxvY2tzVG90YWxDb2Rld29yZHMgPSByZXN1bHRbMF0uY29kZXdvcmRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGxvbmdlckJsb2Nrc1N0YXJ0QXQgPSByZXN1bHQubGVuZ3RoIC0gMTsKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IGNoZWNrIGxlbmd0aCBpcyBjb3JyZWN0IGhlcmUKCSAgICAgICAgd2hpbGUgKGxvbmdlckJsb2Nrc1N0YXJ0QXQgPj0gMCkgewoJICAgICAgICAgICAgdmFyIG51bUNvZGV3b3JkcyA9IHJlc3VsdFtsb25nZXJCbG9ja3NTdGFydEF0XS5jb2Rld29yZHMubGVuZ3RoOwoJICAgICAgICAgICAgaWYgKG51bUNvZGV3b3JkcyA9PT0gc2hvcnRlckJsb2Nrc1RvdGFsQ29kZXdvcmRzKSB7CgkgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBsb25nZXJCbG9ja3NTdGFydEF0LS07CgkgICAgICAgIH0KCSAgICAgICAgbG9uZ2VyQmxvY2tzU3RhcnRBdCsrOwoJICAgICAgICB2YXIgc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHMgPSBzaG9ydGVyQmxvY2tzVG90YWxDb2Rld29yZHMgLSBlY0Jsb2Nrcy5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCk7CgkgICAgICAgIC8vIFRoZSBsYXN0IGVsZW1lbnRzIG9mIHJlc3VsdCBtYXkgYmUgMSBlbGVtZW50IGxvbmdlcgoJICAgICAgICAvLyBmaXJzdCBmaWxsIG91dCBhcyBtYW55IGVsZW1lbnRzIGFzIGFsbCBvZiB0aGVtIGhhdmUKCSAgICAgICAgdmFyIHJhd0NvZGV3b3Jkc09mZnNldCA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHM7IGkrKykgewoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBudW1SZXN1bHRCbG9ja3M7IGorKykgewoJICAgICAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbaV0gPSByYXdDb2Rld29yZHNbcmF3Q29kZXdvcmRzT2Zmc2V0KytdOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIEZpbGwgb3V0IHRoZSBsYXN0IGRhdGEgYmxvY2sgaW4gdGhlIGxvbmdlciBvbmVzCgkgICAgICAgIGZvciAodmFyIGogPSBsb25nZXJCbG9ja3NTdGFydEF0OyBqIDwgbnVtUmVzdWx0QmxvY2tzOyBqKyspIHsKCSAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHNdID0gcmF3Q29kZXdvcmRzW3Jhd0NvZGV3b3Jkc09mZnNldCsrXTsKCSAgICAgICAgfQoJICAgICAgICAvLyBOb3cgYWRkIGluIGVycm9yIGNvcnJlY3Rpb24gYmxvY2tzCgkgICAgICAgIHZhciBtYXggPSByZXN1bHRbMF0uY29kZXdvcmRzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IHNob3J0ZXJCbG9ja3NOdW1EYXRhQ29kZXdvcmRzOyBpIDwgbWF4OyBpKyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbnVtUmVzdWx0QmxvY2tzOyBqKyspIHsKCSAgICAgICAgICAgICAgICB2YXIgaU9mZnNldCA9IGogPCBsb25nZXJCbG9ja3NTdGFydEF0ID8gaSA6IGkgKyAxOwoJICAgICAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbaU9mZnNldF0gPSByYXdDb2Rld29yZHNbcmF3Q29kZXdvcmRzT2Zmc2V0KytdOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgfTsKCSAgICBEYXRhQmxvY2sucHJvdG90eXBlLmdldE51bURhdGFDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm51bURhdGFDb2Rld29yZHM7CgkgICAgfTsKCSAgICBEYXRhQmxvY2sucHJvdG90eXBlLmdldENvZGV3b3JkcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY29kZXdvcmRzOwoJICAgIH07CgkgICAgcmV0dXJuIERhdGFCbG9jazsKCX0oKSk7CglEYXRhQmxvY2skMS5kZWZhdWx0ID0gRGF0YUJsb2NrOwoKCXZhciBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEgPSB7fTsKCgl2YXIgQml0U291cmNlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdFNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbiB7Ki8KCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5UaGlzIHByb3ZpZGVzIGFuIGVhc3kgYWJzdHJhY3Rpb24gdG8gcmVhZCBiaXRzIGF0IGEgdGltZSBmcm9tIGEgc2VxdWVuY2Ugb2YgYnl0ZXMsIHdoZXJlIHRoZQoJICogbnVtYmVyIG9mIGJpdHMgcmVhZCBpcyBub3Qgb2Z0ZW4gYSBtdWx0aXBsZSBvZiA4LjwvcD4KCSAqCgkgKiA8cD5UaGlzIGNsYXNzIGlzIHRocmVhZC1zYWZlIGJ1dCBub3QgcmVlbnRyYW50IC0tIHVubGVzcyB0aGUgY2FsbGVyIG1vZGlmaWVzIHRoZSBieXRlcyBhcnJheQoJICogaXQgcGFzc2VkIGluLCBpbiB3aGljaCBjYXNlIGFsbCBiZXRzIGFyZSBvZmYuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBCaXRTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJ5dGVzIGJ5dGVzIGZyb20gd2hpY2ggdGhpcyB3aWxsIHJlYWQgYml0cy4gQml0cyB3aWxsIGJlIHJlYWQgZnJvbSB0aGUgZmlyc3QgYnl0ZSBmaXJzdC4KCSAgICAgKiBCaXRzIGFyZSByZWFkIHdpdGhpbiBhIGJ5dGUgZnJvbSBtb3N0LXNpZ25pZmljYW50IHRvIGxlYXN0LXNpZ25pZmljYW50IGJpdC4KCSAgICAgKi8KCSAgICBmdW5jdGlvbiBCaXRTb3VyY2UoYnl0ZXMpIHsKCSAgICAgICAgdGhpcy5ieXRlcyA9IGJ5dGVzOwoJICAgICAgICB0aGlzLmJ5dGVPZmZzZXQgPSAwOwoJICAgICAgICB0aGlzLmJpdE9mZnNldCA9IDA7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaW5kZXggb2YgbmV4dCBiaXQgaW4gY3VycmVudCBieXRlIHdoaWNoIHdvdWxkIGJlIHJlYWQgYnkgdGhlIG5leHQgY2FsbCB0byB7QGxpbmsgI3JlYWRCaXRzKGludCl9LgoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuZ2V0Qml0T2Zmc2V0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRPZmZzZXQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIG5leHQgYnl0ZSBpbiBpbnB1dCBieXRlIGFycmF5IHdoaWNoIHdvdWxkIGJlIHJlYWQgYnkgdGhlIG5leHQgY2FsbCB0byB7QGxpbmsgI3JlYWRCaXRzKGludCl9LgoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuZ2V0Qnl0ZU9mZnNldCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYnl0ZU9mZnNldDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBudW1CaXRzIG51bWJlciBvZiBiaXRzIHRvIHJlYWQKCSAgICAgKiBAcmV0dXJuIGludCByZXByZXNlbnRpbmcgdGhlIGJpdHMgcmVhZC4gVGhlIGJpdHMgd2lsbCBhcHBlYXIgYXMgdGhlIGxlYXN0LXNpZ25pZmljYW50CgkgICAgICogICAgICAgICBiaXRzIG9mIHRoZSBpbnQKCSAgICAgKiBAdGhyb3dzIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiBpZiBudW1CaXRzIGlzbid0IGluIFsxLDMyXSBvciBtb3JlIHRoYW4gaXMgYXZhaWxhYmxlCgkgICAgICovCgkgICAgQml0U291cmNlLnByb3RvdHlwZS5yZWFkQml0cyA9IGZ1bmN0aW9uIChudW1CaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKG51bUJpdHMgPCAxIHx8IG51bUJpdHMgPiAzMiB8fCBudW1CaXRzID4gdGhpcy5hdmFpbGFibGUoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xLmRlZmF1bHQoJycgKyBudW1CaXRzKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcmVzdWx0ID0gMDsKCSAgICAgICAgdmFyIGJpdE9mZnNldCA9IHRoaXMuYml0T2Zmc2V0OwoJICAgICAgICB2YXIgYnl0ZU9mZnNldCA9IHRoaXMuYnl0ZU9mZnNldDsKCSAgICAgICAgdmFyIGJ5dGVzID0gdGhpcy5ieXRlczsKCSAgICAgICAgLy8gRmlyc3QsIHJlYWQgcmVtYWluZGVyIGZyb20gY3VycmVudCBieXRlCgkgICAgICAgIGlmIChiaXRPZmZzZXQgPiAwKSB7CgkgICAgICAgICAgICB2YXIgYml0c0xlZnQgPSA4IC0gYml0T2Zmc2V0OwoJICAgICAgICAgICAgdmFyIHRvUmVhZCA9IG51bUJpdHMgPCBiaXRzTGVmdCA/IG51bUJpdHMgOiBiaXRzTGVmdDsKCSAgICAgICAgICAgIHZhciBiaXRzVG9Ob3RSZWFkID0gYml0c0xlZnQgLSB0b1JlYWQ7CgkgICAgICAgICAgICB2YXIgbWFzayA9ICgweEZGID4+ICg4IC0gdG9SZWFkKSkgPDwgYml0c1RvTm90UmVhZDsKCSAgICAgICAgICAgIHJlc3VsdCA9IChieXRlc1tieXRlT2Zmc2V0XSAmIG1hc2spID4+IGJpdHNUb05vdFJlYWQ7CgkgICAgICAgICAgICBudW1CaXRzIC09IHRvUmVhZDsKCSAgICAgICAgICAgIGJpdE9mZnNldCArPSB0b1JlYWQ7CgkgICAgICAgICAgICBpZiAoYml0T2Zmc2V0ID09PSA4KSB7CgkgICAgICAgICAgICAgICAgYml0T2Zmc2V0ID0gMDsKCSAgICAgICAgICAgICAgICBieXRlT2Zmc2V0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTmV4dCByZWFkIHdob2xlIGJ5dGVzCgkgICAgICAgIGlmIChudW1CaXRzID4gMCkgewoJICAgICAgICAgICAgd2hpbGUgKG51bUJpdHMgPj0gOCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdCA9IChyZXN1bHQgPDwgOCkgfCAoYnl0ZXNbYnl0ZU9mZnNldF0gJiAweEZGKTsKCSAgICAgICAgICAgICAgICBieXRlT2Zmc2V0Kys7CgkgICAgICAgICAgICAgICAgbnVtQml0cyAtPSA4OwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgLy8gRmluYWxseSByZWFkIGEgcGFydGlhbCBieXRlCgkgICAgICAgICAgICBpZiAobnVtQml0cyA+IDApIHsKCSAgICAgICAgICAgICAgICB2YXIgYml0c1RvTm90UmVhZCA9IDggLSBudW1CaXRzOwoJICAgICAgICAgICAgICAgIHZhciBtYXNrID0gKDB4RkYgPj4gYml0c1RvTm90UmVhZCkgPDwgYml0c1RvTm90UmVhZDsKCSAgICAgICAgICAgICAgICByZXN1bHQgPSAocmVzdWx0IDw8IG51bUJpdHMpIHwgKChieXRlc1tieXRlT2Zmc2V0XSAmIG1hc2spID4+IGJpdHNUb05vdFJlYWQpOwoJICAgICAgICAgICAgICAgIGJpdE9mZnNldCArPSBudW1CaXRzOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0T2Zmc2V0ID0gYml0T2Zmc2V0OwoJICAgICAgICB0aGlzLmJ5dGVPZmZzZXQgPSBieXRlT2Zmc2V0OwoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgYml0cyB0aGF0IGNhbiBiZSByZWFkIHN1Y2Nlc3NmdWxseQoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuYXZhaWxhYmxlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gOCAqICh0aGlzLmJ5dGVzLmxlbmd0aCAtIHRoaXMuYnl0ZU9mZnNldCkgLSB0aGlzLmJpdE9mZnNldDsKCSAgICB9OwoJICAgIHJldHVybiBCaXRTb3VyY2U7Cgl9KCkpOwoJQml0U291cmNlJDEuZGVmYXVsdCA9IEJpdFNvdXJjZTsKCgl2YXIgRGVjb2RlclJlc3VsdCQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShEZWNvZGVyUmVzdWx0JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkxpc3Q7Ki8KCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGVjb2RpbmcgYSBtYXRyaXggb2YgYml0cy4gVGhpcyB0eXBpY2FsbHkKCSAqIGFwcGxpZXMgdG8gMkQgYmFyY29kZSBmb3JtYXRzLiBGb3Igbm93IGl0IGNvbnRhaW5zIHRoZSByYXcgYnl0ZXMgb2J0YWluZWQsCgkgKiBhcyB3ZWxsIGFzIGEgU3RyaW5nIGludGVycHJldGF0aW9uIG9mIHRob3NlIGJ5dGVzLCBpZiBhcHBsaWNhYmxlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGVjb2RlclJlc3VsdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IocmF3Qnl0ZXM6IFVpbnQ4QXJyYXksCgkgICAgLy8gICAgICAgICAgICAgICAgICAgICAgdGV4dDogc3RyaW5nLAoJICAgIC8vICAgICAgICAgICAgICAgICAgICAgIExpc3Q8VWludDhBcnJheT4gYnl0ZVNlZ21lbnRzLAoJICAgIC8vICAgICAgICAgICAgICAgICAgICAgIFN0cmluZyBlY0xldmVsKSB7CgkgICAgLy8gICB0aGlzKHJhd0J5dGVzLCB0ZXh0LCBieXRlU2VnbWVudHMsIGVjTGV2ZWwsIC0xLCAtMSkKCSAgICAvLyB9CgkgICAgZnVuY3Rpb24gRGVjb2RlclJlc3VsdChyYXdCeXRlcywgdGV4dCwgYnl0ZVNlZ21lbnRzLCBlY0xldmVsLCBzdHJ1Y3R1cmVkQXBwZW5kU2VxdWVuY2VOdW1iZXIsIHN0cnVjdHVyZWRBcHBlbmRQYXJpdHkpIHsKCSAgICAgICAgaWYgKHN0cnVjdHVyZWRBcHBlbmRTZXF1ZW5jZU51bWJlciA9PT0gdm9pZCAwKSB7IHN0cnVjdHVyZWRBcHBlbmRTZXF1ZW5jZU51bWJlciA9IC0xOyB9CgkgICAgICAgIGlmIChzdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5ID09PSB2b2lkIDApIHsgc3RydWN0dXJlZEFwcGVuZFBhcml0eSA9IC0xOyB9CgkgICAgICAgIHRoaXMucmF3Qnl0ZXMgPSByYXdCeXRlczsKCSAgICAgICAgdGhpcy50ZXh0ID0gdGV4dDsKCSAgICAgICAgdGhpcy5ieXRlU2VnbWVudHMgPSBieXRlU2VnbWVudHM7CgkgICAgICAgIHRoaXMuZWNMZXZlbCA9IGVjTGV2ZWw7CgkgICAgICAgIHRoaXMuc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID0gc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyOwoJICAgICAgICB0aGlzLnN0cnVjdHVyZWRBcHBlbmRQYXJpdHkgPSBzdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5OwoJICAgICAgICB0aGlzLm51bUJpdHMgPSAocmF3Qnl0ZXMgPT09IHVuZGVmaW5lZCB8fCByYXdCeXRlcyA9PT0gbnVsbCkgPyAwIDogOCAqIHJhd0J5dGVzLmxlbmd0aDsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiByYXcgYnl0ZXMgcmVwcmVzZW50aW5nIHRoZSByZXN1bHQsIG9yIHtAY29kZSBudWxsfSBpZiBub3QgYXBwbGljYWJsZQoJICAgICAqLwoJICAgIERlY29kZXJSZXN1bHQucHJvdG90eXBlLmdldFJhd0J5dGVzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yYXdCeXRlczsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaG93IG1hbnkgYml0cyBvZiB7QGxpbmsgI2dldFJhd0J5dGVzKCl9IGFyZSB2YWxpZDsgdHlwaWNhbGx5IDggdGltZXMgaXRzIGxlbmd0aAoJICAgICAqIEBzaW5jZSAzLjMuMAoJICAgICAqLwoJICAgIERlY29kZXJSZXN1bHQucHJvdG90eXBlLmdldE51bUJpdHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm51bUJpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gbnVtQml0cyBvdmVycmlkZXMgdGhlIG51bWJlciBvZiBiaXRzIHRoYXQgYXJlIHZhbGlkIGluIHtAbGluayAjZ2V0UmF3Qnl0ZXMoKX0KCSAgICAgKiBAc2luY2UgMy4zLjAKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXROdW1CaXRzID0gZnVuY3Rpb24gKG51bUJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLm51bUJpdHMgPSBudW1CaXRzOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0ZXh0IHJlcHJlc2VudGF0aW9uIG9mIHRoZSByZXN1bHQKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRUZXh0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50ZXh0OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBsaXN0IG9mIGJ5dGUgc2VnbWVudHMgaW4gdGhlIHJlc3VsdCwgb3Ige0Bjb2RlIG51bGx9IGlmIG5vdCBhcHBsaWNhYmxlCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0Qnl0ZVNlZ21lbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5ieXRlU2VnbWVudHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIG5hbWUgb2YgZXJyb3IgY29ycmVjdGlvbiBsZXZlbCB1c2VkLCBvciB7QGNvZGUgbnVsbH0gaWYgbm90IGFwcGxpY2FibGUKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRFQ0xldmVsID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lY0xldmVsOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgZXJyb3JzIGNvcnJlY3RlZCwgb3Ige0Bjb2RlIG51bGx9IGlmIG5vdCBhcHBsaWNhYmxlCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0RXJyb3JzQ29ycmVjdGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lcnJvcnNDb3JyZWN0ZWQ7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXRFcnJvcnNDb3JyZWN0ZWQgPSBmdW5jdGlvbiAoZXJyb3JzQ29ycmVjdGVkIC8qSW50ZWdlciovKSB7CgkgICAgICAgIHRoaXMuZXJyb3JzQ29ycmVjdGVkID0gZXJyb3JzQ29ycmVjdGVkOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgZXJhc3VyZXMgY29ycmVjdGVkLCBvciB7QGNvZGUgbnVsbH0gaWYgbm90IGFwcGxpY2FibGUKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRFcmFzdXJlcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZXJhc3VyZXM7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXRFcmFzdXJlcyA9IGZ1bmN0aW9uIChlcmFzdXJlcyAvKkludGVnZXIqLykgewoJICAgICAgICB0aGlzLmVyYXN1cmVzID0gZXJhc3VyZXM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGFyYml0cmFyeSBhZGRpdGlvbmFsIG1ldGFkYXRhCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0T3RoZXIgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm90aGVyOwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuc2V0T3RoZXIgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgdGhpcy5vdGhlciA9IG90aGVyOwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuaGFzU3RydWN0dXJlZEFwcGVuZCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc3RydWN0dXJlZEFwcGVuZFBhcml0eSA+PSAwICYmIHRoaXMuc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID49IDA7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRTdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5OwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0U3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJ1Y3R1cmVkQXBwZW5kU2VxdWVuY2VOdW1iZXI7CgkgICAgfTsKCSAgICByZXR1cm4gRGVjb2RlclJlc3VsdDsKCX0oKSk7CglEZWNvZGVyUmVzdWx0JDEuZGVmYXVsdCA9IERlY29kZXJSZXN1bHQ7CgoJdmFyIE1vZGUgPSB7fTsKCgkoZnVuY3Rpb24gKGV4cG9ydHMpIHsKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJZXhwb3J0cy5Nb2RlVmFsdWVzID0gdm9pZCAwOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7Cgl2YXIgTW9kZVZhbHVlczsKCShmdW5jdGlvbiAoTW9kZVZhbHVlcykgewoJICAgIE1vZGVWYWx1ZXNbTW9kZVZhbHVlc1siVEVSTUlOQVRPUiJdID0gMF0gPSAiVEVSTUlOQVRPUiI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJOVU1FUklDIl0gPSAxXSA9ICJOVU1FUklDIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkFMUEhBTlVNRVJJQyJdID0gMl0gPSAiQUxQSEFOVU1FUklDIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIlNUUlVDVFVSRURfQVBQRU5EIl0gPSAzXSA9ICJTVFJVQ1RVUkVEX0FQUEVORCI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJCWVRFIl0gPSA0XSA9ICJCWVRFIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkVDSSJdID0gNV0gPSAiRUNJIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIktBTkpJIl0gPSA2XSA9ICJLQU5KSSI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJGTkMxX0ZJUlNUX1BPU0lUSU9OIl0gPSA3XSA9ICJGTkMxX0ZJUlNUX1BPU0lUSU9OIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkZOQzFfU0VDT05EX1BPU0lUSU9OIl0gPSA4XSA9ICJGTkMxX1NFQ09ORF9QT1NJVElPTiI7CgkgICAgLyoqIFNlZSBHQlQgMTgyODQtMjAwMDsgIkhhbnppIiBpcyBhIHRyYW5zbGl0ZXJhdGlvbiBvZiB0aGlzIG1vZGUgbmFtZS4gKi8KCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkhBTlpJIl0gPSA5XSA9ICJIQU5aSSI7Cgl9KShNb2RlVmFsdWVzID0gZXhwb3J0cy5Nb2RlVmFsdWVzIHx8IChleHBvcnRzLk1vZGVWYWx1ZXMgPSB7fSkpOwoJLyoqCgkgKiA8cD5TZWUgSVNPIDE4MDA0OjIwMDYsIDYuNC4xLCBUYWJsZXMgMiBhbmQgMy4gVGhpcyBlbnVtIGVuY2Fwc3VsYXRlcyB0aGUgdmFyaW91cyBtb2RlcyBpbiB3aGljaAoJICogZGF0YSBjYW4gYmUgZW5jb2RlZCB0byBiaXRzIGluIHRoZSBRUiBjb2RlIHN0YW5kYXJkLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgTW9kZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBNb2RlKHZhbHVlLCBzdHJpbmdWYWx1ZSwgY2hhcmFjdGVyQ291bnRCaXRzRm9yVmVyc2lvbnMsIGJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuc3RyaW5nVmFsdWUgPSBzdHJpbmdWYWx1ZTsKCSAgICAgICAgdGhpcy5jaGFyYWN0ZXJDb3VudEJpdHNGb3JWZXJzaW9ucyA9IGNoYXJhY3RlckNvdW50Qml0c0ZvclZlcnNpb25zOwoJICAgICAgICB0aGlzLmJpdHMgPSBiaXRzOwoJICAgICAgICBNb2RlLkZPUl9CSVRTLnNldChiaXRzLCB0aGlzKTsKCSAgICAgICAgTW9kZS5GT1JfVkFMVUUuc2V0KHZhbHVlLCB0aGlzKTsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJpdHMgZm91ciBiaXRzIGVuY29kaW5nIGEgUVIgQ29kZSBkYXRhIG1vZGUKCSAgICAgKiBAcmV0dXJuIE1vZGUgZW5jb2RlZCBieSB0aGVzZSBiaXRzCgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgYml0cyBkbyBub3QgY29ycmVzcG9uZCB0byBhIGtub3duIG1vZGUKCSAgICAgKi8KCSAgICBNb2RlLmZvckJpdHMgPSBmdW5jdGlvbiAoYml0cyAvKmludCovKSB7CgkgICAgICAgIHZhciBtb2RlID0gTW9kZS5GT1JfQklUUy5nZXQoYml0cyk7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IG1vZGUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG1vZGU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gdmVyc2lvbiB2ZXJzaW9uIGluIHF1ZXN0aW9uCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgYml0cyB1c2VkLCBpbiB0aGlzIFFSIENvZGUgc3ltYm9sIHtAbGluayBWZXJzaW9ufSwgdG8gZW5jb2RlIHRoZQoJICAgICAqICAgICAgICAgY291bnQgb2YgY2hhcmFjdGVycyB0aGF0IHdpbGwgZm9sbG93IGVuY29kZWQgaW4gdGhpcyBNb2RlCgkgICAgICovCgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0Q2hhcmFjdGVyQ291bnRCaXRzID0gZnVuY3Rpb24gKHZlcnNpb24pIHsKCSAgICAgICAgdmFyIHZlcnNpb25OdW1iZXIgPSB2ZXJzaW9uLmdldFZlcnNpb25OdW1iZXIoKTsKCSAgICAgICAgdmFyIG9mZnNldDsKCSAgICAgICAgaWYgKHZlcnNpb25OdW1iZXIgPD0gOSkgewoJICAgICAgICAgICAgb2Zmc2V0ID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmICh2ZXJzaW9uTnVtYmVyIDw9IDI2KSB7CgkgICAgICAgICAgICBvZmZzZXQgPSAxOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgb2Zmc2V0ID0gMjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5jaGFyYWN0ZXJDb3VudEJpdHNGb3JWZXJzaW9uc1tvZmZzZXRdOwoJICAgIH07CgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0VmFsdWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlOwoJICAgIH07CgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0Qml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYml0czsKCSAgICB9OwoJICAgIE1vZGUucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIChvKSB7CgkgICAgICAgIGlmICghKG8gaW5zdGFuY2VvZiBNb2RlKSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlID09PSBvdGhlci52YWx1ZTsKCSAgICB9OwoJICAgIE1vZGUucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJpbmdWYWx1ZTsKCSAgICB9OwoJICAgIE1vZGUuRk9SX0JJVFMgPSBuZXcgTWFwKCk7CgkgICAgTW9kZS5GT1JfVkFMVUUgPSBuZXcgTWFwKCk7CgkgICAgTW9kZS5URVJNSU5BVE9SID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5URVJNSU5BVE9SLCAnVEVSTUlOQVRPUicsIEludDMyQXJyYXkuZnJvbShbMCwgMCwgMF0pLCAweDAwKTsgLy8gTm90IHJlYWxseSBhIG1vZGUuLi4KCSAgICBNb2RlLk5VTUVSSUMgPSBuZXcgTW9kZShNb2RlVmFsdWVzLk5VTUVSSUMsICdOVU1FUklDJywgSW50MzJBcnJheS5mcm9tKFsxMCwgMTIsIDE0XSksIDB4MDEpOwoJICAgIE1vZGUuQUxQSEFOVU1FUklDID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5BTFBIQU5VTUVSSUMsICdBTFBIQU5VTUVSSUMnLCBJbnQzMkFycmF5LmZyb20oWzksIDExLCAxM10pLCAweDAyKTsKCSAgICBNb2RlLlNUUlVDVFVSRURfQVBQRU5EID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5TVFJVQ1RVUkVEX0FQUEVORCwgJ1NUUlVDVFVSRURfQVBQRU5EJywgSW50MzJBcnJheS5mcm9tKFswLCAwLCAwXSksIDB4MDMpOyAvLyBOb3Qgc3VwcG9ydGVkCgkgICAgTW9kZS5CWVRFID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5CWVRFLCAnQllURScsIEludDMyQXJyYXkuZnJvbShbOCwgMTYsIDE2XSksIDB4MDQpOwoJICAgIE1vZGUuRUNJID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5FQ0ksICdFQ0knLCBJbnQzMkFycmF5LmZyb20oWzAsIDAsIDBdKSwgMHgwNyk7IC8vIGNoYXJhY3RlciBjb3VudHMgZG9uJ3QgYXBwbHkKCSAgICBNb2RlLktBTkpJID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5LQU5KSSwgJ0tBTkpJJywgSW50MzJBcnJheS5mcm9tKFs4LCAxMCwgMTJdKSwgMHgwOCk7CgkgICAgTW9kZS5GTkMxX0ZJUlNUX1BPU0lUSU9OID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5GTkMxX0ZJUlNUX1BPU0lUSU9OLCAnRk5DMV9GSVJTVF9QT1NJVElPTicsIEludDMyQXJyYXkuZnJvbShbMCwgMCwgMF0pLCAweDA1KTsKCSAgICBNb2RlLkZOQzFfU0VDT05EX1BPU0lUSU9OID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5GTkMxX1NFQ09ORF9QT1NJVElPTiwgJ0ZOQzFfU0VDT05EX1BPU0lUSU9OJywgSW50MzJBcnJheS5mcm9tKFswLCAwLCAwXSksIDB4MDkpOwoJICAgIC8qKiBTZWUgR0JUIDE4Mjg0LTIwMDA7ICJIYW56aSIgaXMgYSB0cmFuc2xpdGVyYXRpb24gb2YgdGhpcyBtb2RlIG5hbWUuICovCgkgICAgTW9kZS5IQU5aSSA9IG5ldyBNb2RlKE1vZGVWYWx1ZXMuSEFOWkksICdIQU5aSScsIEludDMyQXJyYXkuZnJvbShbOCwgMTAsIDEyXSksIDB4MEQpOwoJICAgIHJldHVybiBNb2RlOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IE1vZGU7CgoJfShNb2RlKSk7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcucXJjb2RlLmRlY29kZXIgeyovCgl2YXIgQml0U291cmNlXzEgPSBCaXRTb3VyY2UkMTsKCXZhciBDaGFyYWN0ZXJTZXRFQ0lfMSA9IENoYXJhY3RlclNldEVDSTsKCXZhciBEZWNvZGVyUmVzdWx0XzEgPSBEZWNvZGVyUmVzdWx0JDE7Cgl2YXIgU3RyaW5nVXRpbHNfMSA9IFN0cmluZ1V0aWxzJDE7Cgl2YXIgRm9ybWF0RXhjZXB0aW9uXzEgPSBGb3JtYXRFeGNlcHRpb24kMTsKCXZhciBTdHJpbmdCdWlsZGVyXzEgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgU3RyaW5nRW5jb2RpbmdfMSA9IFN0cmluZ0VuY29kaW5nJDE7Cgl2YXIgTW9kZV8xID0gTW9kZTsKCS8qaW1wb3J0IGphdmEuaW8uVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbjsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5TGlzdDsqLwoJLyppbXBvcnQgamF2YS51dGlsLkNvbGxlY3Rpb247Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlFSIENvZGVzIGNhbiBlbmNvZGUgdGV4dCBhcyBiaXRzIGluIG9uZSBvZiBzZXZlcmFsIG1vZGVzLCBhbmQgY2FuIHVzZSBtdWx0aXBsZSBtb2RlcwoJICogaW4gb25lIFFSIENvZGUuIFRoaXMgY2xhc3MgZGVjb2RlcyB0aGUgYml0cyBiYWNrIGludG8gdGV4dC48L3A+CgkgKgoJICogPHA+U2VlIElTTyAxODAwNDoyMDA2LCA2LjQuMyAtIDYuNC43PC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBEZWNvZGVkQml0U3RyZWFtUGFyc2VyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIERlY29kZWRCaXRTdHJlYW1QYXJzZXIoKSB7CgkgICAgfQoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlID0gZnVuY3Rpb24gKGJ5dGVzLCB2ZXJzaW9uLCBlY0xldmVsLCBoaW50cykgewoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRTb3VyY2VfMS5kZWZhdWx0KGJ5dGVzKTsKCSAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBTdHJpbmdCdWlsZGVyXzEuZGVmYXVsdCgpOwoJICAgICAgICB2YXIgYnl0ZVNlZ21lbnRzID0gbmV3IEFycmF5KCk7IC8vIDEKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IEkgZG8gbm90IHVzZSBjb25zdHJ1Y3RvciB3aXRoIHNpemUgMSBhcyBpbiBvcmlnaW5hbCBKYXZhIG1lYW5zIGNhcGFjaXR5IGFuZCB0aGUgYXJyYXkgbGVuZ3RoIGlzIGNoZWNrZWQgYmVsb3cKCSAgICAgICAgdmFyIHN5bWJvbFNlcXVlbmNlID0gLTE7CgkgICAgICAgIHZhciBwYXJpdHlEYXRhID0gLTE7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICB2YXIgY3VycmVudENoYXJhY3RlclNldEVDSSA9IG51bGw7CgkgICAgICAgICAgICB2YXIgZmMxSW5FZmZlY3QgPSBmYWxzZTsKCSAgICAgICAgICAgIHZhciBtb2RlID0gdm9pZCAwOwoJICAgICAgICAgICAgZG8gewoJICAgICAgICAgICAgICAgIC8vIFdoaWxlIHN0aWxsIGFub3RoZXIgc2VnbWVudCB0byByZWFkLi4uCgkgICAgICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCA0KSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIE9LLCBhc3N1bWUgd2UncmUgZG9uZS4gUmVhbGx5LCBhIFRFUk1JTkFUT1IgbW9kZSBzaG91bGQgaGF2ZSBiZWVuIHJlY29yZGVkIGhlcmUKCSAgICAgICAgICAgICAgICAgICAgbW9kZSA9IE1vZGVfMS5kZWZhdWx0LlRFUk1JTkFUT1I7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICB2YXIgbW9kZUJpdHMgPSBiaXRzLnJlYWRCaXRzKDQpOwoJICAgICAgICAgICAgICAgICAgICBtb2RlID0gTW9kZV8xLmRlZmF1bHQuZm9yQml0cyhtb2RlQml0cyk7IC8vIG1vZGUgaXMgZW5jb2RlZCBieSA0IGJpdHMKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgc3dpdGNoIChtb2RlKSB7CgkgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuVEVSTUlOQVRPUjoKCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LkZOQzFfRklSU1RfUE9TSVRJT046CgkgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuRk5DMV9TRUNPTkRfUE9TSVRJT046CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBkbyBsaXR0bGUgd2l0aCBGTkMxIGV4Y2VwdCBhbHRlciB0aGUgcGFyc2VkIHJlc3VsdCBhIGJpdCBhY2NvcmRpbmcgdG8gdGhlIHNwZWMKCSAgICAgICAgICAgICAgICAgICAgICAgIGZjMUluRWZmZWN0ID0gdHJ1ZTsKCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LlNUUlVDVFVSRURfQVBQRU5EOgoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCAxNikgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXF1ZW5jZSBudW1iZXIgYW5kIHBhcml0eSBpcyBhZGRlZCBsYXRlciB0byB0aGUgcmVzdWx0IG1ldGFkYXRhCgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZWFkIG5leHQgOCBiaXRzIChzeW1ib2wgc2VxdWVuY2UgIykgYW5kIDggYml0cyAoZGF0YTogcGFyaXR5KSwgdGhlbiBjb250aW51ZQoJICAgICAgICAgICAgICAgICAgICAgICAgc3ltYm9sU2VxdWVuY2UgPSBiaXRzLnJlYWRCaXRzKDgpOwoJICAgICAgICAgICAgICAgICAgICAgICAgcGFyaXR5RGF0YSA9IGJpdHMucmVhZEJpdHMoOCk7CgkgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgY2FzZSBNb2RlXzEuZGVmYXVsdC5FQ0k6CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBDb3VudCBkb2Vzbid0IGFwcGx5IHRvIEVDSQoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5wYXJzZUVDSVZhbHVlKGJpdHMpOwoJICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudENoYXJhY3RlclNldEVDSSA9IENoYXJhY3RlclNldEVDSV8xLmRlZmF1bHQuZ2V0Q2hhcmFjdGVyU2V0RUNJQnlWYWx1ZSh2YWx1ZSk7CgkgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudENoYXJhY3RlclNldEVDSSA9PT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgY2FzZSBNb2RlXzEuZGVmYXVsdC5IQU5aSToKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZpcnN0IGhhbmRsZSBIYW56aSBtb2RlIHdoaWNoIGRvZXMgbm90IHN0YXJ0IHdpdGggY2hhcmFjdGVyIGNvdW50CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGluZXNlIG1vZGUgY29udGFpbnMgYSBzdWIgc2V0IGluZGljYXRvciByaWdodCBhZnRlciBtb2RlIGluZGljYXRvcgoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN1YnNldCA9IGJpdHMucmVhZEJpdHMoNCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY291bnRIYW56aSA9IGJpdHMucmVhZEJpdHMobW9kZS5nZXRDaGFyYWN0ZXJDb3VudEJpdHModmVyc2lvbikpOwoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN1YnNldCA9PT0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5HQjIzMTJfU1VCU0VUKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVIYW56aVNlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudEhhbnppKTsKCSAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gIk5vcm1hbCIgUVIgY29kZSBtb2RlczoKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEhvdyBtYW55IGNoYXJhY3RlcnMgd2lsbCBmb2xsb3csIGVuY29kZWQgaW4gdGhpcyBtb2RlPwoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvdW50ID0gYml0cy5yZWFkQml0cyhtb2RlLmdldENoYXJhY3RlckNvdW50Qml0cyh2ZXJzaW9uKSk7CgkgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG1vZGUpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0Lk5VTUVSSUM6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlTnVtZXJpY1NlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuQUxQSEFOVU1FUklDOgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLmRlY29kZUFscGhhbnVtZXJpY1NlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCwgZmMxSW5FZmZlY3QpOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LkJZVEU6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlQnl0ZVNlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCwgY3VycmVudENoYXJhY3RlclNldEVDSSwgYnl0ZVNlZ21lbnRzLCBoaW50cyk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuS0FOSkk6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlS2FuamlTZWdtZW50KGJpdHMsIHJlc3VsdCwgY291bnQpOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfSB3aGlsZSAobW9kZSAhPT0gTW9kZV8xLmRlZmF1bHQuVEVSTUlOQVRPUik7CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlhZSAvKjogSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgIC8vIGZyb20gcmVhZEJpdHMoKSBjYWxscwoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbmV3IERlY29kZXJSZXN1bHRfMS5kZWZhdWx0KGJ5dGVzLCByZXN1bHQudG9TdHJpbmcoKSwgYnl0ZVNlZ21lbnRzLmxlbmd0aCA9PT0gMCA/IG51bGwgOiBieXRlU2VnbWVudHMsIGVjTGV2ZWwgPT09IG51bGwgPyBudWxsIDogZWNMZXZlbC50b1N0cmluZygpLCBzeW1ib2xTZXF1ZW5jZSwgcGFyaXR5RGF0YSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZWUgc3BlY2lmaWNhdGlvbiBHQlQgMTgyODQtMjAwMAoJICAgICAqLwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlSGFuemlTZWdtZW50ID0gZnVuY3Rpb24gKGJpdHMsIHJlc3VsdCwgY291bnQgLyppbnQqLykgewoJICAgICAgICAvLyBEb24ndCBjcmFzaCB0cnlpbmcgdG8gcmVhZCBtb3JlIGJpdHMgdGhhbiB3ZSBoYXZlIGF2YWlsYWJsZS4KCSAgICAgICAgaWYgKGNvdW50ICogMTMgPiBiaXRzLmF2YWlsYWJsZSgpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEVhY2ggY2hhcmFjdGVyIHdpbGwgcmVxdWlyZSAyIGJ5dGVzLiBSZWFkIHRoZSBjaGFyYWN0ZXJzIGFzIDItYnl0ZSBwYWlycwoJICAgICAgICAvLyBhbmQgZGVjb2RlIGFzIEdCMjMxMiBhZnRlcndhcmRzCgkgICAgICAgIHZhciBidWZmZXIgPSBuZXcgVWludDhBcnJheSgyICogY291bnQpOwoJICAgICAgICB2YXIgb2Zmc2V0ID0gMDsKCSAgICAgICAgd2hpbGUgKGNvdW50ID4gMCkgewoJICAgICAgICAgICAgLy8gRWFjaCAxMyBiaXRzIGVuY29kZXMgYSAyLWJ5dGUgY2hhcmFjdGVyCgkgICAgICAgICAgICB2YXIgdHdvQnl0ZXMgPSBiaXRzLnJlYWRCaXRzKDEzKTsKCSAgICAgICAgICAgIHZhciBhc3NlbWJsZWRUd29CeXRlcyA9ICgoKHR3b0J5dGVzIC8gMHgwNjApIDw8IDgpICYgMHhGRkZGRkZGRikgfCAodHdvQnl0ZXMgJSAweDA2MCk7CgkgICAgICAgICAgICBpZiAoYXNzZW1ibGVkVHdvQnl0ZXMgPCAweDAwM0JGKSB7CgkgICAgICAgICAgICAgICAgLy8gSW4gdGhlIDB4QTFBMSB0byAweEFBRkUgcmFuZ2UKCSAgICAgICAgICAgICAgICBhc3NlbWJsZWRUd29CeXRlcyArPSAweDBBMUExOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgLy8gSW4gdGhlIDB4QjBBMSB0byAweEZBRkUgcmFuZ2UKCSAgICAgICAgICAgICAgICBhc3NlbWJsZWRUd29CeXRlcyArPSAweDBBNkExOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgYnVmZmVyW29mZnNldF0gPSAvKihieXRlKSAqLyAoKGFzc2VtYmxlZFR3b0J5dGVzID4+IDgpICYgMHhGRik7CgkgICAgICAgICAgICBidWZmZXJbb2Zmc2V0ICsgMV0gPSAvKihieXRlKSAqLyAoYXNzZW1ibGVkVHdvQnl0ZXMgJiAweEZGKTsKCSAgICAgICAgICAgIG9mZnNldCArPSAyOwoJICAgICAgICAgICAgY291bnQtLTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChTdHJpbmdFbmNvZGluZ18xLmRlZmF1bHQuZGVjb2RlKGJ1ZmZlciwgU3RyaW5nVXRpbHNfMS5kZWZhdWx0LkdCMjMxMikpOwoJICAgICAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IFRPRE86IGltcGxlbWVudCBHQjIzMTIgZGVjb2RlLiBTdHJpbmdWaWV3IGZyb20gTUROIGNvdWxkIGJlIGEgc3RhcnRpbmcgcG9pbnQKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoaWdub3JlZCAvKjogVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdChpZ25vcmVkKTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVLYW5qaVNlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovKSB7CgkgICAgICAgIC8vIERvbid0IGNyYXNoIHRyeWluZyB0byByZWFkIG1vcmUgYml0cyB0aGFuIHdlIGhhdmUgYXZhaWxhYmxlLgoJICAgICAgICBpZiAoY291bnQgKiAxMyA+IGJpdHMuYXZhaWxhYmxlKCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRWFjaCBjaGFyYWN0ZXIgd2lsbCByZXF1aXJlIDIgYnl0ZXMuIFJlYWQgdGhlIGNoYXJhY3RlcnMgYXMgMi1ieXRlIHBhaXJzCgkgICAgICAgIC8vIGFuZCBkZWNvZGUgYXMgU2hpZnRfSklTIGFmdGVyd2FyZHMKCSAgICAgICAgdmFyIGJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KDIgKiBjb3VudCk7CgkgICAgICAgIHZhciBvZmZzZXQgPSAwOwoJICAgICAgICB3aGlsZSAoY291bnQgPiAwKSB7CgkgICAgICAgICAgICAvLyBFYWNoIDEzIGJpdHMgZW5jb2RlcyBhIDItYnl0ZSBjaGFyYWN0ZXIKCSAgICAgICAgICAgIHZhciB0d29CeXRlcyA9IGJpdHMucmVhZEJpdHMoMTMpOwoJICAgICAgICAgICAgdmFyIGFzc2VtYmxlZFR3b0J5dGVzID0gKCgodHdvQnl0ZXMgLyAweDBDMCkgPDwgOCkgJiAweEZGRkZGRkZGKSB8ICh0d29CeXRlcyAlIDB4MEMwKTsKCSAgICAgICAgICAgIGlmIChhc3NlbWJsZWRUd29CeXRlcyA8IDB4MDFGMDApIHsKCSAgICAgICAgICAgICAgICAvLyBJbiB0aGUgMHg4MTQwIHRvIDB4OUZGQyByYW5nZQoJICAgICAgICAgICAgICAgIGFzc2VtYmxlZFR3b0J5dGVzICs9IDB4MDgxNDA7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAvLyBJbiB0aGUgMHhFMDQwIHRvIDB4RUJCRiByYW5nZQoJICAgICAgICAgICAgICAgIGFzc2VtYmxlZFR3b0J5dGVzICs9IDB4MEMxNDA7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBidWZmZXJbb2Zmc2V0XSA9IC8qKGJ5dGUpICovIChhc3NlbWJsZWRUd29CeXRlcyA+PiA4KTsKCSAgICAgICAgICAgIGJ1ZmZlcltvZmZzZXQgKyAxXSA9IC8qKGJ5dGUpICovIGFzc2VtYmxlZFR3b0J5dGVzOwoJICAgICAgICAgICAgb2Zmc2V0ICs9IDI7CgkgICAgICAgICAgICBjb3VudC0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIFNoaWZ0X0pJUyBtYXkgbm90IGJlIHN1cHBvcnRlZCBpbiBzb21lIGVudmlyb25tZW50czoKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoU3RyaW5nRW5jb2RpbmdfMS5kZWZhdWx0LmRlY29kZShidWZmZXIsIFN0cmluZ1V0aWxzXzEuZGVmYXVsdC5TSElGVF9KSVMpKTsKCSAgICAgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiBUT0RPOiBpbXBsZW1lbnQgU0hJRlRfSklTIGRlY29kZS4gU3RyaW5nVmlldyBmcm9tIE1ETiBjb3VsZCBiZSBhIHN0YXJ0aW5nIHBvaW50CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlnbm9yZWQgLyo6IFVuc3VwcG9ydGVkRW5jb2RpbmdFeGNlcHRpb24qLykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoaWdub3JlZCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlQnl0ZVNlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovLCBjdXJyZW50Q2hhcmFjdGVyU2V0RUNJLCBieXRlU2VnbWVudHMsIGhpbnRzKSB7CgkgICAgICAgIC8vIERvbid0IGNyYXNoIHRyeWluZyB0byByZWFkIG1vcmUgYml0cyB0aGFuIHdlIGhhdmUgYXZhaWxhYmxlLgoJICAgICAgICBpZiAoOCAqIGNvdW50ID4gYml0cy5hdmFpbGFibGUoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcmVhZEJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoY291bnQpOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvdW50OyBpKyspIHsKCSAgICAgICAgICAgIHJlYWRCeXRlc1tpXSA9IC8qKGJ5dGUpICovIGJpdHMucmVhZEJpdHMoOCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGVuY29kaW5nOwoJICAgICAgICBpZiAoY3VycmVudENoYXJhY3RlclNldEVDSSA9PT0gbnVsbCkgewoJICAgICAgICAgICAgLy8gVGhlIHNwZWMgaXNuJ3QgY2xlYXIgb24gdGhpcyBtb2RlOyBzZWUKCSAgICAgICAgICAgIC8vIHNlY3Rpb24gNi40LjU6IHQgZG9lcyBub3Qgc2F5IHdoaWNoIGVuY29kaW5nIHRvIGFzc3VtaW5nCgkgICAgICAgICAgICAvLyB1cG9uIGRlY29kaW5nLiBJIGhhdmUgc2VlbiBJU08tODg1OS0xIHVzZWQgYXMgd2VsbCBhcwoJICAgICAgICAgICAgLy8gU2hpZnRfSklTIC0tIHdpdGhvdXQgYW55dGhpbmcgbGlrZSBhbiBFQ0kgZGVzaWduYXRvciB0bwoJICAgICAgICAgICAgLy8gZ2l2ZSBhIGhpbnQuCgkgICAgICAgICAgICBlbmNvZGluZyA9IFN0cmluZ1V0aWxzXzEuZGVmYXVsdC5ndWVzc0VuY29kaW5nKHJlYWRCeXRlcywgaGludHMpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgZW5jb2RpbmcgPSBjdXJyZW50Q2hhcmFjdGVyU2V0RUNJLmdldE5hbWUoKTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChTdHJpbmdFbmNvZGluZ18xLmRlZmF1bHQuZGVjb2RlKHJlYWRCeXRlcywgZW5jb2RpbmcpKTsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoaWdub3JlZCAvKjogVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdChpZ25vcmVkKTsKCSAgICAgICAgfQoJICAgICAgICBieXRlU2VnbWVudHMucHVzaChyZWFkQnl0ZXMpOwoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIgPSBmdW5jdGlvbiAodmFsdWUgLyppbnQqLykgewoJICAgICAgICBpZiAodmFsdWUgPj0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5BTFBIQU5VTUVSSUNfQ0hBUlMubGVuZ3RoKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLkFMUEhBTlVNRVJJQ19DSEFSU1t2YWx1ZV07CgkgICAgfTsKCSAgICBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLmRlY29kZUFscGhhbnVtZXJpY1NlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovLCBmYzFJbkVmZmVjdCkgewoJICAgICAgICAvLyBSZWFkIHR3byBjaGFyYWN0ZXJzIGF0IGEgdGltZQoJICAgICAgICB2YXIgc3RhcnQgPSByZXN1bHQubGVuZ3RoKCk7CgkgICAgICAgIHdoaWxlIChjb3VudCA+IDEpIHsKCSAgICAgICAgICAgIGlmIChiaXRzLmF2YWlsYWJsZSgpIDwgMTEpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIG5leHRUd29DaGFyc0JpdHMgPSBiaXRzLnJlYWRCaXRzKDExKTsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoTWF0aC5mbG9vcihuZXh0VHdvQ2hhcnNCaXRzIC8gNDUpKSk7CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKG5leHRUd29DaGFyc0JpdHMgJSA0NSkpOwoJICAgICAgICAgICAgY291bnQgLT0gMjsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY291bnQgPT09IDEpIHsKCSAgICAgICAgICAgIC8vIHNwZWNpYWwgY2FzZTogb25lIGNoYXJhY3RlciBsZWZ0CgkgICAgICAgICAgICBpZiAoYml0cy5hdmFpbGFibGUoKSA8IDYpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChEZWNvZGVkQml0U3RyZWFtUGFyc2VyLnRvQWxwaGFOdW1lcmljQ2hhcihiaXRzLnJlYWRCaXRzKDYpKSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gU2VlIHNlY3Rpb24gNi40LjguMSwgNi40LjguMgoJICAgICAgICBpZiAoZmMxSW5FZmZlY3QpIHsKCSAgICAgICAgICAgIC8vIFdlIG5lZWQgdG8gbWFzc2FnZSB0aGUgcmVzdWx0IGEgYml0IGlmIGluIGFuIEZOQzEgbW9kZToKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IHJlc3VsdC5sZW5ndGgoKTsgaSsrKSB7CgkgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5jaGFyQXQoaSkgPT09ICclJykgewoJICAgICAgICAgICAgICAgICAgICBpZiAoaSA8IHJlc3VsdC5sZW5ndGgoKSAtIDEgJiYgcmVzdWx0LmNoYXJBdChpICsgMSkgPT09ICclJykgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gJSUgaXMgcmVuZGVyZWQgYXMgJQoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmRlbGV0ZUNoYXJBdChpICsgMSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBJbiBhbHBoYSBtb2RlLCAlIHNob3VsZCBiZSBjb252ZXJ0ZWQgdG8gRk5DMSBzZXBhcmF0b3IgMHgxRAoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnNldENoYXJBdChpLCBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4MUQpKTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVOdW1lcmljU2VnbWVudCA9IGZ1bmN0aW9uIChiaXRzLCByZXN1bHQsIGNvdW50IC8qaW50Ki8pIHsKCSAgICAgICAgLy8gUmVhZCB0aHJlZSBkaWdpdHMgYXQgYSB0aW1lCgkgICAgICAgIHdoaWxlIChjb3VudCA+PSAzKSB7CgkgICAgICAgICAgICAvLyBFYWNoIDEwIGJpdHMgZW5jb2RlcyB0aHJlZSBkaWdpdHMKCSAgICAgICAgICAgIGlmIChiaXRzLmF2YWlsYWJsZSgpIDwgMTApIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIHRocmVlRGlnaXRzQml0cyA9IGJpdHMucmVhZEJpdHMoMTApOwoJICAgICAgICAgICAgaWYgKHRocmVlRGlnaXRzQml0cyA+PSAxMDAwKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoTWF0aC5mbG9vcih0aHJlZURpZ2l0c0JpdHMgLyAxMDApKSk7CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKE1hdGguZmxvb3IodGhyZWVEaWdpdHNCaXRzIC8gMTApICUgMTApKTsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIodGhyZWVEaWdpdHNCaXRzICUgMTApKTsKCSAgICAgICAgICAgIGNvdW50IC09IDM7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvdW50ID09PSAyKSB7CgkgICAgICAgICAgICAvLyBUd28gZGlnaXRzIGxlZnQgb3ZlciB0byByZWFkLCBlbmNvZGVkIGluIDcgYml0cwoJICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCA3KSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhciB0d29EaWdpdHNCaXRzID0gYml0cy5yZWFkQml0cyg3KTsKCSAgICAgICAgICAgIGlmICh0d29EaWdpdHNCaXRzID49IDEwMCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKE1hdGguZmxvb3IodHdvRGlnaXRzQml0cyAvIDEwKSkpOwoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChEZWNvZGVkQml0U3RyZWFtUGFyc2VyLnRvQWxwaGFOdW1lcmljQ2hhcih0d29EaWdpdHNCaXRzICUgMTApKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChjb3VudCA9PT0gMSkgewoJICAgICAgICAgICAgLy8gT25lIGRpZ2l0IGxlZnQgb3ZlciB0byByZWFkCgkgICAgICAgICAgICBpZiAoYml0cy5hdmFpbGFibGUoKSA8IDQpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIGRpZ2l0Qml0cyA9IGJpdHMucmVhZEJpdHMoNCk7CgkgICAgICAgICAgICBpZiAoZGlnaXRCaXRzID49IDEwKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoZGlnaXRCaXRzKSk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIucGFyc2VFQ0lWYWx1ZSA9IGZ1bmN0aW9uIChiaXRzKSB7CgkgICAgICAgIHZhciBmaXJzdEJ5dGUgPSBiaXRzLnJlYWRCaXRzKDgpOwoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4ODApID09PSAwKSB7CgkgICAgICAgICAgICAvLyBqdXN0IG9uZSBieXRlCgkgICAgICAgICAgICByZXR1cm4gZmlyc3RCeXRlICYgMHg3RjsKCSAgICAgICAgfQoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4QzApID09PSAweDgwKSB7CgkgICAgICAgICAgICAvLyB0d28gYnl0ZXMKCSAgICAgICAgICAgIHZhciBzZWNvbmRCeXRlID0gYml0cy5yZWFkQml0cyg4KTsKCSAgICAgICAgICAgIHJldHVybiAoKChmaXJzdEJ5dGUgJiAweDNGKSA8PCA4KSAmIDB4RkZGRkZGRkYpIHwgc2Vjb25kQnl0ZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4RTApID09PSAweEMwKSB7CgkgICAgICAgICAgICAvLyB0aHJlZSBieXRlcwoJICAgICAgICAgICAgdmFyIHNlY29uZFRoaXJkQnl0ZXMgPSBiaXRzLnJlYWRCaXRzKDE2KTsKCSAgICAgICAgICAgIHJldHVybiAoKChmaXJzdEJ5dGUgJiAweDFGKSA8PCAxNikgJiAweEZGRkZGRkZGKSB8IHNlY29uZFRoaXJkQnl0ZXM7CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFNlZSBJU08gMTgwMDQ6MjAwNiwgNi40LjQgVGFibGUgNQoJICAgICAqLwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuQUxQSEFOVU1FUklDX0NIQVJTID0gJzAxMjM0NTY3ODlBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWiAkJSorLS4vOic7CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5HQjIzMTJfU1VCU0VUID0gMTsKCSAgICByZXR1cm4gRGVjb2RlZEJpdFN0cmVhbVBhcnNlcjsKCX0oKSk7CglEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEuZGVmYXVsdCA9IERlY29kZWRCaXRTdHJlYW1QYXJzZXI7CgoJdmFyIFFSQ29kZURlY29kZXJNZXRhRGF0YSQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDEzIFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShRUkNvZGVEZWNvZGVyTWV0YURhdGEkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLyoqCgkgKiBNZXRhLWRhdGEgY29udGFpbmVyIGZvciBRUiBDb2RlIGRlY29kaW5nLiBJbnN0YW5jZXMgb2YgdGhpcyBjbGFzcyBtYXkgYmUgdXNlZCB0byBjb252ZXkgaW5mb3JtYXRpb24gYmFjayB0byB0aGUKCSAqIGRlY29kaW5nIGNhbGxlci4gQ2FsbGVycyBhcmUgZXhwZWN0ZWQgdG8gcHJvY2VzcyB0aGlzLgoJICoKCSAqIEBzZWUgY29tLmdvb2dsZS56eGluZy5jb21tb24uRGVjb2RlclJlc3VsdCNnZXRPdGhlcigpCgkgKi8KCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGEgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUVJDb2RlRGVjb2Rlck1ldGFEYXRhKG1pcnJvcmVkKSB7CgkgICAgICAgIHRoaXMubWlycm9yZWQgPSBtaXJyb3JlZDsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0cnVlIGlmIHRoZSBRUiBDb2RlIHdhcyBtaXJyb3JlZC4KCSAgICAgKi8KCSAgICBRUkNvZGVEZWNvZGVyTWV0YURhdGEucHJvdG90eXBlLmlzTWlycm9yZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm1pcnJvcmVkOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQXBwbHkgdGhlIHJlc3VsdCBwb2ludHMnIG9yZGVyIGNvcnJlY3Rpb24gZHVlIHRvIG1pcnJvcmluZy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBwb2ludHMgQXJyYXkgb2YgcG9pbnRzIHRvIGFwcGx5IG1pcnJvciBjb3JyZWN0aW9uIHRvLgoJICAgICAqLwoJICAgIFFSQ29kZURlY29kZXJNZXRhRGF0YS5wcm90b3R5cGUuYXBwbHlNaXJyb3JlZENvcnJlY3Rpb24gPSBmdW5jdGlvbiAocG9pbnRzKSB7CgkgICAgICAgIGlmICghdGhpcy5taXJyb3JlZCB8fCBwb2ludHMgPT09IG51bGwgfHwgcG9pbnRzLmxlbmd0aCA8IDMpIHsKCSAgICAgICAgICAgIHJldHVybjsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYm90dG9tTGVmdCA9IHBvaW50c1swXTsKCSAgICAgICAgcG9pbnRzWzBdID0gcG9pbnRzWzJdOwoJICAgICAgICBwb2ludHNbMl0gPSBib3R0b21MZWZ0OwoJICAgICAgICAvLyBObyBuZWVkIHRvICdmaXgnIHRvcC1sZWZ0IGFuZCBhbGlnbm1lbnQgcGF0dGVybi4KCSAgICB9OwoJICAgIHJldHVybiBRUkNvZGVEZWNvZGVyTWV0YURhdGE7Cgl9KCkpOwoJUVJDb2RlRGVjb2Rlck1ldGFEYXRhJDEuZGVmYXVsdCA9IFFSQ29kZURlY29kZXJNZXRhRGF0YTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDIgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGVjb2RlciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLnFyY29kZS5kZWNvZGVyIHsqLwoJdmFyIENoZWNrc3VtRXhjZXB0aW9uXzEgPSBDaGVja3N1bUV4Y2VwdGlvbiQxOwoJdmFyIEJpdE1hdHJpeF8xJDIgPSBCaXRNYXRyaXgkMTsKCXZhciBHZW5lcmljR0ZfMSA9IEdlbmVyaWNHRiQxOwoJdmFyIFJlZWRTb2xvbW9uRGVjb2Rlcl8xID0gUmVlZFNvbG9tb25EZWNvZGVyJDE7Cgl2YXIgQml0TWF0cml4UGFyc2VyXzEgPSBCaXRNYXRyaXhQYXJzZXIkMTsKCXZhciBEYXRhQmxvY2tfMSA9IERhdGFCbG9jayQxOwoJdmFyIERlY29kZWRCaXRTdHJlYW1QYXJzZXJfMSA9IERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMTsKCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSQxID0gUVJDb2RlRGVjb2Rlck1ldGFEYXRhJDE7CgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlRoZSBtYWluIGNsYXNzIHdoaWNoIGltcGxlbWVudHMgUVIgQ29kZSBkZWNvZGluZyAtLSBhcyBvcHBvc2VkIHRvIGxvY2F0aW5nIGFuZCBleHRyYWN0aW5nCgkgKiB0aGUgUVIgQ29kZSBmcm9tIGFuIGltYWdlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGVjb2RlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBEZWNvZGVyKCkgewoJICAgICAgICB0aGlzLnJzRGVjb2RlciA9IG5ldyBSZWVkU29sb21vbkRlY29kZXJfMS5kZWZhdWx0KEdlbmVyaWNHRl8xLmRlZmF1bHQuUVJfQ09ERV9GSUVMRF8yNTYpOwoJICAgIH0KCSAgICAvLyBwdWJsaWMgZGVjb2RlKGltYWdlOiBib29sZWFuW11bXSk6IERlY29kZXJSZXN1bHQgLyp0aHJvd3MgQ2hlY2tzdW1FeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiovIHsKCSAgICAvLyAgIHJldHVybiBkZWNvZGUoaW1hZ2UsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIDxwPkNvbnZlbmllbmNlIG1ldGhvZCB0aGF0IGNhbiBkZWNvZGUgYSBRUiBDb2RlIHJlcHJlc2VudGVkIGFzIGEgMkQgYXJyYXkgb2YgYm9vbGVhbnMuCgkgICAgICogInRydWUiIGlzIHRha2VuIHRvIG1lYW4gYSBibGFjayBtb2R1bGUuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGltYWdlIGJvb2xlYW5zIHJlcHJlc2VudGluZyB3aGl0ZS9ibGFjayBRUiBDb2RlIG1vZHVsZXMKCSAgICAgKiBAcGFyYW0gaGludHMgZGVjb2RpbmcgaGludHMgdGhhdCBzaG91bGQgYmUgdXNlZCB0byBpbmZsdWVuY2UgZGVjb2RpbmcKCSAgICAgKiBAcmV0dXJuIHRleHQgYW5kIGJ5dGVzIGVuY29kZWQgd2l0aGluIHRoZSBRUiBDb2RlCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgdGhlIFFSIENvZGUgY2Fubm90IGJlIGRlY29kZWQKCSAgICAgKiBAdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uIGlmIGVycm9yIGNvcnJlY3Rpb24gZmFpbHMKCSAgICAgKi8KCSAgICBEZWNvZGVyLnByb3RvdHlwZS5kZWNvZGVCb29sZWFuQXJyYXkgPSBmdW5jdGlvbiAoaW1hZ2UsIGhpbnRzKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUJpdE1hdHJpeChCaXRNYXRyaXhfMSQyLmRlZmF1bHQucGFyc2VGcm9tQm9vbGVhbkFycmF5KGltYWdlKSwgaGludHMpOwoJICAgIH07CgkgICAgLy8gcHVibGljIGRlY29kZUJpdE1hdHJpeChiaXRzOiBCaXRNYXRyaXgpOiBEZWNvZGVyUmVzdWx0IC8qdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uLCBGb3JtYXRFeGNlcHRpb24qLyB7CgkgICAgLy8gICByZXR1cm4gZGVjb2RlKGJpdHMsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIDxwPkRlY29kZXMgYSBRUiBDb2RlIHJlcHJlc2VudGVkIGFzIGEge0BsaW5rIEJpdE1hdHJpeH0uIEEgMSBvciAidHJ1ZSIgaXMgdGFrZW4gdG8gbWVhbiBhIGJsYWNrIG1vZHVsZS48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0gYml0cyBib29sZWFucyByZXByZXNlbnRpbmcgd2hpdGUvYmxhY2sgUVIgQ29kZSBtb2R1bGVzCgkgICAgICogQHBhcmFtIGhpbnRzIGRlY29kaW5nIGhpbnRzIHRoYXQgc2hvdWxkIGJlIHVzZWQgdG8gaW5mbHVlbmNlIGRlY29kaW5nCgkgICAgICogQHJldHVybiB0ZXh0IGFuZCBieXRlcyBlbmNvZGVkIHdpdGhpbiB0aGUgUVIgQ29kZQoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIHRoZSBRUiBDb2RlIGNhbm5vdCBiZSBkZWNvZGVkCgkgICAgICogQHRocm93cyBDaGVja3N1bUV4Y2VwdGlvbiBpZiBlcnJvciBjb3JyZWN0aW9uIGZhaWxzCgkgICAgICovCgkgICAgRGVjb2Rlci5wcm90b3R5cGUuZGVjb2RlQml0TWF0cml4ID0gZnVuY3Rpb24gKGJpdHMsIGhpbnRzKSB7CgkgICAgICAgIC8vIENvbnN0cnVjdCBhIHBhcnNlciBhbmQgcmVhZCB2ZXJzaW9uLCBlcnJvci1jb3JyZWN0aW9uIGxldmVsCgkgICAgICAgIHZhciBwYXJzZXIgPSBuZXcgQml0TWF0cml4UGFyc2VyXzEuZGVmYXVsdChiaXRzKTsKCSAgICAgICAgdmFyIGV4ID0gbnVsbDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUJpdE1hdHJpeFBhcnNlcihwYXJzZXIsIGhpbnRzKTsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZSAvKjogRm9ybWF0RXhjZXB0aW9uLCBDaGVja3N1bUV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICBleCA9IGU7CgkgICAgICAgIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIC8vIFJldmVydCB0aGUgYml0IG1hdHJpeAoJICAgICAgICAgICAgcGFyc2VyLnJlbWFzaygpOwoJICAgICAgICAgICAgLy8gV2lsbCBiZSBhdHRlbXB0aW5nIGEgbWlycm9yZWQgcmVhZGluZyBvZiB0aGUgdmVyc2lvbiBhbmQgZm9ybWF0IGluZm8uCgkgICAgICAgICAgICBwYXJzZXIuc2V0TWlycm9yKHRydWUpOwoJICAgICAgICAgICAgLy8gUHJlZW1wdGl2ZWx5IHJlYWQgdGhlIHZlcnNpb24uCgkgICAgICAgICAgICBwYXJzZXIucmVhZFZlcnNpb24oKTsKCSAgICAgICAgICAgIC8vIFByZWVtcHRpdmVseSByZWFkIHRoZSBmb3JtYXQgaW5mb3JtYXRpb24uCgkgICAgICAgICAgICBwYXJzZXIucmVhZEZvcm1hdEluZm9ybWF0aW9uKCk7CgkgICAgICAgICAgICAvKgoJICAgICAgICAgICAgICogU2luY2Ugd2UncmUgaGVyZSwgdGhpcyBtZWFucyB3ZSBoYXZlIHN1Y2Nlc3NmdWxseSBkZXRlY3RlZCBzb21lIGtpbmQKCSAgICAgICAgICAgICAqIG9mIHZlcnNpb24gYW5kIGZvcm1hdCBpbmZvcm1hdGlvbiB3aGVuIG1pcnJvcmVkLiBUaGlzIGlzIGEgZ29vZCBzaWduLAoJICAgICAgICAgICAgICogdGhhdCB0aGUgUVIgY29kZSBtYXkgYmUgbWlycm9yZWQsIGFuZCB3ZSBzaG91bGQgdHJ5IG9uY2UgbW9yZSB3aXRoIGEKCSAgICAgICAgICAgICAqIG1pcnJvcmVkIGNvbnRlbnQuCgkgICAgICAgICAgICAgKi8KCSAgICAgICAgICAgIC8vIFByZXBhcmUgZm9yIGEgbWlycm9yZWQgcmVhZGluZy4KCSAgICAgICAgICAgIHBhcnNlci5taXJyb3IoKTsKCSAgICAgICAgICAgIHZhciByZXN1bHQgPSB0aGlzLmRlY29kZUJpdE1hdHJpeFBhcnNlcihwYXJzZXIsIGhpbnRzKTsKCSAgICAgICAgICAgIC8vIFN1Y2Nlc3MhIE5vdGlmeSB0aGUgY2FsbGVyIHRoYXQgdGhlIGNvZGUgd2FzIG1pcnJvcmVkLgoJICAgICAgICAgICAgcmVzdWx0LnNldE90aGVyKG5ldyBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSQxLmRlZmF1bHQodHJ1ZSkpOwoJICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZSAvKkZvcm1hdEV4Y2VwdGlvbiB8IENoZWNrc3VtRXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgIC8vIFRocm93IHRoZSBleGNlcHRpb24gZnJvbSB0aGUgb3JpZ2luYWwgcmVhZGluZwoJICAgICAgICAgICAgaWYgKGV4ICE9PSBudWxsKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgZXg7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0aHJvdyBlOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBEZWNvZGVyLnByb3RvdHlwZS5kZWNvZGVCaXRNYXRyaXhQYXJzZXIgPSBmdW5jdGlvbiAocGFyc2VyLCBoaW50cykgewoJICAgICAgICB2YXIgZV8xLCBfYSwgZV8yLCBfYjsKCSAgICAgICAgdmFyIHZlcnNpb24gPSBwYXJzZXIucmVhZFZlcnNpb24oKTsKCSAgICAgICAgdmFyIGVjTGV2ZWwgPSBwYXJzZXIucmVhZEZvcm1hdEluZm9ybWF0aW9uKCkuZ2V0RXJyb3JDb3JyZWN0aW9uTGV2ZWwoKTsKCSAgICAgICAgLy8gUmVhZCBjb2Rld29yZHMKCSAgICAgICAgdmFyIGNvZGV3b3JkcyA9IHBhcnNlci5yZWFkQ29kZXdvcmRzKCk7CgkgICAgICAgIC8vIFNlcGFyYXRlIGludG8gZGF0YSBibG9ja3MKCSAgICAgICAgdmFyIGRhdGFCbG9ja3MgPSBEYXRhQmxvY2tfMS5kZWZhdWx0LmdldERhdGFCbG9ja3MoY29kZXdvcmRzLCB2ZXJzaW9uLCBlY0xldmVsKTsKCSAgICAgICAgLy8gQ291bnQgdG90YWwgbnVtYmVyIG9mIGRhdGEgYnl0ZXMKCSAgICAgICAgdmFyIHRvdGFsQnl0ZXMgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgZGF0YUJsb2Nrc18xID0gX192YWx1ZXMkMihkYXRhQmxvY2tzKSwgZGF0YUJsb2Nrc18xXzEgPSBkYXRhQmxvY2tzXzEubmV4dCgpOyAhZGF0YUJsb2Nrc18xXzEuZG9uZTsgZGF0YUJsb2Nrc18xXzEgPSBkYXRhQmxvY2tzXzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRhdGFCbG9jayA9IGRhdGFCbG9ja3NfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgIHRvdGFsQnl0ZXMgKz0gZGF0YUJsb2NrLmdldE51bURhdGFDb2Rld29yZHMoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGRhdGFCbG9ja3NfMV8xICYmICFkYXRhQmxvY2tzXzFfMS5kb25lICYmIChfYSA9IGRhdGFCbG9ja3NfMS5yZXR1cm4pKSBfYS5jYWxsKGRhdGFCbG9ja3NfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdEJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkodG90YWxCeXRlcyk7CgkgICAgICAgIHZhciByZXN1bHRPZmZzZXQgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgLy8gRXJyb3ItY29ycmVjdCBhbmQgY29weSBkYXRhIGJsb2NrcyB0b2dldGhlciBpbnRvIGEgc3RyZWFtIG9mIGJ5dGVzCgkgICAgICAgICAgICBmb3IgKHZhciBkYXRhQmxvY2tzXzIgPSBfX3ZhbHVlcyQyKGRhdGFCbG9ja3MpLCBkYXRhQmxvY2tzXzJfMSA9IGRhdGFCbG9ja3NfMi5uZXh0KCk7ICFkYXRhQmxvY2tzXzJfMS5kb25lOyBkYXRhQmxvY2tzXzJfMSA9IGRhdGFCbG9ja3NfMi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZGF0YUJsb2NrID0gZGF0YUJsb2Nrc18yXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgdmFyIGNvZGV3b3JkQnl0ZXMgPSBkYXRhQmxvY2suZ2V0Q29kZXdvcmRzKCk7CgkgICAgICAgICAgICAgICAgdmFyIG51bURhdGFDb2Rld29yZHMgPSBkYXRhQmxvY2suZ2V0TnVtRGF0YUNvZGV3b3JkcygpOwoJICAgICAgICAgICAgICAgIHRoaXMuY29ycmVjdEVycm9ycyhjb2Rld29yZEJ5dGVzLCBudW1EYXRhQ29kZXdvcmRzKTsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG51bURhdGFDb2Rld29yZHM7IGkrKykgewoJICAgICAgICAgICAgICAgICAgICByZXN1bHRCeXRlc1tyZXN1bHRPZmZzZXQrK10gPSBjb2Rld29yZEJ5dGVzW2ldOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8yXzEpIHsgZV8yID0geyBlcnJvcjogZV8yXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGRhdGFCbG9ja3NfMl8xICYmICFkYXRhQmxvY2tzXzJfMS5kb25lICYmIChfYiA9IGRhdGFCbG9ja3NfMi5yZXR1cm4pKSBfYi5jYWxsKGRhdGFCbG9ja3NfMik7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMikgdGhyb3cgZV8yLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gRGVjb2RlIHRoZSBjb250ZW50cyBvZiB0aGF0IHN0cmVhbSBvZiBieXRlcwoJICAgICAgICByZXR1cm4gRGVjb2RlZEJpdFN0cmVhbVBhcnNlcl8xLmRlZmF1bHQuZGVjb2RlKHJlc3VsdEJ5dGVzLCB2ZXJzaW9uLCBlY0xldmVsLCBoaW50cyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5HaXZlbiBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyByZWNlaXZlZCwgcG9zc2libHkgY29ycnVwdGVkIGJ5IGVycm9ycywgYXR0ZW1wdHMgdG8KCSAgICAgKiBjb3JyZWN0IHRoZSBlcnJvcnMgaW4tcGxhY2UgdXNpbmcgUmVlZC1Tb2xvbW9uIGVycm9yIGNvcnJlY3Rpb24uPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGNvZGV3b3JkQnl0ZXMgZGF0YSBhbmQgZXJyb3IgY29ycmVjdGlvbiBjb2Rld29yZHMKCSAgICAgKiBAcGFyYW0gbnVtRGF0YUNvZGV3b3JkcyBudW1iZXIgb2YgY29kZXdvcmRzIHRoYXQgYXJlIGRhdGEgYnl0ZXMKCSAgICAgKiBAdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uIGlmIGVycm9yIGNvcnJlY3Rpb24gZmFpbHMKCSAgICAgKi8KCSAgICBEZWNvZGVyLnByb3RvdHlwZS5jb3JyZWN0RXJyb3JzID0gZnVuY3Rpb24gKGNvZGV3b3JkQnl0ZXMsIG51bURhdGFDb2Rld29yZHMgLyppbnQqLykgewoJICAgICAgICAvLyBjb25zdCBudW1Db2Rld29yZHMgPSBjb2Rld29yZEJ5dGVzLmxlbmd0aDsKCSAgICAgICAgLy8gRmlyc3QgcmVhZCBpbnRvIGFuIGFycmF5IG9mIGludHMKCSAgICAgICAgdmFyIGNvZGV3b3Jkc0ludHMgPSBuZXcgSW50MzJBcnJheShjb2Rld29yZEJ5dGVzKTsKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IG5vdCByZWFseSBuZWNlc3NhcnkgdG8gdHJhbnNmb3JtIHRvIGludHM/IGNvdWxkIHJlZGVzaWduIGV2ZXJ5dGhpbmcgdG8gd29yayB3aXRoIHVuc2lnbmVkIGJ5dGVzPwoJICAgICAgICAvLyBjb25zdCBjb2Rld29yZHNJbnRzID0gbmV3IEludDMyQXJyYXkobnVtQ29kZXdvcmRzKQoJICAgICAgICAvLyBmb3IgKGxldCBpID0gMDsgaSA8IG51bUNvZGV3b3JkczsgaSsrKSB7CgkgICAgICAgIC8vICAgY29kZXdvcmRzSW50c1tpXSA9IGNvZGV3b3JkQnl0ZXNbaV0gJiAweEZGCgkgICAgICAgIC8vIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHRoaXMucnNEZWNvZGVyLmRlY29kZShjb2Rld29yZHNJbnRzLCBjb2Rld29yZEJ5dGVzLmxlbmd0aCAtIG51bURhdGFDb2Rld29yZHMpOwoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChpZ25vcmVkIC8qOiBSZWVkU29sb21vbkV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgQ2hlY2tzdW1FeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29weSBiYWNrIGludG8gYXJyYXkgb2YgYnl0ZXMgLS0gb25seSBuZWVkIHRvIHdvcnJ5IGFib3V0IHRoZSBieXRlcyB0aGF0IHdlcmUgZGF0YQoJICAgICAgICAvLyBXZSBkb24ndCBjYXJlIGFib3V0IGVycm9ycyBpbiB0aGUgZXJyb3ItY29ycmVjdGlvbiBjb2Rld29yZHMKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW1EYXRhQ29kZXdvcmRzOyBpKyspIHsKCSAgICAgICAgICAgIGNvZGV3b3JkQnl0ZXNbaV0gPSAvKihieXRlKSAqLyBjb2Rld29yZHNJbnRzW2ldOwoJICAgICAgICB9CgkgICAgfTsKCSAgICByZXR1cm4gRGVjb2RlcjsKCX0oKSk7CglEZWNvZGVyJDEuZGVmYXVsdCA9IERlY29kZXI7CgoJdmFyIERldGVjdG9yJDEgPSB7fTsKCgl2YXIgTWF0aFV0aWxzJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMTIgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KE1hdGhVdGlscyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbi5kZXRlY3RvciB7Ki8KCS8qKgoJICogR2VuZXJhbCBtYXRoLXJlbGF0ZWQgYW5kIG51bWVyaWMgdXRpbGl0eSBmdW5jdGlvbnMuCgkgKi8KCXZhciBNYXRoVXRpbHMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gTWF0aFV0aWxzKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiBFbmRzIHVwIGJlaW5nIGEgYml0IGZhc3RlciB0aGFuIHtAbGluayBNYXRoI3JvdW5kKGZsb2F0KX0uIFRoaXMgbWVyZWx5IHJvdW5kcyBpdHMKCSAgICAgKiBhcmd1bWVudCB0byB0aGUgbmVhcmVzdCBpbnQsIHdoZXJlIHguNSByb3VuZHMgdXAgdG8geCsxLiBTZW1hbnRpY3Mgb2YgdGhpcyBzaG9ydGN1dAoJICAgICAqIGRpZmZlciBzbGlnaHRseSBmcm9tIHtAbGluayBNYXRoI3JvdW5kKGZsb2F0KX0gaW4gdGhhdCBoYWxmIHJvdW5kcyBkb3duIGZvciBuZWdhdGl2ZQoJICAgICAqIHZhbHVlcy4gLTIuNSByb3VuZHMgdG8gLTMsIG5vdCAtMi4gRm9yIHB1cnBvc2VzIGhlcmUgaXQgbWFrZXMgbm8gZGlmZmVyZW5jZS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBkIHJlYWwgdmFsdWUgdG8gcm91bmQKCSAgICAgKiBAcmV0dXJuIG5lYXJlc3Qge0Bjb2RlIGludH0KCSAgICAgKi8KCSAgICBNYXRoVXRpbHMucm91bmQgPSBmdW5jdGlvbiAoZCAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE5hTiA9PT0gZCkKCSAgICAgICAgICAgIHJldHVybiAwOwoJICAgICAgICBpZiAoZCA8PSBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUikKCSAgICAgICAgICAgIHJldHVybiBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUjsKCSAgICAgICAgaWYgKGQgPj0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIpCgkgICAgICAgICAgICByZXR1cm4gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgICAgIHJldHVybiAvKihpbnQpICovIChkICsgKGQgPCAwLjAgPyAtMC41IDogMC41KSkgfCAwOwoJICAgIH07CgkgICAgLy8gVFlQRVNDUklQVFBPUlQ6IG1heWJlIHJlbW92ZSByb3VuZCBtZXRob2QgYW5kIGNhbGwgZGlyZWN0bHkgTWF0aC5yb3VuZCwgaXQgbG9va3MgbGlrZSBpdCBkb2Vzbid0IG1ha2Ugc2Vuc2UgZm9yIGpzCgkgICAgLyoqCgkgICAgICogQHBhcmFtIGFYIHBvaW50IEEgeCBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGFZIHBvaW50IEEgeSBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGJYIHBvaW50IEIgeCBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGJZIHBvaW50IEIgeSBjb29yZGluYXRlCgkgICAgICogQHJldHVybiBFdWNsaWRlYW4gZGlzdGFuY2UgYmV0d2VlbiBwb2ludHMgQSBhbmQgQgoJICAgICAqLwoJICAgIE1hdGhVdGlscy5kaXN0YW5jZSA9IGZ1bmN0aW9uIChhWCAvKmZsb2F0fGludCovLCBhWSAvKmZsb2F0fGludCovLCBiWCAvKmZsb2F0fGludCovLCBiWSAvKmZsb2F0fGludCovKSB7CgkgICAgICAgIHZhciB4RGlmZiA9IGFYIC0gYlg7CgkgICAgICAgIHZhciB5RGlmZiA9IGFZIC0gYlk7CgkgICAgICAgIHJldHVybiAvKihmbG9hdCkgKi8gTWF0aC5zcXJ0KHhEaWZmICogeERpZmYgKyB5RGlmZiAqIHlEaWZmKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBhWCBwb2ludCBBIHggY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBhWSBwb2ludCBBIHkgY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBiWCBwb2ludCBCIHggY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBiWSBwb2ludCBCIHkgY29vcmRpbmF0ZQoJICAgICAqIEByZXR1cm4gRXVjbGlkZWFuIGRpc3RhbmNlIGJldHdlZW4gcG9pbnRzIEEgYW5kIEIKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgc3RhdGljIGRpc3RhbmNlKGFYOiBudW1iZXIgLyppbnQqLywgYVk6IG51bWJlciAvKmludCovLCBiWDogbnVtYmVyIC8qaW50Ki8sIGJZOiBudW1iZXIgLyppbnQqLyk6IGZsb2F0IHsKCSAgICAvLyAgIGNvbnN0IHhEaWZmID0gYVggLSBiWAoJICAgIC8vICAgY29uc3QgeURpZmYgPSBhWSAtIGJZCgkgICAgLy8gICByZXR1cm4gKGZsb2F0KSBNYXRoLnNxcnQoeERpZmYgKiB4RGlmZiArIHlEaWZmICogeURpZmYpOwoJICAgIC8vIH0KCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYXJyYXkgdmFsdWVzIHRvIHN1bQoJICAgICAqIEByZXR1cm4gc3VtIG9mIHZhbHVlcyBpbiBhcnJheQoJICAgICAqLwoJICAgIE1hdGhVdGlscy5zdW0gPSBmdW5jdGlvbiAoYXJyYXkpIHsKCSAgICAgICAgdmFyIGNvdW50ID0gMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gYXJyYXkubGVuZ3RoOyBpICE9PSBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgYSA9IGFycmF5W2ldOwoJICAgICAgICAgICAgY291bnQgKz0gYTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gY291bnQ7CgkgICAgfTsKCSAgICByZXR1cm4gTWF0aFV0aWxzOwoJfSgpKTsKCU1hdGhVdGlscyQxLmRlZmF1bHQgPSBNYXRoVXRpbHM7CgoJdmFyIERldGVjdG9yUmVzdWx0JDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KERldGVjdG9yUmVzdWx0JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGV0ZWN0aW5nIGEgYmFyY29kZSBpbiBhbiBpbWFnZS4gVGhpcyBpbmNsdWRlcyB0aGUgcmF3CgkgKiBtYXRyaXggb2YgYmxhY2svd2hpdGUgcGl4ZWxzIGNvcnJlc3BvbmRpbmcgdG8gdGhlIGJhcmNvZGUsIGFuZCBwb3NzaWJseSBwb2ludHMgb2YgaW50ZXJlc3QKCSAqIGluIHRoZSBpbWFnZSwgbGlrZSB0aGUgbG9jYXRpb24gb2YgZmluZGVyIHBhdHRlcm5zIG9yIGNvcm5lcnMgb2YgdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGV0ZWN0b3JSZXN1bHQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gRGV0ZWN0b3JSZXN1bHQoYml0cywgcG9pbnRzKSB7CgkgICAgICAgIHRoaXMuYml0cyA9IGJpdHM7CgkgICAgICAgIHRoaXMucG9pbnRzID0gcG9pbnRzOwoJICAgIH0KCSAgICBEZXRlY3RvclJlc3VsdC5wcm90b3R5cGUuZ2V0Qml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYml0czsKCSAgICB9OwoJICAgIERldGVjdG9yUmVzdWx0LnByb3RvdHlwZS5nZXRQb2ludHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnBvaW50czsKCSAgICB9OwoJICAgIHJldHVybiBEZXRlY3RvclJlc3VsdDsKCX0oKSk7CglEZXRlY3RvclJlc3VsdCQxLmRlZmF1bHQgPSBEZXRlY3RvclJlc3VsdDsKCgl2YXIgR3JpZFNhbXBsZXJJbnN0YW5jZSQxID0ge307CgoJdmFyIERlZmF1bHRHcmlkU2FtcGxlciQxID0ge307CgoJdmFyIEdyaWRTYW1wbGVyJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEdyaWRTYW1wbGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDUgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBJbXBsZW1lbnRhdGlvbnMgb2YgdGhpcyBjbGFzcyBjYW4sIGdpdmVuIGxvY2F0aW9ucyBvZiBmaW5kZXIgcGF0dGVybnMgZm9yIGEgUVIgY29kZSBpbiBhbgoJICogaW1hZ2UsIHNhbXBsZSB0aGUgcmlnaHQgcG9pbnRzIGluIHRoZSBpbWFnZSB0byByZWNvbnN0cnVjdCB0aGUgUVIgY29kZSwgYWNjb3VudGluZyBmb3IKCSAqIHBlcnNwZWN0aXZlIGRpc3RvcnRpb24uIEl0IGlzIGFic3RyYWN0ZWQgc2luY2UgaXQgaXMgcmVsYXRpdmVseSBleHBlbnNpdmUgYW5kIHNob3VsZCBiZSBhbGxvd2VkCgkgKiB0byB0YWtlIGFkdmFudGFnZSBvZiBwbGF0Zm9ybS1zcGVjaWZpYyBvcHRpbWl6ZWQgaW1wbGVtZW50YXRpb25zLCBsaWtlIFN1bidzIEphdmEgQWR2YW5jZWQKCSAqIEltYWdpbmcgbGlicmFyeSwgYnV0IHdoaWNoIG1heSBub3QgYmUgYXZhaWxhYmxlIGluIG90aGVyIGVudmlyb25tZW50cyBzdWNoIGFzIEoyTUUsIGFuZCB2aWNlCgkgKiB2ZXJzYS4KCSAqCgkgKiBUaGUgaW1wbGVtZW50YXRpb24gdXNlZCBjYW4gYmUgY29udHJvbGxlZCBieSBjYWxsaW5nIHtAbGluayAjc2V0R3JpZFNhbXBsZXIoR3JpZFNhbXBsZXIpfQoJICogd2l0aCBhbiBpbnN0YW5jZSBvZiBhIGNsYXNzIHdoaWNoIGltcGxlbWVudHMgdGhpcyBpbnRlcmZhY2UuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEdyaWRTYW1wbGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEdyaWRTYW1wbGVyKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5DaGVja3MgYSBzZXQgb2YgcG9pbnRzIHRoYXQgaGF2ZSBiZWVuIHRyYW5zZm9ybWVkIHRvIHNhbXBsZSBwb2ludHMgb24gYW4gaW1hZ2UgYWdhaW5zdAoJICAgICAqIHRoZSBpbWFnZSdzIGRpbWVuc2lvbnMgdG8gc2VlIGlmIHRoZSBwb2ludCBhcmUgZXZlbiB3aXRoaW4gdGhlIGltYWdlLjwvcD4KCSAgICAgKgoJICAgICAqIDxwPlRoaXMgbWV0aG9kIHdpbGwgYWN0dWFsbHkgIm51ZGdlIiB0aGUgZW5kcG9pbnRzIGJhY2sgb250byB0aGUgaW1hZ2UgaWYgdGhleSBhcmUgZm91bmQgdG8gYmUKCSAgICAgKiBiYXJlbHkgKGxlc3MgdGhhbiAxIHBpeGVsKSBvZmYgdGhlIGltYWdlLiBUaGlzIGFjY291bnRzIGZvciBpbXBlcmZlY3QgZGV0ZWN0aW9uIG9mIGZpbmRlcgoJICAgICAqIHBhdHRlcm5zIGluIGFuIGltYWdlIHdoZXJlIHRoZSBRUiBDb2RlIHJ1bnMgYWxsIHRoZSB3YXkgdG8gdGhlIGltYWdlIGJvcmRlci48L3A+CgkgICAgICoKCSAgICAgKiA8cD5Gb3IgZWZmaWNpZW5jeSwgdGhlIG1ldGhvZCB3aWxsIGNoZWNrIHBvaW50cyBmcm9tIGVpdGhlciBlbmQgb2YgdGhlIGxpbmUgdW50aWwgb25lIGlzIGZvdW5kCgkgICAgICogdG8gYmUgd2l0aGluIHRoZSBpbWFnZS4gQmVjYXVzZSB0aGUgc2V0IG9mIHBvaW50cyBhcmUgYXNzdW1lZCB0byBiZSBsaW5lYXIsIHRoaXMgaXMgdmFsaWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGltYWdlIGltYWdlIGludG8gd2hpY2ggdGhlIHBvaW50cyBzaG91bGQgbWFwCgkgICAgICogQHBhcmFtIHBvaW50cyBhY3R1YWwgcG9pbnRzIGluIHgxLHkxLC4uLix4bix5biBmb3JtCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBhbiBlbmRwb2ludCBpcyBsaWVzIG91dHNpZGUgdGhlIGltYWdlIGJvdW5kYXJpZXMKCSAgICAgKi8KCSAgICBHcmlkU2FtcGxlci5jaGVja0FuZE51ZGdlUG9pbnRzID0gZnVuY3Rpb24gKGltYWdlLCBwb2ludHMpIHsKCSAgICAgICAgdmFyIHdpZHRoID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IGltYWdlLmdldEhlaWdodCgpOwoJICAgICAgICAvLyBDaGVjayBhbmQgbnVkZ2UgcG9pbnRzIGZyb20gc3RhcnQgdW50aWwgd2Ugc2VlIHNvbWUgdGhhdCBhcmUgT0s6CgkgICAgICAgIHZhciBudWRnZWQgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBvZmZzZXQgPSAwOyBvZmZzZXQgPCBwb2ludHMubGVuZ3RoICYmIG51ZGdlZDsgb2Zmc2V0ICs9IDIpIHsKCSAgICAgICAgICAgIHZhciB4ID0gTWF0aC5mbG9vcihwb2ludHNbb2Zmc2V0XSk7CgkgICAgICAgICAgICB2YXIgeSA9IE1hdGguZmxvb3IocG9pbnRzW29mZnNldCArIDFdKTsKCSAgICAgICAgICAgIGlmICh4IDwgLTEgfHwgeCA+IHdpZHRoIHx8IHkgPCAtMSB8fCB5ID4gaGVpZ2h0KSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBudWRnZWQgPSBmYWxzZTsKCSAgICAgICAgICAgIGlmICh4ID09PSAtMSkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXRdID0gMC4wOwoJICAgICAgICAgICAgICAgIG51ZGdlZCA9IHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIGlmICh4ID09PSB3aWR0aCkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXRdID0gd2lkdGggLSAxOwoJICAgICAgICAgICAgICAgIG51ZGdlZCA9IHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBpZiAoeSA9PT0gLTEpIHsKCSAgICAgICAgICAgICAgICBwb2ludHNbb2Zmc2V0ICsgMV0gPSAwLjA7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHkgPT09IGhlaWdodCkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXQgKyAxXSA9IGhlaWdodCAtIDE7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICAvLyBDaGVjayBhbmQgbnVkZ2UgcG9pbnRzIGZyb20gZW5kOgoJICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBvZmZzZXQgPSBwb2ludHMubGVuZ3RoIC0gMjsgb2Zmc2V0ID49IDAgJiYgbnVkZ2VkOyBvZmZzZXQgLT0gMikgewoJICAgICAgICAgICAgdmFyIHggPSBNYXRoLmZsb29yKHBvaW50c1tvZmZzZXRdKTsKCSAgICAgICAgICAgIHZhciB5ID0gTWF0aC5mbG9vcihwb2ludHNbb2Zmc2V0ICsgMV0pOwoJICAgICAgICAgICAgaWYgKHggPCAtMSB8fCB4ID4gd2lkdGggfHwgeSA8IC0xIHx8IHkgPiBoZWlnaHQpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQ1LmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIG51ZGdlZCA9IGZhbHNlOwoJICAgICAgICAgICAgaWYgKHggPT09IC0xKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldF0gPSAwLjA7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHggPT09IHdpZHRoKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldF0gPSB3aWR0aCAtIDE7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmICh5ID09PSAtMSkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXQgKyAxXSA9IDAuMDsKCSAgICAgICAgICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSBpZiAoeSA9PT0gaGVpZ2h0KSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldCArIDFdID0gaGVpZ2h0IC0gMTsKCSAgICAgICAgICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICByZXR1cm4gR3JpZFNhbXBsZXI7Cgl9KCkpOwoJR3JpZFNhbXBsZXIkMS5kZWZhdWx0ID0gR3JpZFNhbXBsZXI7CgoJdmFyIFBlcnNwZWN0aXZlVHJhbnNmb3JtJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFBlcnNwZWN0aXZlVHJhbnNmb3JtJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyoqCgkgKiA8cD5UaGlzIGNsYXNzIGltcGxlbWVudHMgYSBwZXJzcGVjdGl2ZSB0cmFuc2Zvcm0gaW4gdHdvIGRpbWVuc2lvbnMuIEdpdmVuIGZvdXIgc291cmNlIGFuZCBmb3VyCgkgKiBkZXN0aW5hdGlvbiBwb2ludHMsIGl0IHdpbGwgY29tcHV0ZSB0aGUgdHJhbnNmb3JtYXRpb24gaW1wbGllZCBiZXR3ZWVuIHRoZW0uIFRoZSBjb2RlIGlzIGJhc2VkCgkgKiBkaXJlY3RseSB1cG9uIHNlY3Rpb24gMy40LjIgb2YgR2VvcmdlIFdvbGJlcmcncyAiRGlnaXRhbCBJbWFnZSBXYXJwaW5nIjsgc2VlIHBhZ2VzIDU0LTU2LjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUGVyc3BlY3RpdmVUcmFuc2Zvcm0gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUGVyc3BlY3RpdmVUcmFuc2Zvcm0oYTExIC8qZmxvYXQqLywgYTIxIC8qZmxvYXQqLywgYTMxIC8qZmxvYXQqLywgYTEyIC8qZmxvYXQqLywgYTIyIC8qZmxvYXQqLywgYTMyIC8qZmxvYXQqLywgYTEzIC8qZmxvYXQqLywgYTIzIC8qZmxvYXQqLywgYTMzIC8qZmxvYXQqLykgewoJICAgICAgICB0aGlzLmExMSA9IGExMTsKCSAgICAgICAgdGhpcy5hMjEgPSBhMjE7CgkgICAgICAgIHRoaXMuYTMxID0gYTMxOwoJICAgICAgICB0aGlzLmExMiA9IGExMjsKCSAgICAgICAgdGhpcy5hMjIgPSBhMjI7CgkgICAgICAgIHRoaXMuYTMyID0gYTMyOwoJICAgICAgICB0aGlzLmExMyA9IGExMzsKCSAgICAgICAgdGhpcy5hMjMgPSBhMjM7CgkgICAgICAgIHRoaXMuYTMzID0gYTMzOwoJICAgIH0KCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5xdWFkcmlsYXRlcmFsVG9RdWFkcmlsYXRlcmFsID0gZnVuY3Rpb24gKHgwIC8qZmxvYXQqLywgeTAgLypmbG9hdCovLCB4MSAvKmZsb2F0Ki8sIHkxIC8qZmxvYXQqLywgeDIgLypmbG9hdCovLCB5MiAvKmZsb2F0Ki8sIHgzIC8qZmxvYXQqLywgeTMgLypmbG9hdCovLCB4MHAgLypmbG9hdCovLCB5MHAgLypmbG9hdCovLCB4MXAgLypmbG9hdCovLCB5MXAgLypmbG9hdCovLCB4MnAgLypmbG9hdCovLCB5MnAgLypmbG9hdCovLCB4M3AgLypmbG9hdCovLCB5M3AgLypmbG9hdCovKSB7CgkgICAgICAgIHZhciBxVG9TID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm0ucXVhZHJpbGF0ZXJhbFRvU3F1YXJlKHgwLCB5MCwgeDEsIHkxLCB4MiwgeTIsIHgzLCB5Myk7CgkgICAgICAgIHZhciBzVG9RID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm0uc3F1YXJlVG9RdWFkcmlsYXRlcmFsKHgwcCwgeTBwLCB4MXAsIHkxcCwgeDJwLCB5MnAsIHgzcCwgeTNwKTsKCSAgICAgICAgcmV0dXJuIHNUb1EudGltZXMocVRvUyk7CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5wcm90b3R5cGUudHJhbnNmb3JtUG9pbnRzID0gZnVuY3Rpb24gKHBvaW50cykgewoJICAgICAgICB2YXIgbWF4ID0gcG9pbnRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGExMSA9IHRoaXMuYTExOwoJICAgICAgICB2YXIgYTEyID0gdGhpcy5hMTI7CgkgICAgICAgIHZhciBhMTMgPSB0aGlzLmExMzsKCSAgICAgICAgdmFyIGEyMSA9IHRoaXMuYTIxOwoJICAgICAgICB2YXIgYTIyID0gdGhpcy5hMjI7CgkgICAgICAgIHZhciBhMjMgPSB0aGlzLmEyMzsKCSAgICAgICAgdmFyIGEzMSA9IHRoaXMuYTMxOwoJICAgICAgICB2YXIgYTMyID0gdGhpcy5hMzI7CgkgICAgICAgIHZhciBhMzMgPSB0aGlzLmEzMzsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXg7IGkgKz0gMikgewoJICAgICAgICAgICAgdmFyIHggPSBwb2ludHNbaV07CgkgICAgICAgICAgICB2YXIgeSA9IHBvaW50c1tpICsgMV07CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3IgPSBhMTMgKiB4ICsgYTIzICogeSArIGEzMzsKCSAgICAgICAgICAgIHBvaW50c1tpXSA9IChhMTEgKiB4ICsgYTIxICogeSArIGEzMSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHBvaW50c1tpICsgMV0gPSAoYTEyICogeCArIGEyMiAqIHkgKyBhMzIpIC8gZGVub21pbmF0b3I7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnByb3RvdHlwZS50cmFuc2Zvcm1Qb2ludHNXaXRoVmFsdWVzID0gZnVuY3Rpb24gKHhWYWx1ZXMsIHlWYWx1ZXMpIHsKCSAgICAgICAgdmFyIGExMSA9IHRoaXMuYTExOwoJICAgICAgICB2YXIgYTEyID0gdGhpcy5hMTI7CgkgICAgICAgIHZhciBhMTMgPSB0aGlzLmExMzsKCSAgICAgICAgdmFyIGEyMSA9IHRoaXMuYTIxOwoJICAgICAgICB2YXIgYTIyID0gdGhpcy5hMjI7CgkgICAgICAgIHZhciBhMjMgPSB0aGlzLmEyMzsKCSAgICAgICAgdmFyIGEzMSA9IHRoaXMuYTMxOwoJICAgICAgICB2YXIgYTMyID0gdGhpcy5hMzI7CgkgICAgICAgIHZhciBhMzMgPSB0aGlzLmEzMzsKCSAgICAgICAgdmFyIG4gPSB4VmFsdWVzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuOyBpKyspIHsKCSAgICAgICAgICAgIHZhciB4ID0geFZhbHVlc1tpXTsKCSAgICAgICAgICAgIHZhciB5ID0geVZhbHVlc1tpXTsKCSAgICAgICAgICAgIHZhciBkZW5vbWluYXRvciA9IGExMyAqIHggKyBhMjMgKiB5ICsgYTMzOwoJICAgICAgICAgICAgeFZhbHVlc1tpXSA9IChhMTEgKiB4ICsgYTIxICogeSArIGEzMSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHlWYWx1ZXNbaV0gPSAoYTEyICogeCArIGEyMiAqIHkgKyBhMzIpIC8gZGVub21pbmF0b3I7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnNxdWFyZVRvUXVhZHJpbGF0ZXJhbCA9IGZ1bmN0aW9uICh4MCAvKmZsb2F0Ki8sIHkwIC8qZmxvYXQqLywgeDEgLypmbG9hdCovLCB5MSAvKmZsb2F0Ki8sIHgyIC8qZmxvYXQqLywgeTIgLypmbG9hdCovLCB4MyAvKmZsb2F0Ki8sIHkzIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgZHgzID0geDAgLSB4MSArIHgyIC0geDM7CgkgICAgICAgIHZhciBkeTMgPSB5MCAtIHkxICsgeTIgLSB5MzsKCSAgICAgICAgaWYgKGR4MyA9PT0gMC4wICYmIGR5MyA9PT0gMC4wKSB7CgkgICAgICAgICAgICAvLyBBZmZpbmUKCSAgICAgICAgICAgIHJldHVybiBuZXcgUGVyc3BlY3RpdmVUcmFuc2Zvcm0oeDEgLSB4MCwgeDIgLSB4MSwgeDAsIHkxIC0geTAsIHkyIC0geTEsIHkwLCAwLjAsIDAuMCwgMS4wKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHZhciBkeDEgPSB4MSAtIHgyOwoJICAgICAgICAgICAgdmFyIGR4MiA9IHgzIC0geDI7CgkgICAgICAgICAgICB2YXIgZHkxID0geTEgLSB5MjsKCSAgICAgICAgICAgIHZhciBkeTIgPSB5MyAtIHkyOwoJICAgICAgICAgICAgdmFyIGRlbm9taW5hdG9yID0gZHgxICogZHkyIC0gZHgyICogZHkxOwoJICAgICAgICAgICAgdmFyIGExMyA9IChkeDMgKiBkeTIgLSBkeDIgKiBkeTMpIC8gZGVub21pbmF0b3I7CgkgICAgICAgICAgICB2YXIgYTIzID0gKGR4MSAqIGR5MyAtIGR4MyAqIGR5MSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHJldHVybiBuZXcgUGVyc3BlY3RpdmVUcmFuc2Zvcm0oeDEgLSB4MCArIGExMyAqIHgxLCB4MyAtIHgwICsgYTIzICogeDMsIHgwLCB5MSAtIHkwICsgYTEzICogeTEsIHkzIC0geTAgKyBhMjMgKiB5MywgeTAsIGExMywgYTIzLCAxLjApOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5xdWFkcmlsYXRlcmFsVG9TcXVhcmUgPSBmdW5jdGlvbiAoeDAgLypmbG9hdCovLCB5MCAvKmZsb2F0Ki8sIHgxIC8qZmxvYXQqLywgeTEgLypmbG9hdCovLCB4MiAvKmZsb2F0Ki8sIHkyIC8qZmxvYXQqLywgeDMgLypmbG9hdCovLCB5MyAvKmZsb2F0Ki8pIHsKCSAgICAgICAgLy8gSGVyZSwgdGhlIGFkam9pbnQgc2VydmVzIGFzIHRoZSBpbnZlcnNlOgoJICAgICAgICByZXR1cm4gUGVyc3BlY3RpdmVUcmFuc2Zvcm0uc3F1YXJlVG9RdWFkcmlsYXRlcmFsKHgwLCB5MCwgeDEsIHkxLCB4MiwgeTIsIHgzLCB5MykuYnVpbGRBZGpvaW50KCk7CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5wcm90b3R5cGUuYnVpbGRBZGpvaW50ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBBZGpvaW50IGlzIHRoZSB0cmFuc3Bvc2Ugb2YgdGhlIGNvZmFjdG9yIG1hdHJpeDoKCSAgICAgICAgcmV0dXJuIG5ldyBQZXJzcGVjdGl2ZVRyYW5zZm9ybSh0aGlzLmEyMiAqIHRoaXMuYTMzIC0gdGhpcy5hMjMgKiB0aGlzLmEzMiwgdGhpcy5hMjMgKiB0aGlzLmEzMSAtIHRoaXMuYTIxICogdGhpcy5hMzMsIHRoaXMuYTIxICogdGhpcy5hMzIgLSB0aGlzLmEyMiAqIHRoaXMuYTMxLCB0aGlzLmExMyAqIHRoaXMuYTMyIC0gdGhpcy5hMTIgKiB0aGlzLmEzMywgdGhpcy5hMTEgKiB0aGlzLmEzMyAtIHRoaXMuYTEzICogdGhpcy5hMzEsIHRoaXMuYTEyICogdGhpcy5hMzEgLSB0aGlzLmExMSAqIHRoaXMuYTMyLCB0aGlzLmExMiAqIHRoaXMuYTIzIC0gdGhpcy5hMTMgKiB0aGlzLmEyMiwgdGhpcy5hMTMgKiB0aGlzLmEyMSAtIHRoaXMuYTExICogdGhpcy5hMjMsIHRoaXMuYTExICogdGhpcy5hMjIgLSB0aGlzLmExMiAqIHRoaXMuYTIxKTsKCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnByb3RvdHlwZS50aW1lcyA9IGZ1bmN0aW9uIChvdGhlcikgewoJICAgICAgICByZXR1cm4gbmV3IFBlcnNwZWN0aXZlVHJhbnNmb3JtKHRoaXMuYTExICogb3RoZXIuYTExICsgdGhpcy5hMjEgKiBvdGhlci5hMTIgKyB0aGlzLmEzMSAqIG90aGVyLmExMywgdGhpcy5hMTEgKiBvdGhlci5hMjEgKyB0aGlzLmEyMSAqIG90aGVyLmEyMiArIHRoaXMuYTMxICogb3RoZXIuYTIzLCB0aGlzLmExMSAqIG90aGVyLmEzMSArIHRoaXMuYTIxICogb3RoZXIuYTMyICsgdGhpcy5hMzEgKiBvdGhlci5hMzMsIHRoaXMuYTEyICogb3RoZXIuYTExICsgdGhpcy5hMjIgKiBvdGhlci5hMTIgKyB0aGlzLmEzMiAqIG90aGVyLmExMywgdGhpcy5hMTIgKiBvdGhlci5hMjEgKyB0aGlzLmEyMiAqIG90aGVyLmEyMiArIHRoaXMuYTMyICogb3RoZXIuYTIzLCB0aGlzLmExMiAqIG90aGVyLmEzMSArIHRoaXMuYTIyICogb3RoZXIuYTMyICsgdGhpcy5hMzIgKiBvdGhlci5hMzMsIHRoaXMuYTEzICogb3RoZXIuYTExICsgdGhpcy5hMjMgKiBvdGhlci5hMTIgKyB0aGlzLmEzMyAqIG90aGVyLmExMywgdGhpcy5hMTMgKiBvdGhlci5hMjEgKyB0aGlzLmEyMyAqIG90aGVyLmEyMiArIHRoaXMuYTMzICogb3RoZXIuYTIzLCB0aGlzLmExMyAqIG90aGVyLmEzMSArIHRoaXMuYTIzICogb3RoZXIuYTMyICsgdGhpcy5hMzMgKiBvdGhlci5hMzMpOwoJICAgIH07CgkgICAgcmV0dXJuIFBlcnNwZWN0aXZlVHJhbnNmb3JtOwoJfSgpKTsKCVBlcnNwZWN0aXZlVHJhbnNmb3JtJDEuZGVmYXVsdCA9IFBlcnNwZWN0aXZlVHJhbnNmb3JtOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDIgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGVmYXVsdEdyaWRTYW1wbGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJdmFyIEdyaWRTYW1wbGVyXzEgPSBHcmlkU2FtcGxlciQxOwoJdmFyIEJpdE1hdHJpeF8xJDEgPSBCaXRNYXRyaXgkMTsKCXZhciBQZXJzcGVjdGl2ZVRyYW5zZm9ybV8xJDEgPSBQZXJzcGVjdGl2ZVRyYW5zZm9ybSQxOwoJdmFyIE5vdEZvdW5kRXhjZXB0aW9uXzEkNCA9IE5vdEZvdW5kRXhjZXB0aW9uJDE7CgkvKioKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBEZWZhdWx0R3JpZFNhbXBsZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDIoRGVmYXVsdEdyaWRTYW1wbGVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIERlZmF1bHRHcmlkU2FtcGxlcigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICAvKkBPdmVycmlkZSovCgkgICAgRGVmYXVsdEdyaWRTYW1wbGVyLnByb3RvdHlwZS5zYW1wbGVHcmlkID0gZnVuY3Rpb24gKGltYWdlLCBkaW1lbnNpb25YIC8qaW50Ki8sIGRpbWVuc2lvblkgLyppbnQqLywgcDFUb1ggLypmbG9hdCovLCBwMVRvWSAvKmZsb2F0Ki8sIHAyVG9YIC8qZmxvYXQqLywgcDJUb1kgLypmbG9hdCovLCBwM1RvWCAvKmZsb2F0Ki8sIHAzVG9ZIC8qZmxvYXQqLywgcDRUb1ggLypmbG9hdCovLCBwNFRvWSAvKmZsb2F0Ki8sIHAxRnJvbVggLypmbG9hdCovLCBwMUZyb21ZIC8qZmxvYXQqLywgcDJGcm9tWCAvKmZsb2F0Ki8sIHAyRnJvbVkgLypmbG9hdCovLCBwM0Zyb21YIC8qZmxvYXQqLywgcDNGcm9tWSAvKmZsb2F0Ki8sIHA0RnJvbVggLypmbG9hdCovLCBwNEZyb21ZIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgdHJhbnNmb3JtID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm1fMSQxLmRlZmF1bHQucXVhZHJpbGF0ZXJhbFRvUXVhZHJpbGF0ZXJhbChwMVRvWCwgcDFUb1ksIHAyVG9YLCBwMlRvWSwgcDNUb1gsIHAzVG9ZLCBwNFRvWCwgcDRUb1ksIHAxRnJvbVgsIHAxRnJvbVksIHAyRnJvbVgsIHAyRnJvbVksIHAzRnJvbVgsIHAzRnJvbVksIHA0RnJvbVgsIHA0RnJvbVkpOwoJICAgICAgICByZXR1cm4gdGhpcy5zYW1wbGVHcmlkV2l0aFRyYW5zZm9ybShpbWFnZSwgZGltZW5zaW9uWCwgZGltZW5zaW9uWSwgdHJhbnNmb3JtKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBEZWZhdWx0R3JpZFNhbXBsZXIucHJvdG90eXBlLnNhbXBsZUdyaWRXaXRoVHJhbnNmb3JtID0gZnVuY3Rpb24gKGltYWdlLCBkaW1lbnNpb25YIC8qaW50Ki8sIGRpbWVuc2lvblkgLyppbnQqLywgdHJhbnNmb3JtKSB7CgkgICAgICAgIGlmIChkaW1lbnNpb25YIDw9IDAgfHwgZGltZW5zaW9uWSA8PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRNYXRyaXhfMSQxLmRlZmF1bHQoZGltZW5zaW9uWCwgZGltZW5zaW9uWSk7CgkgICAgICAgIHZhciBwb2ludHMgPSBuZXcgRmxvYXQzMkFycmF5KDIgKiBkaW1lbnNpb25YKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBkaW1lbnNpb25ZOyB5KyspIHsKCSAgICAgICAgICAgIHZhciBtYXggPSBwb2ludHMubGVuZ3RoOwoJICAgICAgICAgICAgdmFyIGlWYWx1ZSA9IHkgKyAwLjU7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG1heDsgeCArPSAyKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW3hdID0gKHggLyAyKSArIDAuNTsKCSAgICAgICAgICAgICAgICBwb2ludHNbeCArIDFdID0gaVZhbHVlOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdHJhbnNmb3JtLnRyYW5zZm9ybVBvaW50cyhwb2ludHMpOwoJICAgICAgICAgICAgLy8gUXVpY2sgY2hlY2sgdG8gc2VlIGlmIHBvaW50cyB0cmFuc2Zvcm1lZCB0byBzb21ldGhpbmcgaW5zaWRlIHRoZSBpbWFnZQoJICAgICAgICAgICAgLy8gc3VmZmljaWVudCB0byBjaGVjayB0aGUgZW5kcG9pbnRzCgkgICAgICAgICAgICBHcmlkU2FtcGxlcl8xLmRlZmF1bHQuY2hlY2tBbmROdWRnZVBvaW50cyhpbWFnZSwgcG9pbnRzKTsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBtYXg7IHggKz0gMikgewoJICAgICAgICAgICAgICAgICAgICBpZiAoaW1hZ2UuZ2V0KE1hdGguZmxvb3IocG9pbnRzW3hdKSwgTWF0aC5mbG9vcihwb2ludHNbeCArIDFdKSkpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEJsYWNrKC1pc2gpIHBpeGVsCgkgICAgICAgICAgICAgICAgICAgICAgICBiaXRzLnNldCh4IC8gMiwgeSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjYXRjaCAoYWlvb2JlIC8qOiBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24qLykgewoJICAgICAgICAgICAgICAgIC8vIFRoaXMgZmVlbHMgd3JvbmcsIGJ1dCwgc29tZXRpbWVzIGlmIHRoZSBmaW5kZXIgcGF0dGVybnMgYXJlIG1pc2lkZW50aWZpZWQsIHRoZSByZXN1bHRpbmcKCSAgICAgICAgICAgICAgICAvLyB0cmFuc2Zvcm0gZ2V0cyAidHdpc3RlZCIgc3VjaCB0aGF0IGl0IG1hcHMgYSBzdHJhaWdodCBsaW5lIG9mIHBvaW50cyB0byBhIHNldCBvZiBwb2ludHMKCSAgICAgICAgICAgICAgICAvLyB3aG9zZSBlbmRwb2ludHMgYXJlIGluIGJvdW5kcywgYnV0IG90aGVycyBhcmUgbm90LiBUaGVyZSBpcyBwcm9iYWJseSBzb21lIG1hdGhlbWF0aWNhbAoJICAgICAgICAgICAgICAgIC8vIHdheSB0byBkZXRlY3QgdGhpcyBhYm91dCB0aGUgdHJhbnNmb3JtYXRpb24gdGhhdCBJIGRvbid0IGtub3cgeWV0LgoJICAgICAgICAgICAgICAgIC8vIFRoaXMgcmVzdWx0cyBpbiBhbiB1Z2x5IHJ1bnRpbWUgZXhjZXB0aW9uIGRlc3BpdGUgb3VyIGNsZXZlciBjaGVja3MgYWJvdmUgLS0gY2FuJ3QgaGF2ZQoJICAgICAgICAgICAgICAgIC8vIHRoYXQuIFdlIGNvdWxkIGNoZWNrIGVhY2ggcG9pbnQncyBjb29yZGluYXRlcyBidXQgdGhhdCBmZWVscyBkdXBsaWNhdGl2ZS4gV2Ugc2V0dGxlIGZvcgoJICAgICAgICAgICAgICAgIC8vIGNhdGNoaW5nIGFuZCB3cmFwcGluZyBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24uCgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNC5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICByZXR1cm4gRGVmYXVsdEdyaWRTYW1wbGVyOwoJfShHcmlkU2FtcGxlcl8xLmRlZmF1bHQpKTsKCURlZmF1bHRHcmlkU2FtcGxlciQxLmRlZmF1bHQgPSBEZWZhdWx0R3JpZFNhbXBsZXI7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEdyaWRTYW1wbGVySW5zdGFuY2UkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIERlZmF1bHRHcmlkU2FtcGxlcl8xID0gRGVmYXVsdEdyaWRTYW1wbGVyJDE7Cgl2YXIgR3JpZFNhbXBsZXJJbnN0YW5jZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBHcmlkU2FtcGxlckluc3RhbmNlKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiBTZXRzIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiBHcmlkU2FtcGxlciB1c2VkIGJ5IHRoZSBsaWJyYXJ5LiBPbmUgZ2xvYmFsCgkgICAgICogaW5zdGFuY2UgaXMgc3RvcmVkLCB3aGljaCBtYXkgc291bmQgcHJvYmxlbWF0aWMuIEJ1dCwgdGhlIGltcGxlbWVudGF0aW9uIHByb3ZpZGVkCgkgICAgICogb3VnaHQgdG8gYmUgYXBwcm9wcmlhdGUgZm9yIHRoZSBlbnRpcmUgcGxhdGZvcm0sIGFuZCBhbGwgdXNlcyBvZiB0aGlzIGxpYnJhcnkKCSAgICAgKiBpbiB0aGUgd2hvbGUgbGlmZXRpbWUgb2YgdGhlIEpWTS4gRm9yIGluc3RhbmNlLCBhbiBBbmRyb2lkIGFjdGl2aXR5IGNhbiBzd2FwIGluCgkgICAgICogYW4gaW1wbGVtZW50YXRpb24gdGhhdCB0YWtlcyBhZHZhbnRhZ2Ugb2YgbmF0aXZlIHBsYXRmb3JtIGxpYnJhcmllcy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBuZXdHcmlkU2FtcGxlciBUaGUgcGxhdGZvcm0tc3BlY2lmaWMgb2JqZWN0IHRvIGluc3RhbGwuCgkgICAgICovCgkgICAgR3JpZFNhbXBsZXJJbnN0YW5jZS5zZXRHcmlkU2FtcGxlciA9IGZ1bmN0aW9uIChuZXdHcmlkU2FtcGxlcikgewoJICAgICAgICBHcmlkU2FtcGxlckluc3RhbmNlLmdyaWRTYW1wbGVyID0gbmV3R3JpZFNhbXBsZXI7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHRoZSBjdXJyZW50IGltcGxlbWVudGF0aW9uIG9mIEdyaWRTYW1wbGVyCgkgICAgICovCgkgICAgR3JpZFNhbXBsZXJJbnN0YW5jZS5nZXRJbnN0YW5jZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIEdyaWRTYW1wbGVySW5zdGFuY2UuZ3JpZFNhbXBsZXI7CgkgICAgfTsKCSAgICBHcmlkU2FtcGxlckluc3RhbmNlLmdyaWRTYW1wbGVyID0gbmV3IERlZmF1bHRHcmlkU2FtcGxlcl8xLmRlZmF1bHQoKTsKCSAgICByZXR1cm4gR3JpZFNhbXBsZXJJbnN0YW5jZTsKCX0oKSk7CglHcmlkU2FtcGxlckluc3RhbmNlJDEuZGVmYXVsdCA9IEdyaWRTYW1wbGVySW5zdGFuY2U7CgoJdmFyIFJlc3VsdFBvaW50JDEgPSB7fTsKCgl2YXIgRmxvYXQkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShGbG9hdCQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKioKCSAqIFBvbnlmaWxsIGZvciBKYXZhJ3MgRmxvYXQgY2xhc3MuCgkgKi8KCXZhciBGbG9hdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBGbG9hdCgpIHsKCSAgICB9CgkgICAgLyoqCgkgICAgICogU2luY1RTIGhhcyBubyBkaWZmZXJlbmNlIGJldHdlZW4gaW50IGFuZCBmbG9hdCwgdGhlcmUncyBhbGwgbnVtYmVycywKCSAgICAgKiB0aGlzIGlzIHVzZWQgb25seSB0byBwb2x5ZmlsbCBKYXZhIGNvZGUuCgkgICAgICovCgkgICAgRmxvYXQuZmxvYXRUb0ludEJpdHMgPSBmdW5jdGlvbiAoZikgewoJICAgICAgICByZXR1cm4gZjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFRoZSBmbG9hdCBtYXggdmFsdWUgaW4gSlMgaXMgdGhlIG51bWJlciBtYXggdmFsdWUuCgkgICAgICovCgkgICAgRmxvYXQuTUFYX1ZBTFVFID0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgcmV0dXJuIEZsb2F0OwoJfSgpKTsKCUZsb2F0JDEuZGVmYXVsdCA9IEZsb2F0OwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVzdWx0UG9pbnQkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCXZhciBNYXRoVXRpbHNfMSQxID0gTWF0aFV0aWxzJDE7Cgl2YXIgRmxvYXRfMSA9IEZsb2F0JDE7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIHBvaW50IG9mIGludGVyZXN0IGluIGFuIGltYWdlIGNvbnRhaW5pbmcgYSBiYXJjb2RlLiBUeXBpY2FsbHksIHRoaXMKCSAqIHdvdWxkIGJlIHRoZSBsb2NhdGlvbiBvZiBhIGZpbmRlciBwYXR0ZXJuIG9yIHRoZSBjb3JuZXIgb2YgdGhlIGJhcmNvZGUsIGZvciBleGFtcGxlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUmVzdWx0UG9pbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUmVzdWx0UG9pbnQoeCwgeSkgewoJICAgICAgICB0aGlzLnggPSB4OwoJICAgICAgICB0aGlzLnkgPSB5OwoJICAgIH0KCSAgICBSZXN1bHRQb2ludC5wcm90b3R5cGUuZ2V0WCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMueDsKCSAgICB9OwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5nZXRZID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy55OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKG90aGVyIGluc3RhbmNlb2YgUmVzdWx0UG9pbnQpIHsKCSAgICAgICAgICAgIHZhciBvdGhlclBvaW50ID0gb3RoZXI7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy54ID09PSBvdGhlclBvaW50LnggJiYgdGhpcy55ID09PSBvdGhlclBvaW50Lnk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDMxICogRmxvYXRfMS5kZWZhdWx0LmZsb2F0VG9JbnRCaXRzKHRoaXMueCkgKyBGbG9hdF8xLmRlZmF1bHQuZmxvYXRUb0ludEJpdHModGhpcy55KTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBSZXN1bHRQb2ludC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiAnKCcgKyB0aGlzLnggKyAnLCcgKyB0aGlzLnkgKyAnKSc7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBPcmRlcnMgYW4gYXJyYXkgb2YgdGhyZWUgUmVzdWx0UG9pbnRzIGluIGFuIG9yZGVyIFtBLEIsQ10gc3VjaCB0aGF0IEFCIGlzIGxlc3MgdGhhbiBBQwoJICAgICAqIGFuZCBCQyBpcyBsZXNzIHRoYW4gQUMsIGFuZCB0aGUgYW5nbGUgYmV0d2VlbiBCQyBhbmQgQkEgaXMgbGVzcyB0aGFuIDE4MCBkZWdyZWVzLgoJICAgICAqCgkgICAgICogQHBhcmFtIHBhdHRlcm5zIGFycmF5IG9mIHRocmVlIHtAY29kZSBSZXN1bHRQb2ludH0gdG8gb3JkZXIKCSAgICAgKi8KCSAgICBSZXN1bHRQb2ludC5vcmRlckJlc3RQYXR0ZXJucyA9IGZ1bmN0aW9uIChwYXR0ZXJucykgewoJICAgICAgICAvLyBGaW5kIGRpc3RhbmNlcyBiZXR3ZWVuIHBhdHRlcm4gY2VudGVycwoJICAgICAgICB2YXIgemVyb09uZURpc3RhbmNlID0gdGhpcy5kaXN0YW5jZShwYXR0ZXJuc1swXSwgcGF0dGVybnNbMV0pOwoJICAgICAgICB2YXIgb25lVHdvRGlzdGFuY2UgPSB0aGlzLmRpc3RhbmNlKHBhdHRlcm5zWzFdLCBwYXR0ZXJuc1syXSk7CgkgICAgICAgIHZhciB6ZXJvVHdvRGlzdGFuY2UgPSB0aGlzLmRpc3RhbmNlKHBhdHRlcm5zWzBdLCBwYXR0ZXJuc1syXSk7CgkgICAgICAgIHZhciBwb2ludEE7CgkgICAgICAgIHZhciBwb2ludEI7CgkgICAgICAgIHZhciBwb2ludEM7CgkgICAgICAgIC8vIEFzc3VtZSBvbmUgY2xvc2VzdCB0byBvdGhlciB0d28gaXMgQjsgQSBhbmQgQyB3aWxsIGp1c3QgYmUgZ3Vlc3NlcyBhdCBmaXJzdAoJICAgICAgICBpZiAob25lVHdvRGlzdGFuY2UgPj0gemVyb09uZURpc3RhbmNlICYmIG9uZVR3b0Rpc3RhbmNlID49IHplcm9Ud29EaXN0YW5jZSkgewoJICAgICAgICAgICAgcG9pbnRCID0gcGF0dGVybnNbMF07CgkgICAgICAgICAgICBwb2ludEEgPSBwYXR0ZXJuc1sxXTsKCSAgICAgICAgICAgIHBvaW50QyA9IHBhdHRlcm5zWzJdOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgaWYgKHplcm9Ud29EaXN0YW5jZSA+PSBvbmVUd29EaXN0YW5jZSAmJiB6ZXJvVHdvRGlzdGFuY2UgPj0gemVyb09uZURpc3RhbmNlKSB7CgkgICAgICAgICAgICBwb2ludEIgPSBwYXR0ZXJuc1sxXTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBhdHRlcm5zWzBdOwoJICAgICAgICAgICAgcG9pbnRDID0gcGF0dGVybnNbMl07CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICBwb2ludEIgPSBwYXR0ZXJuc1syXTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBhdHRlcm5zWzBdOwoJICAgICAgICAgICAgcG9pbnRDID0gcGF0dGVybnNbMV07CgkgICAgICAgIH0KCSAgICAgICAgLy8gVXNlIGNyb3NzIHByb2R1Y3QgdG8gZmlndXJlIG91dCB3aGV0aGVyIEEgYW5kIEMgYXJlIGNvcnJlY3Qgb3IgZmxpcHBlZC4KCSAgICAgICAgLy8gVGhpcyBhc2tzIHdoZXRoZXIgQkMgeCBCQSBoYXMgYSBwb3NpdGl2ZSB6IGNvbXBvbmVudCwgd2hpY2ggaXMgdGhlIGFycmFuZ2VtZW50CgkgICAgICAgIC8vIHdlIHdhbnQgZm9yIEEsIEIsIEMuIElmIGl0J3MgbmVnYXRpdmUsIHRoZW4gd2UndmUgZ290IGl0IGZsaXBwZWQgYXJvdW5kIGFuZAoJICAgICAgICAvLyBzaG91bGQgc3dhcCBBIGFuZCBDLgoJICAgICAgICBpZiAodGhpcy5jcm9zc1Byb2R1Y3RaKHBvaW50QSwgcG9pbnRCLCBwb2ludEMpIDwgMC4wKSB7CgkgICAgICAgICAgICB2YXIgdGVtcCA9IHBvaW50QTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBvaW50QzsKCSAgICAgICAgICAgIHBvaW50QyA9IHRlbXA7CgkgICAgICAgIH0KCSAgICAgICAgcGF0dGVybnNbMF0gPSBwb2ludEE7CgkgICAgICAgIHBhdHRlcm5zWzFdID0gcG9pbnRCOwoJICAgICAgICBwYXR0ZXJuc1syXSA9IHBvaW50QzsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBwYXR0ZXJuMSBmaXJzdCBwYXR0ZXJuCgkgICAgICogQHBhcmFtIHBhdHRlcm4yIHNlY29uZCBwYXR0ZXJuCgkgICAgICogQHJldHVybiBkaXN0YW5jZSBiZXR3ZWVuIHR3byBwb2ludHMKCSAgICAgKi8KCSAgICBSZXN1bHRQb2ludC5kaXN0YW5jZSA9IGZ1bmN0aW9uIChwYXR0ZXJuMSwgcGF0dGVybjIpIHsKCSAgICAgICAgcmV0dXJuIE1hdGhVdGlsc18xJDEuZGVmYXVsdC5kaXN0YW5jZShwYXR0ZXJuMS54LCBwYXR0ZXJuMS55LCBwYXR0ZXJuMi54LCBwYXR0ZXJuMi55KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIHogY29tcG9uZW50IG9mIHRoZSBjcm9zcyBwcm9kdWN0IGJldHdlZW4gdmVjdG9ycyBCQyBhbmQgQkEuCgkgICAgICovCgkgICAgUmVzdWx0UG9pbnQuY3Jvc3NQcm9kdWN0WiA9IGZ1bmN0aW9uIChwb2ludEEsIHBvaW50QiwgcG9pbnRDKSB7CgkgICAgICAgIHZhciBiWCA9IHBvaW50Qi54OwoJICAgICAgICB2YXIgYlkgPSBwb2ludEIueTsKCSAgICAgICAgcmV0dXJuICgocG9pbnRDLnggLSBiWCkgKiAocG9pbnRBLnkgLSBiWSkpIC0gKChwb2ludEMueSAtIGJZKSAqIChwb2ludEEueCAtIGJYKSk7CgkgICAgfTsKCSAgICByZXR1cm4gUmVzdWx0UG9pbnQ7Cgl9KCkpOwoJUmVzdWx0UG9pbnQkMS5kZWZhdWx0ID0gUmVzdWx0UG9pbnQ7CgoJdmFyIEFsaWdubWVudFBhdHRlcm5GaW5kZXIkMSA9IHt9OwoKCXZhciBBbGlnbm1lbnRQYXR0ZXJuJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fZXh0ZW5kcyQxID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFsaWdubWVudFBhdHRlcm4kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGV0ZWN0b3IgeyovCgl2YXIgUmVzdWx0UG9pbnRfMSQzID0gUmVzdWx0UG9pbnQkMTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGFuIGFsaWdubWVudCBwYXR0ZXJuLCB3aGljaCBhcmUgdGhlIHNtYWxsZXIgc3F1YXJlIHBhdHRlcm5zIGZvdW5kIGluCgkgKiBhbGwgYnV0IHRoZSBzaW1wbGVzdCBRUiBDb2Rlcy48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEFsaWdubWVudFBhdHRlcm4gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDEoQWxpZ25tZW50UGF0dGVybiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBBbGlnbm1lbnRQYXR0ZXJuKHBvc1ggLypmbG9hdCovLCBwb3NZIC8qZmxvYXQqLywgZXN0aW1hdGVkTW9kdWxlU2l6ZSAvKmZsb2F0Ki8pIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcG9zWCwgcG9zWSkgfHwgdGhpczsKCSAgICAgICAgX3RoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IGVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZXJtaW5lcyBpZiB0aGlzIGFsaWdubWVudCBwYXR0ZXJuICJhYm91dCBlcXVhbHMiIGFuIGFsaWdubWVudCBwYXR0ZXJuIGF0IHRoZSBzdGF0ZWQKCSAgICAgKiBwb3NpdGlvbiBhbmQgc2l6ZSAtLSBtZWFuaW5nLCBpdCBpcyBhdCBuZWFybHkgdGhlIHNhbWUgY2VudGVyIHdpdGggbmVhcmx5IHRoZSBzYW1lIHNpemUuPC9wPgoJICAgICAqLwoJICAgIEFsaWdubWVudFBhdHRlcm4ucHJvdG90eXBlLmFib3V0RXF1YWxzID0gZnVuY3Rpb24gKG1vZHVsZVNpemUgLypmbG9hdCovLCBpIC8qZmxvYXQqLywgaiAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE1hdGguYWJzKGkgLSB0aGlzLmdldFkoKSkgPD0gbW9kdWxlU2l6ZSAmJiBNYXRoLmFicyhqIC0gdGhpcy5nZXRYKCkpIDw9IG1vZHVsZVNpemUpIHsKCSAgICAgICAgICAgIHZhciBtb2R1bGVTaXplRGlmZiA9IE1hdGguYWJzKG1vZHVsZVNpemUgLSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgcmV0dXJuIG1vZHVsZVNpemVEaWZmIDw9IDEuMCB8fCBtb2R1bGVTaXplRGlmZiA8PSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29tYmluZXMgdGhpcyBvYmplY3QncyBjdXJyZW50IGVzdGltYXRlIG9mIGEgZmluZGVyIHBhdHRlcm4gcG9zaXRpb24gYW5kIG1vZHVsZSBzaXplCgkgICAgICogd2l0aCBhIG5ldyBlc3RpbWF0ZS4gSXQgcmV0dXJucyBhIG5ldyB7QGNvZGUgRmluZGVyUGF0dGVybn0gY29udGFpbmluZyBhbiBhdmVyYWdlIG9mIHRoZSB0d28uCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybi5wcm90b3R5cGUuY29tYmluZUVzdGltYXRlID0gZnVuY3Rpb24gKGkgLypmbG9hdCovLCBqIC8qZmxvYXQqLywgbmV3TW9kdWxlU2l6ZSAvKmZsb2F0Ki8pIHsKCSAgICAgICAgdmFyIGNvbWJpbmVkWCA9ICh0aGlzLmdldFgoKSArIGopIC8gMi4wOwoJICAgICAgICB2YXIgY29tYmluZWRZID0gKHRoaXMuZ2V0WSgpICsgaSkgLyAyLjA7CgkgICAgICAgIHZhciBjb21iaW5lZE1vZHVsZVNpemUgPSAodGhpcy5lc3RpbWF0ZWRNb2R1bGVTaXplICsgbmV3TW9kdWxlU2l6ZSkgLyAyLjA7CgkgICAgICAgIHJldHVybiBuZXcgQWxpZ25tZW50UGF0dGVybihjb21iaW5lZFgsIGNvbWJpbmVkWSwgY29tYmluZWRNb2R1bGVTaXplKTsKCSAgICB9OwoJICAgIHJldHVybiBBbGlnbm1lbnRQYXR0ZXJuOwoJfShSZXN1bHRQb2ludF8xJDMuZGVmYXVsdCkpOwoJQWxpZ25tZW50UGF0dGVybiQxLmRlZmF1bHQgPSBBbGlnbm1lbnRQYXR0ZXJuOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX192YWx1ZXMkMSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX3ZhbHVlcykgfHwgZnVuY3Rpb24obykgewoJICAgIHZhciBzID0gdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwOwoJICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pOwoJICAgIGlmIChvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gIm51bWJlciIpIHJldHVybiB7CgkgICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7CgkgICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/ICJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLiIgOiAiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLiIpOwoJfTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShBbGlnbm1lbnRQYXR0ZXJuRmluZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBBbGlnbm1lbnRQYXR0ZXJuXzEgPSBBbGlnbm1lbnRQYXR0ZXJuJDE7Cgl2YXIgTm90Rm91bmRFeGNlcHRpb25fMSQzID0gTm90Rm91bmRFeGNlcHRpb24kMTsKCS8qaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgYXR0ZW1wdHMgdG8gZmluZCBhbGlnbm1lbnQgcGF0dGVybnMgaW4gYSBRUiBDb2RlLiBBbGlnbm1lbnQgcGF0dGVybnMgbG9vayBsaWtlIGZpbmRlcgoJICogcGF0dGVybnMgYnV0IGFyZSBzbWFsbGVyIGFuZCBhcHBlYXIgYXQgcmVndWxhciBpbnRlcnZhbHMgdGhyb3VnaG91dCB0aGUgaW1hZ2UuPC9wPgoJICoKCSAqIDxwPkF0IHRoZSBtb21lbnQgdGhpcyBvbmx5IGxvb2tzIGZvciB0aGUgYm90dG9tLXJpZ2h0IGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAqCgkgKiA8cD5UaGlzIGlzIG1vc3RseSBhIHNpbXBsaWZpZWQgY29weSBvZiB7QGxpbmsgRmluZGVyUGF0dGVybkZpbmRlcn0uIEl0IGlzIGNvcGllZCwKCSAqIHBhc3RlZCBhbmQgc3RyaXBwZWQgZG93biBoZXJlIGZvciBtYXhpbXVtIHBlcmZvcm1hbmNlIGJ1dCBkb2VzIHVuZm9ydHVuYXRlbHkgZHVwbGljYXRlCgkgKiBzb21lIGNvZGUuPC9wPgoJICoKCSAqIDxwPlRoaXMgY2xhc3MgaXMgdGhyZWFkLXNhZmUgYnV0IG5vdCByZWVudHJhbnQuIEVhY2ggdGhyZWFkIG11c3QgYWxsb2NhdGUgaXRzIG93biBvYmplY3QuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8qKgoJICAgICAqIDxwPkNyZWF0ZXMgYSBmaW5kZXIgdGhhdCB3aWxsIGxvb2sgaW4gYSBwb3J0aW9uIG9mIHRoZSB3aG9sZSBpbWFnZS48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0gaW1hZ2UgaW1hZ2UgdG8gc2VhcmNoCgkgICAgICogQHBhcmFtIHN0YXJ0WCBsZWZ0IGNvbHVtbiBmcm9tIHdoaWNoIHRvIHN0YXJ0IHNlYXJjaGluZwoJICAgICAqIEBwYXJhbSBzdGFydFkgdG9wIHJvdyBmcm9tIHdoaWNoIHRvIHN0YXJ0IHNlYXJjaGluZwoJICAgICAqIEBwYXJhbSB3aWR0aCB3aWR0aCBvZiByZWdpb24gdG8gc2VhcmNoCgkgICAgICogQHBhcmFtIGhlaWdodCBoZWlnaHQgb2YgcmVnaW9uIHRvIHNlYXJjaAoJICAgICAqIEBwYXJhbSBtb2R1bGVTaXplIGVzdGltYXRlZCBtb2R1bGUgc2l6ZSBzbyBmYXIKCSAgICAgKi8KCSAgICBmdW5jdGlvbiBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyKGltYWdlLCBzdGFydFggLyppbnQqLywgc3RhcnRZIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovLCBtb2R1bGVTaXplIC8qZmxvYXQqLywgcmVzdWx0UG9pbnRDYWxsYmFjaykgewoJICAgICAgICB0aGlzLmltYWdlID0gaW1hZ2U7CgkgICAgICAgIHRoaXMuc3RhcnRYID0gc3RhcnRYOwoJICAgICAgICB0aGlzLnN0YXJ0WSA9IHN0YXJ0WTsKCSAgICAgICAgdGhpcy53aWR0aCA9IHdpZHRoOwoJICAgICAgICB0aGlzLmhlaWdodCA9IGhlaWdodDsKCSAgICAgICAgdGhpcy5tb2R1bGVTaXplID0gbW9kdWxlU2l6ZTsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gcmVzdWx0UG9pbnRDYWxsYmFjazsKCSAgICAgICAgdGhpcy5wb3NzaWJsZUNlbnRlcnMgPSBbXTsgLy8gbmV3IEFycmF5PGFueT4oNSkpCgkgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiBhcnJheSBpbml0aWFsaXphdGlvbiB3aXRob3V0IHNpemUgYXMgdGhlIGxlbmd0aCBpcyBjaGVja2VkIGJlbG93CgkgICAgICAgIHRoaXMuY3Jvc3NDaGVja1N0YXRlQ291bnQgPSBuZXcgSW50MzJBcnJheSgzKTsKCSAgICB9CgkgICAgLyoqCgkgICAgICogPHA+VGhpcyBtZXRob2QgYXR0ZW1wdHMgdG8gZmluZCB0aGUgYm90dG9tLXJpZ2h0IGFsaWdubWVudCBwYXR0ZXJuIGluIHRoZSBpbWFnZS4gSXQgaXMgYSBiaXQgbWVzc3kgc2luY2UKCSAgICAgKiBpdCdzIHByZXR0eSBwZXJmb3JtYW5jZS1jcml0aWNhbCBhbmQgc28gaXMgd3JpdHRlbiB0byBiZSBmYXN0IGZvcmVtb3N0LjwvcD4KCSAgICAgKgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEFsaWdubWVudFBhdHRlcm59IGlmIGZvdW5kCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBub3QgZm91bmQKCSAgICAgKi8KCSAgICBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5maW5kID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgc3RhcnRYID0gdGhpcy5zdGFydFg7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmhlaWdodDsKCSAgICAgICAgdmFyIHdpZHRoID0gdGhpcy53aWR0aDsKCSAgICAgICAgdmFyIG1heEogPSBzdGFydFggKyB3aWR0aDsKCSAgICAgICAgdmFyIG1pZGRsZUkgPSB0aGlzLnN0YXJ0WSArIChoZWlnaHQgLyAyKTsKCSAgICAgICAgLy8gV2UgYXJlIGxvb2tpbmcgZm9yIGJsYWNrL3doaXRlL2JsYWNrIG1vZHVsZXMgaW4gMToxOjEgcmF0aW8KCSAgICAgICAgLy8gdGhpcyB0cmFja3MgdGhlIG51bWJlciBvZiBibGFjay93aGl0ZS9ibGFjayBtb2R1bGVzIHNlZW4gc28gZmFyCgkgICAgICAgIHZhciBzdGF0ZUNvdW50ID0gbmV3IEludDMyQXJyYXkoMyk7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIGZvciAodmFyIGlHZW4gPSAwOyBpR2VuIDwgaGVpZ2h0OyBpR2VuKyspIHsKCSAgICAgICAgICAgIC8vIFNlYXJjaCBmcm9tIG1pZGRsZSBvdXR3YXJkcwoJICAgICAgICAgICAgdmFyIGkgPSBtaWRkbGVJICsgKChpR2VuICYgMHgwMSkgPT09IDAgPyBNYXRoLmZsb29yKChpR2VuICsgMSkgLyAyKSA6IC1NYXRoLmZsb29yKChpR2VuICsgMSkgLyAyKSk7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMV0gPSAwOwoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IDA7CgkgICAgICAgICAgICB2YXIgaiA9IHN0YXJ0WDsKCSAgICAgICAgICAgIC8vIEJ1cm4gb2ZmIGxlYWRpbmcgd2hpdGUgcGl4ZWxzIGJlZm9yZSBhbnl0aGluZyBlbHNlOyBpZiB3ZSBzdGFydCBpbiB0aGUgbWlkZGxlIG9mCgkgICAgICAgICAgICAvLyBhIHdoaXRlIHJ1biwgaXQgZG9lc24ndCBtYWtlIHNlbnNlIHRvIGNvdW50IGl0cyBsZW5ndGgsIHNpbmNlIHdlIGRvbid0IGtub3cgaWYgdGhlCgkgICAgICAgICAgICAvLyB3aGl0ZSBydW4gY29udGludWVkIHRvIHRoZSBsZWZ0IG9mIHRoZSBzdGFydCBwb2ludAoJICAgICAgICAgICAgd2hpbGUgKGogPCBtYXhKICYmICFpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICBqKys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgY3VycmVudFN0YXRlID0gMDsKCSAgICAgICAgICAgIHdoaWxlIChqIDwgbWF4SikgewoJICAgICAgICAgICAgICAgIGlmIChpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gQmxhY2sgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTdGF0ZSA9PT0gMSkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMV0rKzsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsgLy8gQ291bnRpbmcgd2hpdGUgcGl4ZWxzCgkgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudFN0YXRlID09PSAyKSB7IC8vIEEgd2lubmVyPwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmZvdW5kUGF0dGVybkNyb3NzKHN0YXRlQ291bnQpKSB7IC8vIFllcwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29uZmlybWVkID0gdGhpcy5oYW5kbGVQb3NzaWJsZUNlbnRlcihzdGF0ZUNvdW50LCBpLCBqKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCAhPT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbmZpcm1lZDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gc3RhdGVDb3VudFsyXTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzFdID0gMTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzJdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsrK2N1cnJlbnRTdGF0ZV0rKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsgLy8gV2hpdGUgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTdGF0ZSA9PT0gMSkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTdGF0ZSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBqKys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBpZiAodGhpcy5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSkgewoJICAgICAgICAgICAgICAgIHZhciBjb25maXJtZWQgPSB0aGlzLmhhbmRsZVBvc3NpYmxlQ2VudGVyKHN0YXRlQ291bnQsIGksIG1heEopOwoJICAgICAgICAgICAgICAgIGlmIChjb25maXJtZWQgIT09IG51bGwpIHsKCSAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbmZpcm1lZDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gSG1tLCBub3RoaW5nIHdlIHNhdyB3YXMgb2JzZXJ2ZWQgYW5kIGNvbmZpcm1lZCB0d2ljZS4gSWYgd2UgaGFkCgkgICAgICAgIC8vIGFueSBndWVzcyBhdCBhbGwsIHJldHVybiBpdC4KCSAgICAgICAgaWYgKHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aCAhPT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMucG9zc2libGVDZW50ZXJzWzBdOwoJICAgICAgICB9CgkgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbl8xJDMuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogR2l2ZW4gYSBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCBzZWVuIGFuZCBhbiBlbmQgcG9zaXRpb24sCgkgICAgICogZmlndXJlcyB0aGUgbG9jYXRpb24gb2YgdGhlIGNlbnRlciBvZiB0aGlzIGJsYWNrL3doaXRlL2JsYWNrIHJ1bi4KCSAgICAgKi8KCSAgICBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCwgZW5kIC8qaW50Ki8pIHsKCSAgICAgICAgcmV0dXJuIChlbmQgLSBzdGF0ZUNvdW50WzJdKSAtIHN0YXRlQ291bnRbMV0gLyAyLjA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gc3RhdGVDb3VudCBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCByZWFkCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGUgcHJvcG9ydGlvbnMgb2YgdGhlIGNvdW50cyBpcyBjbG9zZSBlbm91Z2ggdG8gdGhlIDEvMS8xIHJhdGlvcwoJICAgICAqICAgICAgICAgdXNlZCBieSBhbGlnbm1lbnQgcGF0dGVybnMgdG8gYmUgY29uc2lkZXJlZCBhIG1hdGNoCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybkZpbmRlci5wcm90b3R5cGUuZm91bmRQYXR0ZXJuQ3Jvc3MgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCkgewoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRoaXMubW9kdWxlU2l6ZTsKCSAgICAgICAgdmFyIG1heFZhcmlhbmNlID0gbW9kdWxlU2l6ZSAvIDIuMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzOyBpKyspIHsKCSAgICAgICAgICAgIGlmIChNYXRoLmFicyhtb2R1bGVTaXplIC0gc3RhdGVDb3VudFtpXSkgPj0gbWF4VmFyaWFuY2UpIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5BZnRlciBhIGhvcml6b250YWwgc2NhbiBmaW5kcyBhIHBvdGVudGlhbCBhbGlnbm1lbnQgcGF0dGVybiwgdGhpcyBtZXRob2QKCSAgICAgKiAiY3Jvc3MtY2hlY2tzIiBieSBzY2FubmluZyBkb3duIHZlcnRpY2FsbHkgdGhyb3VnaCB0aGUgY2VudGVyIG9mIHRoZSBwb3NzaWJsZQoJICAgICAqIGFsaWdubWVudCBwYXR0ZXJuIHRvIHNlZSBpZiB0aGUgc2FtZSBwcm9wb3J0aW9uIGlzIGRldGVjdGVkLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGFydEkgcm93IHdoZXJlIGFuIGFsaWdubWVudCBwYXR0ZXJuIHdhcyBkZXRlY3RlZAoJICAgICAqIEBwYXJhbSBjZW50ZXJKIGNlbnRlciBvZiB0aGUgc2VjdGlvbiB0aGF0IGFwcGVhcnMgdG8gY3Jvc3MgYW4gYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gbWF4Q291bnQgbWF4aW11bSByZWFzb25hYmxlIG51bWJlciBvZiBtb2R1bGVzIHRoYXQgc2hvdWxkIGJlCgkgICAgICogb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcmV0dXJuIHZlcnRpY2FsIGNlbnRlciBvZiBhbGlnbm1lbnQgcGF0dGVybiwgb3Ige0BsaW5rIEZsb2F0I05hTn0gaWYgbm90IGZvdW5kCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybkZpbmRlci5wcm90b3R5cGUuY3Jvc3NDaGVja1ZlcnRpY2FsID0gZnVuY3Rpb24gKHN0YXJ0SSAvKmludCovLCBjZW50ZXJKIC8qaW50Ki8sIG1heENvdW50IC8qaW50Ki8sIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGltYWdlID0gdGhpcy5pbWFnZTsKCSAgICAgICAgdmFyIG1heEkgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgc3RhdGVDb3VudFsxXSA9IDA7CgkgICAgICAgIHN0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICAvLyBTdGFydCBjb3VudGluZyB1cCBmcm9tIGNlbnRlcgoJICAgICAgICB2YXIgaSA9IHN0YXJ0STsKCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIGFscmVhZHkgdG9vIG1hbnkgbW9kdWxlcyBpbiB0aGlzIHN0YXRlIG9yIHJhbiBvZmYgdGhlIGVkZ2U6CgkgICAgICAgIGlmIChpIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiAhaW1hZ2UuZ2V0KGNlbnRlckosIGkpICYmIHN0YXRlQ291bnRbMF0gPD0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMF0rKzsKCSAgICAgICAgICAgIGktLTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFswXSA+IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIC8vIE5vdyBhbHNvIGNvdW50IGRvd24gZnJvbSBjZW50ZXIKCSAgICAgICAgaSA9IHN0YXJ0SSArIDE7CgkgICAgICAgIHdoaWxlIChpIDwgbWF4SSAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJIHx8IHN0YXRlQ291bnRbMV0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaSA8IG1heEkgJiYgIWltYWdlLmdldChjZW50ZXJKLCBpKSAmJiBzdGF0ZUNvdW50WzJdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzJdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbMl0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdOwoJICAgICAgICBpZiAoNSAqIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA+PSAyICogb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkgPyBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQoc3RhdGVDb3VudCwgaSkgOiBOYU47CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5UaGlzIGlzIGNhbGxlZCB3aGVuIGEgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG9zc2libGUgYWxpZ25tZW50IHBhdHRlcm4uIEl0IHdpbGwKCSAgICAgKiBjcm9zcyBjaGVjayB3aXRoIGEgdmVydGljYWwgc2NhbiwgYW5kIGlmIHN1Y2Nlc3NmdWwsIHdpbGwgc2VlIGlmIHRoaXMgcGF0dGVybiBoYWQgYmVlbgoJICAgICAqIGZvdW5kIG9uIGEgcHJldmlvdXMgaG9yaXpvbnRhbCBzY2FuLiBJZiBzbywgd2UgY29uc2lkZXIgaXQgY29uZmlybWVkIGFuZCBjb25jbHVkZSB3ZSBoYXZlCgkgICAgICogZm91bmQgdGhlIGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGF0ZUNvdW50IHJlYWRpbmcgc3RhdGUgbW9kdWxlIGNvdW50cyBmcm9tIGhvcml6b250YWwgc2NhbgoJICAgICAqIEBwYXJhbSBpIHJvdyB3aGVyZSBhbGlnbm1lbnQgcGF0dGVybiBtYXkgYmUgZm91bmQKCSAgICAgKiBAcGFyYW0gaiBlbmQgb2YgcG9zc2libGUgYWxpZ25tZW50IHBhdHRlcm4gaW4gcm93CgkgICAgICogQHJldHVybiB7QGxpbmsgQWxpZ25tZW50UGF0dGVybn0gaWYgd2UgaGF2ZSBmb3VuZCB0aGUgc2FtZSBwYXR0ZXJuIHR3aWNlLCBvciBudWxsIGlmIG5vdAoJICAgICAqLwoJICAgIEFsaWdubWVudFBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmhhbmRsZVBvc3NpYmxlQ2VudGVyID0gZnVuY3Rpb24gKHN0YXRlQ291bnQsIGkgLyppbnQqLywgaiAvKmludCovKSB7CgkgICAgICAgIHZhciBlXzEsIF9hOwoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdOwoJICAgICAgICB2YXIgY2VudGVySiA9IEFsaWdubWVudFBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBqKTsKCSAgICAgICAgdmFyIGNlbnRlckkgPSB0aGlzLmNyb3NzQ2hlY2tWZXJ0aWNhbChpLCAvKihpbnQpICovIGNlbnRlckosIDIgKiBzdGF0ZUNvdW50WzFdLCBzdGF0ZUNvdW50VG90YWwpOwoJICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckkpKSB7CgkgICAgICAgICAgICB2YXIgZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IChzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0pIC8gMy4wOwoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBfYiA9IF9fdmFsdWVzJDEodGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfYyA9IF9iLm5leHQoKTsgIV9jLmRvbmU7IF9jID0gX2IubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgICAgIHZhciBjZW50ZXIgPSBfYy52YWx1ZTsKCSAgICAgICAgICAgICAgICAgICAgLy8gTG9vayBmb3IgYWJvdXQgdGhlIHNhbWUgY2VudGVyIGFuZCBtb2R1bGUgc2l6ZToKCSAgICAgICAgICAgICAgICAgICAgaWYgKGNlbnRlci5hYm91dEVxdWFscyhlc3RpbWF0ZWRNb2R1bGVTaXplLCBjZW50ZXJJLCBjZW50ZXJKKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNlbnRlci5jb21iaW5lRXN0aW1hdGUoY2VudGVySSwgY2VudGVySiwgZXN0aW1hdGVkTW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKF9jICYmICFfYy5kb25lICYmIChfYSA9IF9iLnJldHVybikpIF9hLmNhbGwoX2IpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBIYWRuJ3QgZm91bmQgdGhpcyBiZWZvcmU7IHNhdmUgaXQKCSAgICAgICAgICAgIHZhciBwb2ludCA9IG5ldyBBbGlnbm1lbnRQYXR0ZXJuXzEuZGVmYXVsdChjZW50ZXJKLCBjZW50ZXJJLCBlc3RpbWF0ZWRNb2R1bGVTaXplKTsKCSAgICAgICAgICAgIHRoaXMucG9zc2libGVDZW50ZXJzLnB1c2gocG9pbnQpOwoJICAgICAgICAgICAgaWYgKHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayAhPT0gbnVsbCAmJiB0aGlzLnJlc3VsdFBvaW50Q2FsbGJhY2sgIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgICAgIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjay5mb3VuZFBvc3NpYmxlUmVzdWx0UG9pbnQocG9pbnQpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBudWxsOwoJICAgIH07CgkgICAgcmV0dXJuIEFsaWdubWVudFBhdHRlcm5GaW5kZXI7Cgl9KCkpOwoJQWxpZ25tZW50UGF0dGVybkZpbmRlciQxLmRlZmF1bHQgPSBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyOwoKCXZhciBGaW5kZXJQYXR0ZXJuRmluZGVyJDEgPSB7fTsKCgl2YXIgRmluZGVyUGF0dGVybiQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRmluZGVyUGF0dGVybiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLnFyY29kZS5kZXRlY3RvciB7Ki8KCXZhciBSZXN1bHRQb2ludF8xJDIgPSBSZXN1bHRQb2ludCQxOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgYSBmaW5kZXIgcGF0dGVybiwgd2hpY2ggYXJlIHRoZSB0aHJlZSBzcXVhcmUgcGF0dGVybnMgZm91bmQgaW4KCSAqIHRoZSBjb3JuZXJzIG9mIFFSIENvZGVzLiBJdCBhbHNvIGVuY2Fwc3VsYXRlcyBhIGNvdW50IG9mIHNpbWlsYXIgZmluZGVyIHBhdHRlcm5zLAoJICogYXMgYSBjb252ZW5pZW5jZSB0byB0aGUgZmluZGVyJ3MgYm9va2tlZXBpbmcuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBGaW5kZXJQYXR0ZXJuID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyhGaW5kZXJQYXR0ZXJuLCBfc3VwZXIpOwoJICAgIC8vIEZpbmRlclBhdHRlcm4ocG9zWDogbnVtYmVyLypmbG9hdCovLCBwb3NZOiBudW1iZXIvKmZsb2F0Ki8sIGVzdGltYXRlZE1vZHVsZVNpemU6IG51bWJlci8qZmxvYXQqLykgewoJICAgIC8vICAgdGhpcyhwb3NYLCBwb3NZLCBlc3RpbWF0ZWRNb2R1bGVTaXplLCAxKQoJICAgIC8vIH0KCSAgICBmdW5jdGlvbiBGaW5kZXJQYXR0ZXJuKHBvc1ggLypmbG9hdCovLCBwb3NZIC8qZmxvYXQqLywgZXN0aW1hdGVkTW9kdWxlU2l6ZSAvKmZsb2F0Ki8sIGNvdW50IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcG9zWCwgcG9zWSkgfHwgdGhpczsKCSAgICAgICAgX3RoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IGVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIF90aGlzLmNvdW50ID0gY291bnQ7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGNvdW50KSB7CgkgICAgICAgICAgICBfdGhpcy5jb3VudCA9IDE7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBGaW5kZXJQYXR0ZXJuLnByb3RvdHlwZS5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lc3RpbWF0ZWRNb2R1bGVTaXplOwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybi5wcm90b3R5cGUuZ2V0Q291bnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvdW50OwoJICAgIH07CgkgICAgLyoKCSAgICB2b2lkIGluY3JlbWVudENvdW50KCkgewoJICAgICAgdGhpcy5jb3VudCsrCgkgICAgfQoJICAgICAqLwoJICAgIC8qKgoJICAgICAqIDxwPkRldGVybWluZXMgaWYgdGhpcyBmaW5kZXIgcGF0dGVybiAiYWJvdXQgZXF1YWxzIiBhIGZpbmRlciBwYXR0ZXJuIGF0IHRoZSBzdGF0ZWQKCSAgICAgKiBwb3NpdGlvbiBhbmQgc2l6ZSAtLSBtZWFuaW5nLCBpdCBpcyBhdCBuZWFybHkgdGhlIHNhbWUgY2VudGVyIHdpdGggbmVhcmx5IHRoZSBzYW1lIHNpemUuPC9wPgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm4ucHJvdG90eXBlLmFib3V0RXF1YWxzID0gZnVuY3Rpb24gKG1vZHVsZVNpemUgLypmbG9hdCovLCBpIC8qZmxvYXQqLywgaiAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE1hdGguYWJzKGkgLSB0aGlzLmdldFkoKSkgPD0gbW9kdWxlU2l6ZSAmJiBNYXRoLmFicyhqIC0gdGhpcy5nZXRYKCkpIDw9IG1vZHVsZVNpemUpIHsKCSAgICAgICAgICAgIHZhciBtb2R1bGVTaXplRGlmZiA9IE1hdGguYWJzKG1vZHVsZVNpemUgLSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgcmV0dXJuIG1vZHVsZVNpemVEaWZmIDw9IDEuMCB8fCBtb2R1bGVTaXplRGlmZiA8PSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29tYmluZXMgdGhpcyBvYmplY3QncyBjdXJyZW50IGVzdGltYXRlIG9mIGEgZmluZGVyIHBhdHRlcm4gcG9zaXRpb24gYW5kIG1vZHVsZSBzaXplCgkgICAgICogd2l0aCBhIG5ldyBlc3RpbWF0ZS4gSXQgcmV0dXJucyBhIG5ldyB7QGNvZGUgRmluZGVyUGF0dGVybn0gY29udGFpbmluZyBhIHdlaWdodGVkIGF2ZXJhZ2UKCSAgICAgKiBiYXNlZCBvbiBjb3VudC4KCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuLnByb3RvdHlwZS5jb21iaW5lRXN0aW1hdGUgPSBmdW5jdGlvbiAoaSAvKmZsb2F0Ki8sIGogLypmbG9hdCovLCBuZXdNb2R1bGVTaXplIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgY29tYmluZWRDb3VudCA9IHRoaXMuY291bnQgKyAxOwoJICAgICAgICB2YXIgY29tYmluZWRYID0gKHRoaXMuY291bnQgKiB0aGlzLmdldFgoKSArIGopIC8gY29tYmluZWRDb3VudDsKCSAgICAgICAgdmFyIGNvbWJpbmVkWSA9ICh0aGlzLmNvdW50ICogdGhpcy5nZXRZKCkgKyBpKSAvIGNvbWJpbmVkQ291bnQ7CgkgICAgICAgIHZhciBjb21iaW5lZE1vZHVsZVNpemUgPSAodGhpcy5jb3VudCAqIHRoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSArIG5ld01vZHVsZVNpemUpIC8gY29tYmluZWRDb3VudDsKCSAgICAgICAgcmV0dXJuIG5ldyBGaW5kZXJQYXR0ZXJuKGNvbWJpbmVkWCwgY29tYmluZWRZLCBjb21iaW5lZE1vZHVsZVNpemUsIGNvbWJpbmVkQ291bnQpOwoJICAgIH07CgkgICAgcmV0dXJuIEZpbmRlclBhdHRlcm47Cgl9KFJlc3VsdFBvaW50XzEkMi5kZWZhdWx0KSk7CglGaW5kZXJQYXR0ZXJuJDEuZGVmYXVsdCA9IEZpbmRlclBhdHRlcm47CgoJdmFyIEZpbmRlclBhdHRlcm5JbmZvJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEZpbmRlclBhdHRlcm5JbmZvJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGluZm9ybWF0aW9uIGFib3V0IGZpbmRlciBwYXR0ZXJucyBpbiBhbiBpbWFnZSwgaW5jbHVkaW5nIHRoZSBsb2NhdGlvbiBvZgoJICogdGhlIHRocmVlIGZpbmRlciBwYXR0ZXJucywgYW5kIHRoZWlyIGVzdGltYXRlZCBtb2R1bGUgc2l6ZS48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEZpbmRlclBhdHRlcm5JbmZvID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEZpbmRlclBhdHRlcm5JbmZvKHBhdHRlcm5DZW50ZXJzKSB7CgkgICAgICAgIHRoaXMuYm90dG9tTGVmdCA9IHBhdHRlcm5DZW50ZXJzWzBdOwoJICAgICAgICB0aGlzLnRvcExlZnQgPSBwYXR0ZXJuQ2VudGVyc1sxXTsKCSAgICAgICAgdGhpcy50b3BSaWdodCA9IHBhdHRlcm5DZW50ZXJzWzJdOwoJICAgIH0KCSAgICBGaW5kZXJQYXR0ZXJuSW5mby5wcm90b3R5cGUuZ2V0Qm90dG9tTGVmdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYm90dG9tTGVmdDsKCSAgICB9OwoJICAgIEZpbmRlclBhdHRlcm5JbmZvLnByb3RvdHlwZS5nZXRUb3BMZWZ0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50b3BMZWZ0OwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybkluZm8ucHJvdG90eXBlLmdldFRvcFJpZ2h0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50b3BSaWdodDsKCSAgICB9OwoJICAgIHJldHVybiBGaW5kZXJQYXR0ZXJuSW5mbzsKCX0oKSk7CglGaW5kZXJQYXR0ZXJuSW5mbyQxLmRlZmF1bHQgPSBGaW5kZXJQYXR0ZXJuSW5mbzsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEZpbmRlclBhdHRlcm5GaW5kZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGV0ZWN0b3IgeyovCgl2YXIgRGVjb2RlSGludFR5cGVfMSQyID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBSZXN1bHRQb2ludF8xJDEgPSBSZXN1bHRQb2ludCQxOwoJdmFyIEZpbmRlclBhdHRlcm5fMSA9IEZpbmRlclBhdHRlcm4kMTsKCXZhciBGaW5kZXJQYXR0ZXJuSW5mb18xID0gRmluZGVyUGF0dGVybkluZm8kMTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDIgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJLyppbXBvcnQgamF2YS5pby5TZXJpYWxpemFibGU7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5Db2xsZWN0aW9uczsqLwoJLyppbXBvcnQgamF2YS51dGlsLkNvbXBhcmF0b3I7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgYXR0ZW1wdHMgdG8gZmluZCBmaW5kZXIgcGF0dGVybnMgaW4gYSBRUiBDb2RlLiBGaW5kZXIgcGF0dGVybnMgYXJlIHRoZSBzcXVhcmUKCSAqIG1hcmtlcnMgYXQgdGhyZWUgY29ybmVycyBvZiBhIFFSIENvZGUuPC9wPgoJICoKCSAqIDxwPlRoaXMgY2xhc3MgaXMgdGhyZWFkLXNhZmUgYnV0IG5vdCByZWVudHJhbnQuIEVhY2ggdGhyZWFkIG11c3QgYWxsb2NhdGUgaXRzIG93biBvYmplY3QuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEZpbmRlclBhdHRlcm5GaW5kZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogPHA+Q3JlYXRlcyBhIGZpbmRlciB0aGF0IHdpbGwgc2VhcmNoIHRoZSBpbWFnZSBmb3IgdGhyZWUgZmluZGVyIHBhdHRlcm5zLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBpbWFnZSBpbWFnZSB0byBzZWFyY2gKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IoaW1hZ2U6IEJpdE1hdHJpeCkgewoJICAgIC8vICAgdGhpcyhpbWFnZSwgbnVsbCkKCSAgICAvLyB9CgkgICAgZnVuY3Rpb24gRmluZGVyUGF0dGVybkZpbmRlcihpbWFnZSwgcmVzdWx0UG9pbnRDYWxsYmFjaykgewoJICAgICAgICB0aGlzLmltYWdlID0gaW1hZ2U7CgkgICAgICAgIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayA9IHJlc3VsdFBvaW50Q2FsbGJhY2s7CgkgICAgICAgIHRoaXMucG9zc2libGVDZW50ZXJzID0gW107CgkgICAgICAgIHRoaXMuY3Jvc3NDaGVja1N0YXRlQ291bnQgPSBuZXcgSW50MzJBcnJheSg1KTsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gcmVzdWx0UG9pbnRDYWxsYmFjazsKCSAgICB9CgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuZ2V0SW1hZ2UgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmltYWdlOwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuZ2V0UG9zc2libGVDZW50ZXJzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5wb3NzaWJsZUNlbnRlcnM7CgkgICAgfTsKCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5maW5kID0gZnVuY3Rpb24gKGhpbnRzKSB7CgkgICAgICAgIHZhciB0cnlIYXJkZXIgPSAoaGludHMgIT09IG51bGwgJiYgaGludHMgIT09IHVuZGVmaW5lZCkgJiYgdW5kZWZpbmVkICE9PSBoaW50cy5nZXQoRGVjb2RlSGludFR5cGVfMSQyLmRlZmF1bHQuVFJZX0hBUkRFUik7CgkgICAgICAgIHZhciBwdXJlQmFyY29kZSA9IChoaW50cyAhPT0gbnVsbCAmJiBoaW50cyAhPT0gdW5kZWZpbmVkKSAmJiB1bmRlZmluZWQgIT09IGhpbnRzLmdldChEZWNvZGVIaW50VHlwZV8xJDIuZGVmYXVsdC5QVVJFX0JBUkNPREUpOwoJICAgICAgICB2YXIgaW1hZ2UgPSB0aGlzLmltYWdlOwoJICAgICAgICB2YXIgbWF4SSA9IGltYWdlLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgbWF4SiA9IGltYWdlLmdldFdpZHRoKCk7CgkgICAgICAgIC8vIFdlIGFyZSBsb29raW5nIGZvciBibGFjay93aGl0ZS9ibGFjay93aGl0ZS9ibGFjayBtb2R1bGVzIGluCgkgICAgICAgIC8vIDE6MTozOjE6MSByYXRpbzsgdGhpcyB0cmFja3MgdGhlIG51bWJlciBvZiBzdWNoIG1vZHVsZXMgc2VlbiBzbyBmYXIKCSAgICAgICAgLy8gTGV0J3MgYXNzdW1lIHRoYXQgdGhlIG1heGltdW0gdmVyc2lvbiBRUiBDb2RlIHdlIHN1cHBvcnQgdGFrZXMgdXAgMS80IHRoZSBoZWlnaHQgb2YgdGhlCgkgICAgICAgIC8vIGltYWdlLCBhbmQgdGhlbiBhY2NvdW50IGZvciB0aGUgY2VudGVyIGJlaW5nIDMgbW9kdWxlcyBpbiBzaXplLiBUaGlzIGdpdmVzIHRoZSBzbWFsbGVzdAoJICAgICAgICAvLyBudW1iZXIgb2YgcGl4ZWxzIHRoZSBjZW50ZXIgY291bGQgYmUsIHNvIHNraXAgdGhpcyBvZnRlbi4gV2hlbiB0cnlpbmcgaGFyZGVyLCBsb29rIGZvciBhbGwKCSAgICAgICAgLy8gUVIgdmVyc2lvbnMgcmVnYXJkbGVzcyBvZiBob3cgZGVuc2UgdGhleSBhcmUuCgkgICAgICAgIHZhciBpU2tpcCA9IE1hdGguZmxvb3IoKDMgKiBtYXhJKSAvICg0ICogRmluZGVyUGF0dGVybkZpbmRlci5NQVhfTU9EVUxFUykpOwoJICAgICAgICBpZiAoaVNraXAgPCBGaW5kZXJQYXR0ZXJuRmluZGVyLk1JTl9TS0lQIHx8IHRyeUhhcmRlcikgewoJICAgICAgICAgICAgaVNraXAgPSBGaW5kZXJQYXR0ZXJuRmluZGVyLk1JTl9TS0lQOwoJICAgICAgICB9CgkgICAgICAgIHZhciBkb25lID0gZmFsc2U7CgkgICAgICAgIHZhciBzdGF0ZUNvdW50ID0gbmV3IEludDMyQXJyYXkoNSk7CgkgICAgICAgIGZvciAodmFyIGkgPSBpU2tpcCAtIDE7IGkgPCBtYXhJICYmICFkb25lOyBpICs9IGlTa2lwKSB7CgkgICAgICAgICAgICAvLyBHZXQgYSByb3cgb2YgYmxhY2svd2hpdGUgdmFsdWVzCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMV0gPSAwOwoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IDA7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzNdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0gPSAwOwoJICAgICAgICAgICAgdmFyIGN1cnJlbnRTdGF0ZSA9IDA7CgkgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG1heEo7IGorKykgewoJICAgICAgICAgICAgICAgIGlmIChpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gQmxhY2sgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKChjdXJyZW50U3RhdGUgJiAxKSA9PT0gMSkgeyAvLyBDb3VudGluZyB3aGl0ZSBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTdGF0ZSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsgLy8gV2hpdGUgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKChjdXJyZW50U3RhdGUgJiAxKSA9PT0gMCkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50U3RhdGUgPT09IDQpIHsgLy8gQSB3aW5uZXI/CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkpIHsgLy8gWWVzCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb25maXJtZWQgPSB0aGlzLmhhbmRsZVBvc3NpYmxlQ2VudGVyKHN0YXRlQ291bnQsIGksIGosIHB1cmVCYXJjb2RlKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCA9PT0gdHJ1ZSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3RhcnQgZXhhbWluaW5nIGV2ZXJ5IG90aGVyIGxpbmUuIENoZWNraW5nIGVhY2ggbGluZSB0dXJuZWQgb3V0IHRvIGJlIHRvbwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXhwZW5zaXZlIGFuZCBkaWRuJ3QgaW1wcm92ZSBwZXJmb3JtYW5jZS4KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlTa2lwID0gMjsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmhhc1NraXBwZWQgPT09IHRydWUpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb25lID0gdGhpcy5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzKCk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcm93U2tpcCA9IHRoaXMuZmluZFJvd1NraXAoKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocm93U2tpcCA+IHN0YXRlQ291bnRbMl0pIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2tpcCByb3dzIGJldHdlZW4gcm93IG9mIGxvd2VyIGNvbmZpcm1lZCBjZW50ZXIKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYW5kIHRvcCBvZiBwcmVzdW1lZCB0aGlyZCBjb25maXJtZWQgY2VudGVyCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJ1dCBiYWNrIHVwIGEgYml0IHRvIGdldCBhIGZ1bGwgY2hhbmNlIG9mIGRldGVjdGluZwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpdCwgZW50aXJlIHdpZHRoIG9mIGNlbnRlciBvZiBmaW5kZXIgcGF0dGVybgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTa2lwIGJ5IHJvd1NraXAsIGJ1dCBiYWNrIG9mZiBieSBzdGF0ZUNvdW50WzJdIChzaXplIG9mIGxhc3QgY2VudGVyCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9mIHBhdHRlcm4gd2Ugc2F3KSB0byBiZSBjb25zZXJ2YXRpdmUsIGFuZCBhbHNvIGJhY2sgb2ZmIGJ5IGlTa2lwIHdoaWNoCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlzIGFib3V0IHRvIGJlIHJlLWFkZGVkCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgKz0gcm93U2tpcCAtIHN0YXRlQ291bnRbMl0gLSBpU2tpcDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaiA9IG1heEogLSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMF0gPSBzdGF0ZUNvdW50WzJdOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsxXSA9IHN0YXRlQ291bnRbM107CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzJdID0gc3RhdGVDb3VudFs0XTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFs0XSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAzOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2xlYXIgc3RhdGUgdG8gc3RhcnQgbG9va2luZyBhZ2FpbgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsxXSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzNdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFs0XSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgeyAvLyBObywgc2hpZnQgY291bnRzIGJhY2sgYnkgdHdvCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMF0gPSBzdGF0ZUNvdW50WzJdOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzFdID0gc3RhdGVDb3VudFszXTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IHN0YXRlQ291bnRbNF07CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzRdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFN0YXRlID0gMzsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WysrY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgeyAvLyBDb3VudGluZyB3aGl0ZSBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgaWYgKEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgY29uZmlybWVkID0gdGhpcy5oYW5kbGVQb3NzaWJsZUNlbnRlcihzdGF0ZUNvdW50LCBpLCBtYXhKLCBwdXJlQmFyY29kZSk7CgkgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCA9PT0gdHJ1ZSkgewoJICAgICAgICAgICAgICAgICAgICBpU2tpcCA9IHN0YXRlQ291bnRbMF07CgkgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmhhc1NraXBwZWQpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvdW5kIGEgdGhpcmQgb25lCgkgICAgICAgICAgICAgICAgICAgICAgICBkb25lID0gdGhpcy5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzKCk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHBhdHRlcm5JbmZvID0gdGhpcy5zZWxlY3RCZXN0UGF0dGVybnMoKTsKCSAgICAgICAgUmVzdWx0UG9pbnRfMSQxLmRlZmF1bHQub3JkZXJCZXN0UGF0dGVybnMocGF0dGVybkluZm8pOwoJICAgICAgICByZXR1cm4gbmV3IEZpbmRlclBhdHRlcm5JbmZvXzEuZGVmYXVsdChwYXR0ZXJuSW5mbyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBHaXZlbiBhIGNvdW50IG9mIGJsYWNrL3doaXRlL2JsYWNrL3doaXRlL2JsYWNrIHBpeGVscyBqdXN0IHNlZW4gYW5kIGFuIGVuZCBwb3NpdGlvbiwKCSAgICAgKiBmaWd1cmVzIHRoZSBsb2NhdGlvbiBvZiB0aGUgY2VudGVyIG9mIHRoaXMgcnVuLgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZCA9IGZ1bmN0aW9uIChzdGF0ZUNvdW50LCBlbmQgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gKGVuZCAtIHN0YXRlQ291bnRbNF0gLSBzdGF0ZUNvdW50WzNdKSAtIHN0YXRlQ291bnRbMl0gLyAyLjA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gc3RhdGVDb3VudCBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCByZWFkCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGUgcHJvcG9ydGlvbnMgb2YgdGhlIGNvdW50cyBpcyBjbG9zZSBlbm91Z2ggdG8gdGhlIDEvMS8zLzEvMSByYXRpb3MKCSAgICAgKiAgICAgICAgIHVzZWQgYnkgZmluZGVyIHBhdHRlcm5zIHRvIGJlIGNvbnNpZGVyZWQgYSBtYXRjaAoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3MgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCkgewoJICAgICAgICB2YXIgdG90YWxNb2R1bGVTaXplID0gMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCA1OyBpKyspIHsKCSAgICAgICAgICAgIHZhciBjb3VudCA9IHN0YXRlQ291bnRbaV07CgkgICAgICAgICAgICBpZiAoY291bnQgPT09IDApIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gY291bnQ7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRvdGFsTW9kdWxlU2l6ZSA8IDcpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRvdGFsTW9kdWxlU2l6ZSAvIDcuMDsKCSAgICAgICAgdmFyIG1heFZhcmlhbmNlID0gbW9kdWxlU2l6ZSAvIDIuMDsKCSAgICAgICAgLy8gQWxsb3cgbGVzcyB0aGFuIDUwJSB2YXJpYW5jZSBmcm9tIDEtMS0zLTEtMSBwcm9wb3J0aW9ucwoJICAgICAgICByZXR1cm4gTWF0aC5hYnMobW9kdWxlU2l6ZSAtIHN0YXRlQ291bnRbMF0pIDwgbWF4VmFyaWFuY2UgJiYKCSAgICAgICAgICAgIE1hdGguYWJzKG1vZHVsZVNpemUgLSBzdGF0ZUNvdW50WzFdKSA8IG1heFZhcmlhbmNlICYmCgkgICAgICAgICAgICBNYXRoLmFicygzLjAgKiBtb2R1bGVTaXplIC0gc3RhdGVDb3VudFsyXSkgPCAzICogbWF4VmFyaWFuY2UgJiYKCSAgICAgICAgICAgIE1hdGguYWJzKG1vZHVsZVNpemUgLSBzdGF0ZUNvdW50WzNdKSA8IG1heFZhcmlhbmNlICYmCgkgICAgICAgICAgICBNYXRoLmFicyhtb2R1bGVTaXplIC0gc3RhdGVDb3VudFs0XSkgPCBtYXhWYXJpYW5jZTsKCSAgICB9OwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgY3Jvc3NDaGVja1N0YXRlQ291bnQgPSB0aGlzLmNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgICAgICBjcm9zc0NoZWNrU3RhdGVDb3VudFswXSA9IDA7CgkgICAgICAgIGNyb3NzQ2hlY2tTdGF0ZUNvdW50WzFdID0gMDsKCSAgICAgICAgY3Jvc3NDaGVja1N0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICBjcm9zc0NoZWNrU3RhdGVDb3VudFszXSA9IDA7CgkgICAgICAgIGNyb3NzQ2hlY2tTdGF0ZUNvdW50WzRdID0gMDsKCSAgICAgICAgcmV0dXJuIGNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQWZ0ZXIgYSB2ZXJ0aWNhbCBhbmQgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG90ZW50aWFsIGZpbmRlciBwYXR0ZXJuLCB0aGlzIG1ldGhvZAoJICAgICAqICJjcm9zcy1jcm9zcy1jcm9zcy1jaGVja3MiIGJ5IHNjYW5uaW5nIGRvd24gZGlhZ29uYWxseSB0aHJvdWdoIHRoZSBjZW50ZXIgb2YgdGhlIHBvc3NpYmxlCgkgICAgICogZmluZGVyIHBhdHRlcm4gdG8gc2VlIGlmIHRoZSBzYW1lIHByb3BvcnRpb24gaXMgZGV0ZWN0ZWQuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gc3RhcnRJIHJvdyB3aGVyZSBhIGZpbmRlciBwYXR0ZXJuIHdhcyBkZXRlY3RlZAoJICAgICAqIEBwYXJhbSBjZW50ZXJKIGNlbnRlciBvZiB0aGUgc2VjdGlvbiB0aGF0IGFwcGVhcnMgdG8gY3Jvc3MgYSBmaW5kZXIgcGF0dGVybgoJICAgICAqIEBwYXJhbSBtYXhDb3VudCBtYXhpbXVtIHJlYXNvbmFibGUgbnVtYmVyIG9mIG1vZHVsZXMgdGhhdCBzaG91bGQgYmUKCSAgICAgKiAgb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcGFyYW0gb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwgVGhlIG9yaWdpbmFsIHN0YXRlIGNvdW50IHRvdGFsLgoJICAgICAqIEByZXR1cm4gdHJ1ZSBpZiBwcm9wb3J0aW9ucyBhcmUgd2l0aGluZyBleHBlY3RlZCBsaW1pdHMKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5jcm9zc0NoZWNrRGlhZ29uYWwgPSBmdW5jdGlvbiAoc3RhcnRJIC8qaW50Ki8sIGNlbnRlckogLyppbnQqLywgbWF4Q291bnQgLyppbnQqLywgb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwgLyppbnQqLykgewoJICAgICAgICB2YXIgc3RhdGVDb3VudCA9IHRoaXMuZ2V0Q3Jvc3NDaGVja1N0YXRlQ291bnQoKTsKCSAgICAgICAgLy8gU3RhcnQgY291bnRpbmcgdXAsIGxlZnQgZnJvbSBjZW50ZXIgZmluZGluZyBibGFjayBjZW50ZXIgbWFzcwoJICAgICAgICB2YXIgaSA9IDA7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIHdoaWxlIChzdGFydEkgPj0gaSAmJiBjZW50ZXJKID49IGkgJiYgaW1hZ2UuZ2V0KGNlbnRlckogLSBpLCBzdGFydEkgLSBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGFydEkgPCBpIHx8IGNlbnRlckogPCBpKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29udGludWUgdXAsIGxlZnQgZmluZGluZyB3aGl0ZSBzcGFjZQoJICAgICAgICB3aGlsZSAoc3RhcnRJID49IGkgJiYgY2VudGVySiA+PSBpICYmICFpbWFnZS5nZXQoY2VudGVySiAtIGksIHN0YXJ0SSAtIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzFdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzFdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgLy8gSWYgYWxyZWFkeSB0b28gbWFueSBtb2R1bGVzIGluIHRoaXMgc3RhdGUgb3IgcmFuIG9mZiB0aGUgZWRnZToKCSAgICAgICAgaWYgKHN0YXJ0SSA8IGkgfHwgY2VudGVySiA8IGkgfHwgc3RhdGVDb3VudFsxXSA+IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29udGludWUgdXAsIGxlZnQgZmluZGluZyBibGFjayBib3JkZXIKCSAgICAgICAgd2hpbGUgKHN0YXJ0SSA+PSBpICYmIGNlbnRlckogPj0gaSAmJiBpbWFnZS5nZXQoY2VudGVySiAtIGksIHN0YXJ0SSAtIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbMF0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBtYXhJID0gaW1hZ2UuZ2V0SGVpZ2h0KCk7CgkgICAgICAgIHZhciBtYXhKID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgLy8gTm93IGFsc28gY291bnQgZG93biwgcmlnaHQgZnJvbSBjZW50ZXIKCSAgICAgICAgaSA9IDE7CgkgICAgICAgIHdoaWxlIChzdGFydEkgKyBpIDwgbWF4SSAmJiBjZW50ZXJKICsgaSA8IG1heEogJiYgaW1hZ2UuZ2V0KGNlbnRlckogKyBpLCBzdGFydEkgKyBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIC8vIFJhbiBvZmYgdGhlIGVkZ2U/CgkgICAgICAgIGlmIChzdGFydEkgKyBpID49IG1heEkgfHwgY2VudGVySiArIGkgPj0gbWF4SikgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChzdGFydEkgKyBpIDwgbWF4SSAmJiBjZW50ZXJKICsgaSA8IG1heEogJiYgIWltYWdlLmdldChjZW50ZXJKICsgaSwgc3RhcnRJICsgaSkgJiYKCSAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPCBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFszXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGFydEkgKyBpID49IG1heEkgfHwgY2VudGVySiArIGkgPj0gbWF4SiB8fCBzdGF0ZUNvdW50WzNdID49IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKHN0YXJ0SSArIGkgPCBtYXhJICYmIGNlbnRlckogKyBpIDwgbWF4SiAmJiBpbWFnZS5nZXQoY2VudGVySiArIGksIHN0YXJ0SSArIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0rKzsKCSAgICAgICAgICAgIGkrKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFs0XSA+PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHdlIGZvdW5kIGEgZmluZGVyLXBhdHRlcm4tbGlrZSBzZWN0aW9uLCBidXQgaXRzIHNpemUgaXMgbW9yZSB0aGFuIDEwMCUgZGlmZmVyZW50IHRoYW4KCSAgICAgICAgLy8gdGhlIG9yaWdpbmFsLCBhc3N1bWUgaXQncyBhIGZhbHNlIHBvc2l0aXZlCgkgICAgICAgIHZhciBzdGF0ZUNvdW50VG90YWwgPSBzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0gKyBzdGF0ZUNvdW50WzNdICsgc3RhdGVDb3VudFs0XTsKCSAgICAgICAgcmV0dXJuIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA8IDIgKiBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCAmJgoJICAgICAgICAgICAgRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkFmdGVyIGEgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG90ZW50aWFsIGZpbmRlciBwYXR0ZXJuLCB0aGlzIG1ldGhvZAoJICAgICAqICJjcm9zcy1jaGVja3MiIGJ5IHNjYW5uaW5nIGRvd24gdmVydGljYWxseSB0aHJvdWdoIHRoZSBjZW50ZXIgb2YgdGhlIHBvc3NpYmxlCgkgICAgICogZmluZGVyIHBhdHRlcm4gdG8gc2VlIGlmIHRoZSBzYW1lIHByb3BvcnRpb24gaXMgZGV0ZWN0ZWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIHN0YXJ0SSByb3cgd2hlcmUgYSBmaW5kZXIgcGF0dGVybiB3YXMgZGV0ZWN0ZWQKCSAgICAgKiBAcGFyYW0gY2VudGVySiBjZW50ZXIgb2YgdGhlIHNlY3Rpb24gdGhhdCBhcHBlYXJzIHRvIGNyb3NzIGEgZmluZGVyIHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gbWF4Q291bnQgbWF4aW11bSByZWFzb25hYmxlIG51bWJlciBvZiBtb2R1bGVzIHRoYXQgc2hvdWxkIGJlCgkgICAgICogb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcmV0dXJuIHZlcnRpY2FsIGNlbnRlciBvZiBmaW5kZXIgcGF0dGVybiwgb3Ige0BsaW5rIEZsb2F0I05hTn0gaWYgbm90IGZvdW5kCgkgICAgICovCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuY3Jvc3NDaGVja1ZlcnRpY2FsID0gZnVuY3Rpb24gKHN0YXJ0SSAvKmludCovLCBjZW50ZXJKIC8qaW50Ki8sIG1heENvdW50IC8qaW50Ki8sIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGltYWdlID0gdGhpcy5pbWFnZTsKCSAgICAgICAgdmFyIG1heEkgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50KCk7CgkgICAgICAgIC8vIFN0YXJ0IGNvdW50aW5nIHVwIGZyb20gY2VudGVyCgkgICAgICAgIHZhciBpID0gc3RhcnRJOwoJICAgICAgICB3aGlsZSAoaSA+PSAwICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpIDwgMCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaSA+PSAwICYmICFpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIGFscmVhZHkgdG9vIG1hbnkgbW9kdWxlcyBpbiB0aGlzIHN0YXRlIG9yIHJhbiBvZmYgdGhlIGVkZ2U6CgkgICAgICAgIGlmIChpIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFswXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFswXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGF0ZUNvdW50WzBdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgLy8gTm93IGFsc28gY291bnQgZG93biBmcm9tIGNlbnRlcgoJICAgICAgICBpID0gc3RhcnRJICsgMTsKCSAgICAgICAgd2hpbGUgKGkgPCBtYXhJICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJKSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChpIDwgbWF4SSAmJiAhaW1hZ2UuZ2V0KGNlbnRlckosIGkpICYmIHN0YXRlQ291bnRbM10gPCBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFszXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJIHx8IHN0YXRlQ291bnRbM10gPj0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPCBtYXhJICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSAmJiBzdGF0ZUNvdW50WzRdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0rKzsKCSAgICAgICAgICAgIGkrKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFs0XSA+PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICAvLyBJZiB3ZSBmb3VuZCBhIGZpbmRlci1wYXR0ZXJuLWxpa2Ugc2VjdGlvbiwgYnV0IGl0cyBzaXplIGlzIG1vcmUgdGhhbiA0MCUgZGlmZmVyZW50IHRoYW4KCSAgICAgICAgLy8gdGhlIG9yaWdpbmFsLCBhc3N1bWUgaXQncyBhIGZhbHNlIHBvc2l0aXZlCgkgICAgICAgIHZhciBzdGF0ZUNvdW50VG90YWwgPSBzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0gKyBzdGF0ZUNvdW50WzNdICsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF07CgkgICAgICAgIGlmICg1ICogTWF0aC5hYnMoc3RhdGVDb3VudFRvdGFsIC0gb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwpID49IDIgKiBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSA/IEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBpKSA6IE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkxpa2Uge0BsaW5rICNjcm9zc0NoZWNrVmVydGljYWwoaW50LCBpbnQsIGludCwgaW50KX0sIGFuZCBpbiBmYWN0IGlzIGJhc2ljYWxseSBpZGVudGljYWwsCgkgICAgICogZXhjZXB0IGl0IHJlYWRzIGhvcml6b250YWxseSBpbnN0ZWFkIG9mIHZlcnRpY2FsbHkuIFRoaXMgaXMgdXNlZCB0byBjcm9zcy1jcm9zcwoJICAgICAqIGNoZWNrIGEgdmVydGljYWwgY3Jvc3MgY2hlY2sgYW5kIGxvY2F0ZSB0aGUgcmVhbCBjZW50ZXIgb2YgdGhlIGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5jcm9zc0NoZWNrSG9yaXpvbnRhbCA9IGZ1bmN0aW9uIChzdGFydEogLyppbnQqLywgY2VudGVySSAvKmludCovLCBtYXhDb3VudCAvKmludCovLCBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCAvKmludCovKSB7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIHZhciBtYXhKID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50KCk7CgkgICAgICAgIHZhciBqID0gc3RhcnRKOwoJICAgICAgICB3aGlsZSAoaiA+PSAwICYmIGltYWdlLmdldChqLCBjZW50ZXJJKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChqIDwgMCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaiA+PSAwICYmICFpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChqIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGogPj0gMCAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFswXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFswXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGF0ZUNvdW50WzBdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgaiA9IHN0YXJ0SiArIDE7CgkgICAgICAgIHdoaWxlIChqIDwgbWF4SiAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMl0rKzsKCSAgICAgICAgICAgIGorKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaiA9PT0gbWF4SikgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaiA8IG1heEogJiYgIWltYWdlLmdldChqLCBjZW50ZXJJKSAmJiBzdGF0ZUNvdW50WzNdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbM10rKzsKCSAgICAgICAgICAgIGorKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaiA9PT0gbWF4SiB8fCBzdGF0ZUNvdW50WzNdID49IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChqIDwgbWF4SiAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFs0XSA8IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdKys7CgkgICAgICAgICAgICBqKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbNF0gPj0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgLy8gSWYgd2UgZm91bmQgYSBmaW5kZXItcGF0dGVybi1saWtlIHNlY3Rpb24sIGJ1dCBpdHMgc2l6ZSBpcyBzaWduaWZpY2FudGx5IGRpZmZlcmVudCB0aGFuCgkgICAgICAgIC8vIHRoZSBvcmlnaW5hbCwgYXNzdW1lIGl0J3MgYSBmYWxzZSBwb3NpdGl2ZQoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdICsgc3RhdGVDb3VudFszXSArCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdOwoJICAgICAgICBpZiAoNSAqIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA+PSBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSA/IEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBqKSA6IE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlRoaXMgaXMgY2FsbGVkIHdoZW4gYSBob3Jpem9udGFsIHNjYW4gZmluZHMgYSBwb3NzaWJsZSBhbGlnbm1lbnQgcGF0dGVybi4gSXQgd2lsbAoJICAgICAqIGNyb3NzIGNoZWNrIHdpdGggYSB2ZXJ0aWNhbCBzY2FuLCBhbmQgaWYgc3VjY2Vzc2Z1bCwgd2lsbCwgYWgsIGNyb3NzLWNyb3NzLWNoZWNrCgkgICAgICogd2l0aCBhbm90aGVyIGhvcml6b250YWwgc2Nhbi4gVGhpcyBpcyBuZWVkZWQgcHJpbWFyaWx5IHRvIGxvY2F0ZSB0aGUgcmVhbCBob3Jpem9udGFsCgkgICAgICogY2VudGVyIG9mIHRoZSBwYXR0ZXJuIGluIGNhc2VzIG9mIGV4dHJlbWUgc2tldy4KCSAgICAgKiBBbmQgdGhlbiB3ZSBjcm9zcy1jcm9zcy1jcm9zcyBjaGVjayB3aXRoIGFub3RoZXIgZGlhZ29uYWwgc2Nhbi48L3A+CgkgICAgICoKCSAgICAgKiA8cD5JZiB0aGF0IHN1Y2NlZWRzIHRoZSBmaW5kZXIgcGF0dGVybiBsb2NhdGlvbiBpcyBhZGRlZCB0byBhIGxpc3QgdGhhdCB0cmFja3MKCSAgICAgKiB0aGUgbnVtYmVyIG9mIHRpbWVzIGVhY2ggbG9jYXRpb24gaGFzIGJlZW4gbmVhcmx5LW1hdGNoZWQgYXMgYSBmaW5kZXIgcGF0dGVybi4KCSAgICAgKiBFYWNoIGFkZGl0aW9uYWwgZmluZCBpcyBtb3JlIGV2aWRlbmNlIHRoYXQgdGhlIGxvY2F0aW9uIGlzIGluIGZhY3QgYSBmaW5kZXIKCSAgICAgKiBwYXR0ZXJuIGNlbnRlcgoJICAgICAqCgkgICAgICogQHBhcmFtIHN0YXRlQ291bnQgcmVhZGluZyBzdGF0ZSBtb2R1bGUgY291bnRzIGZyb20gaG9yaXpvbnRhbCBzY2FuCgkgICAgICogQHBhcmFtIGkgcm93IHdoZXJlIGZpbmRlciBwYXR0ZXJuIG1heSBiZSBmb3VuZAoJICAgICAqIEBwYXJhbSBqIGVuZCBvZiBwb3NzaWJsZSBmaW5kZXIgcGF0dGVybiBpbiByb3cKCSAgICAgKiBAcGFyYW0gcHVyZUJhcmNvZGUgdHJ1ZSBpZiBpbiAicHVyZSBiYXJjb2RlIiBtb2RlCgkgICAgICogQHJldHVybiB0cnVlIGlmIGEgZmluZGVyIHBhdHRlcm4gY2FuZGlkYXRlIHdhcyBmb3VuZCB0aGlzIHRpbWUKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5oYW5kbGVQb3NzaWJsZUNlbnRlciA9IGZ1bmN0aW9uIChzdGF0ZUNvdW50LCBpIC8qaW50Ki8sIGogLyppbnQqLywgcHVyZUJhcmNvZGUpIHsKCSAgICAgICAgdmFyIHN0YXRlQ291bnRUb3RhbCA9IHN0YXRlQ291bnRbMF0gKyBzdGF0ZUNvdW50WzFdICsgc3RhdGVDb3VudFsyXSArIHN0YXRlQ291bnRbM10gKwoJICAgICAgICAgICAgc3RhdGVDb3VudFs0XTsKCSAgICAgICAgdmFyIGNlbnRlckogPSBGaW5kZXJQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQoc3RhdGVDb3VudCwgaik7CgkgICAgICAgIHZhciBjZW50ZXJJID0gdGhpcy5jcm9zc0NoZWNrVmVydGljYWwoaSwgLyooaW50KSAqLyBNYXRoLmZsb29yKGNlbnRlckopLCBzdGF0ZUNvdW50WzJdLCBzdGF0ZUNvdW50VG90YWwpOwoJICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckkpKSB7CgkgICAgICAgICAgICAvLyBSZS1jcm9zcyBjaGVjawoJICAgICAgICAgICAgY2VudGVySiA9IHRoaXMuY3Jvc3NDaGVja0hvcml6b250YWwoLyooaW50KSAqLyBNYXRoLmZsb29yKGNlbnRlckopLCAvKihpbnQpICovIE1hdGguZmxvb3IoY2VudGVySSksIHN0YXRlQ291bnRbMl0sIHN0YXRlQ291bnRUb3RhbCk7CgkgICAgICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckopICYmCgkgICAgICAgICAgICAgICAgKCFwdXJlQmFyY29kZSB8fCB0aGlzLmNyb3NzQ2hlY2tEaWFnb25hbCgvKihpbnQpICovIE1hdGguZmxvb3IoY2VudGVySSksIC8qKGludCkgKi8gTWF0aC5mbG9vcihjZW50ZXJKKSwgc3RhdGVDb3VudFsyXSwgc3RhdGVDb3VudFRvdGFsKSkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IHN0YXRlQ291bnRUb3RhbCAvIDcuMDsKCSAgICAgICAgICAgICAgICB2YXIgZm91bmQgPSBmYWxzZTsKCSAgICAgICAgICAgICAgICB2YXIgcG9zc2libGVDZW50ZXJzID0gdGhpcy5wb3NzaWJsZUNlbnRlcnM7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgaW5kZXggPSAwLCBsZW5ndGhfMSA9IHBvc3NpYmxlQ2VudGVycy5sZW5ndGg7IGluZGV4IDwgbGVuZ3RoXzE7IGluZGV4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGNlbnRlciA9IHBvc3NpYmxlQ2VudGVyc1tpbmRleF07CgkgICAgICAgICAgICAgICAgICAgIC8vIExvb2sgZm9yIGFib3V0IHRoZSBzYW1lIGNlbnRlciBhbmQgbW9kdWxlIHNpemU6CgkgICAgICAgICAgICAgICAgICAgIGlmIChjZW50ZXIuYWJvdXRFcXVhbHMoZXN0aW1hdGVkTW9kdWxlU2l6ZSwgY2VudGVySSwgY2VudGVySikpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVyc1tpbmRleF0gPSBjZW50ZXIuY29tYmluZUVzdGltYXRlKGNlbnRlckksIGNlbnRlckosIGVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlOwoJICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgaWYgKCFmb3VuZCkgewoJICAgICAgICAgICAgICAgICAgICB2YXIgcG9pbnQgPSBuZXcgRmluZGVyUGF0dGVybl8xLmRlZmF1bHQoY2VudGVySiwgY2VudGVySSwgZXN0aW1hdGVkTW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVycy5wdXNoKHBvaW50KTsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayAhPT0gbnVsbCAmJiB0aGlzLnJlc3VsdFBvaW50Q2FsbGJhY2sgIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrLmZvdW5kUG9zc2libGVSZXN1bHRQb2ludChwb2ludCk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2Ygcm93cyB3ZSBjb3VsZCBzYWZlbHkgc2tpcCBkdXJpbmcgc2Nhbm5pbmcsIGJhc2VkIG9uIHRoZSBmaXJzdAoJICAgICAqICAgICAgICAgdHdvIGZpbmRlciBwYXR0ZXJucyB0aGF0IGhhdmUgYmVlbiBsb2NhdGVkLiBJbiBzb21lIGNhc2VzIHRoZWlyIHBvc2l0aW9uIHdpbGwKCSAgICAgKiAgICAgICAgIGFsbG93IHVzIHRvIGluZmVyIHRoYXQgdGhlIHRoaXJkIHBhdHRlcm4gbXVzdCBsaWUgYmVsb3cgYSBjZXJ0YWluIHBvaW50IGZhcnRoZXIKCSAgICAgKiAgICAgICAgIGRvd24gaW4gdGhlIGltYWdlLgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmZpbmRSb3dTa2lwID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIG1heCA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgaWYgKG1heCA8PSAxKSB7CgkgICAgICAgICAgICByZXR1cm4gMDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgZmlyc3RDb25maXJtZWRDZW50ZXIgPSBudWxsOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgX2IgPSBfX3ZhbHVlcyh0aGlzLnBvc3NpYmxlQ2VudGVycyksIF9jID0gX2IubmV4dCgpOyAhX2MuZG9uZTsgX2MgPSBfYi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgY2VudGVyID0gX2MudmFsdWU7CgkgICAgICAgICAgICAgICAgaWYgKGNlbnRlci5nZXRDb3VudCgpID49IEZpbmRlclBhdHRlcm5GaW5kZXIuQ0VOVEVSX1FVT1JVTSkgewoJICAgICAgICAgICAgICAgICAgICBpZiAoZmlyc3RDb25maXJtZWRDZW50ZXIgPT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3RDb25maXJtZWRDZW50ZXIgPSBjZW50ZXI7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBoYXZlIHR3byBjb25maXJtZWQgY2VudGVycwoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gSG93IGZhciBkb3duIGNhbiB3ZSBza2lwIGJlZm9yZSByZXN1bWluZyBsb29raW5nIGZvciB0aGUgbmV4dAoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gcGF0dGVybj8gSW4gdGhlIHdvcnN0IGNhc2UsIG9ubHkgdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiB0aGUKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRpZmZlcmVuY2UgaW4gdGhlIHggLyB5IGNvb3JkaW5hdGVzIG9mIHRoZSB0d28gY2VudGVycy4KCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgdGhlIGNhc2Ugd2hlcmUgeW91IGZpbmQgdG9wIGxlZnQgbGFzdC4KCSAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFzU2tpcHBlZCA9IHRydWU7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLyooaW50KSAqLyBNYXRoLmZsb29yKChNYXRoLmFicyhmaXJzdENvbmZpcm1lZENlbnRlci5nZXRYKCkgLSBjZW50ZXIuZ2V0WCgpKSAtCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5hYnMoZmlyc3RDb25maXJtZWRDZW50ZXIuZ2V0WSgpIC0gY2VudGVyLmdldFkoKSkpIC8gMik7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChfYyAmJiAhX2MuZG9uZSAmJiAoX2EgPSBfYi5yZXR1cm4pKSBfYS5jYWxsKF9iKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gdHJ1ZSBpZmYgd2UgaGF2ZSBmb3VuZCBhdCBsZWFzdCAzIGZpbmRlciBwYXR0ZXJucyB0aGF0IGhhdmUgYmVlbiBkZXRlY3RlZAoJICAgICAqICAgICAgICAgYXQgbGVhc3Qge0BsaW5rICNDRU5URVJfUVVPUlVNfSB0aW1lcyBlYWNoLCBhbmQsIHRoZSBlc3RpbWF0ZWQgbW9kdWxlIHNpemUgb2YgdGhlCgkgICAgICogICAgICAgICBjYW5kaWRhdGVzIGlzICJwcmV0dHkgc2ltaWxhciIKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8yLCBfYSwgZV8zLCBfYjsKCSAgICAgICAgdmFyIGNvbmZpcm1lZENvdW50ID0gMDsKCSAgICAgICAgdmFyIHRvdGFsTW9kdWxlU2l6ZSA9IDAuMDsKCSAgICAgICAgdmFyIG1heCA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIF9jID0gX192YWx1ZXModGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfZCA9IF9jLm5leHQoKTsgIV9kLmRvbmU7IF9kID0gX2MubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBfZC52YWx1ZTsKCSAgICAgICAgICAgICAgICBpZiAocGF0dGVybi5nZXRDb3VudCgpID49IEZpbmRlclBhdHRlcm5GaW5kZXIuQ0VOVEVSX1FVT1JVTSkgewoJICAgICAgICAgICAgICAgICAgICBjb25maXJtZWRDb3VudCsrOwoJICAgICAgICAgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gcGF0dGVybi5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzJfMSkgeyBlXzIgPSB7IGVycm9yOiBlXzJfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2QgJiYgIV9kLmRvbmUgJiYgKF9hID0gX2MucmV0dXJuKSkgX2EuY2FsbChfYyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMikgdGhyb3cgZV8yLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvbmZpcm1lZENvdW50IDwgMykgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIE9LLCB3ZSBoYXZlIGF0IGxlYXN0IDMgY29uZmlybWVkIGNlbnRlcnMsIGJ1dCwgaXQncyBwb3NzaWJsZSB0aGF0IG9uZSBpcyBhICJmYWxzZSBwb3NpdGl2ZSIKCSAgICAgICAgLy8gYW5kIHRoYXQgd2UgbmVlZCB0byBrZWVwIGxvb2tpbmcuIFdlIGRldGVjdCB0aGlzIGJ5IGFza2luZyBpZiB0aGUgZXN0aW1hdGVkIG1vZHVsZSBzaXplcwoJICAgICAgICAvLyB2YXJ5IHRvbyBtdWNoLiBXZSBhcmJpdHJhcmlseSBzYXkgdGhhdCB3aGVuIHRoZSB0b3RhbCBkZXZpYXRpb24gZnJvbSBhdmVyYWdlIGV4Y2VlZHMKCSAgICAgICAgLy8gNSUgb2YgdGhlIHRvdGFsIG1vZHVsZSBzaXplIGVzdGltYXRlcywgaXQncyB0b28gbXVjaC4KCSAgICAgICAgdmFyIGF2ZXJhZ2UgPSB0b3RhbE1vZHVsZVNpemUgLyBtYXg7CgkgICAgICAgIHZhciB0b3RhbERldmlhdGlvbiA9IDAuMDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIF9lID0gX192YWx1ZXModGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfZiA9IF9lLm5leHQoKTsgIV9mLmRvbmU7IF9mID0gX2UubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBfZi52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbERldmlhdGlvbiArPSBNYXRoLmFicyhwYXR0ZXJuLmdldEVzdGltYXRlZE1vZHVsZVNpemUoKSAtIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzNfMSkgeyBlXzMgPSB7IGVycm9yOiBlXzNfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2YgJiYgIV9mLmRvbmUgJiYgKF9iID0gX2UucmV0dXJuKSkgX2IuY2FsbChfZSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMykgdGhyb3cgZV8zLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRvdGFsRGV2aWF0aW9uIDw9IDAuMDUgKiB0b3RhbE1vZHVsZVNpemU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHRoZSAzIGJlc3Qge0BsaW5rIEZpbmRlclBhdHRlcm59cyBmcm9tIG91ciBsaXN0IG9mIGNhbmRpZGF0ZXMuIFRoZSAiYmVzdCIgYXJlCgkgICAgICogICAgICAgICB0aG9zZSB0aGF0IGhhdmUgYmVlbiBkZXRlY3RlZCBhdCBsZWFzdCB7QGxpbmsgI0NFTlRFUl9RVU9SVU19IHRpbWVzLCBhbmQgd2hvc2UgbW9kdWxlCgkgICAgICogICAgICAgICBzaXplIGRpZmZlcnMgZnJvbSB0aGUgYXZlcmFnZSBhbW9uZyB0aG9zZSBwYXR0ZXJucyB0aGUgbGVhc3QKCSAgICAgKiBAdGhyb3dzIE5vdEZvdW5kRXhjZXB0aW9uIGlmIDMgc3VjaCBmaW5kZXIgcGF0dGVybnMgZG8gbm90IGV4aXN0CgkgICAgICovCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuc2VsZWN0QmVzdFBhdHRlcm5zID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV80LCBfYSwgZV81LCBfYjsKCSAgICAgICAgdmFyIHN0YXJ0U2l6ZSA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgaWYgKHN0YXJ0U2l6ZSA8IDMpIHsKCSAgICAgICAgICAgIC8vIENvdWxkbid0IGZpbmQgZW5vdWdoIGZpbmRlciBwYXR0ZXJucwoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkMi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHBvc3NpYmxlQ2VudGVycyA9IHRoaXMucG9zc2libGVDZW50ZXJzOwoJICAgICAgICB2YXIgYXZlcmFnZTsKCSAgICAgICAgLy8gRmlsdGVyIG91dGxpZXIgcG9zc2liaWxpdGllcyB3aG9zZSBtb2R1bGUgc2l6ZSBpcyB0b28gZGlmZmVyZW50CgkgICAgICAgIGlmIChzdGFydFNpemUgPiAzKSB7CgkgICAgICAgICAgICAvLyBCdXQgd2UgY2FuIG9ubHkgYWZmb3JkIHRvIGRvIHNvIGlmIHdlIGhhdmUgYXQgbGVhc3QgNCBwb3NzaWJpbGl0aWVzIHRvIGNob29zZSBmcm9tCgkgICAgICAgICAgICB2YXIgdG90YWxNb2R1bGVTaXplID0gMC4wOwoJICAgICAgICAgICAgdmFyIHNxdWFyZSA9IDAuMDsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgX2MgPSBfX3ZhbHVlcyh0aGlzLnBvc3NpYmxlQ2VudGVycyksIF9kID0gX2MubmV4dCgpOyAhX2QuZG9uZTsgX2QgPSBfYy5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGNlbnRlciA9IF9kLnZhbHVlOwoJICAgICAgICAgICAgICAgICAgICB2YXIgc2l6ZSA9IGNlbnRlci5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCk7CgkgICAgICAgICAgICAgICAgICAgIHRvdGFsTW9kdWxlU2l6ZSArPSBzaXplOwoJICAgICAgICAgICAgICAgICAgICBzcXVhcmUgKz0gc2l6ZSAqIHNpemU7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgY2F0Y2ggKGVfNF8xKSB7IGVfNCA9IHsgZXJyb3I6IGVfNF8xIH07IH0KCSAgICAgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgICAgIGlmIChfZCAmJiAhX2QuZG9uZSAmJiAoX2EgPSBfYy5yZXR1cm4pKSBfYS5jYWxsKF9jKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZmluYWxseSB7IGlmIChlXzQpIHRocm93IGVfNC5lcnJvcjsgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgYXZlcmFnZSA9IHRvdGFsTW9kdWxlU2l6ZSAvIHN0YXJ0U2l6ZTsKCSAgICAgICAgICAgIHZhciBzdGREZXYgPSBNYXRoLnNxcnQoc3F1YXJlIC8gc3RhcnRTaXplIC0gYXZlcmFnZSAqIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzLnNvcnQoCgkgICAgICAgICAgICAvKioKCSAgICAgICAgICAgICAqIDxwPk9yZGVycyBieSBmdXJ0aGVzdCBmcm9tIGF2ZXJhZ2U8L3A+CgkgICAgICAgICAgICAgKi8KCSAgICAgICAgICAgIC8vIEZ1cnRoZXN0RnJvbUF2ZXJhZ2VDb21wYXJhdG9yIGltcGxlbWVudHMgQ29tcGFyYXRvcjxGaW5kZXJQYXR0ZXJuPgoJICAgICAgICAgICAgZnVuY3Rpb24gKGNlbnRlcjEsIGNlbnRlcjIpIHsKCSAgICAgICAgICAgICAgICB2YXIgZEEgPSBNYXRoLmFicyhjZW50ZXIyLmdldEVzdGltYXRlZE1vZHVsZVNpemUoKSAtIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgICAgIHZhciBkQiA9IE1hdGguYWJzKGNlbnRlcjEuZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpIC0gYXZlcmFnZSk7CgkgICAgICAgICAgICAgICAgcmV0dXJuIGRBIDwgZEIgPyAtMSA6IGRBID4gZEIgPyAxIDogMDsKCSAgICAgICAgICAgIH0pOwoJICAgICAgICAgICAgdmFyIGxpbWl0ID0gTWF0aC5tYXgoMC4yICogYXZlcmFnZSwgc3RkRGV2KTsKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcG9zc2libGVDZW50ZXJzLmxlbmd0aCAmJiBwb3NzaWJsZUNlbnRlcnMubGVuZ3RoID4gMzsgaSsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBwb3NzaWJsZUNlbnRlcnNbaV07CgkgICAgICAgICAgICAgICAgaWYgKE1hdGguYWJzKHBhdHRlcm4uZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpIC0gYXZlcmFnZSkgPiBsaW1pdCkgewoJICAgICAgICAgICAgICAgICAgICBwb3NzaWJsZUNlbnRlcnMuc3BsaWNlKGksIDEpOwoJICAgICAgICAgICAgICAgICAgICBpLS07CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGlmIChwb3NzaWJsZUNlbnRlcnMubGVuZ3RoID4gMykgewoJICAgICAgICAgICAgLy8gVGhyb3cgYXdheSBhbGwgYnV0IHRob3NlIGZpcnN0IHNpemUgY2FuZGlkYXRlIHBvaW50cyB3ZSBmb3VuZC4KCSAgICAgICAgICAgIHZhciB0b3RhbE1vZHVsZVNpemUgPSAwLjA7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGZvciAodmFyIHBvc3NpYmxlQ2VudGVyc18xID0gX192YWx1ZXMocG9zc2libGVDZW50ZXJzKSwgcG9zc2libGVDZW50ZXJzXzFfMSA9IHBvc3NpYmxlQ2VudGVyc18xLm5leHQoKTsgIXBvc3NpYmxlQ2VudGVyc18xXzEuZG9uZTsgcG9zc2libGVDZW50ZXJzXzFfMSA9IHBvc3NpYmxlQ2VudGVyc18xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgICAgICB2YXIgcG9zc2libGVDZW50ZXIgPSBwb3NzaWJsZUNlbnRlcnNfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gcG9zc2libGVDZW50ZXIuZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGNhdGNoIChlXzVfMSkgeyBlXzUgPSB7IGVycm9yOiBlXzVfMSB9OyB9CgkgICAgICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgICAgICBpZiAocG9zc2libGVDZW50ZXJzXzFfMSAmJiAhcG9zc2libGVDZW50ZXJzXzFfMS5kb25lICYmIChfYiA9IHBvc3NpYmxlQ2VudGVyc18xLnJldHVybikpIF9iLmNhbGwocG9zc2libGVDZW50ZXJzXzEpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfNSkgdGhyb3cgZV81LmVycm9yOyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBhdmVyYWdlID0gdG90YWxNb2R1bGVTaXplIC8gcG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVycy5zb3J0KAoJICAgICAgICAgICAgLyoqCgkgICAgICAgICAgICAgKiA8cD5PcmRlcnMgYnkge0BsaW5rIEZpbmRlclBhdHRlcm4jZ2V0Q291bnQoKX0sIGRlc2NlbmRpbmcuPC9wPgoJICAgICAgICAgICAgICovCgkgICAgICAgICAgICAvLyBDZW50ZXJDb21wYXJhdG9yIGltcGxlbWVudHMgQ29tcGFyYXRvcjxGaW5kZXJQYXR0ZXJuPgoJICAgICAgICAgICAgZnVuY3Rpb24gKGNlbnRlcjEsIGNlbnRlcjIpIHsKCSAgICAgICAgICAgICAgICBpZiAoY2VudGVyMi5nZXRDb3VudCgpID09PSBjZW50ZXIxLmdldENvdW50KCkpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGRBID0gTWF0aC5hYnMoY2VudGVyMi5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCkgLSBhdmVyYWdlKTsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGRCID0gTWF0aC5hYnMoY2VudGVyMS5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCkgLSBhdmVyYWdlKTsKCSAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRBIDwgZEIgPyAxIDogZEEgPiBkQiA/IC0xIDogMDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIHJldHVybiBjZW50ZXIyLmdldENvdW50KCkgLSBjZW50ZXIxLmdldENvdW50KCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfSk7CgkgICAgICAgICAgICBwb3NzaWJsZUNlbnRlcnMuc3BsaWNlKDMpOyAvLyB0aGlzIGlzIG5vdCByZWFseSBuZWNlc3NhcnkgYXMgd2Ugb25seSByZXR1cm4gZmlyc3QgMyBhbnl3YXkKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gWwoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzBdLAoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzFdLAoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzJdCgkgICAgICAgIF07CgkgICAgfTsKCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLkNFTlRFUl9RVU9SVU0gPSAyOwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuTUlOX1NLSVAgPSAzOyAvLyAxIHBpeGVsL21vZHVsZSB0aW1lcyAzIG1vZHVsZXMvY2VudGVyCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5NQVhfTU9EVUxFUyA9IDU3OyAvLyBzdXBwb3J0IHVwIHRvIHZlcnNpb24gMTAgZm9yIG1vYmlsZSBjbGllbnRzCgkgICAgcmV0dXJuIEZpbmRlclBhdHRlcm5GaW5kZXI7Cgl9KCkpOwoJRmluZGVyUGF0dGVybkZpbmRlciQxLmRlZmF1bHQgPSBGaW5kZXJQYXR0ZXJuRmluZGVyOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGV0ZWN0b3IkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIE1hdGhVdGlsc18xID0gTWF0aFV0aWxzJDE7Cgl2YXIgRGV0ZWN0b3JSZXN1bHRfMSA9IERldGVjdG9yUmVzdWx0JDE7CgkvLyBpbXBvcnQgR3JpZFNhbXBsZXIgZnJvbSAnLi4vLi4vY29tbW9uL0dyaWRTYW1wbGVyJzsKCXZhciBHcmlkU2FtcGxlckluc3RhbmNlXzEgPSBHcmlkU2FtcGxlckluc3RhbmNlJDE7Cgl2YXIgUGVyc3BlY3RpdmVUcmFuc2Zvcm1fMSA9IFBlcnNwZWN0aXZlVHJhbnNmb3JtJDE7Cgl2YXIgRGVjb2RlSGludFR5cGVfMSQxID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJdmFyIFJlc3VsdFBvaW50XzEgPSBSZXN1bHRQb2ludCQxOwoJdmFyIFZlcnNpb25fMSA9IFZlcnNpb24kMTsKCXZhciBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyXzEgPSBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyJDE7Cgl2YXIgRmluZGVyUGF0dGVybkZpbmRlcl8xID0gRmluZGVyUGF0dGVybkZpbmRlciQxOwoJLyppbXBvcnQgamF2YS51dGlsLk1hcDsqLwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgbG9naWMgdGhhdCBjYW4gZGV0ZWN0IGEgUVIgQ29kZSBpbiBhbiBpbWFnZSwgZXZlbiBpZiB0aGUgUVIgQ29kZQoJICogaXMgcm90YXRlZCBvciBza2V3ZWQsIG9yIHBhcnRpYWxseSBvYnNjdXJlZC48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERldGVjdG9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIERldGVjdG9yKGltYWdlKSB7CgkgICAgICAgIHRoaXMuaW1hZ2UgPSBpbWFnZTsKCSAgICB9CgkgICAgRGV0ZWN0b3IucHJvdG90eXBlLmdldEltYWdlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5pbWFnZTsKCSAgICB9OwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5nZXRSZXN1bHRQb2ludENhbGxiYWNrID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZWN0cyBhIFFSIENvZGUgaW4gYW4gaW1hZ2UuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiB7QGxpbmsgRGV0ZWN0b3JSZXN1bHR9IGVuY2Fwc3VsYXRpbmcgcmVzdWx0cyBvZiBkZXRlY3RpbmcgYSBRUiBDb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBRUiBDb2RlIGNhbm5vdCBiZSBmb3VuZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIGEgUVIgQ29kZSBjYW5ub3QgYmUgZGVjb2RlZAoJICAgICAqLwoJICAgIC8vIHB1YmxpYyBkZXRlY3QoKTogRGV0ZWN0b3JSZXN1bHQgLyp0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiovIHsKCSAgICAvLyAgIHJldHVybiBkZXRlY3QobnVsbCkKCSAgICAvLyB9CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZWN0cyBhIFFSIENvZGUgaW4gYW4gaW1hZ2UuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGhpbnRzIG9wdGlvbmFsIGhpbnRzIHRvIGRldGVjdG9yCgkgICAgICogQHJldHVybiB7QGxpbmsgRGV0ZWN0b3JSZXN1bHR9IGVuY2Fwc3VsYXRpbmcgcmVzdWx0cyBvZiBkZXRlY3RpbmcgYSBRUiBDb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBRUiBDb2RlIGNhbm5vdCBiZSBmb3VuZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIGEgUVIgQ29kZSBjYW5ub3QgYmUgZGVjb2RlZAoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5kZXRlY3QgPSBmdW5jdGlvbiAoaGludHMpIHsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gKGhpbnRzID09PSBudWxsIHx8IGhpbnRzID09PSB1bmRlZmluZWQpID8gbnVsbCA6CgkgICAgICAgICAgICAvKihSZXN1bHRQb2ludENhbGxiYWNrKSAqLyBoaW50cy5nZXQoRGVjb2RlSGludFR5cGVfMSQxLmRlZmF1bHQuTkVFRF9SRVNVTFRfUE9JTlRfQ0FMTEJBQ0spOwoJICAgICAgICB2YXIgZmluZGVyID0gbmV3IEZpbmRlclBhdHRlcm5GaW5kZXJfMS5kZWZhdWx0KHRoaXMuaW1hZ2UsIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayk7CgkgICAgICAgIHZhciBpbmZvID0gZmluZGVyLmZpbmQoaGludHMpOwoJICAgICAgICByZXR1cm4gdGhpcy5wcm9jZXNzRmluZGVyUGF0dGVybkluZm8oaW5mbyk7CgkgICAgfTsKCSAgICBEZXRlY3Rvci5wcm90b3R5cGUucHJvY2Vzc0ZpbmRlclBhdHRlcm5JbmZvID0gZnVuY3Rpb24gKGluZm8pIHsKCSAgICAgICAgdmFyIHRvcExlZnQgPSBpbmZvLmdldFRvcExlZnQoKTsKCSAgICAgICAgdmFyIHRvcFJpZ2h0ID0gaW5mby5nZXRUb3BSaWdodCgpOwoJICAgICAgICB2YXIgYm90dG9tTGVmdCA9IGluZm8uZ2V0Qm90dG9tTGVmdCgpOwoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRoaXMuY2FsY3VsYXRlTW9kdWxlU2l6ZSh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCk7CgkgICAgICAgIGlmIChtb2R1bGVTaXplIDwgMS4wKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQxLmRlZmF1bHQoJ05vIHBhdHRlcm4gZm91bmQgaW4gcHJvY2Nlc3MgZmluZGVyLicpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBkaW1lbnNpb24gPSBEZXRlY3Rvci5jb21wdXRlRGltZW5zaW9uKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIHByb3Zpc2lvbmFsVmVyc2lvbiA9IFZlcnNpb25fMS5kZWZhdWx0LmdldFByb3Zpc2lvbmFsVmVyc2lvbkZvckRpbWVuc2lvbihkaW1lbnNpb24pOwoJICAgICAgICB2YXIgbW9kdWxlc0JldHdlZW5GUENlbnRlcnMgPSBwcm92aXNpb25hbFZlcnNpb24uZ2V0RGltZW5zaW9uRm9yVmVyc2lvbigpIC0gNzsKCSAgICAgICAgdmFyIGFsaWdubWVudFBhdHRlcm4gPSBudWxsOwoJICAgICAgICAvLyBBbnl0aGluZyBhYm92ZSB2ZXJzaW9uIDEgaGFzIGFuIGFsaWdubWVudCBwYXR0ZXJuCgkgICAgICAgIGlmIChwcm92aXNpb25hbFZlcnNpb24uZ2V0QWxpZ25tZW50UGF0dGVybkNlbnRlcnMoKS5sZW5ndGggPiAwKSB7CgkgICAgICAgICAgICAvLyBHdWVzcyB3aGVyZSBhICJib3R0b20gcmlnaHQiIGZpbmRlciBwYXR0ZXJuIHdvdWxkIGhhdmUgYmVlbgoJICAgICAgICAgICAgdmFyIGJvdHRvbVJpZ2h0WCA9IHRvcFJpZ2h0LmdldFgoKSAtIHRvcExlZnQuZ2V0WCgpICsgYm90dG9tTGVmdC5nZXRYKCk7CgkgICAgICAgICAgICB2YXIgYm90dG9tUmlnaHRZID0gdG9wUmlnaHQuZ2V0WSgpIC0gdG9wTGVmdC5nZXRZKCkgKyBib3R0b21MZWZ0LmdldFkoKTsKCSAgICAgICAgICAgIC8vIEVzdGltYXRlIHRoYXQgYWxpZ25tZW50IHBhdHRlcm4gaXMgY2xvc2VyIGJ5IDMgbW9kdWxlcwoJICAgICAgICAgICAgLy8gZnJvbSAiYm90dG9tIHJpZ2h0IiB0byBrbm93biB0b3AgbGVmdCBsb2NhdGlvbgoJICAgICAgICAgICAgdmFyIGNvcnJlY3Rpb25Ub1RvcExlZnQgPSAxLjAgLSAzLjAgLyBtb2R1bGVzQmV0d2VlbkZQQ2VudGVyczsKCSAgICAgICAgICAgIHZhciBlc3RBbGlnbm1lbnRYID0gLyooaW50KSAqLyBNYXRoLmZsb29yKHRvcExlZnQuZ2V0WCgpICsgY29ycmVjdGlvblRvVG9wTGVmdCAqIChib3R0b21SaWdodFggLSB0b3BMZWZ0LmdldFgoKSkpOwoJICAgICAgICAgICAgdmFyIGVzdEFsaWdubWVudFkgPSAvKihpbnQpICovIE1hdGguZmxvb3IodG9wTGVmdC5nZXRZKCkgKyBjb3JyZWN0aW9uVG9Ub3BMZWZ0ICogKGJvdHRvbVJpZ2h0WSAtIHRvcExlZnQuZ2V0WSgpKSk7CgkgICAgICAgICAgICAvLyBLaW5kIG9mIGFyYml0cmFyeSAtLSBleHBhbmQgc2VhcmNoIHJhZGl1cyBiZWZvcmUgZ2l2aW5nIHVwCgkgICAgICAgICAgICBmb3IgKHZhciBpID0gNDsgaSA8PSAxNjsgaSA8PD0gMSkgewoJICAgICAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgICAgIGFsaWdubWVudFBhdHRlcm4gPSB0aGlzLmZpbmRBbGlnbm1lbnRJblJlZ2lvbihtb2R1bGVTaXplLCBlc3RBbGlnbm1lbnRYLCBlc3RBbGlnbm1lbnRZLCBpKTsKCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGNhdGNoIChyZSAvKk5vdEZvdW5kRXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKCEocmUgaW5zdGFuY2VvZiBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCkpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IHJlOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIC8vIHRyeSBuZXh0IHJvdW5kCgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgLy8gSWYgd2UgZGlkbid0IGZpbmQgYWxpZ25tZW50IHBhdHRlcm4uLi4gd2VsbCB0cnkgYW55d2F5IHdpdGhvdXQgaXQKCSAgICAgICAgfQoJICAgICAgICB2YXIgdHJhbnNmb3JtID0gRGV0ZWN0b3IuY3JlYXRlVHJhbnNmb3JtKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBhbGlnbm1lbnRQYXR0ZXJuLCBkaW1lbnNpb24pOwoJICAgICAgICB2YXIgYml0cyA9IERldGVjdG9yLnNhbXBsZUdyaWQodGhpcy5pbWFnZSwgdHJhbnNmb3JtLCBkaW1lbnNpb24pOwoJICAgICAgICB2YXIgcG9pbnRzOwoJICAgICAgICBpZiAoYWxpZ25tZW50UGF0dGVybiA9PT0gbnVsbCkgewoJICAgICAgICAgICAgcG9pbnRzID0gW2JvdHRvbUxlZnQsIHRvcExlZnQsIHRvcFJpZ2h0XTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHBvaW50cyA9IFtib3R0b21MZWZ0LCB0b3BMZWZ0LCB0b3BSaWdodCwgYWxpZ25tZW50UGF0dGVybl07CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG5ldyBEZXRlY3RvclJlc3VsdF8xLmRlZmF1bHQoYml0cywgcG9pbnRzKTsKCSAgICB9OwoJICAgIERldGVjdG9yLmNyZWF0ZVRyYW5zZm9ybSA9IGZ1bmN0aW9uICh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCwgYWxpZ25tZW50UGF0dGVybiwgZGltZW5zaW9uIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGRpbU1pbnVzVGhyZWUgPSBkaW1lbnNpb24gLSAzLjU7CgkgICAgICAgIHZhciBib3R0b21SaWdodFg7IC8qZmxvYXQqLwoJICAgICAgICB2YXIgYm90dG9tUmlnaHRZOyAvKmZsb2F0Ki8KCSAgICAgICAgdmFyIHNvdXJjZUJvdHRvbVJpZ2h0WDsgLypmbG9hdCovCgkgICAgICAgIHZhciBzb3VyY2VCb3R0b21SaWdodFk7IC8qZmxvYXQqLwoJICAgICAgICBpZiAoYWxpZ25tZW50UGF0dGVybiAhPT0gbnVsbCkgewoJICAgICAgICAgICAgYm90dG9tUmlnaHRYID0gYWxpZ25tZW50UGF0dGVybi5nZXRYKCk7CgkgICAgICAgICAgICBib3R0b21SaWdodFkgPSBhbGlnbm1lbnRQYXR0ZXJuLmdldFkoKTsKCSAgICAgICAgICAgIHNvdXJjZUJvdHRvbVJpZ2h0WCA9IGRpbU1pbnVzVGhyZWUgLSAzLjA7CgkgICAgICAgICAgICBzb3VyY2VCb3R0b21SaWdodFkgPSBzb3VyY2VCb3R0b21SaWdodFg7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAvLyBEb24ndCBoYXZlIGFuIGFsaWdubWVudCBwYXR0ZXJuLCBqdXN0IG1ha2UgdXAgdGhlIGJvdHRvbS1yaWdodCBwb2ludAoJICAgICAgICAgICAgYm90dG9tUmlnaHRYID0gKHRvcFJpZ2h0LmdldFgoKSAtIHRvcExlZnQuZ2V0WCgpKSArIGJvdHRvbUxlZnQuZ2V0WCgpOwoJICAgICAgICAgICAgYm90dG9tUmlnaHRZID0gKHRvcFJpZ2h0LmdldFkoKSAtIHRvcExlZnQuZ2V0WSgpKSArIGJvdHRvbUxlZnQuZ2V0WSgpOwoJICAgICAgICAgICAgc291cmNlQm90dG9tUmlnaHRYID0gZGltTWludXNUaHJlZTsKCSAgICAgICAgICAgIHNvdXJjZUJvdHRvbVJpZ2h0WSA9IGRpbU1pbnVzVGhyZWU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIFBlcnNwZWN0aXZlVHJhbnNmb3JtXzEuZGVmYXVsdC5xdWFkcmlsYXRlcmFsVG9RdWFkcmlsYXRlcmFsKDMuNSwgMy41LCBkaW1NaW51c1RocmVlLCAzLjUsIHNvdXJjZUJvdHRvbVJpZ2h0WCwgc291cmNlQm90dG9tUmlnaHRZLCAzLjUsIGRpbU1pbnVzVGhyZWUsIHRvcExlZnQuZ2V0WCgpLCB0b3BMZWZ0LmdldFkoKSwgdG9wUmlnaHQuZ2V0WCgpLCB0b3BSaWdodC5nZXRZKCksIGJvdHRvbVJpZ2h0WCwgYm90dG9tUmlnaHRZLCBib3R0b21MZWZ0LmdldFgoKSwgYm90dG9tTGVmdC5nZXRZKCkpOwoJICAgIH07CgkgICAgRGV0ZWN0b3Iuc2FtcGxlR3JpZCA9IGZ1bmN0aW9uIChpbWFnZSwgdHJhbnNmb3JtLCBkaW1lbnNpb24gLyppbnQqLykgewoJICAgICAgICB2YXIgc2FtcGxlciA9IEdyaWRTYW1wbGVySW5zdGFuY2VfMS5kZWZhdWx0LmdldEluc3RhbmNlKCk7CgkgICAgICAgIHJldHVybiBzYW1wbGVyLnNhbXBsZUdyaWRXaXRoVHJhbnNmb3JtKGltYWdlLCBkaW1lbnNpb24sIGRpbWVuc2lvbiwgdHJhbnNmb3JtKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkNvbXB1dGVzIHRoZSBkaW1lbnNpb24gKG51bWJlciBvZiBtb2R1bGVzIG9uIGEgc2l6ZSkgb2YgdGhlIFFSIENvZGUgYmFzZWQgb24gdGhlIHBvc2l0aW9uCgkgICAgICogb2YgdGhlIGZpbmRlciBwYXR0ZXJucyBhbmQgZXN0aW1hdGVkIG1vZHVsZSBzaXplLjwvcD4KCSAgICAgKi8KCSAgICBEZXRlY3Rvci5jb21wdXRlRGltZW5zaW9uID0gZnVuY3Rpb24gKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBtb2R1bGVTaXplIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgdGx0ckNlbnRlcnNEaW1lbnNpb24gPSBNYXRoVXRpbHNfMS5kZWZhdWx0LnJvdW5kKFJlc3VsdFBvaW50XzEuZGVmYXVsdC5kaXN0YW5jZSh0b3BMZWZ0LCB0b3BSaWdodCkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIHRsYmxDZW50ZXJzRGltZW5zaW9uID0gTWF0aFV0aWxzXzEuZGVmYXVsdC5yb3VuZChSZXN1bHRQb2ludF8xLmRlZmF1bHQuZGlzdGFuY2UodG9wTGVmdCwgYm90dG9tTGVmdCkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IE1hdGguZmxvb3IoKHRsdHJDZW50ZXJzRGltZW5zaW9uICsgdGxibENlbnRlcnNEaW1lbnNpb24pIC8gMikgKyA3OwoJICAgICAgICBzd2l0Y2ggKGRpbWVuc2lvbiAmIDB4MDMpIHsgLy8gbW9kIDQKCSAgICAgICAgICAgIGNhc2UgMDoKCSAgICAgICAgICAgICAgICBkaW1lbnNpb24rKzsKCSAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIC8vIDE/IGRvIG5vdGhpbmcKCSAgICAgICAgICAgIGNhc2UgMjoKCSAgICAgICAgICAgICAgICBkaW1lbnNpb24tLTsKCSAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIGNhc2UgMzoKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQxLmRlZmF1bHQoJ0RpbWVuc2lvbnMgY291bGQgYmUgbm90IGZvdW5kLicpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBkaW1lbnNpb247CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5Db21wdXRlcyBhbiBhdmVyYWdlIGVzdGltYXRlZCBtb2R1bGUgc2l6ZSBiYXNlZCBvbiBlc3RpbWF0ZWQgZGVyaXZlZCBmcm9tIHRoZSBwb3NpdGlvbnMKCSAgICAgKiBvZiB0aGUgdGhyZWUgZmluZGVyIHBhdHRlcm5zLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB0b3BMZWZ0IGRldGVjdGVkIHRvcC1sZWZ0IGZpbmRlciBwYXR0ZXJuIGNlbnRlcgoJICAgICAqIEBwYXJhbSB0b3BSaWdodCBkZXRlY3RlZCB0b3AtcmlnaHQgZmluZGVyIHBhdHRlcm4gY2VudGVyCgkgICAgICogQHBhcmFtIGJvdHRvbUxlZnQgZGV0ZWN0ZWQgYm90dG9tLWxlZnQgZmluZGVyIHBhdHRlcm4gY2VudGVyCgkgICAgICogQHJldHVybiBlc3RpbWF0ZWQgbW9kdWxlIHNpemUKCSAgICAgKi8KCSAgICBEZXRlY3Rvci5wcm90b3R5cGUuY2FsY3VsYXRlTW9kdWxlU2l6ZSA9IGZ1bmN0aW9uICh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCkgewoJICAgICAgICAvLyBUYWtlIHRoZSBhdmVyYWdlCgkgICAgICAgIHJldHVybiAodGhpcy5jYWxjdWxhdGVNb2R1bGVTaXplT25lV2F5KHRvcExlZnQsIHRvcFJpZ2h0KSArCgkgICAgICAgICAgICB0aGlzLmNhbGN1bGF0ZU1vZHVsZVNpemVPbmVXYXkodG9wTGVmdCwgYm90dG9tTGVmdCkpIC8gMi4wOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+RXN0aW1hdGVzIG1vZHVsZSBzaXplIGJhc2VkIG9uIHR3byBmaW5kZXIgcGF0dGVybnMgLS0gaXQgdXNlcwoJICAgICAqIHtAbGluayAjc2l6ZU9mQmxhY2tXaGl0ZUJsYWNrUnVuQm90aFdheXMoaW50LCBpbnQsIGludCwgaW50KX0gdG8gZmlndXJlIHRoZQoJICAgICAqIHdpZHRoIG9mIGVhY2gsIG1lYXN1cmluZyBhbG9uZyB0aGUgYXhpcyBiZXR3ZWVuIHRoZWlyIGNlbnRlcnMuPC9wPgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5jYWxjdWxhdGVNb2R1bGVTaXplT25lV2F5ID0gZnVuY3Rpb24gKHBhdHRlcm4sIG90aGVyUGF0dGVybikgewoJICAgICAgICB2YXIgbW9kdWxlU2l6ZUVzdDEgPSB0aGlzLnNpemVPZkJsYWNrV2hpdGVCbGFja1J1bkJvdGhXYXlzKC8qKGludCkgKi8gTWF0aC5mbG9vcihwYXR0ZXJuLmdldFgoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3IocGF0dGVybi5nZXRZKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKG90aGVyUGF0dGVybi5nZXRYKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKG90aGVyUGF0dGVybi5nZXRZKCkpKTsKCSAgICAgICAgdmFyIG1vZHVsZVNpemVFc3QyID0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW5Cb3RoV2F5cygvKihpbnQpICovIE1hdGguZmxvb3Iob3RoZXJQYXR0ZXJuLmdldFgoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3Iob3RoZXJQYXR0ZXJuLmdldFkoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3IocGF0dGVybi5nZXRYKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKHBhdHRlcm4uZ2V0WSgpKSk7CgkgICAgICAgIGlmIChpc05hTihtb2R1bGVTaXplRXN0MSkpIHsKCSAgICAgICAgICAgIHJldHVybiBtb2R1bGVTaXplRXN0MiAvIDcuMDsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaXNOYU4obW9kdWxlU2l6ZUVzdDIpKSB7CgkgICAgICAgICAgICByZXR1cm4gbW9kdWxlU2l6ZUVzdDEgLyA3LjA7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQXZlcmFnZSB0aGVtLCBhbmQgZGl2aWRlIGJ5IDcgc2luY2Ugd2UndmUgY291bnRlZCB0aGUgd2lkdGggb2YgMyBibGFjayBtb2R1bGVzLAoJICAgICAgICAvLyBhbmQgMSB3aGl0ZSBhbmQgMSBibGFjayBtb2R1bGUgb24gZWl0aGVyIHNpZGUuIEVyZ28sIGRpdmlkZSBzdW0gYnkgMTQuCgkgICAgICAgIHJldHVybiAobW9kdWxlU2l6ZUVzdDEgKyBtb2R1bGVTaXplRXN0MikgLyAxNC4wOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogU2VlIHtAbGluayAjc2l6ZU9mQmxhY2tXaGl0ZUJsYWNrUnVuKGludCwgaW50LCBpbnQsIGludCl9OyBjb21wdXRlcyB0aGUgdG90YWwgd2lkdGggb2YKCSAgICAgKiBhIGZpbmRlciBwYXR0ZXJuIGJ5IGxvb2tpbmcgZm9yIGEgYmxhY2std2hpdGUtYmxhY2sgcnVuIGZyb20gdGhlIGNlbnRlciBpbiB0aGUgZGlyZWN0aW9uCgkgICAgICogb2YgYW5vdGhlciBwb2ludCAoYW5vdGhlciBmaW5kZXIgcGF0dGVybiBjZW50ZXIpLCBhbmQgaW4gdGhlIG9wcG9zaXRlIGRpcmVjdGlvbiB0b28uCgkgICAgICovCgkgICAgRGV0ZWN0b3IucHJvdG90eXBlLnNpemVPZkJsYWNrV2hpdGVCbGFja1J1bkJvdGhXYXlzID0gZnVuY3Rpb24gKGZyb21YIC8qaW50Ki8sIGZyb21ZIC8qaW50Ki8sIHRvWCAvKmludCovLCB0b1kgLyppbnQqLykgewoJICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4oZnJvbVgsIGZyb21ZLCB0b1gsIHRvWSk7CgkgICAgICAgIC8vIE5vdyBjb3VudCBvdGhlciB3YXkgLS0gZG9uJ3QgcnVuIG9mZiBpbWFnZSB0aG91Z2ggb2YgY291cnNlCgkgICAgICAgIHZhciBzY2FsZSA9IDEuMDsKCSAgICAgICAgdmFyIG90aGVyVG9YID0gZnJvbVggLSAodG9YIC0gZnJvbVgpOwoJICAgICAgICBpZiAob3RoZXJUb1ggPCAwKSB7CgkgICAgICAgICAgICBzY2FsZSA9IGZyb21YIC8gLyooZmxvYXQpICovIChmcm9tWCAtIG90aGVyVG9YKTsKCSAgICAgICAgICAgIG90aGVyVG9YID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChvdGhlclRvWCA+PSB0aGlzLmltYWdlLmdldFdpZHRoKCkpIHsKCSAgICAgICAgICAgIHNjYWxlID0gKHRoaXMuaW1hZ2UuZ2V0V2lkdGgoKSAtIDEgLSBmcm9tWCkgLyAvKihmbG9hdCkgKi8gKG90aGVyVG9YIC0gZnJvbVgpOwoJICAgICAgICAgICAgb3RoZXJUb1ggPSB0aGlzLmltYWdlLmdldFdpZHRoKCkgLSAxOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlclRvWSA9IC8qKGludCkgKi8gTWF0aC5mbG9vcihmcm9tWSAtICh0b1kgLSBmcm9tWSkgKiBzY2FsZSk7CgkgICAgICAgIHNjYWxlID0gMS4wOwoJICAgICAgICBpZiAob3RoZXJUb1kgPCAwKSB7CgkgICAgICAgICAgICBzY2FsZSA9IGZyb21ZIC8gLyooZmxvYXQpICovIChmcm9tWSAtIG90aGVyVG9ZKTsKCSAgICAgICAgICAgIG90aGVyVG9ZID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChvdGhlclRvWSA+PSB0aGlzLmltYWdlLmdldEhlaWdodCgpKSB7CgkgICAgICAgICAgICBzY2FsZSA9ICh0aGlzLmltYWdlLmdldEhlaWdodCgpIC0gMSAtIGZyb21ZKSAvIC8qKGZsb2F0KSAqLyAob3RoZXJUb1kgLSBmcm9tWSk7CgkgICAgICAgICAgICBvdGhlclRvWSA9IHRoaXMuaW1hZ2UuZ2V0SGVpZ2h0KCkgLSAxOwoJICAgICAgICB9CgkgICAgICAgIG90aGVyVG9YID0gLyooaW50KSAqLyBNYXRoLmZsb29yKGZyb21YICsgKG90aGVyVG9YIC0gZnJvbVgpICogc2NhbGUpOwoJICAgICAgICByZXN1bHQgKz0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4oZnJvbVgsIGZyb21ZLCBvdGhlclRvWCwgb3RoZXJUb1kpOwoJICAgICAgICAvLyBNaWRkbGUgcGl4ZWwgaXMgZG91YmxlLWNvdW50ZWQgdGhpcyB3YXk7IHN1YnRyYWN0IDEKCSAgICAgICAgcmV0dXJuIHJlc3VsdCAtIDEuMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlRoaXMgbWV0aG9kIHRyYWNlcyBhIGxpbmUgZnJvbSBhIHBvaW50IGluIHRoZSBpbWFnZSwgaW4gdGhlIGRpcmVjdGlvbiB0b3dhcmRzIGFub3RoZXIgcG9pbnQuCgkgICAgICogSXQgYmVnaW5zIGluIGEgYmxhY2sgcmVnaW9uLCBhbmQga2VlcHMgZ29pbmcgdW50aWwgaXQgZmluZHMgd2hpdGUsIHRoZW4gYmxhY2ssIHRoZW4gd2hpdGUgYWdhaW4uCgkgICAgICogSXQgcmVwb3J0cyB0aGUgZGlzdGFuY2UgZnJvbSB0aGUgc3RhcnQgdG8gdGhpcyBwb2ludC48L3A+CgkgICAgICoKCSAgICAgKiA8cD5UaGlzIGlzIHVzZWQgd2hlbiBmaWd1cmluZyBvdXQgaG93IHdpZGUgYSBmaW5kZXIgcGF0dGVybiBpcywgd2hlbiB0aGUgZmluZGVyIHBhdHRlcm4KCSAgICAgKiBtYXkgYmUgc2tld2VkIG9yIHJvdGF0ZWQuPC9wPgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4gPSBmdW5jdGlvbiAoZnJvbVggLyppbnQqLywgZnJvbVkgLyppbnQqLywgdG9YIC8qaW50Ki8sIHRvWSAvKmludCovKSB7CgkgICAgICAgIC8vIE1pbGQgdmFyaWFudCBvZiBCcmVzZW5oYW0ncyBhbGdvcml0aG0KCSAgICAgICAgLy8gc2VlIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQnJlc2VuaGFtJ3NfbGluZV9hbGdvcml0aG0KCSAgICAgICAgdmFyIHN0ZWVwID0gTWF0aC5hYnModG9ZIC0gZnJvbVkpID4gTWF0aC5hYnModG9YIC0gZnJvbVgpOwoJICAgICAgICBpZiAoc3RlZXApIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gZnJvbVg7CgkgICAgICAgICAgICBmcm9tWCA9IGZyb21ZOwoJICAgICAgICAgICAgZnJvbVkgPSB0ZW1wOwoJICAgICAgICAgICAgdGVtcCA9IHRvWDsKCSAgICAgICAgICAgIHRvWCA9IHRvWTsKCSAgICAgICAgICAgIHRvWSA9IHRlbXA7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGR4ID0gTWF0aC5hYnModG9YIC0gZnJvbVgpOwoJICAgICAgICB2YXIgZHkgPSBNYXRoLmFicyh0b1kgLSBmcm9tWSk7CgkgICAgICAgIHZhciBlcnJvciA9IC1keCAvIDI7CgkgICAgICAgIHZhciB4c3RlcCA9IGZyb21YIDwgdG9YID8gMSA6IC0xOwoJICAgICAgICB2YXIgeXN0ZXAgPSBmcm9tWSA8IHRvWSA/IDEgOiAtMTsKCSAgICAgICAgLy8gSW4gYmxhY2sgcGl4ZWxzLCBsb29raW5nIGZvciB3aGl0ZSwgZmlyc3Qgb3Igc2Vjb25kIHRpbWUuCgkgICAgICAgIHZhciBzdGF0ZSA9IDA7CgkgICAgICAgIC8vIExvb3AgdXAgdW50aWwgeCA9PSB0b1gsIGJ1dCBub3QgYmV5b25kCgkgICAgICAgIHZhciB4TGltaXQgPSB0b1ggKyB4c3RlcDsKCSAgICAgICAgZm9yICh2YXIgeCA9IGZyb21YLCB5ID0gZnJvbVk7IHggIT09IHhMaW1pdDsgeCArPSB4c3RlcCkgewoJICAgICAgICAgICAgdmFyIHJlYWxYID0gc3RlZXAgPyB5IDogeDsKCSAgICAgICAgICAgIHZhciByZWFsWSA9IHN0ZWVwID8geCA6IHk7CgkgICAgICAgICAgICAvLyBEb2VzIGN1cnJlbnQgcGl4ZWwgbWVhbiB3ZSBoYXZlIG1vdmVkIHdoaXRlIHRvIGJsYWNrIG9yIHZpY2UgdmVyc2E/CgkgICAgICAgICAgICAvLyBTY2FubmluZyBibGFjayBpbiBzdGF0ZSAwLDIgYW5kIHdoaXRlIGluIHN0YXRlIDEsIHNvIGlmIHdlIGZpbmQgdGhlIHdyb25nCgkgICAgICAgICAgICAvLyBjb2xvciwgYWR2YW5jZSB0byBuZXh0IHN0YXRlIG9yIGVuZCBpZiB3ZSBhcmUgaW4gc3RhdGUgMiBhbHJlYWR5CgkgICAgICAgICAgICBpZiAoKHN0YXRlID09PSAxKSA9PT0gdGhpcy5pbWFnZS5nZXQocmVhbFgsIHJlYWxZKSkgewoJICAgICAgICAgICAgICAgIGlmIChzdGF0ZSA9PT0gMikgewoJICAgICAgICAgICAgICAgICAgICByZXR1cm4gTWF0aFV0aWxzXzEuZGVmYXVsdC5kaXN0YW5jZSh4LCB5LCBmcm9tWCwgZnJvbVkpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBzdGF0ZSsrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZXJyb3IgKz0gZHk7CgkgICAgICAgICAgICBpZiAoZXJyb3IgPiAwKSB7CgkgICAgICAgICAgICAgICAgaWYgKHkgPT09IHRvWSkgewoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgeSArPSB5c3RlcDsKCSAgICAgICAgICAgICAgICBlcnJvciAtPSBkeDsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICAvLyBGb3VuZCBibGFjay13aGl0ZS1ibGFjazsgZ2l2ZSB0aGUgYmVuZWZpdCBvZiB0aGUgZG91YnQgdGhhdCB0aGUgbmV4dCBwaXhlbCBvdXRzaWRlIHRoZSBpbWFnZQoJICAgICAgICAvLyBpcyAid2hpdGUiIHNvIHRoaXMgbGFzdCBwb2ludCBhdCAodG9YK3hTdGVwLHRvWSkgaXMgdGhlIHJpZ2h0IGVuZGluZy4gVGhpcyBpcyByZWFsbHkgYQoJICAgICAgICAvLyBzbWFsbCBhcHByb3hpbWF0aW9uOyAodG9YK3hTdGVwLHRvWSt5U3RlcCkgbWlnaHQgYmUgcmVhbGx5IGNvcnJlY3QuIElnbm9yZSB0aGlzLgoJICAgICAgICBpZiAoc3RhdGUgPT09IDIpIHsKCSAgICAgICAgICAgIHJldHVybiBNYXRoVXRpbHNfMS5kZWZhdWx0LmRpc3RhbmNlKHRvWCArIHhzdGVwLCB0b1ksIGZyb21YLCBmcm9tWSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gZWxzZSB3ZSBkaWRuJ3QgZmluZCBldmVuIGJsYWNrLXdoaXRlLWJsYWNrOyBubyBlc3RpbWF0ZSBpcyByZWFsbHkgcG9zc2libGUKCSAgICAgICAgcmV0dXJuIE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkF0dGVtcHRzIHRvIGxvY2F0ZSBhbiBhbGlnbm1lbnQgcGF0dGVybiBpbiBhIGxpbWl0ZWQgcmVnaW9uIG9mIHRoZSBpbWFnZSwgd2hpY2ggaXMKCSAgICAgKiBndWVzc2VkIHRvIGNvbnRhaW4gaXQuIFRoaXMgbWV0aG9kIHVzZXMge0BsaW5rIEFsaWdubWVudFBhdHRlcm59LjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBvdmVyYWxsRXN0TW9kdWxlU2l6ZSBlc3RpbWF0ZWQgbW9kdWxlIHNpemUgc28gZmFyCgkgICAgICogQHBhcmFtIGVzdEFsaWdubWVudFggeCBjb29yZGluYXRlIG9mIGNlbnRlciBvZiBhcmVhIHByb2JhYmx5IGNvbnRhaW5pbmcgYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gZXN0QWxpZ25tZW50WSB5IGNvb3JkaW5hdGUgb2YgYWJvdmUKCSAgICAgKiBAcGFyYW0gYWxsb3dhbmNlRmFjdG9yIG51bWJlciBvZiBwaXhlbHMgaW4gYWxsIGRpcmVjdGlvbnMgdG8gc2VhcmNoIGZyb20gdGhlIGNlbnRlcgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEFsaWdubWVudFBhdHRlcm59IGlmIGZvdW5kLCBvciBudWxsIG90aGVyd2lzZQoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgYW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnMgZHVyaW5nIGRldGVjdGlvbgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5maW5kQWxpZ25tZW50SW5SZWdpb24gPSBmdW5jdGlvbiAob3ZlcmFsbEVzdE1vZHVsZVNpemUgLypmbG9hdCovLCBlc3RBbGlnbm1lbnRYIC8qaW50Ki8sIGVzdEFsaWdubWVudFkgLyppbnQqLywgYWxsb3dhbmNlRmFjdG9yIC8qZmxvYXQqLykgewoJICAgICAgICAvLyBMb29rIGZvciBhbiBhbGlnbm1lbnQgcGF0dGVybiAoMyBtb2R1bGVzIGluIHNpemUpIGFyb3VuZCB3aGVyZSBpdAoJICAgICAgICAvLyBzaG91bGQgYmUKCSAgICAgICAgdmFyIGFsbG93YW5jZSA9IC8qKGludCkgKi8gTWF0aC5mbG9vcihhbGxvd2FuY2VGYWN0b3IgKiBvdmVyYWxsRXN0TW9kdWxlU2l6ZSk7CgkgICAgICAgIHZhciBhbGlnbm1lbnRBcmVhTGVmdFggPSBNYXRoLm1heCgwLCBlc3RBbGlnbm1lbnRYIC0gYWxsb3dhbmNlKTsKCSAgICAgICAgdmFyIGFsaWdubWVudEFyZWFSaWdodFggPSBNYXRoLm1pbih0aGlzLmltYWdlLmdldFdpZHRoKCkgLSAxLCBlc3RBbGlnbm1lbnRYICsgYWxsb3dhbmNlKTsKCSAgICAgICAgaWYgKGFsaWdubWVudEFyZWFSaWdodFggLSBhbGlnbm1lbnRBcmVhTGVmdFggPCBvdmVyYWxsRXN0TW9kdWxlU2l6ZSAqIDMpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgnQWxpZ25tZW50IHRvcCBleGNlZWRzIGVzdGltYXRlZCBtb2R1bGUgc2l6ZS4nKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYWxpZ25tZW50QXJlYVRvcFkgPSBNYXRoLm1heCgwLCBlc3RBbGlnbm1lbnRZIC0gYWxsb3dhbmNlKTsKCSAgICAgICAgdmFyIGFsaWdubWVudEFyZWFCb3R0b21ZID0gTWF0aC5taW4odGhpcy5pbWFnZS5nZXRIZWlnaHQoKSAtIDEsIGVzdEFsaWdubWVudFkgKyBhbGxvd2FuY2UpOwoJICAgICAgICBpZiAoYWxpZ25tZW50QXJlYUJvdHRvbVkgLSBhbGlnbm1lbnRBcmVhVG9wWSA8IG92ZXJhbGxFc3RNb2R1bGVTaXplICogMykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkMS5kZWZhdWx0KCdBbGlnbm1lbnQgYm90dG9tIGV4Y2VlZHMgZXN0aW1hdGVkIG1vZHVsZSBzaXplLicpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBhbGlnbm1lbnRGaW5kZXIgPSBuZXcgQWxpZ25tZW50UGF0dGVybkZpbmRlcl8xLmRlZmF1bHQodGhpcy5pbWFnZSwgYWxpZ25tZW50QXJlYUxlZnRYLCBhbGlnbm1lbnRBcmVhVG9wWSwgYWxpZ25tZW50QXJlYVJpZ2h0WCAtIGFsaWdubWVudEFyZWFMZWZ0WCwgYWxpZ25tZW50QXJlYUJvdHRvbVkgLSBhbGlnbm1lbnRBcmVhVG9wWSwgb3ZlcmFsbEVzdE1vZHVsZVNpemUsIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayk7CgkgICAgICAgIHJldHVybiBhbGlnbm1lbnRGaW5kZXIuZmluZCgpOwoJICAgIH07CgkgICAgcmV0dXJuIERldGVjdG9yOwoJfSgpKTsKCURldGVjdG9yJDEuZGVmYXVsdCA9IERldGVjdG9yOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoUVJDb2RlUmVhZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcucXJjb2RlIHsqLwoJdmFyIEJhcmNvZGVGb3JtYXRfMSA9IEJhcmNvZGVGb3JtYXQkMTsKCXZhciBCaXRNYXRyaXhfMSA9IEJpdE1hdHJpeCQxOwoJdmFyIERlY29kZUhpbnRUeXBlXzEgPSBEZWNvZGVIaW50VHlwZSQxOwoJdmFyIE5vdEZvdW5kRXhjZXB0aW9uXzEgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJdmFyIFJlc3VsdF8xID0gUmVzdWx0JDE7Cgl2YXIgUmVzdWx0TWV0YWRhdGFUeXBlXzEgPSBSZXN1bHRNZXRhZGF0YVR5cGUkMTsKCS8vIGltcG9ydCBEZXRlY3RvclJlc3VsdCBmcm9tICcuLi9jb21tb24vRGV0ZWN0b3JSZXN1bHQnOwoJdmFyIERlY29kZXJfMSA9IERlY29kZXIkMTsKCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSA9IFFSQ29kZURlY29kZXJNZXRhRGF0YSQxOwoJdmFyIERldGVjdG9yXzEgPSBEZXRlY3RvciQxOwoJLyppbXBvcnQgamF2YS51dGlsLkxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5NYXA7Ki8KCS8qKgoJICogVGhpcyBpbXBsZW1lbnRhdGlvbiBjYW4gZGV0ZWN0IGFuZCBkZWNvZGUgUVIgQ29kZXMgaW4gYW4gaW1hZ2UuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFFSQ29kZVJlYWRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBRUkNvZGVSZWFkZXIoKSB7CgkgICAgICAgIHRoaXMuZGVjb2RlciA9IG5ldyBEZWNvZGVyXzEuZGVmYXVsdCgpOwoJICAgIH0KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLmdldERlY29kZXIgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlY29kZXI7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBMb2NhdGVzIGFuZCBkZWNvZGVzIGEgUVIgY29kZSBpbiBhbiBpbWFnZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gYSByZXByZXNlbnRpbmc6IHN0cmluZyB0aGUgY29udGVudCBlbmNvZGVkIGJ5IHRoZSBRUiBjb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBhIFFSIGNvZGUgY2Fubm90IGJlIGZvdW5kCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgYSBRUiBjb2RlIGNhbm5vdCBiZSBkZWNvZGVkCgkgICAgICogQHRocm93cyBDaGVja3N1bUV4Y2VwdGlvbiBpZiBlcnJvciBjb3JyZWN0aW9uIGZhaWxzCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIC8vIHB1YmxpYyBkZWNvZGUoaW1hZ2U6IEJpbmFyeUJpdG1hcCk6IFJlc3VsdCAvKnRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiwgQ2hlY2tzdW1FeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiAqLyB7CgkgICAgLy8gICByZXR1cm4gdGhpcy5kZWNvZGUoaW1hZ2UsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLmRlY29kZSA9IGZ1bmN0aW9uIChpbWFnZSwgaGludHMpIHsKCSAgICAgICAgdmFyIGRlY29kZXJSZXN1bHQ7CgkgICAgICAgIHZhciBwb2ludHM7CgkgICAgICAgIGlmIChoaW50cyAhPT0gdW5kZWZpbmVkICYmIGhpbnRzICE9PSBudWxsICYmIHVuZGVmaW5lZCAhPT0gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEuZGVmYXVsdC5QVVJFX0JBUkNPREUpKSB7CgkgICAgICAgICAgICB2YXIgYml0cyA9IFFSQ29kZVJlYWRlci5leHRyYWN0UHVyZUJpdHMoaW1hZ2UuZ2V0QmxhY2tNYXRyaXgoKSk7CgkgICAgICAgICAgICBkZWNvZGVyUmVzdWx0ID0gdGhpcy5kZWNvZGVyLmRlY29kZUJpdE1hdHJpeChiaXRzLCBoaW50cyk7CgkgICAgICAgICAgICBwb2ludHMgPSBRUkNvZGVSZWFkZXIuTk9fUE9JTlRTOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdmFyIGRldGVjdG9yUmVzdWx0ID0gbmV3IERldGVjdG9yXzEuZGVmYXVsdChpbWFnZS5nZXRCbGFja01hdHJpeCgpKS5kZXRlY3QoaGludHMpOwoJICAgICAgICAgICAgZGVjb2RlclJlc3VsdCA9IHRoaXMuZGVjb2Rlci5kZWNvZGVCaXRNYXRyaXgoZGV0ZWN0b3JSZXN1bHQuZ2V0Qml0cygpLCBoaW50cyk7CgkgICAgICAgICAgICBwb2ludHMgPSBkZXRlY3RvclJlc3VsdC5nZXRQb2ludHMoKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBJZiB0aGUgY29kZSB3YXMgbWlycm9yZWQ6IHN3YXAgdGhlIGJvdHRvbS1sZWZ0IGFuZCB0aGUgdG9wLXJpZ2h0IHBvaW50cy4KCSAgICAgICAgaWYgKGRlY29kZXJSZXN1bHQuZ2V0T3RoZXIoKSBpbnN0YW5jZW9mIFFSQ29kZURlY29kZXJNZXRhRGF0YV8xLmRlZmF1bHQpIHsKCSAgICAgICAgICAgIGRlY29kZXJSZXN1bHQuZ2V0T3RoZXIoKS5hcHBseU1pcnJvcmVkQ29ycmVjdGlvbihwb2ludHMpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSBuZXcgUmVzdWx0XzEuZGVmYXVsdChkZWNvZGVyUmVzdWx0LmdldFRleHQoKSwgZGVjb2RlclJlc3VsdC5nZXRSYXdCeXRlcygpLCB1bmRlZmluZWQsIHBvaW50cywgQmFyY29kZUZvcm1hdF8xLmRlZmF1bHQuUVJfQ09ERSwgdW5kZWZpbmVkKTsKCSAgICAgICAgdmFyIGJ5dGVTZWdtZW50cyA9IGRlY29kZXJSZXN1bHQuZ2V0Qnl0ZVNlZ21lbnRzKCk7CgkgICAgICAgIGlmIChieXRlU2VnbWVudHMgIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJlc3VsdC5wdXRNZXRhZGF0YShSZXN1bHRNZXRhZGF0YVR5cGVfMS5kZWZhdWx0LkJZVEVfU0VHTUVOVFMsIGJ5dGVTZWdtZW50cyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGVjTGV2ZWwgPSBkZWNvZGVyUmVzdWx0LmdldEVDTGV2ZWwoKTsKCSAgICAgICAgaWYgKGVjTGV2ZWwgIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJlc3VsdC5wdXRNZXRhZGF0YShSZXN1bHRNZXRhZGF0YVR5cGVfMS5kZWZhdWx0LkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwsIGVjTGV2ZWwpOwoJICAgICAgICB9CgkgICAgICAgIGlmIChkZWNvZGVyUmVzdWx0Lmhhc1N0cnVjdHVyZWRBcHBlbmQoKSkgewoJICAgICAgICAgICAgcmVzdWx0LnB1dE1ldGFkYXRhKFJlc3VsdE1ldGFkYXRhVHlwZV8xLmRlZmF1bHQuU1RSVUNUVVJFRF9BUFBFTkRfU0VRVUVOQ0UsIGRlY29kZXJSZXN1bHQuZ2V0U3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyKCkpOwoJICAgICAgICAgICAgcmVzdWx0LnB1dE1ldGFkYXRhKFJlc3VsdE1ldGFkYXRhVHlwZV8xLmRlZmF1bHQuU1RSVUNUVVJFRF9BUFBFTkRfUEFSSVRZLCBkZWNvZGVyUmVzdWx0LmdldFN0cnVjdHVyZWRBcHBlbmRQYXJpdHkoKSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBkbyBub3RoaW5nCgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBUaGlzIG1ldGhvZCBkZXRlY3RzIGEgY29kZSBpbiBhICJwdXJlIiBpbWFnZSAtLSB0aGF0IGlzLCBwdXJlIG1vbm9jaHJvbWUgaW1hZ2UKCSAgICAgKiB3aGljaCBjb250YWlucyBvbmx5IGFuIHVucm90YXRlZCwgdW5za2V3ZWQsIGltYWdlIG9mIGEgY29kZSwgd2l0aCBzb21lIHdoaXRlIGJvcmRlcgoJICAgICAqIGFyb3VuZCBpdC4gVGhpcyBpcyBhIHNwZWNpYWxpemVkIG1ldGhvZCB0aGF0IHdvcmtzIGV4Y2VwdGlvbmFsbHkgZmFzdCBpbiB0aGlzIHNwZWNpYWwKCSAgICAgKiBjYXNlLgoJICAgICAqCgkgICAgICogQHNlZSBjb20uZ29vZ2xlLnp4aW5nLmRhdGFtYXRyaXguRGF0YU1hdHJpeFJlYWRlciNleHRyYWN0UHVyZUJpdHMoQml0TWF0cml4KQoJICAgICAqLwoJICAgIFFSQ29kZVJlYWRlci5leHRyYWN0UHVyZUJpdHMgPSBmdW5jdGlvbiAoaW1hZ2UpIHsKCSAgICAgICAgdmFyIGxlZnRUb3BCbGFjayA9IGltYWdlLmdldFRvcExlZnRPbkJpdCgpOwoJICAgICAgICB2YXIgcmlnaHRCb3R0b21CbGFjayA9IGltYWdlLmdldEJvdHRvbVJpZ2h0T25CaXQoKTsKCSAgICAgICAgaWYgKGxlZnRUb3BCbGFjayA9PT0gbnVsbCB8fCByaWdodEJvdHRvbUJsYWNrID09PSBudWxsKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG1vZHVsZVNpemUgPSB0aGlzLm1vZHVsZVNpemUobGVmdFRvcEJsYWNrLCBpbWFnZSk7CgkgICAgICAgIHZhciB0b3AgPSBsZWZ0VG9wQmxhY2tbMV07CgkgICAgICAgIHZhciBib3R0b20gPSByaWdodEJvdHRvbUJsYWNrWzFdOwoJICAgICAgICB2YXIgbGVmdCA9IGxlZnRUb3BCbGFja1swXTsKCSAgICAgICAgdmFyIHJpZ2h0ID0gcmlnaHRCb3R0b21CbGFja1swXTsKCSAgICAgICAgLy8gU2FuaXR5IGNoZWNrIQoJICAgICAgICBpZiAobGVmdCA+PSByaWdodCB8fCB0b3AgPj0gYm90dG9tKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGJvdHRvbSAtIHRvcCAhPT0gcmlnaHQgLSBsZWZ0KSB7CgkgICAgICAgICAgICAvLyBTcGVjaWFsIGNhc2UsIHdoZXJlIGJvdHRvbS1yaWdodCBtb2R1bGUgd2Fzbid0IGJsYWNrIHNvIHdlIGZvdW5kIHNvbWV0aGluZyBlbHNlIGluIHRoZSBsYXN0IHJvdwoJICAgICAgICAgICAgLy8gQXNzdW1lIGl0J3MgYSBzcXVhcmUsIHNvIHVzZSBoZWlnaHQgYXMgdGhlIHdpZHRoCgkgICAgICAgICAgICByaWdodCA9IGxlZnQgKyAoYm90dG9tIC0gdG9wKTsKCSAgICAgICAgICAgIGlmIChyaWdodCA+PSBpbWFnZS5nZXRXaWR0aCgpKSB7CgkgICAgICAgICAgICAgICAgLy8gQWJvcnQgaWYgdGhhdCB3b3VsZCBub3QgbWFrZSBzZW5zZSAtLSBvZmYgaW1hZ2UKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG1hdHJpeFdpZHRoID0gTWF0aC5yb3VuZCgocmlnaHQgLSBsZWZ0ICsgMSkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIG1hdHJpeEhlaWdodCA9IE1hdGgucm91bmQoKGJvdHRvbSAtIHRvcCArIDEpIC8gbW9kdWxlU2l6ZSk7CgkgICAgICAgIGlmIChtYXRyaXhXaWR0aCA8PSAwIHx8IG1hdHJpeEhlaWdodCA8PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKG1hdHJpeEhlaWdodCAhPT0gbWF0cml4V2lkdGgpIHsKCSAgICAgICAgICAgIC8vIE9ubHkgcG9zc2libHkgZGVjb2RlIHNxdWFyZSByZWdpb25zCgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gUHVzaCBpbiB0aGUgImJvcmRlciIgYnkgaGFsZiB0aGUgbW9kdWxlIHdpZHRoIHNvIHRoYXQgd2Ugc3RhcnQKCSAgICAgICAgLy8gc2FtcGxpbmcgaW4gdGhlIG1pZGRsZSBvZiB0aGUgbW9kdWxlLiBKdXN0IGluIGNhc2UgdGhlIGltYWdlIGlzIGEKCSAgICAgICAgLy8gbGl0dGxlIG9mZiwgdGhpcyB3aWxsIGhlbHAgcmVjb3Zlci4KCSAgICAgICAgdmFyIG51ZGdlID0gLyooaW50KSAqLyBNYXRoLmZsb29yKG1vZHVsZVNpemUgLyAyLjApOwoJICAgICAgICB0b3AgKz0gbnVkZ2U7CgkgICAgICAgIGxlZnQgKz0gbnVkZ2U7CgkgICAgICAgIC8vIEJ1dCBjYXJlZnVsIHRoYXQgdGhpcyBkb2VzIG5vdCBzYW1wbGUgb2ZmIHRoZSBlZGdlCgkgICAgICAgIC8vICJyaWdodCIgaXMgdGhlIGZhcnRoZXN0LXJpZ2h0IHZhbGlkIHBpeGVsIGxvY2F0aW9uIC0tIHJpZ2h0KzEgaXMgbm90IG5lY2Vzc2FyaWx5CgkgICAgICAgIC8vIFRoaXMgaXMgcG9zaXRpdmUgYnkgaG93IG11Y2ggdGhlIGlubmVyIHggbG9vcCBiZWxvdyB3b3VsZCBiZSB0b28gbGFyZ2UKCSAgICAgICAgdmFyIG51ZGdlZFRvb0ZhclJpZ2h0ID0gbGVmdCArIC8qKGludCkgKi8gTWF0aC5mbG9vcigobWF0cml4V2lkdGggLSAxKSAqIG1vZHVsZVNpemUpIC0gcmlnaHQ7CgkgICAgICAgIGlmIChudWRnZWRUb29GYXJSaWdodCA+IDApIHsKCSAgICAgICAgICAgIGlmIChudWRnZWRUb29GYXJSaWdodCA+IG51ZGdlKSB7CgkgICAgICAgICAgICAgICAgLy8gTmVpdGhlciB3YXkgZml0czsgYWJvcnQKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBsZWZ0IC09IG51ZGdlZFRvb0ZhclJpZ2h0OwoJICAgICAgICB9CgkgICAgICAgIC8vIFNlZSBsb2dpYyBhYm92ZQoJICAgICAgICB2YXIgbnVkZ2VkVG9vRmFyRG93biA9IHRvcCArIC8qKGludCkgKi8gTWF0aC5mbG9vcigobWF0cml4SGVpZ2h0IC0gMSkgKiBtb2R1bGVTaXplKSAtIGJvdHRvbTsKCSAgICAgICAgaWYgKG51ZGdlZFRvb0ZhckRvd24gPiAwKSB7CgkgICAgICAgICAgICBpZiAobnVkZ2VkVG9vRmFyRG93biA+IG51ZGdlKSB7CgkgICAgICAgICAgICAgICAgLy8gTmVpdGhlciB3YXkgZml0czsgYWJvcnQKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0b3AgLT0gbnVkZ2VkVG9vRmFyRG93bjsKCSAgICAgICAgfQoJICAgICAgICAvLyBOb3cganVzdCByZWFkIG9mZiB0aGUgYml0cwoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRNYXRyaXhfMS5kZWZhdWx0KG1hdHJpeFdpZHRoLCBtYXRyaXhIZWlnaHQpOwoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IG1hdHJpeEhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgaU9mZnNldCA9IHRvcCArIC8qKGludCkgKi8gTWF0aC5mbG9vcih5ICogbW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG1hdHJpeFdpZHRoOyB4KyspIHsKCSAgICAgICAgICAgICAgICBpZiAoaW1hZ2UuZ2V0KGxlZnQgKyAvKihpbnQpICovIE1hdGguZmxvb3IoeCAqIG1vZHVsZVNpemUpLCBpT2Zmc2V0KSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLnNldCh4LCB5KTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICBRUkNvZGVSZWFkZXIubW9kdWxlU2l6ZSA9IGZ1bmN0aW9uIChsZWZ0VG9wQmxhY2ssIGltYWdlKSB7CgkgICAgICAgIHZhciBoZWlnaHQgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHdpZHRoID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIHggPSBsZWZ0VG9wQmxhY2tbMF07CgkgICAgICAgIHZhciB5ID0gbGVmdFRvcEJsYWNrWzFdOwoJICAgICAgICB2YXIgaW5CbGFjayA9IHRydWU7CgkgICAgICAgIHZhciB0cmFuc2l0aW9ucyA9IDA7CgkgICAgICAgIHdoaWxlICh4IDwgd2lkdGggJiYgeSA8IGhlaWdodCkgewoJICAgICAgICAgICAgaWYgKGluQmxhY2sgIT09IGltYWdlLmdldCh4LCB5KSkgewoJICAgICAgICAgICAgICAgIGlmICgrK3RyYW5zaXRpb25zID09PSA1KSB7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBpbkJsYWNrID0gIWluQmxhY2s7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB4Kys7CgkgICAgICAgICAgICB5Kys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHggPT09IHdpZHRoIHx8IHkgPT09IGhlaWdodCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiAoeCAtIGxlZnRUb3BCbGFja1swXSkgLyA3LjA7CgkgICAgfTsKCSAgICBRUkNvZGVSZWFkZXIuTk9fUE9JTlRTID0gbmV3IEFycmF5KCk7CgkgICAgcmV0dXJuIFFSQ29kZVJlYWRlcjsKCX0oKSk7Cgl2YXIgX2RlZmF1bHQgPSBRUkNvZGVSZWFkZXIkMS5kZWZhdWx0ID0gUVJDb2RlUmVhZGVyOwoKCXZhciB0b0dyYXlzY2FsZUJ1ZmZlciA9IGZ1bmN0aW9uIHRvR3JheXNjYWxlQnVmZmVyKGltYWdlQnVmZmVyLCB3aWR0aCwgaGVpZ2h0KSB7CgkgIHZhciBncmF5c2NhbGVCdWZmZXIgPSBuZXcgVWludDhDbGFtcGVkQXJyYXkod2lkdGggKiBoZWlnaHQpOwoKCSAgZm9yICh2YXIgaSA9IDAsIGogPSAwLCBsZW5ndGhfMSA9IGltYWdlQnVmZmVyLmxlbmd0aDsgaSA8IGxlbmd0aF8xOyBpICs9IDQsIGorKykgewoJICAgIHZhciBncmF5ID0gdm9pZCAwOwoJICAgIHZhciBhbHBoYSA9IGltYWdlQnVmZmVyW2kgKyAzXTsgLy8gVGhlIGNvbG9yIG9mIGZ1bGx5LXRyYW5zcGFyZW50IHBpeGVscyBpcyBpcnJlbGV2YW50LiBUaGV5IGFyZSBvZnRlbiwgdGVjaG5pY2FsbHksIGZ1bGx5LXRyYW5zcGFyZW50CgkgICAgLy8gYmxhY2sgKDAgYWxwaGEsIGFuZCB0aGVuIDAgUkdCKS4gVGhleSBhcmUgb2Z0ZW4gdXNlZCwgb2YgY291cnNlIGFzIHRoZSAid2hpdGUiIGFyZWEgaW4gYQoJICAgIC8vIGJhcmNvZGUgaW1hZ2UuIEZvcmNlIGFueSBzdWNoIHBpeGVsIHRvIGJlIHdoaXRlOgoKCSAgICBpZiAoYWxwaGEgPT09IDApIHsKCSAgICAgIGdyYXkgPSAweEZGOwoJICAgIH0gZWxzZSB7CgkgICAgICB2YXIgcGl4ZWxSID0gaW1hZ2VCdWZmZXJbaV07CgkgICAgICB2YXIgcGl4ZWxHID0gaW1hZ2VCdWZmZXJbaSArIDFdOwoJICAgICAgdmFyIHBpeGVsQiA9IGltYWdlQnVmZmVyW2kgKyAyXTsgLy8gLjI5OVIgKyAwLjU4N0cgKyAwLjExNEIgKFlVVi9ZSVEgZm9yIFBBTCBhbmQgTlRTQyksCgkgICAgICAvLyAoMzA2KlIpID4+IDEwIGlzIGFwcHJveGltYXRlbHkgZXF1YWwgdG8gUiowLjI5OSwgYW5kIHNvIG9uLgoJICAgICAgLy8gMHgyMDAgPj4gMTAgaXMgMC41LCBpdCBpbXBsZW1lbnRzIHJvdW5kaW5nLgoKCSAgICAgIGdyYXkgPSAzMDYgKiBwaXhlbFIgKyA2MDEgKiBwaXhlbEcgKyAxMTcgKiBwaXhlbEIgKyAweDIwMCA+PiAxMDsKCSAgICB9CgoJICAgIGdyYXlzY2FsZUJ1ZmZlcltqXSA9IGdyYXk7CgkgIH0KCgkgIHJldHVybiBncmF5c2NhbGVCdWZmZXI7Cgl9OwoKCXZhciByZWFkZXIgPSBuZXcgX2RlZmF1bHQoKTsKCXNlbGYuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGZ1bmN0aW9uIChlKSB7CgkgIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzCgkgIHRyeSB7CgkgICAgdmFyIGx1bWluYW5jZXMgPSB0b0dyYXlzY2FsZUJ1ZmZlcihlLmRhdGEuZGF0YSwgZS5kYXRhLndpZHRoLCBlLmRhdGEuaGVpZ2h0KTsKCSAgICB2YXIgbHVtaW5hbmNlU291cmNlID0gbmV3IF9kZWZhdWx0JDEobHVtaW5hbmNlcywgZS5kYXRhLndpZHRoLCBlLmRhdGEuaGVpZ2h0KTsKCSAgICB2YXIgaHlicmlkQmluYXJpemVyID0gbmV3IF9kZWZhdWx0JDIobHVtaW5hbmNlU291cmNlKTsKCSAgICB2YXIgYmluYXJ5Qml0bWFwID0gbmV3IF9kZWZhdWx0JDMoaHlicmlkQmluYXJpemVyKTsKCSAgICB2YXIgZGVjb2RlZCA9IHJlYWRlci5kZWNvZGUoYmluYXJ5Qml0bWFwKTsKCSAgICBwb3N0TWVzc2FnZShkZWNvZGVkKTsKCSAgfSBjYXRjaCAoZXJyKSB7CgkgICAgcG9zdE1lc3NhZ2UobnVsbCk7CgkgIH0KCX0pOwoKfSkoKTsKCg==",null,!1),O=["constraints","onError","onLoad","onScan","resolution","qrArea"];function P(e,g){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);g&&(n=n.filter((function(g){return Object.getOwnPropertyDescriptor(e,g).enumerable}))),t.push.apply(t,n)}return t}function _(e){for(var g=1;g<arguments.length;g++){var t=null!=arguments[g]?arguments[g]:{};g%2?P(Object(t),!0).forEach((function(g){I(e,g,t[g])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):P(Object(t)).forEach((function(g){Object.defineProperty(e,g,Object.getOwnPropertyDescriptor(t,g))}))}return e}var q=function(){return new j},$=function(e){e&&(e.getVideoTracks&&e.getAudioTracks?(e.getVideoTracks().forEach((function(g){e.removeTrack(g),g.stop()})),e.getAudioTracks().forEach((function(g){e.removeTrack(g),g.stop()}))):e.stop())},ee=function(e){var g=e.constraints,I=e.onError,C=e.onLoad,l=e.onScan,a=e.resolution,o=e.qrArea,r=s(e,O),i=t.useRef(null),A=t.useRef(null),d=t.useRef(document.createElement("canvas")),u=t.useRef(null),m=t.useRef(),b=c(t.useState(null),2),Z=b[0],h=b[1],p=t.useRef(!1),G=t.useRef();t.useEffect((function(){G.current=q();var e=G.current;return e.onmessage=function(e){l&&l(e.data?_(_({},e.data),{},{canvas:d.current}):null),p.current=!1},function(){e.terminate()}}),[l]);var y=JSON.stringify(o),B=t.useCallback((function(){var e=JSON.parse(y),g=G.current,t=A.current&&A.current.readyState===A.current.HAVE_ENOUGH_DATA;if(!p.current&&t){p.current=!0;var n,I=A.current.videoWidth,C=A.current.videoHeight,l=I>C?I:C,o=Math.floor(a/l*100)/100;C=Math.floor(o*C),I=Math.floor(o*I),d.current.width=I,d.current.height=C,u.current=d.current.getContext("2d"),u.current.drawImage(A.current,0,0,I,C),n=e&&2===e.length&&e[0]>0&&e[1]>0?u.current.getImageData(Math.floor((I-e[0])/2),Math.floor((C-e[1])/2),e[0],e[1]):u.current.getImageData(0,0,I,C),g.postMessage(n)}m.current=requestAnimationFrame(B)}),[a,y]),f=JSON.stringify(g);return t.useEffect((function(){var e=JSON.parse(f),g=!0;return navigator.mediaDevices.getUserMedia(e).then((function(e){if(g){i.current=e;try{A.current&&(A.current.srcObject=e,A.current.setAttribute("playsinline",!0))}catch(t){h(window.URL.createObjectURL(e))}C&&C(),m.current=requestAnimationFrame(B)}else $(e)})).catch((function(e){return g?I(e):null})),function(){cancelAnimationFrame(m.current),g=!1,$(i.current),Z&&window.URL.revokeObjectURL(Z)}}),[B,f,I,C,Z]),t.createElement("video",n({autoPlay:!0,playsInline:!0,src:Z,ref:A},r))};return ee.propTypes={constraints:D.object,onError:D.func.isRequired,onLoad:D.func,onScan:D.func.isRequired,resolution:D.number,qrArea:D.array},ee.defaultProps={constraints:{audio:!1,video:!0},resolution:640,qrArea:[]},ee}(t(791))},374:function(e,g,t){"use strict";var n=t(791),I=Symbol.for("react.element"),C=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,a=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function r(e,g,t){var n,C={},r=null,c=null;for(n in void 0!==t&&(r=""+t),void 0!==g.key&&(r=""+g.key),void 0!==g.ref&&(c=g.ref),g)l.call(g,n)&&!o.hasOwnProperty(n)&&(C[n]=g[n]);if(e&&e.defaultProps)for(n in g=e.defaultProps)void 0===C[n]&&(C[n]=g[n]);return{$$typeof:I,type:e,key:r,ref:c,props:C,_owner:a.current}}g.Fragment=C,g.jsx=r,g.jsxs=r},117:function(e,g){"use strict";var t=Symbol.for("react.element"),n=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),o=Symbol.for("react.context"),r=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),i=Symbol.for("react.memo"),s=Symbol.for("react.lazy"),A=Symbol.iterator;var d={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},u=Object.assign,m={};function b(e,g,t){this.props=e,this.context=g,this.refs=m,this.updater=t||d}function Z(){}function h(e,g,t){this.props=e,this.context=g,this.refs=m,this.updater=t||d}b.prototype.isReactComponent={},b.prototype.setState=function(e,g){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,g,"setState")},b.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},Z.prototype=b.prototype;var p=h.prototype=new Z;p.constructor=h,u(p,b.prototype),p.isPureReactComponent=!0;var G=Array.isArray,y=Object.prototype.hasOwnProperty,B={current:null},f={key:!0,ref:!0,__self:!0,__source:!0};function S(e,g,n){var I,C={},l=null,a=null;if(null!=g)for(I in void 0!==g.ref&&(a=g.ref),void 0!==g.key&&(l=""+g.key),g)y.call(g,I)&&!f.hasOwnProperty(I)&&(C[I]=g[I]);var o=arguments.length-2;if(1===o)C.children=n;else if(1<o){for(var r=Array(o),c=0;c<o;c++)r[c]=arguments[c+2];C.children=r}if(e&&e.defaultProps)for(I in o=e.defaultProps)void 0===C[I]&&(C[I]=o[I]);return{$$typeof:t,type:e,key:l,ref:a,props:C,_owner:B.current}}function v(e){return"object"===typeof e&&null!==e&&e.$$typeof===t}var W=/\/+/g;function V(e,g){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var g={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return g[e]}))}(""+e.key):g.toString(36)}function R(e,g,I,C,l){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var o=!1;if(null===e)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case t:case n:o=!0}}if(o)return l=l(o=e),e=""===C?"."+V(o,0):C,G(l)?(I="",null!=e&&(I=e.replace(W,"$&/")+"/"),R(l,g,I,"",(function(e){return e}))):null!=l&&(v(l)&&(l=function(e,g){return{$$typeof:t,type:e.type,key:g,ref:e.ref,props:e.props,_owner:e._owner}}(l,I+(!l.key||o&&o.key===l.key?"":(""+l.key).replace(W,"$&/")+"/")+e)),g.push(l)),1;if(o=0,C=""===C?".":C+":",G(e))for(var r=0;r<e.length;r++){var c=C+V(a=e[r],r);o+=R(a,g,I,c,l)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=A&&e[A]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),r=0;!(a=e.next()).done;)o+=R(a=a.value,g,I,c=C+V(a,r++),l);else if("object"===a)throw g=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===g?"object with keys {"+Object.keys(e).join(", ")+"}":g)+"). If you meant to render a collection of children, use an array instead.");return o}function k(e,g,t){if(null==e)return e;var n=[],I=0;return R(e,n,"","",(function(e){return g.call(t,e,I++)})),n}function X(e){if(-1===e._status){var g=e._result;(g=g()).then((function(g){0!==e._status&&-1!==e._status||(e._status=1,e._result=g)}),(function(g){0!==e._status&&-1!==e._status||(e._status=2,e._result=g)})),-1===e._status&&(e._status=0,e._result=g)}if(1===e._status)return e._result.default;throw e._result}var J={current:null},Y={transition:null},H={ReactCurrentDispatcher:J,ReactCurrentBatchConfig:Y,ReactCurrentOwner:B};g.Children={map:k,forEach:function(e,g,t){k(e,(function(){g.apply(this,arguments)}),t)},count:function(e){var g=0;return k(e,(function(){g++})),g},toArray:function(e){return k(e,(function(e){return e}))||[]},only:function(e){if(!v(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},g.Component=b,g.Fragment=I,g.Profiler=l,g.PureComponent=h,g.StrictMode=C,g.Suspense=c,g.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=H,g.cloneElement=function(e,g,n){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var I=u({},e.props),C=e.key,l=e.ref,a=e._owner;if(null!=g){if(void 0!==g.ref&&(l=g.ref,a=B.current),void 0!==g.key&&(C=""+g.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(r in g)y.call(g,r)&&!f.hasOwnProperty(r)&&(I[r]=void 0===g[r]&&void 0!==o?o[r]:g[r])}var r=arguments.length-2;if(1===r)I.children=n;else if(1<r){o=Array(r);for(var c=0;c<r;c++)o[c]=arguments[c+2];I.children=o}return{$$typeof:t,type:e.type,key:C,ref:l,props:I,_owner:a}},g.createContext=function(e){return(e={$$typeof:o,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},g.createElement=S,g.createFactory=function(e){var g=S.bind(null,e);return g.type=e,g},g.createRef=function(){return{current:null}},g.forwardRef=function(e){return{$$typeof:r,render:e}},g.isValidElement=v,g.lazy=function(e){return{$$typeof:s,_payload:{_status:-1,_result:e},_init:X}},g.memo=function(e,g){return{$$typeof:i,type:e,compare:void 0===g?null:g}},g.startTransition=function(e){var g=Y.transition;Y.transition={};try{e()}finally{Y.transition=g}},g.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},g.useCallback=function(e,g){return J.current.useCallback(e,g)},g.useContext=function(e){return J.current.useContext(e)},g.useDebugValue=function(){},g.useDeferredValue=function(e){return J.current.useDeferredValue(e)},g.useEffect=function(e,g){return J.current.useEffect(e,g)},g.useId=function(){return J.current.useId()},g.useImperativeHandle=function(e,g,t){return J.current.useImperativeHandle(e,g,t)},g.useInsertionEffect=function(e,g){return J.current.useInsertionEffect(e,g)},g.useLayoutEffect=function(e,g){return J.current.useLayoutEffect(e,g)},g.useMemo=function(e,g){return J.current.useMemo(e,g)},g.useReducer=function(e,g,t){return J.current.useReducer(e,g,t)},g.useRef=function(e){return J.current.useRef(e)},g.useState=function(e){return J.current.useState(e)},g.useSyncExternalStore=function(e,g,t){return J.current.useSyncExternalStore(e,g,t)},g.useTransition=function(){return J.current.useTransition()},g.version="18.2.0"},791:function(e,g,t){"use strict";e.exports=t(117)},184:function(e,g,t){"use strict";e.exports=t(374)},813:function(e,g){"use strict";function t(e,g){var t=e.length;e.push(g);e:for(;0<t;){var n=t-1>>>1,I=e[n];if(!(0<C(I,g)))break e;e[n]=g,e[t]=I,t=n}}function n(e){return 0===e.length?null:e[0]}function I(e){if(0===e.length)return null;var g=e[0],t=e.pop();if(t!==g){e[0]=t;e:for(var n=0,I=e.length,l=I>>>1;n<l;){var a=2*(n+1)-1,o=e[a],r=a+1,c=e[r];if(0>C(o,t))r<I&&0>C(c,o)?(e[n]=c,e[r]=t,n=r):(e[n]=o,e[a]=t,n=a);else{if(!(r<I&&0>C(c,t)))break e;e[n]=c,e[r]=t,n=r}}}return g}function C(e,g){var t=e.sortIndex-g.sortIndex;return 0!==t?t:e.id-g.id}if("object"===typeof performance&&"function"===typeof performance.now){var l=performance;g.unstable_now=function(){return l.now()}}else{var a=Date,o=a.now();g.unstable_now=function(){return a.now()-o}}var r=[],c=[],i=1,s=null,A=3,d=!1,u=!1,m=!1,b="function"===typeof setTimeout?setTimeout:null,Z="function"===typeof clearTimeout?clearTimeout:null,h="undefined"!==typeof setImmediate?setImmediate:null;function p(e){for(var g=n(c);null!==g;){if(null===g.callback)I(c);else{if(!(g.startTime<=e))break;I(c),g.sortIndex=g.expirationTime,t(r,g)}g=n(c)}}function G(e){if(m=!1,p(e),!u)if(null!==n(r))u=!0,Y(y);else{var g=n(c);null!==g&&H(G,g.startTime-e)}}function y(e,t){u=!1,m&&(m=!1,Z(v),v=-1),d=!0;var C=A;try{for(p(t),s=n(r);null!==s&&(!(s.expirationTime>t)||e&&!R());){var l=s.callback;if("function"===typeof l){s.callback=null,A=s.priorityLevel;var a=l(s.expirationTime<=t);t=g.unstable_now(),"function"===typeof a?s.callback=a:s===n(r)&&I(r),p(t)}else I(r);s=n(r)}if(null!==s)var o=!0;else{var i=n(c);null!==i&&H(G,i.startTime-t),o=!1}return o}finally{s=null,A=C,d=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var B,f=!1,S=null,v=-1,W=5,V=-1;function R(){return!(g.unstable_now()-V<W)}function k(){if(null!==S){var e=g.unstable_now();V=e;var t=!0;try{t=S(!0,e)}finally{t?B():(f=!1,S=null)}}else f=!1}if("function"===typeof h)B=function(){h(k)};else if("undefined"!==typeof MessageChannel){var X=new MessageChannel,J=X.port2;X.port1.onmessage=k,B=function(){J.postMessage(null)}}else B=function(){b(k,0)};function Y(e){S=e,f||(f=!0,B())}function H(e,t){v=b((function(){e(g.unstable_now())}),t)}g.unstable_IdlePriority=5,g.unstable_ImmediatePriority=1,g.unstable_LowPriority=4,g.unstable_NormalPriority=3,g.unstable_Profiling=null,g.unstable_UserBlockingPriority=2,g.unstable_cancelCallback=function(e){e.callback=null},g.unstable_continueExecution=function(){u||d||(u=!0,Y(y))},g.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<e?Math.floor(1e3/e):5},g.unstable_getCurrentPriorityLevel=function(){return A},g.unstable_getFirstCallbackNode=function(){return n(r)},g.unstable_next=function(e){switch(A){case 1:case 2:case 3:var g=3;break;default:g=A}var t=A;A=g;try{return e()}finally{A=t}},g.unstable_pauseExecution=function(){},g.unstable_requestPaint=function(){},g.unstable_runWithPriority=function(e,g){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var t=A;A=e;try{return g()}finally{A=t}},g.unstable_scheduleCallback=function(e,I,C){var l=g.unstable_now();switch("object"===typeof C&&null!==C?C="number"===typeof(C=C.delay)&&0<C?l+C:l:C=l,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:i++,callback:I,priorityLevel:e,startTime:C,expirationTime:a=C+a,sortIndex:-1},C>l?(e.sortIndex=C,t(c,e),null===n(r)&&e===n(c)&&(m?(Z(v),v=-1):m=!0,H(G,C-l))):(e.sortIndex=a,t(r,e),u||d||(u=!0,Y(y))),e},g.unstable_shouldYield=R,g.unstable_wrapCallback=function(e){var g=A;return function(){var t=A;A=g;try{return e.apply(this,arguments)}finally{A=t}}}},296:function(e,g,t){"use strict";e.exports=t(813)},613:function(e){e.exports=function(e,g,t,n){var I=t?t.call(n,e,g):void 0;if(void 0!==I)return!!I;if(e===g)return!0;if("object"!==typeof e||!e||"object"!==typeof g||!g)return!1;var C=Object.keys(e),l=Object.keys(g);if(C.length!==l.length)return!1;for(var a=Object.prototype.hasOwnProperty.bind(g),o=0;o<C.length;o++){var r=C[o];if(!a(r))return!1;var c=e[r],i=g[r];if(!1===(I=t?t.call(n,c,i,r):void 0)||void 0===I&&c!==i)return!1}return!0}},391:function(e){"use strict";var g=function(){};e.exports=g}},g={};function t(n){var I=g[n];if(void 0!==I)return I.exports;var C=g[n]={id:n,loaded:!1,exports:{}};return e[n].call(C.exports,C,C.exports,t),C.loaded=!0,C.exports}t.m=e,t.n=function(e){var g=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(g,{a:g}),g},function(){var e,g=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};t.t=function(n,I){if(1&I&&(n=this(n)),8&I)return n;if("object"===typeof n&&n){if(4&I&&n.__esModule)return n;if(16&I&&"function"===typeof n.then)return n}var C=Object.create(null);t.r(C);var l={};e=e||[null,g({}),g([]),g(g)];for(var a=2&I&&n;"object"==typeof a&&!~e.indexOf(a);a=g(a))Object.getOwnPropertyNames(a).forEach((function(e){l[e]=function(){return n[e]}}));return l.default=function(){return n},t.d(C,l),C}}(),t.d=function(e,g){for(var n in g)t.o(g,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:g[n]})},t.f={},t.e=function(e){return Promise.all(Object.keys(t.f).reduce((function(g,n){return t.f[n](e,g),g}),[]))},t.u=function(e){return"static/js/"+e+".f121dd1e.chunk.js"},t.miniCssF=function(e){},t.o=function(e,g){return Object.prototype.hasOwnProperty.call(e,g)},function(){var e={},g="school-booking-system:";t.l=function(n,I,C,l){if(e[n])e[n].push(I);else{var a,o;if(void 0!==C)for(var r=document.getElementsByTagName("script"),c=0;c<r.length;c++){var i=r[c];if(i.getAttribute("src")==n||i.getAttribute("data-webpack")==g+C){a=i;break}}a||(o=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,t.nc&&a.setAttribute("nonce",t.nc),a.setAttribute("data-webpack",g+C),a.src=n),e[n]=[I];var s=function(g,t){a.onerror=a.onload=null,clearTimeout(A);var I=e[n];if(delete e[n],a.parentNode&&a.parentNode.removeChild(a),I&&I.forEach((function(e){return e(t)})),g)return g(t)},A=setTimeout(s.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=s.bind(null,a.onerror),a.onload=s.bind(null,a.onload),o&&document.head.appendChild(a)}}}(),t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},t.p="/",function(){var e={179:0};t.f.j=function(g,n){var I=t.o(e,g)?e[g]:void 0;if(0!==I)if(I)n.push(I[2]);else{var C=new Promise((function(t,n){I=e[g]=[t,n]}));n.push(I[2]=C);var l=t.p+t.u(g),a=new Error;t.l(l,(function(n){if(t.o(e,g)&&(0!==(I=e[g])&&(e[g]=void 0),I)){var C=n&&("load"===n.type?"missing":n.type),l=n&&n.target&&n.target.src;a.message="Loading chunk "+g+" failed.\n("+C+": "+l+")",a.name="ChunkLoadError",a.type=C,a.request=l,I[1](a)}}),"chunk-"+g,g)}};var g=function(g,n){var I,C,l=n[0],a=n[1],o=n[2],r=0;if(l.some((function(g){return 0!==e[g]}))){for(I in a)t.o(a,I)&&(t.m[I]=a[I]);if(o)o(t)}for(g&&g(n);r<l.length;r++)C=l[r],t.o(e,C)&&e[C]&&e[C][0](),e[C]=0},n=self.webpackChunkschool_booking_system=self.webpackChunkschool_booking_system||[];n.forEach(g.bind(null,0)),n.push=g.bind(null,n.push.bind(n))}(),t.nc=void 0,function(){"use strict";var e,g=t(791),n=t.t(g,2),I=t(250);function C(e){if(Array.isArray(e))return e}function l(e,g){(null==g||g>e.length)&&(g=e.length);for(var t=0,n=new Array(g);t<g;t++)n[t]=e[t];return n}function a(e,g){if(e){if("string"===typeof e)return l(e,g);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?l(e,g):void 0}}function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function r(e,g){return C(e)||function(e,g){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,I,C,l,a=[],o=!0,r=!1;try{if(C=(t=t.call(e)).next,0===g){if(Object(t)!==t)return;o=!1}else for(;!(o=(n=C.call(t)).done)&&(a.push(n.value),a.length!==g);o=!0);}catch(e){r=!0,I=e}finally{try{if(!o&&null!=t.return&&(l=t.return(),Object(l)!==l))return}finally{if(r)throw I}}return a}}(e,g)||a(e,g)||o()}function c(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function i(e){return function(e){if(Array.isArray(e))return l(e)}(e)||c(e)||a(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,g){if(!(e instanceof g))throw new TypeError("Cannot call a class as a function")}function A(e){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A(e)}function d(e){var g=function(e,g){if("object"!==A(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,g||"default");if("object"!==A(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===g?String:Number)(e)}(e,"string");return"symbol"===A(g)?g:String(g)}function u(e,g){for(var t=0;t<g.length;t++){var n=g[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,d(n.key),n)}}function m(e,g,t){return g&&u(e.prototype,g),t&&u(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function b(e,g){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,g){return e.__proto__=g,e},b(e,g)}function Z(e,g){if("function"!==typeof g&&null!==g)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(g&&g.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),g&&b(e,g)}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function p(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(Oe){return!1}}function G(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){var g=p();return function(){var t,n=h(e);if(g){var I=h(this).constructor;t=Reflect.construct(n,arguments,I)}else t=n.apply(this,arguments);return function(e,g){if(g&&("object"===A(g)||"function"===typeof g))return g;if(void 0!==g)throw new TypeError("Derived constructors may only return object or undefined");return G(e)}(this,t)}}function B(e,g,t){return B=p()?Reflect.construct.bind():function(e,g,t){var n=[null];n.push.apply(n,g);var I=new(Function.bind.apply(e,n));return t&&b(I,t.prototype),I},B.apply(null,arguments)}function f(e){var g="function"===typeof Map?new Map:void 0;return f=function(e){if(null===e||(t=e,-1===Function.toString.call(t).indexOf("[native code]")))return e;var t;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof g){if(g.has(e))return g.get(e);g.set(e,n)}function n(){return B(e,arguments,h(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),b(n,e)},f(e)}function S(e){return C(e)||c(e)||a(e)||o()}function v(){return v=Object.assign?Object.assign.bind():function(e){for(var g=1;g<arguments.length;g++){var t=arguments[g];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},v.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(e||(e={}));var W,V="popstate";function R(e,g){if(!1===e||null===e||"undefined"===typeof e)throw new Error(g)}function k(e,g){if(!e){"undefined"!==typeof console&&console.warn(g);try{throw new Error(g)}catch(Oe){}}}function X(e,g){return{usr:e.state,key:e.key,idx:g}}function J(e,g,t,n){return void 0===t&&(t=null),v({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof g?H(g):g,{state:t,key:g&&g.key||n||Math.random().toString(36).substr(2,8)})}function Y(e){var g=e.pathname,t=void 0===g?"/":g,n=e.search,I=void 0===n?"":n,C=e.hash,l=void 0===C?"":C;return I&&"?"!==I&&(t+="?"===I.charAt(0)?I:"?"+I),l&&"#"!==l&&(t+="#"===l.charAt(0)?l:"#"+l),t}function H(e){var g={};if(e){var t=e.indexOf("#");t>=0&&(g.hash=e.substr(t),e=e.substr(0,t));var n=e.indexOf("?");n>=0&&(g.search=e.substr(n),e=e.substr(0,n)),e&&(g.pathname=e)}return g}function w(g,t,n,I){void 0===I&&(I={});var C=I,l=C.window,a=void 0===l?document.defaultView:l,o=C.v5Compat,r=void 0!==o&&o,c=a.history,i=e.Pop,s=null,A=d();function d(){return(c.state||{idx:null}).idx}function u(){i=e.Pop;var g=d(),t=null==g?null:g-A;A=g,s&&s({action:i,location:b.location,delta:t})}function m(e){var g="null"!==a.location.origin?a.location.origin:a.location.href,t="string"===typeof e?e:Y(e);return R(g,"No window.location.(origin|href) available to create URL for href: "+t),new URL(t,g)}null==A&&(A=0,c.replaceState(v({},c.state,{idx:A}),""));var b={get action(){return i},get location(){return g(a,c)},listen:function(e){if(s)throw new Error("A history only accepts one active listener");return a.addEventListener(V,u),s=e,function(){a.removeEventListener(V,u),s=null}},createHref:function(e){return t(a,e)},createURL:m,encodeLocation:function(e){var g=m(e);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:function(g,t){i=e.Push;var I=J(b.location,g,t);n&&n(I,g);var C=X(I,A=d()+1),l=b.createHref(I);try{c.pushState(C,"",l)}catch(o){if(o instanceof DOMException&&"DataCloneError"===o.name)throw o;a.location.assign(l)}r&&s&&s({action:i,location:b.location,delta:1})},replace:function(g,t){i=e.Replace;var I=J(b.location,g,t);n&&n(I,g);var C=X(I,A=d()),l=b.createHref(I);c.replaceState(C,"",l),r&&s&&s({action:i,location:b.location,delta:0})},go:function(e){return c.go(e)}};return b}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(W||(W={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function N(e,g,t){void 0===t&&(t="/");var n=P(("string"===typeof g?H(g):g).pathname||"/",t);if(null==n)return null;var I=K(e);!function(e){e.sort((function(e,g){return e.score!==g.score?g.score-e.score:function(e,g){var t=e.length===g.length&&e.slice(0,-1).every((function(e,t){return e===g[t]}));return t?e[e.length-1]-g[g.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),g.routesMeta.map((function(e){return e.childrenIndex})))}))}(I);for(var C=null,l=0;null==C&&l<I.length;++l)C=T(I[l],O(n));return C}function K(e,g,t,n){void 0===g&&(g=[]),void 0===t&&(t=[]),void 0===n&&(n="");var I=function(e,I,C){var l={relativePath:void 0===C?e.path||"":C,caseSensitive:!0===e.caseSensitive,childrenIndex:I,route:e};l.relativePath.startsWith("/")&&(R(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path "'+n+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),l.relativePath=l.relativePath.slice(n.length));var a=ee([n,l.relativePath]),o=t.concat(l);e.children&&e.children.length>0&&(R(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),K(e.children,g,o,a)),(null!=e.path||e.index)&&g.push({path:a,score:L(a,e.index),routesMeta:o})};return e.forEach((function(e,g){var t;if(""!==e.path&&null!=(t=e.path)&&t.includes("?")){var n,C=function(e,g){var t="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=a(e))||g&&e&&"number"===typeof e.length){t&&(e=t);var n=0,I=function(){};return{s:I,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:I}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var C,l=!0,o=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return l=e.done,e},e:function(e){o=!0,C=e},f:function(){try{l||null==t.return||t.return()}finally{if(o)throw C}}}}(F(e.path));try{for(C.s();!(n=C.n()).done;){var l=n.value;I(e,g,l)}}catch(o){C.e(o)}finally{C.f()}}else I(e,g)})),g}function F(e){var g=e.split("/");if(0===g.length)return[];var t=S(g),n=t[0],I=t.slice(1),C=n.endsWith("?"),l=n.replace(/\?$/,"");if(0===I.length)return C?[l,""]:[l];var a=F(I.join("/")),o=[];return o.push.apply(o,i(a.map((function(e){return""===e?l:[l,e].join("/")})))),C&&o.push.apply(o,i(a)),o.map((function(g){return e.startsWith("/")&&""===g?"/":g}))}var x=/^:\w+$/,E=3,z=2,M=1,U=10,D=-2,Q=function(e){return"*"===e};function L(e,g){var t=e.split("/"),n=t.length;return t.some(Q)&&(n+=D),g&&(n+=z),t.filter((function(e){return!Q(e)})).reduce((function(e,g){return e+(x.test(g)?E:""===g?M:U)}),n)}function T(e,g){for(var t=e.routesMeta,n={},I="/",C=[],l=0;l<t.length;++l){var a=t[l],o=l===t.length-1,r="/"===I?g:g.slice(I.length)||"/",c=j({path:a.relativePath,caseSensitive:a.caseSensitive,end:o},r);if(!c)return null;Object.assign(n,c.params);var i=a.route;C.push({params:n,pathname:ee([I,c.pathname]),pathnameBase:ge(ee([I,c.pathnameBase])),route:i}),"/"!==c.pathnameBase&&(I=ee([I,c.pathnameBase]))}return C}function j(e,g){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var t=function(e,g,t){void 0===g&&(g=!1);void 0===t&&(t=!0);k("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var n=[],I="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(function(e,g){return n.push(g),"/([^\\/]+)"}));e.endsWith("*")?(n.push("*"),I+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?I+="\\/*$":""!==e&&"/"!==e&&(I+="(?:(?=\\/|$))");var C=new RegExp(I,g?void 0:"i");return[C,n]}(e.path,e.caseSensitive,e.end),n=r(t,2),I=n[0],C=n[1],l=g.match(I);if(!l)return null;var a=l[0],o=a.replace(/(.)\/+$/,"$1"),c=l.slice(1);return{params:C.reduce((function(e,g,t){if("*"===g){var n=c[t]||"";o=a.slice(0,a.length-n.length).replace(/(.)\/+$/,"$1")}return e[g]=function(e,g){try{return decodeURIComponent(e)}catch(t){return k(!1,'The value for the URL param "'+g+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}(c[t]||"",g),e}),{}),pathname:a,pathnameBase:o,pattern:e}}function O(e){try{return decodeURI(e)}catch(g){return k(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+g+")."),e}}function P(e,g){if("/"===g)return e;if(!e.toLowerCase().startsWith(g.toLowerCase()))return null;var t=g.endsWith("/")?g.length-1:g.length,n=e.charAt(t);return n&&"/"!==n?null:e.slice(t)||"/"}function _(e,g,t,n){return"Cannot include a '"+e+"' character in a manually specified `to."+g+"` field ["+JSON.stringify(n)+"].  Please separate it out to the `to."+t+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function q(e){return e.filter((function(e,g){return 0===g||e.route.path&&e.route.path.length>0}))}function $(e,g,t,n){var I;void 0===n&&(n=!1),"string"===typeof e?I=H(e):(R(!(I=v({},e)).pathname||!I.pathname.includes("?"),_("?","pathname","search",I)),R(!I.pathname||!I.pathname.includes("#"),_("#","pathname","hash",I)),R(!I.search||!I.search.includes("#"),_("#","search","hash",I)));var C,l=""===e||""===I.pathname,a=l?"/":I.pathname;if(n||null==a)C=t;else{var o=g.length-1;if(a.startsWith("..")){for(var r=a.split("/");".."===r[0];)r.shift(),o-=1;I.pathname=r.join("/")}C=o>=0?g[o]:"/"}var c=function(e,g){void 0===g&&(g="/");var t="string"===typeof e?H(e):e,n=t.pathname,I=t.search,C=void 0===I?"":I,l=t.hash,a=void 0===l?"":l,o=n?n.startsWith("/")?n:function(e,g){var t=g.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?t.length>1&&t.pop():"."!==e&&t.push(e)})),t.length>1?t.join("/"):"/"}(n,g):g;return{pathname:o,search:te(C),hash:ne(a)}}(I,C),i=a&&"/"!==a&&a.endsWith("/"),s=(l||"."===a)&&t.endsWith("/");return c.pathname.endsWith("/")||!i&&!s||(c.pathname+="/"),c}var ee=function(e){return e.join("/").replace(/\/\/+/g,"/")},ge=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},te=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},ne=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},Ie=function(e){Z(t,e);var g=y(t);function t(){return s(this,t),g.apply(this,arguments)}return m(t)}(f(Error));function Ce(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var le=["post","put","patch","delete"],ae=(new Set(le),["get"].concat(le));new Set(ae),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function oe(){return oe=Object.assign?Object.assign.bind():function(e){for(var g=1;g<arguments.length;g++){var t=arguments[g];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},oe.apply(this,arguments)}var re=g.createContext(null);var ce=g.createContext(null);var ie=g.createContext(null);var se=g.createContext(null);var Ae=g.createContext(null);var de=g.createContext({outlet:null,matches:[],isDataRoute:!1});var ue=g.createContext(null);function me(){return null!=g.useContext(Ae)}function be(){return me()||R(!1),g.useContext(Ae).location}function Ze(e){g.useContext(se).static||g.useLayoutEffect(e)}function he(){return g.useContext(de).isDataRoute?function(){var e=Re(We.UseNavigateStable).router,t=Xe(Ve.UseNavigateStable),n=g.useRef(!1);Ze((function(){n.current=!0}));var I=g.useCallback((function(g,I){void 0===I&&(I={}),n.current&&("number"===typeof g?e.navigate(g):e.navigate(g,oe({fromRouteId:t},I)))}),[e,t]);return I}():function(){me()||R(!1);var e=g.useContext(re),t=g.useContext(se),n=t.basename,I=t.navigator,C=g.useContext(de).matches,l=be().pathname,a=JSON.stringify(q(C).map((function(e){return e.pathnameBase}))),o=g.useRef(!1);Ze((function(){o.current=!0}));var r=g.useCallback((function(g,t){if(void 0===t&&(t={}),o.current)if("number"!==typeof g){var C=$(g,JSON.parse(a),l,"path"===t.relative);null==e&&"/"!==n&&(C.pathname="/"===C.pathname?n:ee([n,C.pathname])),(t.replace?I.replace:I.push)(C,t.state,t)}else I.go(g)}),[n,I,a,l,e]);return r}()}function pe(e,t){var n=(void 0===t?{}:t).relative,I=g.useContext(de).matches,C=be().pathname,l=JSON.stringify(q(I).map((function(e){return e.pathnameBase})));return g.useMemo((function(){return $(e,JSON.parse(l),C,"path"===n)}),[e,l,C,n])}function Ge(t,n,I){me()||R(!1);var C,l=g.useContext(se).navigator,a=g.useContext(de).matches,o=a[a.length-1],r=o?o.params:{},c=(o&&o.pathname,o?o.pathnameBase:"/"),i=(o&&o.route,be());if(n){var s,A="string"===typeof n?H(n):n;"/"===c||(null==(s=A.pathname)?void 0:s.startsWith(c))||R(!1),C=A}else C=i;var d=C.pathname||"/",u=N(t,{pathname:"/"===c?d:d.slice(c.length)||"/"});var m=ve(u&&u.map((function(e){return Object.assign({},e,{params:Object.assign({},r,e.params),pathname:ee([c,l.encodeLocation?l.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?c:ee([c,l.encodeLocation?l.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})})),a,I);return n&&m?g.createElement(Ae.Provider,{value:{location:oe({pathname:"/",search:"",hash:"",state:null,key:"default"},C),navigationType:e.Pop}},m):m}function ye(){var e=function(){var e,t=g.useContext(ue),n=ke(Ve.UseRouteError),I=Xe(Ve.UseRouteError);if(t)return t;return null==(e=n.errors)?void 0:e[I]}(),t=Ce(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,I="rgba(200,200,200, 0.5)",C={padding:"0.5rem",backgroundColor:I};return g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},t),n?g.createElement("pre",{style:C},n):null,null)}var Be=g.createElement(ye,null),fe=function(e){Z(n,e);var t=y(n);function n(e){var g;return s(this,n),(g=t.call(this,e)).state={location:e.location,revalidation:e.revalidation,error:e.error},g}return m(n,[{key:"componentDidCatch",value:function(e,g){console.error("React Router caught the following error during render",e,g)}},{key:"render",value:function(){return this.state.error?g.createElement(de.Provider,{value:this.props.routeContext},g.createElement(ue.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,g){return g.location!==e.location||"idle"!==g.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||g.error,location:g.location,revalidation:e.revalidation||g.revalidation}}}]),n}(g.Component);function Se(e){var t=e.routeContext,n=e.match,I=e.children,C=g.useContext(re);return C&&C.static&&C.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(C.staticContext._deepestRenderedBoundaryId=n.route.id),g.createElement(de.Provider,{value:t},I)}function ve(e,t,n){var I;if(void 0===t&&(t=[]),void 0===n&&(n=null),null==e){var C;if(null==(C=n)||!C.errors)return null;e=n.matches}var l=e,a=null==(I=n)?void 0:I.errors;if(null!=a){var o=l.findIndex((function(e){return e.route.id&&(null==a?void 0:a[e.route.id])}));o>=0||R(!1),l=l.slice(0,Math.min(l.length,o+1))}return l.reduceRight((function(e,I,C){var o=I.route.id?null==a?void 0:a[I.route.id]:null,r=null;n&&(r=I.route.errorElement||Be);var c=t.concat(l.slice(0,C+1)),i=function(){var t;return t=o?r:I.route.Component?g.createElement(I.route.Component,null):I.route.element?I.route.element:e,g.createElement(Se,{match:I,routeContext:{outlet:e,matches:c,isDataRoute:null!=n},children:t})};return n&&(I.route.ErrorBoundary||I.route.errorElement||0===C)?g.createElement(fe,{location:n.location,revalidation:n.revalidation,component:r,error:o,children:i(),routeContext:{outlet:null,matches:c,isDataRoute:!0}}):i()}),null)}var We=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(We||{}),Ve=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Ve||{});function Re(e){var t=g.useContext(re);return t||R(!1),t}function ke(e){var t=g.useContext(ce);return t||R(!1),t}function Xe(e){var t=function(e){var t=g.useContext(de);return t||R(!1),t}(),n=t.matches[t.matches.length-1];return n.route.id||R(!1),n.route.id}n.startTransition;function Je(e){var t=e.to,n=e.replace,I=e.state,C=e.relative;me()||R(!1);var l=g.useContext(de).matches,a=be().pathname,o=he(),r=$(t,q(l).map((function(e){return e.pathnameBase})),a,"path"===C),c=JSON.stringify(r);return g.useEffect((function(){return o(JSON.parse(c),{replace:n,state:I,relative:C})}),[o,c,C,n,I]),null}function Ye(e){R(!1)}function He(t){var n=t.basename,I=void 0===n?"/":n,C=t.children,l=void 0===C?null:C,a=t.location,o=t.navigationType,r=void 0===o?e.Pop:o,c=t.navigator,i=t.static,s=void 0!==i&&i;me()&&R(!1);var A=I.replace(/^\/*/,"/"),d=g.useMemo((function(){return{basename:A,navigator:c,static:s}}),[A,c,s]);"string"===typeof a&&(a=H(a));var u=a,m=u.pathname,b=void 0===m?"/":m,Z=u.search,h=void 0===Z?"":Z,p=u.hash,G=void 0===p?"":p,y=u.state,B=void 0===y?null:y,f=u.key,S=void 0===f?"default":f,v=g.useMemo((function(){var e=P(b,A);return null==e?null:{location:{pathname:e,search:h,hash:G,state:B,key:S},navigationType:r}}),[A,b,h,G,B,S,r]);return null==v?null:g.createElement(se.Provider,{value:d},g.createElement(Ae.Provider,{children:l,value:v}))}function we(e){var g=e.children,t=e.location;return Ge(Fe(g),t)}var Ne=function(e){return e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error",e}(Ne||{}),Ke=new Promise((function(){}));g.Component;function Fe(e,t){void 0===t&&(t=[]);var n=[];return g.Children.forEach(e,(function(e,I){if(g.isValidElement(e)){var C=[].concat(i(t),[I]);if(e.type!==g.Fragment){e.type!==Ye&&R(!1),e.props.index&&e.props.children&&R(!1);var l={id:e.props.id||C.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(l.children=Fe(e.props.children,C)),n.push(l)}else n.push.apply(n,Fe(e.props.children,C))}})),n}function xe(){return xe=Object.assign?Object.assign.bind():function(e){for(var g=1;g<arguments.length;g++){var t=arguments[g];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},xe.apply(this,arguments)}function Ee(e,g){if(null==e)return{};var t,n,I={},C=Object.keys(e);for(n=0;n<C.length;n++)t=C[n],g.indexOf(t)>=0||(I[t]=e[t]);return I}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);var ze=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];var Me=n.startTransition;function Ue(e){var t=e.basename,n=e.children,I=e.future,C=e.window,l=g.useRef();null==l.current&&(l.current=function(e){return void 0===e&&(e={}),w((function(e,g){var t=H(e.location.hash.substr(1)),n=t.pathname,I=void 0===n?"/":n,C=t.search,l=void 0===C?"":C,a=t.hash,o=void 0===a?"":a;return I.startsWith("/")||I.startsWith(".")||(I="/"+I),J("",{pathname:I,search:l,hash:o},g.state&&g.state.usr||null,g.state&&g.state.key||"default")}),(function(e,g){var t=e.document.querySelector("base"),n="";if(t&&t.getAttribute("href")){var I=e.location.href,C=I.indexOf("#");n=-1===C?I:I.slice(0,C)}return n+"#"+("string"===typeof g?g:Y(g))}),(function(e,g){k("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push("+JSON.stringify(g)+")")}),e)}({window:C,v5Compat:!0}));var a=l.current,o=r(g.useState({action:a.action,location:a.location}),2),c=o[0],i=o[1],s=(I||{}).v7_startTransition,A=g.useCallback((function(e){s&&Me?Me((function(){return i(e)})):i(e)}),[i,s]);return g.useLayoutEffect((function(){return a.listen(A)}),[a,A]),g.createElement(He,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:a})}var De="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Qe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Le=g.forwardRef((function(e,t){var n,I=e.onClick,C=e.relative,l=e.reloadDocument,a=e.replace,o=e.state,r=e.target,c=e.to,i=e.preventScrollReset,s=Ee(e,ze),A=g.useContext(se).basename,d=!1;if("string"===typeof c&&Qe.test(c)&&(n=c,De))try{var u=new URL(window.location.href),m=c.startsWith("//")?new URL(u.protocol+c):new URL(c),b=P(m.pathname,A);m.origin===u.origin&&null!=b?c=b+m.search+m.hash:d=!0}catch(Oe){}var Z=function(e,t){var n=(void 0===t?{}:t).relative;me()||R(!1);var I=g.useContext(se),C=I.basename,l=I.navigator,a=pe(e,{relative:n}),o=a.hash,r=a.pathname,c=a.search,i=r;return"/"!==C&&(i="/"===r?C:ee([C,r])),l.createHref({pathname:i,search:c,hash:o})}(c,{relative:C}),h=function(e,t){var n=void 0===t?{}:t,I=n.target,C=n.replace,l=n.state,a=n.preventScrollReset,o=n.relative,r=he(),c=be(),i=pe(e,{relative:o});return g.useCallback((function(g){if(function(e,g){return 0===e.button&&(!g||"_self"===g)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(g,I)){g.preventDefault();var t=void 0!==C?C:Y(c)===Y(i);r(e,{replace:t,state:l,preventScrollReset:a,relative:o})}}),[c,r,i,C,l,I,e,a,o])}(c,{replace:a,state:o,target:r,preventScrollReset:i,relative:C});return g.createElement("a",xe({},s,{href:n||Z,onClick:d||l?I:function(e){I&&I(e),e.defaultPrevented||h(e)},ref:t,target:r}))}));var Te,je;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher"})(Te||(Te={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(je||(je={}));function Oe(e){this.message=e}Oe.prototype=new Error,Oe.prototype.name="InvalidCharacterError";var Pe="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var g=String(e).replace(/=+$/,"");if(g.length%4==1)throw new Oe("'atob' failed: The string to be decoded is not correctly encoded.");for(var t,n,I=0,C=0,l="";n=g.charAt(C++);~n&&(t=I%4?64*t+n:n,I++%4)?l+=String.fromCharCode(255&t>>(-2*I&6)):0)n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(n);return l};function _e(e){this.message=e}_e.prototype=new Error,_e.prototype.name="InvalidTokenError";var qe=function(e,g){if("string"!=typeof e)throw new _e("Invalid token specified");var t=!0===(g=g||{}).header?0:1;try{return JSON.parse(function(e){var g=e.replace(/-/g,"+").replace(/_/g,"/");switch(g.length%4){case 0:break;case 2:g+="==";break;case 3:g+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(Pe(e).replace(/(.)/g,(function(e,g){var t=g.charCodeAt(0).toString(16).toUpperCase();return t.length<2&&(t="0"+t),"%"+t})))}(g)}catch(e){return Pe(g)}}(e.split(".")[t]))}catch(e){throw new _e("Invalid token specified: "+e.message)}};function $e(){var e=localStorage.getItem("token");if(!e)return console.error("No token in local storage"),null;try{var g=qe(e);return console.log(g),g.role}catch(t){return console.error("Error decoding token",t),null}}function eg(){var e=localStorage.getItem("token");return e||(console.error("No token in local storage"),null)}function gg(){var e=localStorage.getItem("token");return e?{headers:{Authorization:"Bearer ".concat(e)}}:(console.error("No token in local storage"),null)}function tg(){var e=localStorage.getItem("token");if(!e)return console.error("No token in local storage"),null;try{return qe(e)._id}catch(g){return console.error("Error decoding token",g),null}}function ng(){var e=localStorage.getItem("token");if(!e)return console.error("No token in local storage"),null;try{return qe(e).name}catch(g){return console.error("Error decoding token",g),null}}function Ig(){var e=localStorage.getItem("token");if(!e)return console.error("No token in local storage"),null;try{var g=qe(e);return console.log(g),g.phone}catch(t){return console.error("Error decoding token",t),null}}function Cg(){var e=localStorage.getItem("token");if(!e)return console.error("No token in local storage"),null;try{var g=qe(e);return console.log(g),g.campus}catch(t){return console.error("Error decoding token",t),null}}function lg(){var e=localStorage.getItem("token");if(!e)return console.error("No token in local storage"),null;try{return qe(e).email}catch(g){return console.error("Error decoding token",g),null}}function ag(e,g,t){return(g=d(g))in e?Object.defineProperty(e,g,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[g]=t,e}function og(e,g){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);g&&(n=n.filter((function(g){return Object.getOwnPropertyDescriptor(e,g).enumerable}))),t.push.apply(t,n)}return t}function rg(e){for(var g=1;g<arguments.length;g++){var t=null!=arguments[g]?arguments[g]:{};g%2?og(Object(t),!0).forEach((function(g){ag(e,g,t[g])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):og(Object(t)).forEach((function(g){Object.defineProperty(e,g,Object.getOwnPropertyDescriptor(t,g))}))}return e}function cg(){cg=function(){return g};var e,g={},t=Object.prototype,n=t.hasOwnProperty,I=Object.defineProperty||function(e,g,t){e[g]=t.value},C="function"==typeof Symbol?Symbol:{},l=C.iterator||"@@iterator",a=C.asyncIterator||"@@asyncIterator",o=C.toStringTag||"@@toStringTag";function r(e,g,t){return Object.defineProperty(e,g,{value:t,enumerable:!0,configurable:!0,writable:!0}),e[g]}try{r({},"")}catch(e){r=function(e,g,t){return e[g]=t}}function c(e,g,t,n){var C=g&&g.prototype instanceof Z?g:Z,l=Object.create(C.prototype),a=new X(n||[]);return I(l,"_invoke",{value:W(e,t,a)}),l}function i(e,g,t){try{return{type:"normal",arg:e.call(g,t)}}catch(e){return{type:"throw",arg:e}}}g.wrap=c;var s="suspendedStart",d="suspendedYield",u="executing",m="completed",b={};function Z(){}function h(){}function p(){}var G={};r(G,l,(function(){return this}));var y=Object.getPrototypeOf,B=y&&y(y(J([])));B&&B!==t&&n.call(B,l)&&(G=B);var f=p.prototype=Z.prototype=Object.create(G);function S(e){["next","throw","return"].forEach((function(g){r(e,g,(function(e){return this._invoke(g,e)}))}))}function v(e,g){function t(I,C,l,a){var o=i(e[I],e,C);if("throw"!==o.type){var r=o.arg,c=r.value;return c&&"object"==A(c)&&n.call(c,"__await")?g.resolve(c.__await).then((function(e){t("next",e,l,a)}),(function(e){t("throw",e,l,a)})):g.resolve(c).then((function(e){r.value=e,l(r)}),(function(e){return t("throw",e,l,a)}))}a(o.arg)}var C;I(this,"_invoke",{value:function(e,n){function I(){return new g((function(g,I){t(e,n,g,I)}))}return C=C?C.then(I,I):I()}})}function W(g,t,n){var I=s;return function(C,l){if(I===u)throw new Error("Generator is already running");if(I===m){if("throw"===C)throw l;return{value:e,done:!0}}for(n.method=C,n.arg=l;;){var a=n.delegate;if(a){var o=V(a,n);if(o){if(o===b)continue;return o}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(I===s)throw I=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);I=u;var r=i(g,t,n);if("normal"===r.type){if(I=n.done?m:d,r.arg===b)continue;return{value:r.arg,done:n.done}}"throw"===r.type&&(I=m,n.method="throw",n.arg=r.arg)}}}function V(g,t){var n=t.method,I=g.iterator[n];if(I===e)return t.delegate=null,"throw"===n&&g.iterator.return&&(t.method="return",t.arg=e,V(g,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var C=i(I,g.iterator,t.arg);if("throw"===C.type)return t.method="throw",t.arg=C.arg,t.delegate=null,b;var l=C.arg;return l?l.done?(t[g.resultName]=l.value,t.next=g.nextLoc,"return"!==t.method&&(t.method="next",t.arg=e),t.delegate=null,b):l:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,b)}function R(e){var g={tryLoc:e[0]};1 in e&&(g.catchLoc=e[1]),2 in e&&(g.finallyLoc=e[2],g.afterLoc=e[3]),this.tryEntries.push(g)}function k(e){var g=e.completion||{};g.type="normal",delete g.arg,e.completion=g}function X(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(R,this),this.reset(!0)}function J(g){if(g||""===g){var t=g[l];if(t)return t.call(g);if("function"==typeof g.next)return g;if(!isNaN(g.length)){var I=-1,C=function t(){for(;++I<g.length;)if(n.call(g,I))return t.value=g[I],t.done=!1,t;return t.value=e,t.done=!0,t};return C.next=C}}throw new TypeError(A(g)+" is not iterable")}return h.prototype=p,I(f,"constructor",{value:p,configurable:!0}),I(p,"constructor",{value:h,configurable:!0}),h.displayName=r(p,o,"GeneratorFunction"),g.isGeneratorFunction=function(e){var g="function"==typeof e&&e.constructor;return!!g&&(g===h||"GeneratorFunction"===(g.displayName||g.name))},g.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,r(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e},g.awrap=function(e){return{__await:e}},S(v.prototype),r(v.prototype,a,(function(){return this})),g.AsyncIterator=v,g.async=function(e,t,n,I,C){void 0===C&&(C=Promise);var l=new v(c(e,t,n,I),C);return g.isGeneratorFunction(t)?l:l.next().then((function(e){return e.done?e.value:l.next()}))},S(f),r(f,o,"Generator"),r(f,l,(function(){return this})),r(f,"toString",(function(){return"[object Generator]"})),g.keys=function(e){var g=Object(e),t=[];for(var n in g)t.push(n);return t.reverse(),function e(){for(;t.length;){var n=t.pop();if(n in g)return e.value=n,e.done=!1,e}return e.done=!0,e}},g.values=J,X.prototype={constructor:X,reset:function(g){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!g)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(g){if(this.done)throw g;var t=this;function I(n,I){return a.type="throw",a.arg=g,t.next=n,I&&(t.method="next",t.arg=e),!!I}for(var C=this.tryEntries.length-1;C>=0;--C){var l=this.tryEntries[C],a=l.completion;if("root"===l.tryLoc)return I("end");if(l.tryLoc<=this.prev){var o=n.call(l,"catchLoc"),r=n.call(l,"finallyLoc");if(o&&r){if(this.prev<l.catchLoc)return I(l.catchLoc,!0);if(this.prev<l.finallyLoc)return I(l.finallyLoc)}else if(o){if(this.prev<l.catchLoc)return I(l.catchLoc,!0)}else{if(!r)throw new Error("try statement without catch or finally");if(this.prev<l.finallyLoc)return I(l.finallyLoc)}}}},abrupt:function(e,g){for(var t=this.tryEntries.length-1;t>=0;--t){var I=this.tryEntries[t];if(I.tryLoc<=this.prev&&n.call(I,"finallyLoc")&&this.prev<I.finallyLoc){var C=I;break}}C&&("break"===e||"continue"===e)&&C.tryLoc<=g&&g<=C.finallyLoc&&(C=null);var l=C?C.completion:{};return l.type=e,l.arg=g,C?(this.method="next",this.next=C.finallyLoc,b):this.complete(l)},complete:function(e,g){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&g&&(this.next=g),b},finish:function(e){for(var g=this.tryEntries.length-1;g>=0;--g){var t=this.tryEntries[g];if(t.finallyLoc===e)return this.complete(t.completion,t.afterLoc),k(t),b}},catch:function(e){for(var g=this.tryEntries.length-1;g>=0;--g){var t=this.tryEntries[g];if(t.tryLoc===e){var n=t.completion;if("throw"===n.type){var I=n.arg;k(t)}return I}}throw new Error("illegal catch attempt")},delegateYield:function(g,t,n){return this.delegate={iterator:J(g),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=e),b}},g}function ig(e,g,t,n,I,C,l){try{var a=e[C](l),o=a.value}catch(r){return void t(r)}a.done?g(o):Promise.resolve(o).then(n,I)}function sg(e){return function(){var g=this,t=arguments;return new Promise((function(n,I){var C=e.apply(g,t);function l(e){ig(C,n,I,l,a,"next",e)}function a(e){ig(C,n,I,l,a,"throw",e)}l(void 0)}))}}var Ag=t(948),dg=t.n(Ag),ug={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},mg=g.createContext&&g.createContext(ug),bg=function(){return bg=Object.assign||function(e){for(var g,t=1,n=arguments.length;t<n;t++)for(var I in g=arguments[t])Object.prototype.hasOwnProperty.call(g,I)&&(e[I]=g[I]);return e},bg.apply(this,arguments)},Zg=function(e,g){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&g.indexOf(n)<0&&(t[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var I=0;for(n=Object.getOwnPropertySymbols(e);I<n.length;I++)g.indexOf(n[I])<0&&Object.prototype.propertyIsEnumerable.call(e,n[I])&&(t[n[I]]=e[n[I]])}return t};function hg(e){return e&&e.map((function(e,t){return g.createElement(e.tag,bg({key:t},e.attr),hg(e.child))}))}function pg(e){return function(t){return g.createElement(Gg,bg({attr:bg({},e.attr)},t),hg(e.child))}}function Gg(e){var t=function(t){var n,I=e.attr,C=e.size,l=e.title,a=Zg(e,["attr","size","title"]),o=C||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),g.createElement("svg",bg({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,I,a,{className:n,style:bg(bg({color:e.color||t.color},t.style),e.style),height:o,width:o,xmlns:"http://www.w3.org/2000/svg"}),l&&g.createElement("title",null,l),e.children)};return void 0!==mg?g.createElement(mg.Consumer,null,(function(e){return t(e)})):t(ug)}function yg(e){return pg({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20a2 2 0 002 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z"}}]})(e)}function Bg(e){return pg({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"}}]})(e)}function fg(e){return pg({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"}}]})(e)}function Sg(e){return pg({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"}}]})(e)}function vg(e){return pg({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}},{tag:"path",attr:{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"}}]})(e)}function Wg(e){return pg({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"}}]})(e)}function Vg(e){return pg({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5a2.5 2.5 0 010-5 2.5 2.5 0 010 5z"}}]})(e)}function Rg(e,g){return function(){return e.apply(g,arguments)}}var kg,Xg=Object.prototype.toString,Jg=Object.getPrototypeOf,Yg=(kg=Object.create(null),function(e){var g=Xg.call(e);return kg[g]||(kg[g]=g.slice(8,-1).toLowerCase())}),Hg=function(e){return e=e.toLowerCase(),function(g){return Yg(g)===e}},wg=function(e){return function(g){return typeof g===e}},Ng=Array.isArray,Kg=wg("undefined");var Fg=Hg("ArrayBuffer");var xg=wg("string"),Eg=wg("function"),zg=wg("number"),Mg=function(e){return null!==e&&"object"===typeof e},Ug=function(e){if("object"!==Yg(e))return!1;var g=Jg(e);return(null===g||g===Object.prototype||null===Object.getPrototypeOf(g))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Dg=Hg("Date"),Qg=Hg("File"),Lg=Hg("Blob"),Tg=Hg("FileList"),jg=Hg("URLSearchParams");function Og(e,g){var t,n,I=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).allOwnKeys,C=void 0!==I&&I;if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),Ng(e))for(t=0,n=e.length;t<n;t++)g.call(null,e[t],t,e);else{var l,a=C?Object.getOwnPropertyNames(e):Object.keys(e),o=a.length;for(t=0;t<o;t++)l=a[t],g.call(null,e[l],l,e)}}function Pg(e,g){g=g.toLowerCase();for(var t,n=Object.keys(e),I=n.length;I-- >0;)if(g===(t=n[I]).toLowerCase())return t;return null}var _g="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,qg=function(e){return!Kg(e)&&e!==_g};var $g,et=($g="undefined"!==typeof Uint8Array&&Jg(Uint8Array),function(e){return $g&&e instanceof $g}),gt=Hg("HTMLFormElement"),tt=function(e){var g=Object.prototype.hasOwnProperty;return function(e,t){return g.call(e,t)}}(),nt=Hg("RegExp"),It=function(e,g){var t=Object.getOwnPropertyDescriptors(e),n={};Og(t,(function(t,I){!1!==g(t,I,e)&&(n[I]=t)})),Object.defineProperties(e,n)},Ct="abcdefghijklmnopqrstuvwxyz",lt="0123456789",at={DIGIT:lt,ALPHA:Ct,ALPHA_DIGIT:Ct+Ct.toUpperCase()+lt};var ot=Hg("AsyncFunction"),rt={isArray:Ng,isArrayBuffer:Fg,isBuffer:function(e){return null!==e&&!Kg(e)&&null!==e.constructor&&!Kg(e.constructor)&&Eg(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:function(e){var g;return e&&("function"===typeof FormData&&e instanceof FormData||Eg(e.append)&&("formdata"===(g=Yg(e))||"object"===g&&Eg(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&Fg(e.buffer)},isString:xg,isNumber:zg,isBoolean:function(e){return!0===e||!1===e},isObject:Mg,isPlainObject:Ug,isUndefined:Kg,isDate:Dg,isFile:Qg,isBlob:Lg,isRegExp:nt,isFunction:Eg,isStream:function(e){return Mg(e)&&Eg(e.pipe)},isURLSearchParams:jg,isTypedArray:et,isFileList:Tg,forEach:Og,merge:function e(){for(var g=(qg(this)&&this||{}).caseless,t={},n=function(n,I){var C=g&&Pg(t,I)||I;Ug(t[C])&&Ug(n)?t[C]=e(t[C],n):Ug(n)?t[C]=e({},n):Ng(n)?t[C]=n.slice():t[C]=n},I=0,C=arguments.length;I<C;I++)arguments[I]&&Og(arguments[I],n);return t},extend:function(e,g,t){return Og(g,(function(g,n){t&&Eg(g)?e[n]=Rg(g,t):e[n]=g}),{allOwnKeys:(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).allOwnKeys}),e},trim:function(e){return e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,g,t,n){e.prototype=Object.create(g.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:g.prototype}),t&&Object.assign(e.prototype,t)},toFlatObject:function(e,g,t,n){var I,C,l,a={};if(g=g||{},null==e)return g;do{for(C=(I=Object.getOwnPropertyNames(e)).length;C-- >0;)l=I[C],n&&!n(l,e,g)||a[l]||(g[l]=e[l],a[l]=!0);e=!1!==t&&Jg(e)}while(e&&(!t||t(e,g))&&e!==Object.prototype);return g},kindOf:Yg,kindOfTest:Hg,endsWith:function(e,g,t){e=String(e),(void 0===t||t>e.length)&&(t=e.length),t-=g.length;var n=e.indexOf(g,t);return-1!==n&&n===t},toArray:function(e){if(!e)return null;if(Ng(e))return e;var g=e.length;if(!zg(g))return null;for(var t=new Array(g);g-- >0;)t[g]=e[g];return t},forEachEntry:function(e,g){for(var t,n=(e&&e[Symbol.iterator]).call(e);(t=n.next())&&!t.done;){var I=t.value;g.call(e,I[0],I[1])}},matchAll:function(e,g){for(var t,n=[];null!==(t=e.exec(g));)n.push(t);return n},isHTMLForm:gt,hasOwnProperty:tt,hasOwnProp:tt,reduceDescriptors:It,freezeMethods:function(e){It(e,(function(g,t){if(Eg(e)&&-1!==["arguments","caller","callee"].indexOf(t))return!1;var n=e[t];Eg(n)&&(g.enumerable=!1,"writable"in g?g.writable=!1:g.set||(g.set=function(){throw Error("Can not rewrite read-only method '"+t+"'")}))}))},toObjectSet:function(e,g){var t={},n=function(e){e.forEach((function(e){t[e]=!0}))};return Ng(e)?n(e):n(String(e).split(g)),t},toCamelCase:function(e){return e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,g,t){return g.toUpperCase()+t}))},noop:function(){},toFiniteNumber:function(e,g){return e=+e,Number.isFinite(e)?e:g},findKey:Pg,global:_g,isContextDefined:qg,ALPHABET:at,generateString:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:at.ALPHA_DIGIT,t="",n=g.length;e--;)t+=g[Math.random()*n|0];return t},isSpecCompliantForm:function(e){return!!(e&&Eg(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:function(e){var g=new Array(10);return function e(t,n){if(Mg(t)){if(g.indexOf(t)>=0)return;if(!("toJSON"in t)){g[n]=t;var I=Ng(t)?[]:{};return Og(t,(function(g,t){var C=e(g,n+1);!Kg(C)&&(I[t]=C)})),g[n]=void 0,I}}return t}(e,0)},isAsyncFn:ot,isThenable:function(e){return e&&(Mg(e)||Eg(e))&&Eg(e.then)&&Eg(e.catch)}};function ct(e,g,t,n,I){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",g&&(this.code=g),t&&(this.config=t),n&&(this.request=n),I&&(this.response=I)}rt.inherits(ct,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:rt.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var it=ct.prototype,st={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((function(e){st[e]={value:e}})),Object.defineProperties(ct,st),Object.defineProperty(it,"isAxiosError",{value:!0}),ct.from=function(e,g,t,n,I,C){var l=Object.create(it);return rt.toFlatObject(e,l,(function(e){return e!==Error.prototype}),(function(e){return"isAxiosError"!==e})),ct.call(l,e.message,g,t,n,I),l.cause=e,l.name=e.name,C&&Object.assign(l,C),l};var At=ct;function dt(e){return rt.isPlainObject(e)||rt.isArray(e)}function ut(e){return rt.endsWith(e,"[]")?e.slice(0,-2):e}function mt(e,g,t){return e?e.concat(g).map((function(e,g){return e=ut(e),!t&&g?"["+e+"]":e})).join(t?".":""):g}var bt=rt.toFlatObject(rt,{},null,(function(e){return/^is[A-Z]/.test(e)}));var Zt=function(e,g,t){if(!rt.isObject(e))throw new TypeError("target must be an object");g=g||new FormData;var n=(t=rt.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,g){return!rt.isUndefined(g[e])}))).metaTokens,I=t.visitor||r,C=t.dots,l=t.indexes,a=(t.Blob||"undefined"!==typeof Blob&&Blob)&&rt.isSpecCompliantForm(g);if(!rt.isFunction(I))throw new TypeError("visitor must be a function");function o(e){if(null===e)return"";if(rt.isDate(e))return e.toISOString();if(!a&&rt.isBlob(e))throw new At("Blob is not supported. Use a Buffer instead.");return rt.isArrayBuffer(e)||rt.isTypedArray(e)?a&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function r(e,t,I){var a=e;if(e&&!I&&"object"===typeof e)if(rt.endsWith(t,"{}"))t=n?t:t.slice(0,-2),e=JSON.stringify(e);else if(rt.isArray(e)&&function(e){return rt.isArray(e)&&!e.some(dt)}(e)||(rt.isFileList(e)||rt.endsWith(t,"[]"))&&(a=rt.toArray(e)))return t=ut(t),a.forEach((function(e,n){!rt.isUndefined(e)&&null!==e&&g.append(!0===l?mt([t],n,C):null===l?t:t+"[]",o(e))})),!1;return!!dt(e)||(g.append(mt(I,t,C),o(e)),!1)}var c=[],i=Object.assign(bt,{defaultVisitor:r,convertValue:o,isVisitable:dt});if(!rt.isObject(e))throw new TypeError("data must be an object");return function e(t,n){if(!rt.isUndefined(t)){if(-1!==c.indexOf(t))throw Error("Circular reference detected in "+n.join("."));c.push(t),rt.forEach(t,(function(t,C){!0===(!(rt.isUndefined(t)||null===t)&&I.call(g,t,rt.isString(C)?C.trim():C,n,i))&&e(t,n?n.concat(C):[C])})),c.pop()}}(e),g};function ht(e){var g={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return g[e]}))}function pt(e,g){this._pairs=[],e&&Zt(e,this,g)}var Gt=pt.prototype;Gt.append=function(e,g){this._pairs.push([e,g])},Gt.toString=function(e){var g=e?function(g){return e.call(this,g,ht)}:ht;return this._pairs.map((function(e){return g(e[0])+"="+g(e[1])}),"").join("&")};var yt=pt;function Bt(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function ft(e,g,t){if(!g)return e;var n,I=t&&t.encode||Bt,C=t&&t.serialize;if(n=C?C(g,t):rt.isURLSearchParams(g)?g.toString():new yt(g,t).toString(I)){var l=e.indexOf("#");-1!==l&&(e=e.slice(0,l)),e+=(-1===e.indexOf("?")?"?":"&")+n}return e}var St=function(){function e(){s(this,e),this.handlers=[]}return m(e,[{key:"use",value:function(e,g,t){return this.handlers.push({fulfilled:e,rejected:g,synchronous:!!t&&t.synchronous,runWhen:t?t.runWhen:null}),this.handlers.length-1}},{key:"eject",value:function(e){this.handlers[e]&&(this.handlers[e]=null)}},{key:"clear",value:function(){this.handlers&&(this.handlers=[])}},{key:"forEach",value:function(e){rt.forEach(this.handlers,(function(g){null!==g&&e(g)}))}}]),e}(),vt=St,Wt={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Vt={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:yt,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},isStandardBrowserEnv:function(){var e;return("undefined"===typeof navigator||"ReactNative"!==(e=navigator.product)&&"NativeScript"!==e&&"NS"!==e)&&("undefined"!==typeof window&&"undefined"!==typeof document)}(),isStandardBrowserWebWorkerEnv:"undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,protocols:["http","https","file","blob","url","data"]};var Rt=function(e){function g(e,t,n,I){var C=e[I++],l=Number.isFinite(+C),a=I>=e.length;return C=!C&&rt.isArray(n)?n.length:C,a?(rt.hasOwnProp(n,C)?n[C]=[n[C],t]:n[C]=t,!l):(n[C]&&rt.isObject(n[C])||(n[C]=[]),g(e,t,n[C],I)&&rt.isArray(n[C])&&(n[C]=function(e){var g,t,n={},I=Object.keys(e),C=I.length;for(g=0;g<C;g++)n[t=I[g]]=e[t];return n}(n[C])),!l)}if(rt.isFormData(e)&&rt.isFunction(e.entries)){var t={};return rt.forEachEntry(e,(function(e,n){g(function(e){return rt.matchAll(/\w+|\[(\w*)]/g,e).map((function(e){return"[]"===e[0]?"":e[1]||e[0]}))}(e),n,t,0)})),t}return null},kt={"Content-Type":void 0};var Xt={transitional:Wt,adapter:["xhr","http"],transformRequest:[function(e,g){var t,n=g.getContentType()||"",I=n.indexOf("application/json")>-1,C=rt.isObject(e);if(C&&rt.isHTMLForm(e)&&(e=new FormData(e)),rt.isFormData(e))return I&&I?JSON.stringify(Rt(e)):e;if(rt.isArrayBuffer(e)||rt.isBuffer(e)||rt.isStream(e)||rt.isFile(e)||rt.isBlob(e))return e;if(rt.isArrayBufferView(e))return e.buffer;if(rt.isURLSearchParams(e))return g.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();if(C){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,g){return Zt(e,new Vt.classes.URLSearchParams,Object.assign({visitor:function(e,g,t,n){return Vt.isNode&&rt.isBuffer(e)?(this.append(g,e.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)}},g))}(e,this.formSerializer).toString();if((t=rt.isFileList(e))||n.indexOf("multipart/form-data")>-1){var l=this.env&&this.env.FormData;return Zt(t?{"files[]":e}:e,l&&new l,this.formSerializer)}}return C||I?(g.setContentType("application/json",!1),function(e,g,t){if(rt.isString(e))try{return(g||JSON.parse)(e),rt.trim(e)}catch(Oe){if("SyntaxError"!==Oe.name)throw Oe}return(t||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var g=this.transitional||Xt.transitional,t=g&&g.forcedJSONParsing,n="json"===this.responseType;if(e&&rt.isString(e)&&(t&&!this.responseType||n)){var I=!(g&&g.silentJSONParsing)&&n;try{return JSON.parse(e)}catch(Oe){if(I){if("SyntaxError"===Oe.name)throw At.from(Oe,At.ERR_BAD_RESPONSE,this,null,this.response);throw Oe}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Vt.classes.FormData,Blob:Vt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};rt.forEach(["delete","get","head"],(function(e){Xt.headers[e]={}})),rt.forEach(["post","put","patch"],(function(e){Xt.headers[e]=rt.merge(kt)}));var Jt=Xt,Yt=rt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Ht=Symbol("internals");function wt(e){return e&&String(e).trim().toLowerCase()}function Nt(e){return!1===e||null==e?e:rt.isArray(e)?e.map(Nt):String(e)}function Kt(e,g,t,n,I){return rt.isFunction(n)?n.call(this,g,t):(I&&(g=t),rt.isString(g)?rt.isString(n)?-1!==g.indexOf(n):rt.isRegExp(n)?n.test(g):void 0:void 0)}var Ft=function(e,g){function t(e){s(this,t),e&&this.set(e)}return m(t,[{key:"set",value:function(e,g,t){var n=this;function I(e,g,t){var I=wt(g);if(!I)throw new Error("header name must be a non-empty string");var C=rt.findKey(n,I);(!C||void 0===n[C]||!0===t||void 0===t&&!1!==n[C])&&(n[C||g]=Nt(e))}var C=function(e,g){return rt.forEach(e,(function(e,t){return I(e,t,g)}))};return rt.isPlainObject(e)||e instanceof this.constructor?C(e,g):rt.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim())?C(function(e){var g,t,n,I={};return e&&e.split("\n").forEach((function(e){n=e.indexOf(":"),g=e.substring(0,n).trim().toLowerCase(),t=e.substring(n+1).trim(),!g||I[g]&&Yt[g]||("set-cookie"===g?I[g]?I[g].push(t):I[g]=[t]:I[g]=I[g]?I[g]+", "+t:t)})),I}(e),g):null!=e&&I(g,e,t),this}},{key:"get",value:function(e,g){if(e=wt(e)){var t=rt.findKey(this,e);if(t){var n=this[t];if(!g)return n;if(!0===g)return function(e){for(var g,t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;g=n.exec(e);)t[g[1]]=g[2];return t}(n);if(rt.isFunction(g))return g.call(this,n,t);if(rt.isRegExp(g))return g.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}},{key:"has",value:function(e,g){if(e=wt(e)){var t=rt.findKey(this,e);return!(!t||void 0===this[t]||g&&!Kt(0,this[t],t,g))}return!1}},{key:"delete",value:function(e,g){var t=this,n=!1;function I(e){if(e=wt(e)){var I=rt.findKey(t,e);!I||g&&!Kt(0,t[I],I,g)||(delete t[I],n=!0)}}return rt.isArray(e)?e.forEach(I):I(e),n}},{key:"clear",value:function(e){for(var g=Object.keys(this),t=g.length,n=!1;t--;){var I=g[t];e&&!Kt(0,this[I],I,e,!0)||(delete this[I],n=!0)}return n}},{key:"normalize",value:function(e){var g=this,t={};return rt.forEach(this,(function(n,I){var C=rt.findKey(t,I);if(C)return g[C]=Nt(n),void delete g[I];var l=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(function(e,g,t){return g.toUpperCase()+t}))}(I):String(I).trim();l!==I&&delete g[I],g[l]=Nt(n),t[l]=!0})),this}},{key:"concat",value:function(){for(var e,g=arguments.length,t=new Array(g),n=0;n<g;n++)t[n]=arguments[n];return(e=this.constructor).concat.apply(e,[this].concat(t))}},{key:"toJSON",value:function(e){var g=Object.create(null);return rt.forEach(this,(function(t,n){null!=t&&!1!==t&&(g[n]=e&&rt.isArray(t)?t.join(", "):t)})),g}},{key:Symbol.iterator,value:function(){return Object.entries(this.toJSON())[Symbol.iterator]()}},{key:"toString",value:function(){return Object.entries(this.toJSON()).map((function(e){var g=r(e,2);return g[0]+": "+g[1]})).join("\n")}},{key:Symbol.toStringTag,get:function(){return"AxiosHeaders"}}],[{key:"from",value:function(e){return e instanceof this?e:new this(e)}},{key:"concat",value:function(e){for(var g=new this(e),t=arguments.length,n=new Array(t>1?t-1:0),I=1;I<t;I++)n[I-1]=arguments[I];return n.forEach((function(e){return g.set(e)})),g}},{key:"accessor",value:function(e){var g=(this[Ht]=this[Ht]={accessors:{}}).accessors,t=this.prototype;function n(e){var n=wt(e);g[n]||(!function(e,g){var t=rt.toCamelCase(" "+g);["get","set","has"].forEach((function(n){Object.defineProperty(e,n+t,{value:function(e,t,I){return this[n].call(this,g,e,t,I)},configurable:!0})}))}(t,e),g[n]=!0)}return rt.isArray(e)?e.forEach(n):n(e),this}}]),t}();Ft.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),rt.freezeMethods(Ft.prototype),rt.freezeMethods(Ft);var xt=Ft;function Et(e,g){var t=this||Jt,n=g||t,I=xt.from(n.headers),C=n.data;return rt.forEach(e,(function(e){C=e.call(t,C,I.normalize(),g?g.status:void 0)})),I.normalize(),C}function zt(e){return!(!e||!e.__CANCEL__)}function Mt(e,g,t){At.call(this,null==e?"canceled":e,At.ERR_CANCELED,g,t),this.name="CanceledError"}rt.inherits(Mt,At,{__CANCEL__:!0});var Ut=Mt;var Dt=Vt.isStandardBrowserEnv?{write:function(e,g,t,n,I,C){var l=[];l.push(e+"="+encodeURIComponent(g)),rt.isNumber(t)&&l.push("expires="+new Date(t).toGMTString()),rt.isString(n)&&l.push("path="+n),rt.isString(I)&&l.push("domain="+I),!0===C&&l.push("secure"),document.cookie=l.join("; ")},read:function(e){var g=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return g?decodeURIComponent(g[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}};function Qt(e,g){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(g)?function(e,g){return g?e.replace(/\/+$/,"")+"/"+g.replace(/^\/+/,""):e}(e,g):g}var Lt=Vt.isStandardBrowserEnv?function(){var e,g=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");function n(e){var n=e;return g&&(t.setAttribute("href",n),n=t.href),t.setAttribute("href",n),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return e=n(window.location.href),function(g){var t=rt.isString(g)?n(g):g;return t.protocol===e.protocol&&t.host===e.host}}():function(){return!0};var Tt=function(e,g){e=e||10;var t,n=new Array(e),I=new Array(e),C=0,l=0;return g=void 0!==g?g:1e3,function(a){var o=Date.now(),r=I[l];t||(t=o),n[C]=a,I[C]=o;for(var c=l,i=0;c!==C;)i+=n[c++],c%=e;if((C=(C+1)%e)===l&&(l=(l+1)%e),!(o-t<g)){var s=r&&o-r;return s?Math.round(1e3*i/s):void 0}}};function jt(e,g){var t=0,n=Tt(50,250);return function(I){var C=I.loaded,l=I.lengthComputable?I.total:void 0,a=C-t,o=n(a);t=C;var r={loaded:C,total:l,progress:l?C/l:void 0,bytes:a,rate:o||void 0,estimated:o&&l&&C<=l?(l-C)/o:void 0,event:I};r[g?"download":"upload"]=!0,e(r)}}var Ot="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(g,t){var n,I=e.data,C=xt.from(e.headers).normalize(),l=e.responseType;function a(){e.cancelToken&&e.cancelToken.unsubscribe(n),e.signal&&e.signal.removeEventListener("abort",n)}rt.isFormData(I)&&(Vt.isStandardBrowserEnv||Vt.isStandardBrowserWebWorkerEnv?C.setContentType(!1):C.setContentType("multipart/form-data;",!1));var o=new XMLHttpRequest;if(e.auth){var r=e.auth.username||"",c=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";C.set("Authorization","Basic "+btoa(r+":"+c))}var i=Qt(e.baseURL,e.url);function s(){if(o){var n=xt.from("getAllResponseHeaders"in o&&o.getAllResponseHeaders());!function(e,g,t){var n=t.config.validateStatus;t.status&&n&&!n(t.status)?g(new At("Request failed with status code "+t.status,[At.ERR_BAD_REQUEST,At.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t)):e(t)}((function(e){g(e),a()}),(function(e){t(e),a()}),{data:l&&"text"!==l&&"json"!==l?o.response:o.responseText,status:o.status,statusText:o.statusText,headers:n,config:e,request:o}),o=null}}if(o.open(e.method.toUpperCase(),ft(i,e.params,e.paramsSerializer),!0),o.timeout=e.timeout,"onloadend"in o?o.onloadend=s:o.onreadystatechange=function(){o&&4===o.readyState&&(0!==o.status||o.responseURL&&0===o.responseURL.indexOf("file:"))&&setTimeout(s)},o.onabort=function(){o&&(t(new At("Request aborted",At.ECONNABORTED,e,o)),o=null)},o.onerror=function(){t(new At("Network Error",At.ERR_NETWORK,e,o)),o=null},o.ontimeout=function(){var g=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",n=e.transitional||Wt;e.timeoutErrorMessage&&(g=e.timeoutErrorMessage),t(new At(g,n.clarifyTimeoutError?At.ETIMEDOUT:At.ECONNABORTED,e,o)),o=null},Vt.isStandardBrowserEnv){var A=(e.withCredentials||Lt(i))&&e.xsrfCookieName&&Dt.read(e.xsrfCookieName);A&&C.set(e.xsrfHeaderName,A)}void 0===I&&C.setContentType(null),"setRequestHeader"in o&&rt.forEach(C.toJSON(),(function(e,g){o.setRequestHeader(g,e)})),rt.isUndefined(e.withCredentials)||(o.withCredentials=!!e.withCredentials),l&&"json"!==l&&(o.responseType=e.responseType),"function"===typeof e.onDownloadProgress&&o.addEventListener("progress",jt(e.onDownloadProgress,!0)),"function"===typeof e.onUploadProgress&&o.upload&&o.upload.addEventListener("progress",jt(e.onUploadProgress)),(e.cancelToken||e.signal)&&(n=function(g){o&&(t(!g||g.type?new Ut(null,e,o):g),o.abort(),o=null)},e.cancelToken&&e.cancelToken.subscribe(n),e.signal&&(e.signal.aborted?n():e.signal.addEventListener("abort",n)));var d=function(e){var g=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return g&&g[1]||""}(i);d&&-1===Vt.protocols.indexOf(d)?t(new At("Unsupported protocol "+d+":",At.ERR_BAD_REQUEST,e)):o.send(I||null)}))},Pt={http:null,xhr:Ot};rt.forEach(Pt,(function(e,g){if(e){try{Object.defineProperty(e,"name",{value:g})}catch(Oe){}Object.defineProperty(e,"adapterName",{value:g})}}));var _t=function(e){for(var g,t,n=(e=rt.isArray(e)?e:[e]).length,I=0;I<n&&(g=e[I],!(t=rt.isString(g)?Pt[g.toLowerCase()]:g));I++);if(!t){if(!1===t)throw new At("Adapter ".concat(g," is not supported by the environment"),"ERR_NOT_SUPPORT");throw new Error(rt.hasOwnProp(Pt,g)?"Adapter '".concat(g,"' is not available in the build"):"Unknown adapter '".concat(g,"'"))}if(!rt.isFunction(t))throw new TypeError("adapter is not a function");return t};function qt(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Ut(null,e)}function $t(e){return qt(e),e.headers=xt.from(e.headers),e.data=Et.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),_t(e.adapter||Jt.adapter)(e).then((function(g){return qt(e),g.data=Et.call(e,e.transformResponse,g),g.headers=xt.from(g.headers),g}),(function(g){return zt(g)||(qt(e),g&&g.response&&(g.response.data=Et.call(e,e.transformResponse,g.response),g.response.headers=xt.from(g.response.headers))),Promise.reject(g)}))}var en=function(e){return e instanceof xt?e.toJSON():e};function gn(e,g){g=g||{};var t={};function n(e,g,t){return rt.isPlainObject(e)&&rt.isPlainObject(g)?rt.merge.call({caseless:t},e,g):rt.isPlainObject(g)?rt.merge({},g):rt.isArray(g)?g.slice():g}function I(e,g,t){return rt.isUndefined(g)?rt.isUndefined(e)?void 0:n(void 0,e,t):n(e,g,t)}function C(e,g){if(!rt.isUndefined(g))return n(void 0,g)}function l(e,g){return rt.isUndefined(g)?rt.isUndefined(e)?void 0:n(void 0,e):n(void 0,g)}function a(t,I,C){return C in g?n(t,I):C in e?n(void 0,t):void 0}var o={url:C,method:C,data:C,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:a,headers:function(e,g){return I(en(e),en(g),!0)}};return rt.forEach(Object.keys(Object.assign({},e,g)),(function(n){var C=o[n]||I,l=C(e[n],g[n],n);rt.isUndefined(l)&&C!==a||(t[n]=l)})),t}var tn="1.4.0",nn={};["object","boolean","number","function","string","symbol"].forEach((function(e,g){nn[e]=function(t){return typeof t===e||"a"+(g<1?"n ":" ")+e}}));var In={};nn.transitional=function(e,g,t){function n(e,g){return"[Axios v1.4.0] Transitional option '"+e+"'"+g+(t?". "+t:"")}return function(t,I,C){if(!1===e)throw new At(n(I," has been removed"+(g?" in "+g:"")),At.ERR_DEPRECATED);return g&&!In[I]&&(In[I]=!0,console.warn(n(I," has been deprecated since v"+g+" and will be removed in the near future"))),!e||e(t,I,C)}};var Cn={assertOptions:function(e,g,t){if("object"!==typeof e)throw new At("options must be an object",At.ERR_BAD_OPTION_VALUE);for(var n=Object.keys(e),I=n.length;I-- >0;){var C=n[I],l=g[C];if(l){var a=e[C],o=void 0===a||l(a,C,e);if(!0!==o)throw new At("option "+C+" must be "+o,At.ERR_BAD_OPTION_VALUE)}else if(!0!==t)throw new At("Unknown option "+C,At.ERR_BAD_OPTION)}},validators:nn},ln=Cn.validators,an=function(){function e(g){s(this,e),this.defaults=g,this.interceptors={request:new vt,response:new vt}}return m(e,[{key:"request",value:function(e,g){"string"===typeof e?(g=g||{}).url=e:g=e||{};var t,n=g=gn(this.defaults,g),I=n.transitional,C=n.paramsSerializer,l=n.headers;void 0!==I&&Cn.assertOptions(I,{silentJSONParsing:ln.transitional(ln.boolean),forcedJSONParsing:ln.transitional(ln.boolean),clarifyTimeoutError:ln.transitional(ln.boolean)},!1),null!=C&&(rt.isFunction(C)?g.paramsSerializer={serialize:C}:Cn.assertOptions(C,{encode:ln.function,serialize:ln.function},!0)),g.method=(g.method||this.defaults.method||"get").toLowerCase(),(t=l&&rt.merge(l.common,l[g.method]))&&rt.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete l[e]})),g.headers=xt.concat(t,l);var a=[],o=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(g)||(o=o&&e.synchronous,a.unshift(e.fulfilled,e.rejected))}));var r,c=[];this.interceptors.response.forEach((function(e){c.push(e.fulfilled,e.rejected)}));var i,s=0;if(!o){var A=[$t.bind(this),void 0];for(A.unshift.apply(A,a),A.push.apply(A,c),i=A.length,r=Promise.resolve(g);s<i;)r=r.then(A[s++],A[s++]);return r}i=a.length;var d=g;for(s=0;s<i;){var u=a[s++],m=a[s++];try{d=u(d)}catch(b){m.call(this,b);break}}try{r=$t.call(this,d)}catch(b){return Promise.reject(b)}for(s=0,i=c.length;s<i;)r=r.then(c[s++],c[s++]);return r}},{key:"getUri",value:function(e){return ft(Qt((e=gn(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}]),e}();rt.forEach(["delete","get","head","options"],(function(e){an.prototype[e]=function(g,t){return this.request(gn(t||{},{method:e,url:g,data:(t||{}).data}))}})),rt.forEach(["post","put","patch"],(function(e){function g(g){return function(t,n,I){return this.request(gn(I||{},{method:e,headers:g?{"Content-Type":"multipart/form-data"}:{},url:t,data:n}))}}an.prototype[e]=g(),an.prototype[e+"Form"]=g(!0)}));var on=an,rn=function(){function e(g){if(s(this,e),"function"!==typeof g)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;this.promise.then((function(e){if(n._listeners){for(var g=n._listeners.length;g-- >0;)n._listeners[g](e);n._listeners=null}})),this.promise.then=function(e){var g,t=new Promise((function(e){n.subscribe(e),g=e})).then(e);return t.cancel=function(){n.unsubscribe(g)},t},g((function(e,g,I){n.reason||(n.reason=new Ut(e,g,I),t(n.reason))}))}return m(e,[{key:"throwIfRequested",value:function(){if(this.reason)throw this.reason}},{key:"subscribe",value:function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}},{key:"unsubscribe",value:function(e){if(this._listeners){var g=this._listeners.indexOf(e);-1!==g&&this._listeners.splice(g,1)}}}],[{key:"source",value:function(){var g;return{token:new e((function(e){g=e})),cancel:g}}}]),e}(),cn=rn;var sn={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(sn).forEach((function(e){var g=r(e,2),t=g[0],n=g[1];sn[n]=t}));var An=sn;var dn=function e(g){var t=new on(g),n=Rg(on.prototype.request,t);return rt.extend(n,on.prototype,t,{allOwnKeys:!0}),rt.extend(n,t,null,{allOwnKeys:!0}),n.create=function(t){return e(gn(g,t))},n}(Jt);dn.Axios=on,dn.CanceledError=Ut,dn.CancelToken=cn,dn.isCancel=zt,dn.VERSION=tn,dn.toFormData=Zt,dn.AxiosError=At,dn.Cancel=dn.CanceledError,dn.all=function(e){return Promise.all(e)},dn.spread=function(e){return function(g){return e.apply(null,g)}},dn.isAxiosError=function(e){return rt.isObject(e)&&!0===e.isAxiosError},dn.mergeConfig=gn,dn.AxiosHeaders=xt,dn.formToJSON=function(e){return Rt(rt.isHTMLForm(e)?new FormData(e):e)},dn.HttpStatusCode=An,dn.default=dn;var un=dn;function mn(e,g){if(null==e)return{};var t,n,I={},C=Object.keys(e);for(n=0;n<C.length;n++)t=C[n],g.indexOf(t)>=0||(I[t]=e[t]);return I}function bn(e,g){if(null==e)return{};var t,n,I=mn(e,g);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(e);for(n=0;n<C.length;n++)t=C[n],g.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(I[t]=e[t])}return I}function Zn(e){var g,t,n="";if("string"==typeof e||"number"==typeof e)n+=e;else if("object"==typeof e)if(Array.isArray(e))for(g=0;g<e.length;g++)e[g]&&(t=Zn(e[g]))&&(n&&(n+=" "),n+=t);else for(g in e)e[g]&&(n&&(n+=" "),n+=g);return n}var hn=function(){for(var e,g,t=0,n="";t<arguments.length;)(e=arguments[t++])&&(g=Zn(e))&&(n&&(n+=" "),n+=g);return n},pn=["theme","type"],Gn=["delay","staleId"],yn=function(e){return"number"==typeof e&&!isNaN(e)},Bn=function(e){return"string"==typeof e},fn=function(e){return"function"==typeof e},Sn=function(e){return Bn(e)||fn(e)?e:null},vn=function(e){return(0,g.isValidElement)(e)||Bn(e)||fn(e)||yn(e)};function Wn(e){var t=e.enter,n=e.exit,I=e.appendPosition,C=void 0!==I&&I,l=e.collapse,a=void 0===l||l,o=e.collapseDuration,r=void 0===o?300:o;return function(e){var I=e.children,l=e.position,o=e.preventExitTransition,c=e.done,s=e.nodeRef,A=e.isIn,d=C?"".concat(t,"--").concat(l):t,u=C?"".concat(n,"--").concat(l):n,m=(0,g.useRef)(0);return(0,g.useLayoutEffect)((function(){var e,g=s.current,t=d.split(" "),n=function e(n){var I;n.target===s.current&&(g.dispatchEvent(new Event("d")),g.removeEventListener("animationend",e),g.removeEventListener("animationcancel",e),0===m.current&&"animationcancel"!==n.type&&(I=g.classList).remove.apply(I,i(t)))};(e=g.classList).add.apply(e,i(t)),g.addEventListener("animationend",n),g.addEventListener("animationcancel",n)}),[]),(0,g.useEffect)((function(){var e=s.current,g=function g(){e.removeEventListener("animationend",g),a?function(e,g,t){void 0===t&&(t=300);var n=e.scrollHeight,I=e.style;requestAnimationFrame((function(){I.minHeight="initial",I.height=n+"px",I.transition="all ".concat(t,"ms"),requestAnimationFrame((function(){I.height="0",I.padding="0",I.margin="0",setTimeout(g,t)}))}))}(e,c,r):c()};A||(o?g():(m.current=1,e.className+=" ".concat(u),e.addEventListener("animationend",g)))}),[A]),g.createElement(g.Fragment,null,I)}}function Vn(e,g){return null!=e?{content:e.content,containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,status:g}:{}}var Rn={list:new Map,emitQueue:new Map,on:function(e,g){return this.list.has(e)||this.list.set(e,[]),this.list.get(e).push(g),this},off:function(e,g){if(g){var t=this.list.get(e).filter((function(e){return e!==g}));return this.list.set(e,t),this}return this.list.delete(e),this},cancelEmit:function(e){var g=this.emitQueue.get(e);return g&&(g.forEach(clearTimeout),this.emitQueue.delete(e)),this},emit:function(e){var g=arguments,t=this;this.list.has(e)&&this.list.get(e).forEach((function(n){var I=setTimeout((function(){n.apply(void 0,i([].slice.call(g,1)))}),0);t.emitQueue.has(e)||t.emitQueue.set(e,[]),t.emitQueue.get(e).push(I)}))}},kn=function(e){var t=e.theme,n=e.type,I=bn(e,pn);return g.createElement("svg",rg({viewBox:"0 0 24 24",width:"100%",height:"100%",fill:"colored"===t?"currentColor":"var(--toastify-icon-color-".concat(n,")")},I))},Xn={info:function(e){return g.createElement(kn,rg({},e),g.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(e){return g.createElement(kn,rg({},e),g.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(e){return g.createElement(kn,rg({},e),g.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(e){return g.createElement(kn,rg({},e),g.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return g.createElement("div",{className:"Toastify__spinner"})}};function Jn(e){var t=(0,g.useReducer)((function(e){return e+1}),0),n=r(t,2)[1],I=r((0,g.useState)([]),2),C=I[0],l=I[1],a=(0,g.useRef)(null),o=(0,g.useRef)(new Map).current,c=function(e){return-1!==C.indexOf(e)},s=(0,g.useRef)({toastKey:1,displayedToast:0,count:0,queue:[],props:e,containerId:null,isToastActive:c,getToast:function(e){return o.get(e)}}).current;function A(e){var g=e.containerId;!s.props.limit||g&&s.containerId!==g||(s.count-=s.queue.length,s.queue=[])}function d(e){l((function(g){return null==e?[]:g.filter((function(g){return g!==e}))}))}function u(){var e=s.queue.shift();b(e.toastContent,e.toastProps,e.staleId)}function m(e,t){var I=t.delay,C=t.staleId,l=bn(t,Gn);if(vn(e)&&!function(e){return!a.current||s.props.enableMultiContainer&&e.containerId!==s.props.containerId||o.has(e.toastId)&&null==e.updateId}(l)){var c=l.toastId,i=l.updateId,A=l.data,m=s.props,Z=function(){return d(c)},h=null==i;h&&s.count++;var p,G,y=rg(rg(rg({},m),{},{style:m.toastStyle,key:s.toastKey++},Object.fromEntries(Object.entries(l).filter((function(e){var g=r(e,2);g[0];return null!=g[1]})))),{},{toastId:c,updateId:i,data:A,closeToast:Z,isIn:!1,className:Sn(l.className||m.toastClassName),bodyClassName:Sn(l.bodyClassName||m.bodyClassName),progressClassName:Sn(l.progressClassName||m.progressClassName),autoClose:!l.isLoading&&(p=l.autoClose,G=m.autoClose,!1===p||yn(p)&&p>0?p:G),deleteToast:function(){var e=Vn(o.get(c),"removed");o.delete(c),Rn.emit(4,e);var g=s.queue.length;if(s.count=null==c?s.count-s.displayedToast:s.count-1,s.count<0&&(s.count=0),g>0){var t=null==c?s.props.limit:1;if(1===g||1===t)s.displayedToast++,u();else{var I=t>g?g:t;s.displayedToast=I;for(var C=0;C<I;C++)u()}}else n()}});y.iconOut=function(e){var t=e.theme,n=e.type,I=e.isLoading,C=e.icon,l=null,a={theme:t,type:n};return!1===C||(fn(C)?l=C(a):(0,g.isValidElement)(C)?l=(0,g.cloneElement)(C,a):Bn(C)||yn(C)?l=C:I?l=Xn.spinner():function(e){return e in Xn}(n)&&(l=Xn[n](a))),l}(y),fn(l.onOpen)&&(y.onOpen=l.onOpen),fn(l.onClose)&&(y.onClose=l.onClose),y.closeButton=m.closeButton,!1===l.closeButton||vn(l.closeButton)?y.closeButton=l.closeButton:!0===l.closeButton&&(y.closeButton=!vn(m.closeButton)||m.closeButton);var B=e;(0,g.isValidElement)(e)&&!Bn(e.type)?B=(0,g.cloneElement)(e,{closeToast:Z,toastProps:y,data:A}):fn(e)&&(B=e({closeToast:Z,toastProps:y,data:A})),m.limit&&m.limit>0&&s.count>m.limit&&h?s.queue.push({toastContent:B,toastProps:y,staleId:C}):yn(I)?setTimeout((function(){b(B,y,C)}),I):b(B,y,C)}}function b(e,g,t){var n=g.toastId;t&&o.delete(t);var I={content:e,props:g};o.set(n,I),l((function(e){return[].concat(i(e),[n]).filter((function(e){return e!==t}))})),Rn.emit(4,Vn(I,null==I.props.updateId?"added":"updated"))}return(0,g.useEffect)((function(){return s.containerId=e.containerId,Rn.cancelEmit(3).on(0,m).on(1,(function(e){return a.current&&d(e)})).on(5,A).emit(2,s),function(){o.clear(),Rn.emit(3,s)}}),[]),(0,g.useEffect)((function(){s.props=e,s.isToastActive=c,s.displayedToast=C.length})),{getToastToRender:function(g){var t=new Map,n=Array.from(o.values());return e.newestOnTop&&n.reverse(),n.forEach((function(e){var g=e.props.position;t.has(g)||t.set(g,[]),t.get(g).push(e)})),Array.from(t,(function(e){return g(e[0],e[1])}))},containerRef:a,isToastActive:c}}function Yn(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientX:e.clientX}function Hn(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientY:e.clientY}function wn(e){var t=r((0,g.useState)(!1),2),n=t[0],I=t[1],C=r((0,g.useState)(!1),2),l=C[0],a=C[1],o=(0,g.useRef)(null),c=(0,g.useRef)({start:0,x:0,y:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,boundingRect:null,didMove:!1}).current,i=(0,g.useRef)(e),s=e.autoClose,A=e.pauseOnHover,d=e.closeToast,u=e.onClick,m=e.closeOnClick;function b(g){if(e.draggable){"touchstart"===g.nativeEvent.type&&g.nativeEvent.preventDefault(),c.didMove=!1,document.addEventListener("mousemove",G),document.addEventListener("mouseup",y),document.addEventListener("touchmove",G),document.addEventListener("touchend",y);var t=o.current;c.canCloseOnClick=!0,c.canDrag=!0,c.boundingRect=t.getBoundingClientRect(),t.style.transition="",c.x=Yn(g.nativeEvent),c.y=Hn(g.nativeEvent),"x"===e.draggableDirection?(c.start=c.x,c.removalDistance=t.offsetWidth*(e.draggablePercent/100)):(c.start=c.y,c.removalDistance=t.offsetHeight*(80===e.draggablePercent?1.5*e.draggablePercent:e.draggablePercent/100))}}function Z(g){if(c.boundingRect){var t=c.boundingRect,n=t.top,I=t.bottom,C=t.left,l=t.right;"touchend"!==g.nativeEvent.type&&e.pauseOnHover&&c.x>=C&&c.x<=l&&c.y>=n&&c.y<=I?p():h()}}function h(){I(!0)}function p(){I(!1)}function G(g){var t=o.current;c.canDrag&&t&&(c.didMove=!0,n&&p(),c.x=Yn(g),c.y=Hn(g),c.delta="x"===e.draggableDirection?c.x-c.start:c.y-c.start,c.start!==c.x&&(c.canCloseOnClick=!1),t.style.transform="translate".concat(e.draggableDirection,"(").concat(c.delta,"px)"),t.style.opacity=""+(1-Math.abs(c.delta/c.removalDistance)))}function y(){document.removeEventListener("mousemove",G),document.removeEventListener("mouseup",y),document.removeEventListener("touchmove",G),document.removeEventListener("touchend",y);var g=o.current;if(c.canDrag&&c.didMove&&g){if(c.canDrag=!1,Math.abs(c.delta)>c.removalDistance)return a(!0),void e.closeToast();g.style.transition="transform 0.2s, opacity 0.2s",g.style.transform="translate".concat(e.draggableDirection,"(0)"),g.style.opacity="1"}}(0,g.useEffect)((function(){i.current=e})),(0,g.useEffect)((function(){return o.current&&o.current.addEventListener("d",h,{once:!0}),fn(e.onOpen)&&e.onOpen((0,g.isValidElement)(e.children)&&e.children.props),function(){var e=i.current;fn(e.onClose)&&e.onClose((0,g.isValidElement)(e.children)&&e.children.props)}}),[]),(0,g.useEffect)((function(){return e.pauseOnFocusLoss&&(document.hasFocus()||p(),window.addEventListener("focus",h),window.addEventListener("blur",p)),function(){e.pauseOnFocusLoss&&(window.removeEventListener("focus",h),window.removeEventListener("blur",p))}}),[e.pauseOnFocusLoss]);var B={onMouseDown:b,onTouchStart:b,onMouseUp:Z,onTouchEnd:Z};return s&&A&&(B.onMouseEnter=p,B.onMouseLeave=h),m&&(B.onClick=function(e){u&&u(e),c.canCloseOnClick&&d()}),{playToast:h,pauseToast:p,isRunning:n,preventExitTransition:l,toastRef:o,eventHandlers:B}}function Nn(e){var t=e.closeToast,n=e.theme,I=e.ariaLabel,C=void 0===I?"close":I;return g.createElement("button",{className:"Toastify__close-button Toastify__close-button--".concat(n),type:"button",onClick:function(e){e.stopPropagation(),t(e)},"aria-label":C},g.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},g.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function Kn(e){var t=e.delay,n=e.isRunning,I=e.closeToast,C=e.type,l=void 0===C?"default":C,a=e.hide,o=e.className,r=e.style,c=e.controlledProgress,i=e.progress,s=e.rtl,A=e.isIn,d=e.theme,u=a||c&&0===i,m=rg(rg({},r),{},{animationDuration:"".concat(t,"ms"),animationPlayState:n?"running":"paused",opacity:u?0:1});c&&(m.transform="scaleX(".concat(i,")"));var b=hn("Toastify__progress-bar",c?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated","Toastify__progress-bar-theme--".concat(d),"Toastify__progress-bar--".concat(l),{"Toastify__progress-bar--rtl":s}),Z=fn(o)?o({rtl:s,type:l,defaultClassName:b}):hn(b,o);return g.createElement("div",ag({role:"progressbar","aria-hidden":u?"true":"false","aria-label":"notification timer",className:Z,style:m},c&&i>=1?"onTransitionEnd":"onAnimationEnd",c&&i<1?null:function(){A&&I()}))}var Fn=function(e){var t=wn(e),n=t.isRunning,I=t.preventExitTransition,C=t.toastRef,l=t.eventHandlers,a=e.closeButton,o=e.children,r=e.autoClose,c=e.onClick,i=e.type,s=e.hideProgressBar,A=e.closeToast,d=e.transition,u=e.position,m=e.className,b=e.style,Z=e.bodyClassName,h=e.bodyStyle,p=e.progressClassName,G=e.progressStyle,y=e.updateId,B=e.role,f=e.progress,S=e.rtl,v=e.toastId,W=e.deleteToast,V=e.isIn,R=e.isLoading,k=e.iconOut,X=e.closeOnClick,J=e.theme,Y=hn("Toastify__toast","Toastify__toast-theme--".concat(J),"Toastify__toast--".concat(i),{"Toastify__toast--rtl":S},{"Toastify__toast--close-on-click":X}),H=fn(m)?m({rtl:S,position:u,type:i,defaultClassName:Y}):hn(Y,m),w=!!f||!r,N={closeToast:A,type:i,theme:J},K=null;return!1===a||(K=fn(a)?a(N):(0,g.isValidElement)(a)?(0,g.cloneElement)(a,N):Nn(N)),g.createElement(d,{isIn:V,done:W,position:u,preventExitTransition:I,nodeRef:C},g.createElement("div",rg(rg({id:v,onClick:c,className:H},l),{},{style:b,ref:C}),g.createElement("div",rg(rg({},V&&{role:B}),{},{className:fn(Z)?Z({type:i}):hn("Toastify__toast-body",Z),style:h}),null!=k&&g.createElement("div",{className:hn("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!R})},k),g.createElement("div",null,o)),K,g.createElement(Kn,rg(rg({},y&&!w?{key:"pb-".concat(y)}:{}),{},{rtl:S,theme:J,delay:r,isRunning:n,isIn:V,closeToast:A,hide:s,type:i,style:G,className:p,controlledProgress:w,progress:f||0}))))},xn=function(e,g){return void 0===g&&(g=!1),{enter:"Toastify--animate Toastify__".concat(e,"-enter"),exit:"Toastify--animate Toastify__".concat(e,"-exit"),appendPosition:g}},En=Wn(xn("bounce",!0)),zn=(Wn(xn("slide",!0)),Wn(xn("zoom")),Wn(xn("flip")),(0,g.forwardRef)((function(e,t){var n=Jn(e),I=n.getToastToRender,C=n.containerRef,l=n.isToastActive,a=e.className,o=e.style,r=e.rtl,c=e.containerId;function i(e){var g=hn("Toastify__toast-container","Toastify__toast-container--".concat(e),{"Toastify__toast-container--rtl":r});return fn(a)?a({position:e,rtl:r,defaultClassName:g}):hn(g,Sn(a))}return(0,g.useEffect)((function(){t&&(t.current=C.current)}),[]),g.createElement("div",{ref:C,className:"Toastify",id:c},I((function(e,t){var n=t.length?rg({},o):rg(rg({},o),{},{pointerEvents:"none"});return g.createElement("div",{className:i(e),style:n,key:"container-".concat(e)},t.map((function(e,n){var I=e.content,C=e.props;return g.createElement(Fn,rg(rg({},C),{},{isIn:l(C.toastId),style:rg(rg({},C.style),{},{"--nth":n+1,"--len":t.length}),key:"toast-".concat(C.key)}),I)})))})))})));zn.displayName="ToastContainer",zn.defaultProps={position:"top-right",transition:En,autoClose:5e3,closeButton:Nn,pauseOnHover:!0,pauseOnFocusLoss:!0,closeOnClick:!0,draggable:!0,draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};var Mn,Un=new Map,Dn=[],Qn=1;function Ln(){return""+Qn++}function Tn(e){return e&&(Bn(e.toastId)||yn(e.toastId))?e.toastId:Ln()}function jn(e,g){return Un.size>0?Rn.emit(0,e,g):Dn.push({content:e,options:g}),g.toastId}function On(e,g){return rg(rg({},g),{},{type:g&&g.type||e,toastId:Tn(g)})}function Pn(e){return function(g,t){return jn(g,On(e,t))}}function _n(e,g){return jn(e,On("default",g))}function qn(e){return pg({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256,8C119,8,8,119,8,256S119,504,256,504,504,393,504,256,393,8,256,8Zm92.49,313h0l-20,25a16,16,0,0,1-22.49,2.5h0l-67-49.72a40,40,0,0,1-15-31.23V112a16,16,0,0,1,16-16h32a16,16,0,0,1,16,16V256l58,42.5A16,16,0,0,1,348.49,321Z"}}]})(e)}function $n(e){return pg({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M0 224v272c0 8.84 7.16 16 16 16h80V192H32c-17.67 0-32 14.33-32 32zm360-48h-24v-40c0-4.42-3.58-8-8-8h-16c-4.42 0-8 3.58-8 8v64c0 4.42 3.58 8 8 8h48c4.42 0 8-3.58 8-8v-16c0-4.42-3.58-8-8-8zm137.75-63.96l-160-106.67a32.02 32.02 0 0 0-35.5 0l-160 106.67A32.002 32.002 0 0 0 128 138.66V512h128V368c0-8.84 7.16-16 16-16h96c8.84 0 16 7.16 16 16v144h128V138.67c0-10.7-5.35-20.7-14.25-26.63zM320 256c-44.18 0-80-35.82-80-80s35.82-80 80-80 80 35.82 80 80-35.82 80-80 80zm288-64h-64v320h80c8.84 0 16-7.16 16-16V224c0-17.67-14.33-32-32-32z"}}]})(e)}_n.loading=function(e,g){return jn(e,On("default",rg({isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1},g)))},_n.promise=function(e,g,t){var n,I=g.pending,C=g.error,l=g.success;I&&(n=Bn(I)?_n.loading(I,t):_n.loading(I.render,rg(rg({},t),I)));var a={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},o=function(e,g,I){if(null!=g){var C=rg(rg(rg({type:e},a),t),{},{data:I}),l=Bn(g)?{render:g}:g;return n?_n.update(n,rg(rg({},C),l)):_n(l.render,rg(rg({},C),l)),I}_n.dismiss(n)},r=fn(e)?e():e;return r.then((function(e){return o("success",l,e)})).catch((function(e){return o("error",C,e)})),r},_n.success=Pn("success"),_n.info=Pn("info"),_n.error=Pn("error"),_n.warning=Pn("warning"),_n.warn=_n.warning,_n.dark=function(e,g){return jn(e,On("default",rg({theme:"dark"},g)))},_n.dismiss=function(e){Un.size>0?Rn.emit(1,e):Dn=Dn.filter((function(g){return null!=e&&g.options.toastId!==e}))},_n.clearWaitingQueue=function(e){return void 0===e&&(e={}),Rn.emit(5,e)},_n.isActive=function(e){var g=!1;return Un.forEach((function(t){t.isToastActive&&t.isToastActive(e)&&(g=!0)})),g},_n.update=function(e,g){void 0===g&&(g={}),setTimeout((function(){var t=function(e,g){var t=g.containerId,n=Un.get(t||Mn);return n&&n.getToast(e)}(e,g);if(t){var n=t.props,I=t.content,C=rg(rg(rg({delay:100},n),g),{},{toastId:g.toastId||e,updateId:Ln()});C.toastId!==e&&(C.staleId=e);var l=C.render||I;delete C.render,jn(l,C)}}),0)},_n.done=function(e){_n.update(e,{progress:1})},_n.onChange=function(e){return Rn.on(4,e),function(){Rn.off(4,e)}},_n.POSITION={TOP_LEFT:"top-left",TOP_RIGHT:"top-right",TOP_CENTER:"top-center",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",BOTTOM_CENTER:"bottom-center"},_n.TYPE={INFO:"info",SUCCESS:"success",WARNING:"warning",ERROR:"error",DEFAULT:"default"},Rn.on(2,(function(e){Mn=e.containerId||e,Un.set(Mn,e),Dn.forEach((function(e){Rn.emit(0,e.content,e.options)})),Dn=[]})).on(3,(function(e){Un.delete(e.containerId||e),0===Un.size&&Rn.off(0).off(1).off(5)}));var eI=t(184),gI=function(e){var g=e.timeSlot,t=e.onBook,n=e.selectedChildId;return(0,eI.jsxs)("div",{className:"time-slot-card",children:[(0,eI.jsxs)("h5",{children:[(0,eI.jsx)($n,{})," ",g.campus+" \ucea0\ud37c\uc2a4"]}),(0,eI.jsxs)("p",{children:[(0,eI.jsx)(qn,{}),"\ub0a0\uc9dc: ",new Date(g.date).toLocaleDateString()]}),(0,eI.jsxs)("p",{children:["\uc2dc\uc791: ",g.startTime," - End: ",g.endTime]}),(0,eI.jsx)("button",{className:"book-button",onClick:function(){n?t(g._id,n):_n.error("\uc608\uc57d \uc804 \uc544\ub3d9\uc744 \u200b\u200b\uc120\ud0dd\ud574\uc8fc\uc138\uc694.")},children:"\ucc45"})]})},tI=function(e){var t=e.onClose,n=localStorage.getItem("userCampus"),I=r((0,g.useState)([]),2),C=I[0],l=I[1],a=r((0,g.useState)(!1),2),o=a[0],c=a[1],i=r((0,g.useState)(null),2),s=i[0],A=i[1],d=r((0,g.useState)([]),2),u=d[0],m=d[1],b=r((0,g.useState)(n),2),Z=b[0];b[1];(0,g.useEffect)((function(){h(),p(),G()}),[]);var h=function(){var e=sg(cg().mark((function e(){var g,t;return cg().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"https://palbackend-a8f4e5171ddb.herokuapp.com",e.next=4,un.get("".concat("https://palbackend-a8f4e5171ddb.herokuapp.com","/api/timeSlots"));case 4:g=e.sent,t=g.data.sort((function(e,g){return new Date(e.date)-new Date(g.date)})),l(t),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("Error fetching time slots:",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=sg(cg().mark((function e(){var g,t;return cg().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"https://palbackend-a8f4e5171ddb.herokuapp.com",g=gg(),e.next=5,un.get("".concat("https://palbackend-a8f4e5171ddb.herokuapp.com","/api/child"),g);case 5:t=e.sent,console.log(t.data),m(t.data),t.data.length>0&&A(t.data[0]._id),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error("Error fetching children:",e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=$e(),g=function(){var e=localStorage.getItem("token");if(!e)return console.error("No token in local storage"),null;try{var g=qe(e);return console.log(g),g.attendedPresentation}catch(t){return console.error("Error decoding token",t),null}}();c("parent"===e&&!0===g)},y=function(){var e=sg(cg().mark((function e(g){var t,n;return cg().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"https://palbackend-a8f4e5171ddb.herokuapp.com",t=gg(),e.next=5,un.get("".concat("https://palbackend-a8f4e5171ddb.herokuapp.com","/api/bookings/child/").concat(g),t);case 5:if(!(n=e.sent).data||!n.data.length){e.next=8;break}return e.abrupt("return",!0);case 8:return e.abrupt("return",!1);case 11:return e.prev=11,e.t0=e.catch(0),console.error("Error checking for child's bookings:",e.t0),e.abrupt("return",!1);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(g){return e.apply(this,arguments)}}(),B=function(){var e=sg(cg().mark((function e(g,n){var I,C,l;return cg().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o){e.next=3;break}return _n.error("\uc9c0\uae08\uc740 \uc608\uc57d\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."),e.abrupt("return");case 3:return e.next=5,y(n);case 5:if(!e.sent){e.next=9;break}return _n.error("\uc774 \uc544\uc774\ub294 \uc774\ubbf8 \uc2dc\ud5d8 \uc2dc\uac04\uc744 \uc608\uc57d\ud588\uc2b5\ub2c8\ub2e4."),e.abrupt("return");case 9:if(e.prev=9,I="https://palbackend-a8f4e5171ddb.herokuapp.com",(C=gg())&&C.headers){e.next=15;break}return console.error("No token in local storage"),e.abrupt("return");case 15:return e.next=17,un.post("".concat(I,"/api/bookings"),{testSlotId:g,childId:n},C);case 17:(l=e.sent).data&&l.data._id&&(_n.success("\uc608\uc57d\uc774 \uc131\uacf5\uc801\uc73c\ub85c \uc644\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4! SMS\uac00 \uc804\uc1a1\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),t()),e.next=25;break;case 21:e.prev=21,e.t0=e.catch(9),console.error(e.t0),e.t0.response&&"This test slot is fully booked."===e.t0.response.data&&_n.error("\uc774 \ud14c\uc2a4\ud2b8 \uc2ac\ub86f\uc740 \uc608\uc57d\uc774 \uaf49 \ucc3c\uc2b5\ub2c8\ub2e4. \ub2e4\ub978 \uc2ac\ub86f\uc744 \uc120\ud0dd\ud558\uc138\uc694.");case 25:case"end":return e.stop()}}),e,null,[[9,21]])})));return function(g,t){return e.apply(this,arguments)}}();return(0,eI.jsxs)("div",{className:"time-slot-list",children:[(0,eI.jsx)("h1",{children:"\ud14c\uc2a4\ud2b8 \uc608\uc57d"}),(0,eI.jsx)("div",{className:"filters",children:(0,eI.jsxs)("div",{className:"filter child-selection",children:[(0,eI.jsx)("label",{htmlFor:"childSelect",children:"\uc5b4\ub9b0\uc774:"}),(0,eI.jsx)("select",{id:"childSelect",value:s,onChange:function(e){return A(e.target.value)},children:u.map((function(e){return(0,eI.jsx)("option",{value:e._id,children:e.name},e._id)}))})]})}),(0,eI.jsx)("div",{className:"slot-cards",children:C.length?C.filter((function(e){return e.campus===Z})).map((function(e){return(0,eI.jsx)(gI,{timeSlot:e,onBook:B,selectedChildId:s},e._id)})):(0,eI.jsx)("p",{className:"no-slots",children:"\ud604\uc7ac \uc774\uc6a9 \uac00\ub2a5\ud55c \uc2dc\uac04\ub300\uac00 \uc5c6\uc2b5\ub2c8\ub2e4. \ub098\uc911\uc5d0 \ub2e4\uc2dc \ud655\uc778\ud574 \uc8fc\uc138\uc694."})})]})},nI=t(426),II=t.n(nI);var CI=function(e){var t=e.presentations,n=e.closeModal,I=e.childData,C=e.onBookingCreated,l=r((0,g.useState)(t),2),a=l[0],o=l[1],c=r((0,g.useState)(null),2),s=c[0],A=c[1];(0,g.useEffect)((function(){var e=setInterval((function(){}),5e3);return function(){return clearInterval(e)}}),[]);var d=function(){var e=sg(cg().mark((function e(g,t,l,r){var c,s,A,d,u,m,b;return cg().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=a.find((function(e){return e._id===g})),s=I.find((function(e){return e.ageGroup===c.ageGroup}))){e.next=5;break}return _n.error("\uc774 \uc5f0\ub839\ub300\uc5d0\ub294 \uc790\ub140\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."),e.abrupt("return");case 5:if(A="\n    \uc124\uba85\ud68c: ".concat(l,"\n    \ub0a0\uc9dc: ").concat(new Date(c.date).toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric"}),"\n    \uc2dc\uac04:  ").concat(r,"\n    \ud559\uc0dd\uba85: ").concat(s.name,"\n    2024\ub144 \ud559\ub144: ").concat(s.testGrade,"\n    "),window.confirm("\uc544\ub798\uc758 \uc785\ud559\uc124\uba85\ud68c \uc608\uc57d\uc815\ubcf4\ub97c \ud655\uc778\ud574\uc8fc\uc2dc\uae30 \ubc14\ub78d\ub2c8\ub2e4.\n\n       \u2605 \uc608\uc57d \ubcc0\uacbd \uc2dc \uc6d0\ud558\ub294 \uc2dc\uac04 \uc608\uc57d\uc774 \uc5b4\ub824\uc6b8 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\n      \n".concat(A))){e.next=9;break}return e.abrupt("return");case 9:return"https://palbackend-a8f4e5171ddb.herokuapp.com",e.prev=10,e.next=13,un.patch("".concat("https://palbackend-a8f4e5171ddb.herokuapp.com","/api/presentations/").concat(g,"/slots/").concat(t,"/attendees"),{},gg());case 13:200===(d=e.sent).status&&(C(d.data),u=a.findIndex((function(e){return e._id===g})),m=a[u].timeSlots.findIndex((function(e){return e._id===t})),(b=i(a))[u].timeSlots[m].attendees.push(tg()),o(b),n(),_n.success("\uc608\uc57d \uc131\uacf5\ud588\uc5b4\uc694!")),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(10),_n.error(e.t0.response.data.message||"\uc774\ubbf8 \uc608\uc57d\ud558\uc168\ub124\uc694!");case 20:case"end":return e.stop()}}),e,null,[[10,17]])})));return function(g,t,n,I){return e.apply(this,arguments)}}();return(0,g.useEffect)((function(){o(t)}),[t]),(0,eI.jsxs)("div",{className:"book-presentation-modal-new",children:[(0,eI.jsxs)("div",{className:"modal-header-new",children:[(0,eI.jsx)("h1",{style:{flex:1,textAlign:"center"},children:"J LEE \uc124\uba85\ud68c \uc608\uc57d"}),(0,eI.jsx)("button",{className:"close-button",onClick:n,children:"\xd7"})]}),(0,eI.jsx)("div",{className:"presentation-grid",children:a.map((function(e){return(0,eI.jsxs)("div",{className:"presentation-card ".concat(s===e._id?"expanded":""),children:[(0,eI.jsx)("h3",{children:(0,eI.jsx)("strong",{children:e.name})}),(0,eI.jsxs)("div",{className:"presentation-meta",children:[(0,eI.jsxs)("h5",{children:[(0,eI.jsx)(yg,{})," \uc77c\uc2dc: ",new Date(e.date).toLocaleDateString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit"})]}),(0,eI.jsxs)("h5",{children:[(0,eI.jsx)(Vg,{})," \uc7a5\uc18c: ",e.location]})]}),(0,eI.jsx)("p",{children:s===e._id?e.description:"".concat(e.description.substring(0,100),"...")}),e.description.length>100&&(0,eI.jsx)("button",{className:"view-more",onClick:function(){return g=e._id,void A(s===g?null:g);var g},children:s===e._id?"\uac04\ub2e8\ud788 \ubcf4\uae30":"\ub354\ubcf4\uae30"}),(0,eI.jsxs)("h4",{children:[(0,eI.jsx)(vg,{})," \uc2dc\uac04"]}),(0,eI.jsx)("div",{className:"time-slots",children:e.timeSlots?e.timeSlots.map((function(g){var t=g.attendees.includes(tg());return(0,eI.jsxs)("div",{className:"time-slot",onClick:function(){g.attendees.length>=g.maxAttendees&&_n.error("\uc774\ubbf8 \uc644\uc804\ud788 \uc608\uc57d\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")},children:[(0,eI.jsx)("div",{className:"slot-time",children:II()(g.startTime).format("HH:mm")}),(0,eI.jsx)("div",{className:"slot-info",children:(0,eI.jsx)("button",{className:"slotButton".concat(g.attendees.length>=g.maxAttendees||t?" disabled-slot":""),onClick:function(n){n.stopPropagation(),g.attendees.length>=g.maxAttendees||t||d(e._id,g._id,e.name,II()(g.startTime).format("HH:mm"))},disabled:g.attendees.length>=g.maxAttendees||t,children:g.attendees.length>=g.maxAttendees?"\uc608\uc57d\ub9c8\uac10":"\uc608\uc57d"})})]})})):(0,eI.jsx)("p",{children:"\uc774 \ud504\ub9ac\uc820\ud14c\uc774\uc158\uc5d0 \uc0ac\uc6a9\ud560 \uc218 \uc788\ub294 \uc2dc\uac04\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."})})]},e._id)}))})]})};var lI=function(e){var t=e.closeModal,n=e.booking,I=e.onBookingUpdated,C=r((0,g.useState)(n.child.name),2),l=C[0],a=C[1],o=r((0,g.useState)(n.child.previousSchool),2),c=o[0],i=o[1],s=r((0,g.useState)(n.child.age),2),A=s[0],d=s[1],u=r((0,g.useState)(n.campus),2),m=u[0],b=u[1],Z=r((0,g.useState)(n.date),2),h=Z[0],p=Z[1],G=r((0,g.useState)(n.time),2),y=G[0],B=G[1],f=function(){var e=sg(cg().mark((function e(g){var C;return cg().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g.preventDefault(),C={child:{name:l,previousSchool:c,age:A},campus:m,date:h,time:y},e.prev=2,"https://palbackend-a8f4e5171ddb.herokuapp.com",e.next=6,un.patch("".concat("https://palbackend-a8f4e5171ddb.herokuapp.com","/api/bookings/").concat(n._id),C,gg());case 6:200===e.sent.status?(_n.success("Booking updated successfully"),I(),t()):_n.error("Failed to update booking"),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),console.error(e.t0),_n.error("Failed to update booking");case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(g){return e.apply(this,arguments)}}();return(0,eI.jsxs)("div",{children:[(0,eI.jsx)("h2",{children:"Edit Booking"}),(0,eI.jsxs)("form",{onSubmit:f,children:[(0,eI.jsxs)("label",{children:["Child's Name:",(0,eI.jsx)("input",{type:"text",value:l,onChange:function(e){return a(e.target.value)},required:!0})]}),(0,eI.jsxs)("label",{children:["Previous School:",(0,eI.jsx)("input",{type:"text",value:c,onChange:function(e){return i(e.target.value)},required:!0})]}),(0,eI.jsxs)("label",{children:["Test Type:",(0,eI.jsxs)("select",{value:A,onChange:function(e){return d(e.target.value)},required:!0,children:[(0,eI.jsx)("option",{value:"",children:"--Please choose an option--"}),(0,eI.jsx)("option",{value:"5 Year Old",children:"5 Year Old"}),(0,eI.jsx)("option",{value:"6 Year Old",children:"6 Year Old"}),(0,eI.jsx)("option",{value:"7 Year Old",children:"7 Year Old"}),(0,eI.jsx)("option",{value:"1st Grade",children:"1st Grade"}),(0,eI.jsx)("option",{value:"2nd Grade",children:"2nd Grade"}),(0,eI.jsx)("option",{value:"3rd Grade",children:"3rd Grade"}),(0,eI.jsx)("option",{value:"4th Grade",children:"4th Grade"}),(0,eI.jsx)("option",{value:"5th Grade",children:"5th Grade"}),(0,eI.jsx)("option",{value:"6th Grade",children:"6th Grade"}),(0,eI.jsx)("option",{value:"7th Grade",children:"7th Grade"}),(0,eI.jsx)("option",{value:"8th Grade",children:"8th Grade"})]})]}),(0,eI.jsxs)("label",{children:["Campus:",(0,eI.jsxs)("select",{value:m,onChange:function(e){return b(e.target.value)},required:!0,children:[(0,eI.jsx)("option",{value:"",children:"--Please choose an option--"}),(0,eI.jsx)("option",{value:"Suji",children:"Suji"}),(0,eI.jsx)("option",{value:"Dongtan",children:"Dongtan"}),(0,eI.jsx)("option",{value:"Bundang",children:"Bundang"})]})]}),(0,eI.jsxs)("label",{children:["Date:",(0,eI.jsx)("input",{type:"date",value:h,onChange:function(e){return p(e.target.value)},required:!0})]}),(0,eI.jsxs)("label",{children:["Time:",(0,eI.jsxs)("select",{value:y,onChange:function(e){return B(e.target.value)},required:!0,children:[(0,eI.jsx)("option",{value:"",children:"--Please choose an option--"}),(0,eI.jsx)("option",{value:"14:30",children:"14:30"}),(0,eI.jsx)("option",{value:"15:30",children:"15:30"}),(0,eI.jsx)("option",{value:"16:30",children:"16:30"}),(0,eI.jsx)("option",{value:"17:30",children:"17:30"}),(0,eI.jsx)("option",{value:"18:30",children:"18:30"}),(0,eI.jsx)("option",{value:"19:30",children:"19:30"}),(0,eI.jsx)("option",{value:"20:30",children:"20:30"}),(0,eI.jsx)("option",{value:"21:30",children:"21:30"})]})]}),(0,eI.jsx)("input",{type:"submit",value:"Submit"})]})]})};var aI=function(e){var t=e.closeModal,n=e.presentationId,I=e.oldSlotId,C=e.onTimeSlotChanged,l=r((0,g.useState)([]),2),a=l[0],o=l[1],c=r((0,g.useState)(""),2),i=c[0],s=c[1],A=function(){var e=sg(cg().mark((function e(){var g;return cg().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://palbackend-a8f4e5171ddb.herokuapp.com",e.next=3,un.get("".concat("https://palbackend-a8f4e5171ddb.herokuapp.com","/api/presentations/").concat(n,"/timeSlots"),gg());case 3:200===(g=e.sent).status?o(g.data):console.error("Error fetching time slots");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,g.useEffect)((function(){A()}),[n]);var d=function(){var e=sg(cg().mark((function e(){var g,l,o,r,c;return cg().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i){e.next=3;break}return console.error("No time slot selected"),e.abrupt("return");case 3:if(o=null===(g=a.find((function(e){return e._id===I})))||void 0===g?void 0:g.startTime,r=null===(l=a.find((function(e){return e._id===i})))||void 0===l?void 0:l.startTime,window.confirm("\ubcc0\uacbd \uc2dc \uc2e4\uc2dc\uac04 \uc608\uc57d\uc5d0 \ub530\ub77c \uc7ac\ubcc0\uacbd\uc774 \uc5b4\ub824\uc6b8 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \uc2dc\uac04 \ubcc0\uacbd\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c? ".concat(new Date(o).toLocaleTimeString()," -> ").concat(new Date(r).toLocaleTimeString(),"?"))){e.next=8;break}return e.abrupt("return");case 8:return"https://palbackend-a8f4e5171ddb.herokuapp.com",c=tg(),e.next=12,un.patch("".concat("https://palbackend-a8f4e5171ddb.herokuapp.com","/api/presentations/").concat(n,"/changeSlot"),{userId:c,oldSlotId:I,newSlotId:i},gg());case 12:200===e.sent.status?(_n.success("Timeslot successfully changed."),t(),C()):(console.error("Error changing time slot"),_n.error("Error changing timeslot."));case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,eI.jsxs)("div",{children:[(0,eI.jsx)("button",{className:"close-button",onClick:t,children:"X"}),(0,eI.jsxs)("div",{className:"change-time-slot-modal",children:[(0,eI.jsx)("h2",{children:"\uc598\uc57d\uc2dc\uac04\ubcc0\uacbd"}),(0,eI.jsxs)("select",{value:i,onChange:function(e){return s(e.target.value)},style:{padding:"8px",borderRadius:"5px",border:"1px solid #ccc",marginBottom:"10px"},children:[(0,eI.jsx)("option",{value:"",children:"Select a new time slot"}),a.map((function(e){return(0,eI.jsx)("option",{value:e._id,children:new Date(e.startTime).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},e._id)}))]}),(0,eI.jsx)("button",{onClick:d,style:{backgroundColor:"#007BFF",color:"white",padding:"10px 20px",marginRight:"10px"},disabled:!i,children:"\uc608\uc57d\uc2dc\uac04\ubcc0\uacbd"})]})]})};var oI=function(){var e=r((0,g.useState)(null),2),t=e[0],n=e[1],I=r((0,g.useState)([]),2),C=I[0],l=I[1],a=r((0,g.useState)(null),2),o=a[0],c=a[1],i=r((0,g.useState)([]),2),s=i[0],A=i[1],d=r((0,g.useState)(null),2),u=d[0],m=d[1],b=r((0,g.useState)([]),2),Z=b[0],h=b[1],p=r((0,g.useState)([]),2),G=p[0],y=p[1],B=Cg(),f=function(){var e=sg(cg().mark((function e(){var g;return cg().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://palbackend-a8f4e5171ddb.herokuapp.com",e.next=3,un.get("".concat("https://palbackend-a8f4e5171ddb.herokuapp.com","/api/bookings/parent?userId=").concat(tg()),gg());case 3:200===(g=e.sent).status?l(g.data):m("Error fetching bookings");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,g.useEffect)((function(){f()}),[C.length]);var S=function(){var e=sg(cg().mark((function e(){var g,t,n,I,C,l,a,o,c,i;return cg().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g="https://palbackend-a8f4e5171ddb.herokuapp.com",t=tg(),n=eg(),I={headers:{Authorization:"Bearer ".concat(n)}},e.next=6,Promise.all([un.get("".concat(g,"/api/presentations/myBookings"),I),un.get("".concat(g,"/api/users/").concat(t,"/children"),I)]);case 6:C=e.sent,l=r(C,2),a=l[0],o=l[1],200===a.status&&200===o.status?(c=o.data,y(c),i=a.data.map((function(e){var g=c.filter((function(g){return g.ageGroup===e.ageGroup})),t=g.map((function(e){return e.name})).join(", "),n=g.map((function(e){return e.testGrade})).join(", ");return rg(rg({},e),{},{childName:t,testGrade:n,oldSlotId:e.timeSlots[0]._id})})),h(i)):m("Error fetching my presentations");case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,g.useEffect)((function(){S()}),[]),(0,g.useEffect)((function(){var e=function(){var e=sg(cg().mark((function e(){var g;return cg().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://palbackend-a8f4e5171ddb.herokuapp.com",e.next=3,un.get("".concat("https://palbackend-a8f4e5171ddb.herokuapp.com","/api/presentations?campus=").concat(B),gg());case 3:200===(g=e.sent).status?A(g.data):m("Error fetching presentations");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]);var v=function(){n(null),S()},W=function(){var e=sg(cg().mark((function e(g){return cg().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("\uc815\ub9d0\ub85c \uc774 \uc608\uc57d\uc744 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")){e.next=6;break}return"https://palbackend-a8f4e5171ddb.herokuapp.com",e.next=4,un.delete("".concat("https://palbackend-a8f4e5171ddb.herokuapp.com","/api/bookings/").concat(g),gg());case 4:200===e.sent.status?(l((function(e){return e.filter((function(e){return e._id!==g}))})),_n.success("\uc608\uc57d\uc774 \uc131\uacf5\uc801\uc73c\ub85c \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")):_n.error("\uc608\uc57d\uc744 \uc0ad\uc81c\ud558\ub294 \uc911\uc5d0 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.");case 6:case"end":return e.stop()}}),e)})));return function(g){return e.apply(this,arguments)}}(),V=0===C.length,R=function(){var e=sg(cg().mark((function e(){var g,t,n,I;return cg().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"https://palbackend-a8f4e5171ddb.herokuapp.com",g=tg(),e.next=5,fetch("".concat("https://palbackend-a8f4e5171ddb.herokuapp.com","/api/users/").concat(g,"/qrcode"));case 5:return t=e.sent,e.next=8,t.blob();case 8:n=e.sent,(I=document.createElement("a")).href=URL.createObjectURL(n),I.download="qrcode.pdf",I.click(),URL.revokeObjectURL(I.href),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(0),console.error("Error downloading QR code PDF:",e.t0),_n.error("QR \ucf54\ub4dc PDF\ub97c \ub2e4\uc6b4\ub85c\ub4dc\ud558\ub294 \uc911\uc5d0 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.");case 20:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=sg(cg().mark((function e(){var g;return cg().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://palbackend-a8f4e5171ddb.herokuapp.com",e.next=3,un.get("".concat("https://palbackend-a8f4e5171ddb.herokuapp.com","/api/presentations?campus=").concat(B),gg());case 3:200===(g=e.sent).status?A(g.data):m("Error fetching updated presentations");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),X=function(){var e=sg(cg().mark((function e(g,t){return cg().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("\uc124\uba85\ud68c \uc608\uc57d \ucde8\uc18c \uc2dc \ucd5c\ucd08 \uc608\uc57d \uae30\ub85d\uc740 \uc0ad\uc81c\ub429\ub2c8\ub2e4. \uc815\ub9d0 \uc608\uc57d \ucde8\uc18c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?  \n      \u2605  \ucd5c\ucd08 \uc608\uc57d \uae30\ub85d\uc740 \ud14c\uc2a4\ud2b8 \ud6c4 \ub4f1\ub85d \uc21c\ubc88\uc5d0 \uc601\ud5a5\uc774 \uc788\uc744 \uc218 \uc788\uc2b5\ub2c8\ub2e4.")){e.next=6;break}return"https://palbackend-a8f4e5171ddb.herokuapp.com",e.next=4,un.delete("".concat("https://palbackend-a8f4e5171ddb.herokuapp.com","/api/presentations/").concat(g,"/attendees/").concat(tg()),gg());case 4:200===e.sent.status?(S(),_n.success("\uc124\uba85\ud68c \uc608\uc57d \ucde8\uc18c\uac00 \uc644\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")):_n.error("\uc124\uba85\ud68c \uc608\uc57d \ucde8\uc18c\uac00 \uc815\uc0c1\uc801\uc73c\ub85c \uc644\ub8cc\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4. \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694.");case 6:case"end":return e.stop()}}),e)})));return function(g,t){return e.apply(this,arguments)}}();return(0,eI.jsxs)("div",{className:"dashboard-container",children:[u&&(0,eI.jsxs)("p",{className:"error-message",role:"alert",children:[(0,eI.jsx)(Bg,{})," ",u]}),(0,eI.jsx)("h1",{className:"header",children:" J LEE \uc2e0\uc785\uc0dd \uc785\ud559\uc124\uba85\ud68c \uc608\uc57d"}),(0,eI.jsxs)("h4",{children:[B,"\ucea0\ud37c\uc2a4"]}),(0,eI.jsx)("div",{className:"header-text-new",children:(0,eI.jsxs)("ol",{children:[(0,eI.jsx)("li",{children:'\uc785\ud559 \ud76c\ub9dd\ud558\ub294 \ud615\uc81c,\uc790\ub9e4\uac00 \uc788\uc73c\uc2e0 \uacbd\uc6b0 "\ud559\uc0dd\ucd94\uac00"\ub97c \ud574\uc8fc\uc2dc\uae30 \ubc14\ub78d\ub2c8\ub2e4.'}),(0,eI.jsx)("li",{children:"\uc124\uba85\ud68c \uc608\uc57d\uc774 \uc644\ub8cc\ub418\uba74 \ud559\ubd80\ubaa8\ub2d8\uaed8 \uc608\uc57d\ud655\uc778 \ubb38\uc790\uac00 \ubc1c\uc1a1\ub429\ub2c8\ub2e4."})]})}),(0,eI.jsxs)("div",{className:"button-containerPD",children:[(0,eI.jsx)("button",{className:"button",onClick:function(){return n("presentation")},"aria-label":"Book Presentation",children:"\uc2e0\uc785\uc0dd \uc124\uba85\ud68c \uc608\uc57d"}),(0,eI.jsx)(Le,{to:"/add-child",children:(0,eI.jsx)("button",{className:"button","aria-label":"Add Child",children:"\ud559\uc0dd \ucd94\uac00"})})]}),V&&0===Z.length?(0,eI.jsx)("p",{className:"no-booking",children:"\uc608\uc57d\ub0b4\uc5ed\uc774 \uc5c6\uc2b5\ub2c8\ub2e4. [\uc2e0\uc785\uc0dd \uc124\uba85\ud68c \uc608\uc57d]\ub97c \ud074\ub9ad\ud558\uc5ec \uc608\uc57d\uc744 \uc9c4\ud589\ud574\uc8fc\uc138\uc694."}):(0,eI.jsxs)("div",{className:"card-container",children:[C.map((function(e){var g,t,n;return(0,eI.jsxs)("div",{className:"booking-card",style:{backgroundColor:"#f0f0f0",border:"2px solid #ccc"},children:[(0,eI.jsx)("h3",{children:e.child.name}),(0,eI.jsxs)("p",{children:["\uc774\uc804 \ud559\uad50: ",e.child.previousSchool]}),(0,eI.jsxs)("p",{children:["\uc2dc\ud5d8\ub4f1\uae09: ",e.child.testGrade]}),(0,eI.jsxs)("p",{children:["\uad50\uc815: ",null===e||void 0===e||null===(g=e.testSlot)||void 0===g?void 0:g.campus]}),(0,eI.jsxs)("p",{children:["\ub0a0\uc9dc: ",new Date(null===e||void 0===e||null===(t=e.testSlot)||void 0===t?void 0:t.date).toLocaleDateString()]}),(0,eI.jsxs)("p",{children:["\uc2dc\uac04: ",null===e||void 0===e||null===(n=e.testSlot)||void 0===n?void 0:n.startTime]}),(0,eI.jsx)("div",{className:"booking-actions",children:(0,eI.jsx)("button",{className:"button",onClick:function(){return W(e._id)},children:"\ucde8\uc18c"})})]},e._id)})),Z.map((function(e){return(0,eI.jsxs)("div",{className:"presentation-card",style:{backgroundColor:"#e0f7fa",border:"2px "},children:[(0,eI.jsx)("h3",{children:e.name}),(0,eI.jsxs)("h4",{children:["\ub0a0\uc9dc:"," ",new Date(e.date).toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric"})+" "+new Date(e.timeSlots[0].startTime).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),(0,eI.jsxs)("p",{children:["\uc7a5\uc18c : ",e.location]}),(0,eI.jsxs)("p",{children:["\ud559\uc0dd\uba85:",e.childName]}),(0,eI.jsxs)("p",{children:["2024\ub144 \ud559\ub144: ",e.testGrade]}),(0,eI.jsxs)("div",{className:"booking-actions",children:[(0,eI.jsx)("button",{className:"button-bookings",onClick:function(){return function(e){var g=Z.find((function(g){return g._id===e}));c(g),n("changeTimeSlot")}(e._id)},children:"\uc608\uc57d\uc2dc\uac04\ubcc0\uacbd"}),(0,eI.jsx)("button",{className:"button-bookings",onClick:function(){return X(e._id)},children:"\ucde8\uc18c"}),new Date(e.date)-new Date<=1728e5&&(0,eI.jsxs)("button",{className:"button-bookings",onClick:function(){return R()},"aria-label":"Download QR Code",children:[(0,eI.jsx)(Wg,{})," QR \ub2e4\uc6b4\ub85c\ub4dc"]})]})]},e._id)}))]}),(0,eI.jsxs)(dg(),{isOpen:null!==t,onRequestClose:v,contentLabel:"Dynamic Modal",children:["booking"===t&&(0,eI.jsx)(tI,{closeModal:v}),"presentation"===t&&(0,eI.jsx)(CI,{presentations:s,closeModal:v,childData:G,onBookingCreated:k}),"editBooking"===t&&(0,eI.jsx)(lI,{closeModal:v,booking:o,onBookingUpdated:f}),"changeTimeSlot"===t&&(0,eI.jsx)(aI,{closeModal:v,presentationId:o._id,oldSlotId:o.oldSlotId,onTimeSlotChanged:S})]})]})};var rI=function(){return"parent"===$e()?(0,eI.jsx)(we,{children:(0,eI.jsx)(Ye,{path:"/",element:(0,eI.jsx)(oI,{})})}):(0,eI.jsx)(Je,{to:"/login"})},cI=t.p+"static/media/logo.7e213964b8e99cfbface.png";var iI=function(){var e=he();return(0,eI.jsxs)("div",{className:"home-page-container",children:[(0,eI.jsx)("div",{className:"logo-container",children:(0,eI.jsx)("img",{src:cI,alt:"Logo",className:"logo-image"})}),(0,eI.jsxs)("div",{className:"content-container",children:[(0,eI.jsxs)("div",{className:"text-container",children:[(0,eI.jsx)("h1",{children:"J LEE \uc2e0\uc785\uc0dd \uc124\uba85\ud68c \uc608\uc57d"}),(0,eI.jsx)("h5",{children:"\ud68c\uc6d0\uac00\uc785 \ud6c4 \uc608\uc57d\uc744 \uc9c4\ud589\ud558\uc5ec \uc8fc\uc2dc\uae30 \ubc14\ub78d\ub2c8\ub2e4"})]}),(0,eI.jsxs)("div",{className:"button-container",children:[(0,eI.jsx)("button",{className:"login-button",onClick:function(){e("/login")},children:"\ub85c\uadf8\uc778"}),(0,eI.jsx)("button",{className:"register-button",onClick:function(){e("/register")},children:"\ud68c\uc6d0\uac00\uc785"})]}),(0,eI.jsxs)("p",{className:"terms",children:["\ud68c\uc6d0\uac00\uc785\uc744 \ud1b5\ud574 \ub2e4\uc74c\uc5d0 \ub3d9\uc758\ud558\uac8c \ub429\ub2c8\ub2e4. ",(0,eI.jsx)("br",{}),(0,eI.jsxs)("a",{href:"/\uac1c\uc778\uc815\ubcf4_\ubcf4\ud638\uc815\ucc45_\ubc0f_\uc774\uc6a9_\uc57d\uad00.pdf",target:"_blank",rel:"noopener noreferrer",children:[" ","\uac1c\uc778\uc815\ubcf4 \uc218\uc9d1 \ubc0f \uc774\uc6a9"]})]})]})]})},sI=(0,g.createContext)();function AI(){return(0,g.useContext)(sI)}function dI(e){var t=e.children,n=r((0,g.useState)(localStorage.getItem("token")),2),I=n[0],C=n[1];(0,g.useEffect)((function(){var e=localStorage.getItem("token");C(e)}),[]);var l={isLoggedIn:!!I,token:I,login:function(e){localStorage.setItem("token",e),C(e)},logout:function(){localStorage.removeItem("token"),C(null)}};return(0,eI.jsx)(sI.Provider,{value:l,children:t})}var uI=function(){var e=he(),t=AI().login,n=r((0,g.useState)(""),2),I=n[0],C=n[1],l=r((0,g.useState)(""),2),a=l[0],o=l[1],c=r((0,g.useState)(""),2),i=c[0],s=c[1],A=r((0,g.useState)(!1),2),d=A[0],u=A[1],m=r((0,g.useState)(!1),2),b=m[0],Z=m[1],h=function(){var g=sg(cg().mark((function g(n){var C,l,o,r;return cg().wrap((function(g){for(;;)switch(g.prev=g.next){case 0:return n.preventDefault(),s(""),u(!0),g.prev=3,C="https://palbackend-a8f4e5171ddb.herokuapp.com",console.log(C),g.next=8,fetch("".concat(C,"/api/users/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone:I,password:a})});case 8:if(!(l=g.sent).ok){g.next=19;break}return g.next=12,l.json();case 12:o=g.sent,t(o.token),localStorage.setItem("userRole",o.role),localStorage.setItem("userCampus",o.campus),"parent"===o.role?e("/parent"):"admin"===o.role||"superadmin"===o.role?e("/admin"):s("Invalid role"),g.next=24;break;case 19:return g.next=21,l.json();case 21:r=g.sent,console.error(r),s("\uc804\ud654\ubc88\ud638 \ub610\ub294 \ube44\ubc00\ubc88\ud638\ub97c \ud655\uc778\ud574 \uc8fc\uc2dc\uae30 \ubc14\ub78d\ub2c8\ub2e4.");case 24:g.next=30;break;case 26:g.prev=26,g.t0=g.catch(3),console.error(g.t0),s("\uc804\ud654\ubc88\ud638 \ub610\ub294 \ube44\ubc00\ubc88\ud638\ub97c \ud655\uc778\ud574 \uc8fc\uc2dc\uae30 \ubc14\ub78d\ub2c8\ub2e4.");case 30:return g.prev=30,u(!1),g.finish(30);case 33:case"end":return g.stop()}}),g,null,[[3,26,30,33]])})));return function(e){return g.apply(this,arguments)}}();return(0,eI.jsxs)("div",{className:"form-container",children:[(0,eI.jsx)("div",{className:"logo-container",children:(0,eI.jsx)(Le,{to:"/",children:(0,eI.jsx)("img",{src:cI,alt:"Logo",className:"logo-image"})})}),(0,eI.jsxs)("form",{className:"form",onSubmit:h,children:[(0,eI.jsx)("h1",{className:"form-title",children:"\ub85c\uadf8\uc778"}),i&&(0,eI.jsx)("div",{className:"error-message",children:i}),(0,eI.jsxs)("div",{className:"form-field",children:[(0,eI.jsx)("label",{className:"form-label",htmlFor:"email",children:"\uc804\ud654\ubc88\ud638"}),(0,eI.jsx)("input",{className:"form-input",type:"tel",id:"phone",value:I,onChange:function(e){return C(e.target.value)},required:!0})]}),(0,eI.jsxs)("div",{className:"form-field",children:[(0,eI.jsx)("label",{className:"form-label",htmlFor:"password",children:"\ube44\ubc00\ubc88\ud638:"}),(0,eI.jsxs)("div",{className:"password-container",children:[(0,eI.jsx)("input",{className:"form-input",type:b?"text":"password",id:"password",value:a,onChange:function(e){return o(e.target.value)},required:!0}),(0,eI.jsx)("div",{className:"toggle-password",onClick:function(){return Z(!b)},children:b?"\uc228\ub2e4":"\ubcf4\uae30"})]})]}),(0,eI.jsx)("div",{className:"form-field",children:(0,eI.jsx)("button",{className:"form-button",type:"submit",disabled:d,children:d?"\ub85c\uadf8\uc778 \uc911...":"\ub85c\uadf8\uc778"})}),(0,eI.jsxs)("p",{className:"link",children:["\uc544\uc9c1 \uacc4\uc815\uc774 \uc5c6\uc73c\uc2e0\uac00\uc694? ",(0,eI.jsx)(Le,{to:"/register",children:"\ud68c\uc6d0\uac00\uc785"})]}),(0,eI.jsxs)("p",{className:"link",children:["\ube44\ubc00\ubc88\ud638\ub97c \uc78a\uc73c\uc168\ub098\uc694? ",(0,eI.jsx)(Le,{to:"/change-password",children:"\ube44\ubc00\ubc88\ud638 \ubcc0\uacbd"})]})]})]})};var mI=function(e){var t=e.parentId,n=r((0,g.useState)(""),2),I=n[0],C=n[1],l=r((0,g.useState)(""),2),a=l[0],o=l[1],c=r((0,g.useState)(""),2),i=c[0],s=c[1],A=r((0,g.useState)(""),2),d=A[0],u=A[1],m=r((0,g.useState)(!1),2),b=m[0],Z=m[1],h=he(),p=function(){var e=sg(cg().mark((function e(){return cg().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Z(!0),e.next=3,y();case 3:e.sent&&h("/parent",{replace:!0});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=sg(cg().mark((function e(){return cg().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Z(!0),e.next=3,y();case 3:e.sent&&B();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=sg(cg().mark((function e(){var g;return cg().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://palbackend-a8f4e5171ddb.herokuapp.com",e.next=3,un.post("".concat("https://palbackend-a8f4e5171ddb.herokuapp.com","/api/child"),{name:I,previousSchool:a,dateOfBirth:i,gender:d,parent:t},gg());case 3:if(g=e.sent,Z(!1),201!==g.status){e.next=10;break}return console.log("Child created:",g.data),e.abrupt("return",!0);case 10:return console.error("Failed to create child:",g.data),e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(){C(""),o(""),s(""),u("")};return(0,eI.jsx)("div",{className:"form-container",children:(0,eI.jsxs)("form",{className:"form",onSubmit:function(e){return e.preventDefault()},children:[(0,eI.jsx)("h2",{className:"form-title",children:"\ud559\uc0dd\uc815\ubcf4"}),(0,eI.jsxs)("div",{className:"form-field",children:[(0,eI.jsx)("label",{className:"form-label",htmlFor:"name",children:"\ud559\uc0dd(\uc720\uc544)\ud55c\uae00\uba85:"}),(0,eI.jsx)("input",{className:"form-input",type:"text",value:I,onChange:function(e){return C(e.target.value)},required:!0})]}),(0,eI.jsxs)("div",{className:"form-field",children:[(0,eI.jsx)("label",{className:"form-label",htmlFor:"previousSchool",children:"\ud604\uc7ac \uc7ac\uc6d0\uc911\uc778 \uae30\uad00\uba85:"}),(0,eI.jsx)("input",{className:"form-input",type:"text",value:a,onChange:function(e){return o(e.target.value)},required:!0})]}),(0,eI.jsxs)("div",{className:"form-field",children:[(0,eI.jsx)("label",{className:"form-label",htmlFor:"dateOfBirth",children:"\uc0dd\ub144\uc6d4\uc77c:"}),(0,eI.jsx)("p",{className:"text-red",children:"*\uc0dd\ub144\uc6d4\uc77c\uc744 \uae30\uc785 \uc2dc \uc790\ub3d9\uc73c\ub85c \ud559\ub144\uc120\ud0dd\uc774 \ub418\ubbc0\ub85c \uc815\ud655\ud558\uac8c \uae30\uc785\ud574\uc8fc\uc2dc\uae30 \ubc14\ub78d\ub2c8\ub2e4. *\uae30\uc785\uc2dc \uc0c1\ub2e8\uc758 \ub144\ub3c4,\ub0a0\uc9dc\ub97c \uc120\ud0dd\ud558\uc5ec \uc8fc\uc2dc\uae30 \ubc14\ub78c\ub2c8\ub2e4."}),(0,eI.jsx)("input",{className:"form-input",type:"date",value:i,onChange:function(e){return s(e.target.value)},required:!0})]}),(0,eI.jsxs)("div",{className:"form-field",children:[(0,eI.jsx)("label",{className:"form-label",htmlFor:"gender",children:"\uc131\ubcc4:"}),(0,eI.jsxs)("select",{className:"form-input",value:d,onChange:function(e){return u(e.target.value)},required:!0,children:[(0,eI.jsx)("option",{value:"",children:"\uc131\ubcc4\uc744 \uc120\ud0dd\ud558\uc138\uc694"}),(0,eI.jsx)("option",{value:"male",children:"\ub0a8\uc131"}),(0,eI.jsx)("option",{value:"female",children:"\uc5ec\uc131"})]})]}),(0,eI.jsx)("button",{className:"form-button",onClick:p,disabled:b,children:b?"\ub4f1\ub85d...":"\ub4f1\ub85d"}),(0,eI.jsx)("button",{className:"form-button secondary",onClick:G,disabled:b,children:b?"\ud559\uc0dd \ucd94\uac00...":"\ud559\uc0dd \ucd94\uac00"})]})})};var bI=function(){var e=he(),t=r((0,g.useState)(""),2),n=t[0],I=t[1],C=r((0,g.useState)(""),2),l=C[0],a=C[1],o=r((0,g.useState)(""),2),c=o[0],i=o[1],s=r((0,g.useState)(""),2),A=s[0],d=s[1],u=r((0,g.useState)(""),2),m=u[0],b=u[1],Z=r((0,g.useState)(!1),2),h=Z[0],p=Z[1],G=r((0,g.useState)(""),2),y=G[0],B=G[1],f=r((0,g.useState)(!0),2),S=f[0],v=f[1],W=r((0,g.useState)(!1),2),V=W[0],R=W[1],k=r((0,g.useState)(""),2),X=k[0],J=k[1],Y=function(){var g=sg(cg().mark((function g(t){var I,C,a;return cg().wrap((function(g){for(;;)switch(g.prev=g.next){case 0:return t.preventDefault(),R(!0),J(""),"https://palbackend-a8f4e5171ddb.herokuapp.com",g.next=6,fetch("".concat("https://palbackend-a8f4e5171ddb.herokuapp.com","/api/users/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:n,email:l,password:c,phone:A,campus:m})});case 6:if(I=g.sent,R(!1),!I.ok){g.next=16;break}return g.next=11,I.json();case 11:C=g.sent,localStorage.setItem("token",C.token),"parent"===C.role?(B(C._id),p(!0),v(!1)):"admin"===C.role&&e("/admin",{replace:!0}),g.next=21;break;case 16:return g.next=18,I.json();case 18:a=g.sent,console.error(a),J(a.message||"\uc774\ubbf8 \uac00\uc785\ub418\uc5b4\uc788\uc2b5\ub2c8\ub2e4. \ube44\ubc00\ubc88\ud638 \ud655\uc778\ud574\uc8fc\uc2dc\uae30 \ubc14\ub78d\ub2c8\ub2e4.");case 21:case"end":return g.stop()}}),g)})));return function(e){return g.apply(this,arguments)}}();return(0,eI.jsxs)("div",{className:"form-container",children:[(0,eI.jsx)("div",{className:"logo-container",children:(0,eI.jsx)(Le,{to:"/",children:(0,eI.jsx)("img",{src:cI,alt:"Logo",className:"logo-image"})})}),S?(0,eI.jsxs)("form",{className:"form",onSubmit:Y,children:[(0,eI.jsx)("h1",{className:"form-title",children:"\ud68c\uc6d0\uac00\uc785"}),X&&(0,eI.jsx)("p",{className:"error",children:X}),(0,eI.jsxs)("div",{className:"form-field",children:[(0,eI.jsx)("label",{className:"form-label",htmlFor:"name",children:"\ud559\ubd80\ubaa8\uc774\ub984:"}),(0,eI.jsx)("input",{className:"form-input",type:"text",id:"name",value:n,onChange:function(e){return I(e.target.value)},required:!0})]}),(0,eI.jsxs)("div",{className:"form-field",children:[(0,eI.jsx)("label",{className:"form-label",htmlFor:"phone",children:"\uc804\ud654\ubc88\ud638"}),(0,eI.jsx)("input",{className:"form-input",type:"text",id:"phone",value:A,onChange:function(e){return d(e.target.value)},required:!0,pattern:"010[0-9]{8}",title:"Phone number must be in the format 010XXXXXXXX"})]}),(0,eI.jsxs)("div",{className:"form-field",children:[(0,eI.jsx)("label",{className:"form-label",htmlFor:"email",children:"\uc774\uba54\uc77c:"}),(0,eI.jsx)("input",{className:"form-input",type:"email",id:"email",value:l,onChange:function(e){return a(e.target.value)},required:!0})]}),(0,eI.jsxs)("div",{className:"form-field",children:[(0,eI.jsx)("label",{className:"form-label",htmlFor:"password",children:"\ube44\ubc00\ubc88\ud638:"}),(0,eI.jsx)("input",{className:"form-input",type:"password",id:"password",value:c,onChange:function(e){return i(e.target.value)},required:!0})]}),(0,eI.jsx)("label",{children:"\ucea0\ud37c\uc2a4 \uc120\ud0dd  "}),(0,eI.jsx)("p",{className:"text-red",children:"*\uc785\ud559 \ud76c\ub9dd\ud558\ub294 \ucea0\ud37c\uc2a4\ub97c \uc120\ud0dd\ud574 \uc8fc\uc138\uc694. \uc120\ud0dd\ud558\uc2e0 \ucea0\ud37c\uc2a4\ub85c \uc124\uba85\ud68c \uc608\uc57d\uc774 \uc9c4\ud589\ub418\uba70, \ucea0\ud37c\uc2a4 \uac04 \uc911\ubcf5\uc608\uc57d\uc740 \ubd88\uac00\ud569\ub2c8\ub2e4."}),(0,eI.jsxs)("select",{value:m,onChange:function(e){return b(e.target.value)},required:!0,children:[(0,eI.jsx)("option",{value:"",children:"--\uc635\uc158\uc744 \uc120\ud0dd\ud574\uc8fc\uc138\uc694--"}),(0,eI.jsx)("option",{value:"\uc218\uc9c0",children:"\uc218\uc9c0"}),(0,eI.jsx)("option",{value:"\ub3d9\ud0c4",children:"\ub3d9\ud0c4"}),(0,eI.jsx)("option",{value:"\ubd84\ub2f9",children:"\ubd84\ub2f9"})]}),(0,eI.jsx)("div",{className:"form-field",children:(0,eI.jsx)("button",{className:"form-button",type:"submit",disabled:V,children:V?"\uac00\uc785\ud558\uae30...":"\uac00\uc785\ud558\uae30"})}),(0,eI.jsxs)("p",{className:"link",children:["\uacc4\uc815\uc744 \uac16\uace0\uc788\ub2e4\uba74 ",(0,eI.jsx)(Le,{to:"/login",children:"\uc5ec\uae30\uc5d0 \ub85c\uadf8\uc778\ud558\uc138\uc694"})]})]}):null,h&&(0,eI.jsx)(mI,{parentId:y})]})},ZI=function(){var e,t=AI(),n=t.isLoggedIn,I=t.logout,C=(t.user,he()),l=be(),a=r((0,g.useState)(!1),2),o=a[0],c=a[1],i=(0,g.useRef)(null),s=(0,g.useRef)(null),A=ng(),d=Cg();if((0,g.useEffect)((function(){var e=function(e){s.current&&i.current&&!s.current.contains(e.target)&&!i.current.contains(e.target)&&c(!1)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[]),!n||"/"===l.pathname)return null;var u="admin"===(e=$e())||"superadmin"===e,m="superadmin"===e,b="parent"===e,Z=b?"/parent":"/admin",h={navbar:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"1em",backgroundColor:m?"#364150":"#f5f5f5"},campusName:{marginRight:"10px",fontSize:"18px",color:"black"},logo:{height:"4em"},hamburger:{fontSize:"2em",background:"none",border:"none",cursor:"pointer",color:"#333333"},logoutButton:{backgroundColor:"#007BFF",color:"white",border:"none",cursor:"pointer",width:"120px",height:"40px",fontSize:"15px",borderRadius:"5px"},sidebar:{position:"fixed",top:"0",left:"0",height:"100%",width:"200px",backgroundColor:"#333",color:"white",padding:"1em",transition:"transform 0.3s",zIndex:1e3},sidebarLink:{display:"block",padding:"1em 0",color:"white",textDecoration:"none"}};return(0,eI.jsxs)("nav",{style:rg(rg({},h.navbar),{},{backgroundColor:m?"#2b3643":"#f5f5f5"}),children:[b&&(0,eI.jsx)("button",{ref:i,onClick:function(){o||c(!0)},style:h.hamburger,children:"\u2630"}),(0,eI.jsx)(Le,{to:Z,children:(0,eI.jsx)("img",{src:cI,alt:"Logo",style:h.logo})}),m&&(0,eI.jsx)("span",{style:rg(rg({},h.campusName),{},{color:"white"}),children:"Super Admin"}),u&&!m&&d&&(0,eI.jsx)("span",{style:h.campusName,children:d}),(0,eI.jsx)("button",{onClick:function(){I(),C("/")},style:h.logoutButton,children:"\ub85c\uadf8 \uc544\uc6c3"}),b&&(0,eI.jsxs)("div",{ref:s,style:rg(rg({},h.sidebar),{},{transform:o?"translateX(0)":"translateX(-100%)"}),children:[(0,eI.jsxs)("div",{style:{padding:"1em 0",fontWeight:"bold",fontSize:"1.2em"},children:[A,"\ub2d8, \uc548\ub155\ud558\uc138\uc694"]}),(0,eI.jsx)(Le,{to:"/parent",style:h.sidebarLink,onClick:function(){return c(!1)},children:"\uc608\uc57d \uc815\ubcf4"}),(0,eI.jsx)(Le,{to:"/update-child",style:h.sidebarLink,children:"\ub4f1\ub85d\ud559\uc0dd\uc815\ubcf4"}),(0,eI.jsx)(Le,{to:"/update-details",style:h.sidebarLink,children:"\ub0b4 \uc815\ubcf4"})]})]})},hI=function(e){var t=e.isOpen,n=e.onRequestClose,I=r((0,g.useState)({name:"",description:"",location:"",date:"",ageGroup:"",timeSlots:[],campus:""}),2),C=I[0],l=I[1],a=function(e){l(rg(rg({},C),{},ag({},e.target.name,e.target.value)))},o=function(e,g,t){l((function(n){var I=i(n.timeSlots);return I[e][g]=t,rg(rg({},n),{},{timeSlots:I})}))},c=function(){var e=sg(cg().mark((function e(g){var t,I;return cg().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g.preventDefault(),t=C.timeSlots.map((function(e){var g=new Date("".concat(C.date,"T").concat(e.startTime)),t=new Date("".concat(C.date,"T").concat(e.endTime));return rg(rg({},e),{},{startTime:g,endTime:t})})),I=rg(rg({},C),{},{ageGroup:C.ageGroup,timeSlots:t}),e.prev=3,console.log(I),e.next=7,un.post("".concat("https://palbackend-a8f4e5171ddb.herokuapp.com","/api/presentations"),I);case 7:_n.success("Presentation created successfully!"),n(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),_n.error("Error creating presentation.");case 14:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(g){return e.apply(this,arguments)}}();return(0,eI.jsxs)(dg(),{isOpen:t,onRequestClose:n,contentLabel:"Create Presentation",className:"presentation-modal",overlayClassName:"overlay",children:[(0,eI.jsxs)("div",{className:"modal-header",children:[(0,eI.jsx)("h2",{children:"Create Presentation"}),(0,eI.jsx)("button",{className:"close-button",onClick:n,children:"\xd7"})]}),(0,eI.jsx)("div",{className:"scrollable-content",children:(0,eI.jsxs)("form",{className:"modal-form",onSubmit:c,children:[(0,eI.jsxs)("div",{className:"input-group",children:[(0,eI.jsx)("label",{children:"Name:"}),(0,eI.jsx)("input",{type:"text",name:"name",value:C.name,onChange:a,required:!0})]}),(0,eI.jsxs)("div",{className:"input-group",children:[(0,eI.jsx)("label",{children:"Description:"}),(0,eI.jsx)("textarea",{className:"description-box",name:"description",value:C.description,onChange:a,required:!0})]}),(0,eI.jsxs)("div",{className:"input-group",children:[(0,eI.jsx)("label",{children:"Location:"}),(0,eI.jsx)("input",{type:"text",name:"location",value:C.location,onChange:a,required:!0})]}),(0,eI.jsxs)("div",{className:"input-group",children:[(0,eI.jsx)("label",{children:"Date:"}),(0,eI.jsx)("input",{type:"date",name:"date",value:C.date,onChange:a,required:!0})]}),(0,eI.jsxs)("div",{className:"input-group",children:[(0,eI.jsx)("label",{children:"Age Group:"}),(0,eI.jsxs)("select",{name:"ageGroup",value:C.ageGroup,onChange:a,required:!0,children:[(0,eI.jsx)("option",{value:"",children:"Select Age Group"}),(0,eI.jsx)("option",{value:"Kids",children:"J Lee Kids"}),(0,eI.jsx)("option",{value:"Elementary",children:"J Lee Elementary"})]})]}),(0,eI.jsxs)("div",{className:"input-group",children:[(0,eI.jsx)("label",{children:"Campus:"}),(0,eI.jsxs)("select",{name:"campus",value:C.campus,onChange:a,required:!0,children:[(0,eI.jsx)("option",{value:"",children:"Select Campus"}),(0,eI.jsx)("option",{value:"\uc804\uccb4",children:"\uc804\uccb4"}),(0,eI.jsx)("option",{value:"\ub3d9\ud0c4",children:"\ub3d9\ud0c4"})]})]}),(0,eI.jsx)("label",{children:"Time Slots:"}),C.timeSlots.map((function(e,g){return(0,eI.jsxs)("div",{className:"timeslot-group",children:[(0,eI.jsxs)("div",{children:[(0,eI.jsx)("label",{children:"Start:"}),(0,eI.jsx)("input",{type:"time",value:e.startTime,onChange:function(e){return o(g,"startTime",e.target.value)},required:!0})]}),(0,eI.jsxs)("div",{children:[(0,eI.jsx)("label",{children:"End:"}),(0,eI.jsx)("input",{type:"time",value:e.endTime,onChange:function(e){return o(g,"endTime",e.target.value)},required:!0})]}),(0,eI.jsxs)("div",{children:[(0,eI.jsx)("label",{children:"Max Attendees:"}),(0,eI.jsx)("input",{type:"number",placeholder:"Max Attendees",value:e.maxAttendees,onChange:function(e){return o(g,"maxAttendees",e.target.value)},required:!0})]}),(0,eI.jsx)("button",{type:"button",className:"remove-slot-btn",onClick:function(){return function(e){l((function(g){var t=i(g.timeSlots);return t.splice(e,1),rg(rg({},g),{},{timeSlots:t})}))}(g)},children:"X"})]},g)})),(0,eI.jsx)("button",{type:"button",className:"add-slot-btn",onClick:function(){l((function(e){return rg(rg({},e),{},{timeSlots:[].concat(i(e.timeSlots),[{startTime:"",endTime:"",maxAttendees:""}])})}))},children:"Add Time Slot"}),(0,eI.jsx)("button",{type:"submit",className:"submit-btn",children:"Create Presentation"})]})})]})},pI=function(e){var t=e.presentationId,n=e.isOpen,I=e.onRequestClose,C=e.onUpdated,l=r((0,g.useState)(null),2),a=l[0],o=l[1],c=r((0,g.useState)([]),2),s=c[0],A=c[1];(0,g.useEffect)((function(){var e=function(){var e=sg(cg().mark((function e(){var g,n;return cg().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return console.error("Invalid presentationId:",t),e.abrupt("return");case 3:return e.prev=3,e.next=6,un.get("".concat("https://palbackend-a8f4e5171ddb.herokuapp.com","/api/presentations/").concat(t));case 6:g=e.sent,n=g.data,o(n),A(n.timeSlots),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),_n.error("Error fetching presentation.");case 15:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(){return e.apply(this,arguments)}}();e()}),[t]);var d=function(e){var g=e.target,t=g.name,n=g.value;o((function(e){return rg(rg({},e),{},ag({},t,n))}))},u=function(e,g,t){var n=i(s);if("startTime"===g||"endTime"===g){var I=r(t.split(":"),2),C=I[0],l=I[1],a=new Date(n[e][g]);a.setUTCHours(parseInt(C)-9,parseInt(l)),n[e][g]=a.toISOString()}else n[e][g]=t;A(n)},m=function(){var e=sg(cg().mark((function e(g){var n;return cg().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g.preventDefault(),n=rg(rg({},a),{},{timeSlots:s}),e.prev=2,e.next=5,un.put("".concat("https://palbackend-a8f4e5171ddb.herokuapp.com","/api/presentations/").concat(t),n);case 5:_n.success("Presentation updated successfully!"),I(),"function"===typeof C&&C(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),_n.error("Error updating presentation.");case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(g){return e.apply(this,arguments)}}();if(!a)return null;var b=function(e){var g=new Date(e);g.setHours(g.getUTCHours()+9);var t=g.getHours().toString().padStart(2,"0"),n=g.getMinutes().toString().padStart(2,"0");return"".concat(t,":").concat(n)};return(0,eI.jsxs)(dg(),{isOpen:n,onRequestClose:I,contentLabel:"Update Presentation",children:[(0,eI.jsx)("h2",{children:"Update Presentation"}),(0,eI.jsxs)("form",{onSubmit:m,children:[(0,eI.jsxs)("div",{children:[(0,eI.jsx)("label",{children:"Name:"}),(0,eI.jsx)("input",{type:"text",name:"name",value:a.name,onChange:d,required:!0})]}),(0,eI.jsxs)("div",{children:[(0,eI.jsx)("label",{children:"Description:"}),(0,eI.jsx)("input",{type:"text",name:"description",value:a.description,onChange:d,required:!0})]}),(0,eI.jsxs)("div",{children:[(0,eI.jsx)("label",{children:"Location:"}),(0,eI.jsx)("input",{type:"text",name:"location",value:a.location,onChange:d,required:!0})]}),(0,eI.jsxs)("div",{children:[(0,eI.jsx)("label",{children:"Date:"}),(0,eI.jsx)("input",{type:"date",name:"date",value:a.date.slice(0,10),onChange:d,required:!0})]}),s.map((function(e,g){var t=b(e.startTime),n=b(e.endTime);return(0,eI.jsxs)("div",{children:[(0,eI.jsxs)("label",{children:["Time Slot ",g+1]}),(0,eI.jsxs)("div",{children:[(0,eI.jsx)("label",{children:"Start Time:"}),(0,eI.jsx)("input",{type:"time",value:t,onChange:function(e){return u(g,"startTime",e.target.value)},required:!0})]}),(0,eI.jsxs)("div",{children:[(0,eI.jsx)("label",{children:"End Time:"}),(0,eI.jsx)("input",{type:"time",value:n,onChange:function(e){return u(g,"endTime",e.target.value)},required:!0})]}),(0,eI.jsxs)("div",{children:[(0,eI.jsx)("label",{children:"Max Attendees:"}),(0,eI.jsx)("input",{type:"number",value:e.maxAttendees,onChange:function(e){return u(g,"maxAttendees",e.target.value)},required:!0})]})]},g)})),(0,eI.jsx)("button",{type:"submit",children:"Update Presentation"})]}),(0,eI.jsx)(zn,{position:"top-center",autoClose:3e3})]})},GI=function(e){var t=e.isOpen,n=e.onRequestClose,I=e.phoneNumbers,C=r((0,g.useState)(""),2),l=C[0],a=C[1],o=r((0,g.useState)(""),2),c=o[0],i=o[1];(0,g.useEffect)((function(){t&&I&&I.length>0&&a(I.join(", "))}),[t,I]);var s=function(){var e=sg(cg().mark((function e(){var g;return cg().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"https://palbackend-a8f4e5171ddb.herokuapp.com",g={phoneNumbers:l.split(", "),message:c},e.next=5,un.post("".concat("https://palbackend-a8f4e5171ddb.herokuapp.com","/api/sms"),g,gg());case 5:200===e.sent.status?(_n.success("SMS sent successfully!"),a(""),i(""),n("")):(console.log("Error sending SMS"),_n.error("Error sending SMS")),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("Error sending SMS:",e.t0),_n.error("Error sending SMS");case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),A=function(){a(""),i(""),n()};return(0,eI.jsx)(dg(),{isOpen:t,onRequestClose:A,contentLabel:"Send SMS Modal",overlayClassName:"ReactModal__Overlay",className:"modal-content",children:(0,eI.jsxs)("div",{className:"modal-header",children:[(0,eI.jsx)("h2",{children:"Send SMS"}),(0,eI.jsxs)("div",{className:"input-group",children:[(0,eI.jsx)(Sg,{className:"icon"}),(0,eI.jsx)("input",{className:"phone",type:"text",value:l,readOnly:!0,placeholder:"Phone number"})]}),(0,eI.jsxs)("div",{className:"input-group",children:[(0,eI.jsx)(fg,{className:"icon"}),(0,eI.jsx)("textarea",{className:"textarea",value:c,onChange:function(e){return i(e.target.value)},placeholder:"Message"})]}),(0,eI.jsxs)("div",{className:"buttons-group",children:[(0,eI.jsx)("button",{className:"button button-primary",onClick:s,children:"Send"}),(0,eI.jsx)("button",{className:"button button-secondary",onClick:A,children:"Cancel"})]})]})})},yI={"aria-busy":!0,role:"status"},BI=t(441),fI=t(613),SI=t.n(fI);var vI=function(e){function g(e,n,o,r,s){for(var A,d,u,m,p,y=0,B=0,f=0,S=0,v=0,J=0,H=u=A=0,N=0,K=0,F=0,x=0,E=o.length,z=E-1,M="",U="",D="",Q="";N<E;){if(d=o.charCodeAt(N),N===z&&0!==B+S+f+y&&(0!==B&&(d=47===B?10:47),S=f=y=0,E++,z++),0===B+S+f+y){if(N===z&&(0<K&&(M=M.replace(i,"")),0<M.trim().length)){switch(d){case 32:case 9:case 59:case 13:case 10:break;default:M+=o.charAt(N)}d=59}switch(d){case 123:for(A=(M=M.trim()).charCodeAt(0),u=1,x=++N;N<E;){switch(d=o.charCodeAt(N)){case 123:u++;break;case 125:u--;break;case 47:switch(d=o.charCodeAt(N+1)){case 42:case 47:e:{for(H=N+1;H<z;++H)switch(o.charCodeAt(H)){case 47:if(42===d&&42===o.charCodeAt(H-1)&&N+2!==H){N=H+1;break e}break;case 10:if(47===d){N=H+1;break e}}N=H}}break;case 91:d++;case 40:d++;case 34:case 39:for(;N++<z&&o.charCodeAt(N)!==d;);}if(0===u)break;N++}if(u=o.substring(x,N),0===A&&(A=(M=M.replace(c,"").trim()).charCodeAt(0)),64===A){switch(0<K&&(M=M.replace(i,"")),d=M.charCodeAt(1)){case 100:case 109:case 115:case 45:K=n;break;default:K=X}if(x=(u=g(n,K,u,d,s+1)).length,0<Y&&(p=a(3,u,K=t(X,M,F),n,V,W,x,d,s,r),M=K.join(""),void 0!==p&&0===(x=(u=p.trim()).length)&&(d=0,u="")),0<x)switch(d){case 115:M=M.replace(G,l);case 100:case 109:case 45:u=M+"{"+u+"}";break;case 107:u=(M=M.replace(b,"$1 $2"))+"{"+u+"}",u=1===k||2===k&&C("@"+u,3)?"@-webkit-"+u+"@"+u:"@"+u;break;default:u=M+u,112===r&&(U+=u,u="")}else u=""}else u=g(n,t(n,M,F),u,r,s+1);D+=u,u=F=K=H=A=0,M="",d=o.charCodeAt(++N);break;case 125:case 59:if(1<(x=(M=(0<K?M.replace(i,""):M).trim()).length))switch(0===H&&(A=M.charCodeAt(0),45===A||96<A&&123>A)&&(x=(M=M.replace(" ",":")).length),0<Y&&void 0!==(p=a(1,M,n,e,V,W,U.length,r,s,r))&&0===(x=(M=p.trim()).length)&&(M="\0\0"),A=M.charCodeAt(0),d=M.charCodeAt(1),A){case 0:break;case 64:if(105===d||99===d){Q+=M+o.charAt(N);break}default:58!==M.charCodeAt(x-1)&&(U+=I(M,A,d,M.charCodeAt(2)))}F=K=H=A=0,M="",d=o.charCodeAt(++N)}}switch(d){case 13:case 10:47===B?B=0:0===1+A&&107!==r&&0<M.length&&(K=1,M+="\0"),0<Y*w&&a(0,M,n,e,V,W,U.length,r,s,r),W=1,V++;break;case 59:case 125:if(0===B+S+f+y){W++;break}default:switch(W++,m=o.charAt(N),d){case 9:case 32:if(0===S+y+B)switch(v){case 44:case 58:case 9:case 32:m="";break;default:32!==d&&(m=" ")}break;case 0:m="\\0";break;case 12:m="\\f";break;case 11:m="\\v";break;case 38:0===S+B+y&&(K=F=1,m="\f"+m);break;case 108:if(0===S+B+y+R&&0<H)switch(N-H){case 2:112===v&&58===o.charCodeAt(N-3)&&(R=v);case 8:111===J&&(R=J)}break;case 58:0===S+B+y&&(H=N);break;case 44:0===B+f+S+y&&(K=1,m+="\r");break;case 34:case 39:0===B&&(S=S===d?0:0===S?d:S);break;case 91:0===S+B+f&&y++;break;case 93:0===S+B+f&&y--;break;case 41:0===S+B+y&&f--;break;case 40:if(0===S+B+y){if(0===A)if(2*v+3*J===533);else A=1;f++}break;case 64:0===B+f+S+y+H+u&&(u=1);break;case 42:case 47:if(!(0<S+y+f))switch(B){case 0:switch(2*d+3*o.charCodeAt(N+1)){case 235:B=47;break;case 220:x=N,B=42}break;case 42:47===d&&42===v&&x+2!==N&&(33===o.charCodeAt(x+2)&&(U+=o.substring(x,N+1)),m="",B=0)}}0===B&&(M+=m)}J=v,v=d,N++}if(0<(x=U.length)){if(K=n,0<Y&&(void 0!==(p=a(2,U,K,e,V,W,x,r,s,r))&&0===(U=p).length))return Q+U+D;if(U=K.join(",")+"{"+U+"}",0!==k*R){switch(2!==k||C(U,2)||(R=0),R){case 111:U=U.replace(h,":-moz-$1")+U;break;case 112:U=U.replace(Z,"::-webkit-input-$1")+U.replace(Z,"::-moz-$1")+U.replace(Z,":-ms-input-$1")+U}R=0}}return Q+U+D}function t(e,g,t){var I=g.trim().split(u);g=I;var C=I.length,l=e.length;switch(l){case 0:case 1:var a=0;for(e=0===l?"":e[0]+" ";a<C;++a)g[a]=n(e,g[a],t).trim();break;default:var o=a=0;for(g=[];a<C;++a)for(var r=0;r<l;++r)g[o++]=n(e[r]+" ",I[a],t).trim()}return g}function n(e,g,t){var n=g.charCodeAt(0);switch(33>n&&(n=(g=g.trim()).charCodeAt(0)),n){case 38:return g.replace(m,"$1"+e.trim());case 58:return e.trim()+g.replace(m,"$1"+e.trim());default:if(0<1*t&&0<g.indexOf("\f"))return g.replace(m,(58===e.charCodeAt(0)?"":"$1")+e.trim())}return e+g}function I(e,g,t,n){var l=e+";",a=2*g+3*t+4*n;if(944===a){e=l.indexOf(":",9)+1;var o=l.substring(e,l.length-1).trim();return o=l.substring(0,e).trim()+o+";",1===k||2===k&&C(o,1)?"-webkit-"+o+o:o}if(0===k||2===k&&!C(l,1))return l;switch(a){case 1015:return 97===l.charCodeAt(10)?"-webkit-"+l+l:l;case 951:return 116===l.charCodeAt(3)?"-webkit-"+l+l:l;case 963:return 110===l.charCodeAt(5)?"-webkit-"+l+l:l;case 1009:if(100!==l.charCodeAt(4))break;case 969:case 942:return"-webkit-"+l+l;case 978:return"-webkit-"+l+"-moz-"+l+l;case 1019:case 983:return"-webkit-"+l+"-moz-"+l+"-ms-"+l+l;case 883:if(45===l.charCodeAt(8))return"-webkit-"+l+l;if(0<l.indexOf("image-set(",11))return l.replace(v,"$1-webkit-$2")+l;break;case 932:if(45===l.charCodeAt(4))switch(l.charCodeAt(5)){case 103:return"-webkit-box-"+l.replace("-grow","")+"-webkit-"+l+"-ms-"+l.replace("grow","positive")+l;case 115:return"-webkit-"+l+"-ms-"+l.replace("shrink","negative")+l;case 98:return"-webkit-"+l+"-ms-"+l.replace("basis","preferred-size")+l}return"-webkit-"+l+"-ms-"+l+l;case 964:return"-webkit-"+l+"-ms-flex-"+l+l;case 1023:if(99!==l.charCodeAt(8))break;return"-webkit-box-pack"+(o=l.substring(l.indexOf(":",15)).replace("flex-","").replace("space-between","justify"))+"-webkit-"+l+"-ms-flex-pack"+o+l;case 1005:return A.test(l)?l.replace(s,":-webkit-")+l.replace(s,":-moz-")+l:l;case 1e3:switch(g=(o=l.substring(13).trim()).indexOf("-")+1,o.charCodeAt(0)+o.charCodeAt(g)){case 226:o=l.replace(p,"tb");break;case 232:o=l.replace(p,"tb-rl");break;case 220:o=l.replace(p,"lr");break;default:return l}return"-webkit-"+l+"-ms-"+o+l;case 1017:if(-1===l.indexOf("sticky",9))break;case 975:switch(g=(l=e).length-10,a=(o=(33===l.charCodeAt(g)?l.substring(0,g):l).substring(e.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|o.charCodeAt(7))){case 203:if(111>o.charCodeAt(8))break;case 115:l=l.replace(o,"-webkit-"+o)+";"+l;break;case 207:case 102:l=l.replace(o,"-webkit-"+(102<a?"inline-":"")+"box")+";"+l.replace(o,"-webkit-"+o)+";"+l.replace(o,"-ms-"+o+"box")+";"+l}return l+";";case 938:if(45===l.charCodeAt(5))switch(l.charCodeAt(6)){case 105:return o=l.replace("-items",""),"-webkit-"+l+"-webkit-box-"+o+"-ms-flex-"+o+l;case 115:return"-webkit-"+l+"-ms-flex-item-"+l.replace(B,"")+l;default:return"-webkit-"+l+"-ms-flex-line-pack"+l.replace("align-content","").replace(B,"")+l}break;case 973:case 989:if(45!==l.charCodeAt(3)||122===l.charCodeAt(4))break;case 931:case 953:if(!0===S.test(e))return 115===(o=e.substring(e.indexOf(":")+1)).charCodeAt(0)?I(e.replace("stretch","fill-available"),g,t,n).replace(":fill-available",":stretch"):l.replace(o,"-webkit-"+o)+l.replace(o,"-moz-"+o.replace("fill-",""))+l;break;case 962:if(l="-webkit-"+l+(102===l.charCodeAt(5)?"-ms-"+l:"")+l,211===t+n&&105===l.charCodeAt(13)&&0<l.indexOf("transform",10))return l.substring(0,l.indexOf(";",27)+1).replace(d,"$1-webkit-$2")+l}return l}function C(e,g){var t=e.indexOf(1===g?":":"{"),n=e.substring(0,3!==g?t:10);return t=e.substring(t+1,e.length-1),H(2!==g?n:n.replace(f,"$1"),t,g)}function l(e,g){var t=I(g,g.charCodeAt(0),g.charCodeAt(1),g.charCodeAt(2));return t!==g+";"?t.replace(y," or ($1)").substring(4):"("+g+")"}function a(e,g,t,n,I,C,l,a,o,c){for(var i,s=0,A=g;s<Y;++s)switch(i=J[s].call(r,e,A,t,n,I,C,l,a,o,c)){case void 0:case!1:case!0:case null:break;default:A=i}if(A!==g)return A}function o(e){return void 0!==(e=e.prefix)&&(H=null,e?"function"!==typeof e?k=1:(k=2,H=e):k=0),o}function r(e,t){var n=e;if(33>n.charCodeAt(0)&&(n=n.trim()),n=[n],0<Y){var I=a(-1,t,n,n,V,W,0,0,0,0);void 0!==I&&"string"===typeof I&&(t=I)}var C=g(X,n,t,0,0);return 0<Y&&(void 0!==(I=a(-2,C,n,n,V,W,C.length,0,0,0))&&(C=I)),"",R=0,W=V=1,C}var c=/^\0+/g,i=/[\0\r\f]/g,s=/: */g,A=/zoo|gra/,d=/([,: ])(transform)/g,u=/,\r+?/g,m=/([\t\r\n ])*\f?&/g,b=/@(k\w+)\s*(\S*)\s*/,Z=/::(place)/g,h=/:(read-only)/g,p=/[svh]\w+-[tblr]{2}/,G=/\(\s*(.*)\s*\)/g,y=/([\s\S]*?);/g,B=/-self|flex-/g,f=/[^]*?(:[rp][el]a[\w-]+)[^]*/,S=/stretch|:\s*\w+\-(?:conte|avail)/,v=/([^-])(image-set\()/,W=1,V=1,R=0,k=1,X=[],J=[],Y=0,H=null,w=0;return r.use=function e(g){switch(g){case void 0:case null:Y=J.length=0;break;default:if("function"===typeof g)J[Y++]=g;else if("object"===typeof g)for(var t=0,n=g.length;t<n;++t)e(g[t]);else w=0|!!g}return e},r.set=o,void 0!==e&&o(e),r},WI={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function VI(e){var g=Object.create(null);return function(t){return void 0===g[t]&&(g[t]=e(t)),g[t]}}var RI=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,kI=VI((function(e){return RI.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),XI=t(110),JI=t.n(XI);function YI(){return(YI=Object.assign||function(e){for(var g=1;g<arguments.length;g++){var t=arguments[g];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}var HI=function(e,g){for(var t=[e[0]],n=0,I=g.length;n<I;n+=1)t.push(g[n],e[n+1]);return t},wI=function(e){return null!==e&&"object"==typeof e&&"[object Object]"===(e.toString?e.toString():Object.prototype.toString.call(e))&&!(0,BI.typeOf)(e)},NI=Object.freeze([]),KI=Object.freeze({});function FI(e){return"function"==typeof e}function xI(e){return e.displayName||e.name||"Component"}function EI(e){return e&&"string"==typeof e.styledComponentId}var zI="undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BACKEND_URL:"https://palbackend-a8f4e5171ddb.herokuapp.com"}&&({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BACKEND_URL:"https://palbackend-a8f4e5171ddb.herokuapp.com"}.REACT_APP_SC_ATTR||{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BACKEND_URL:"https://palbackend-a8f4e5171ddb.herokuapp.com"}.SC_ATTR)||"data-styled",MI="undefined"!=typeof window&&"HTMLElement"in window,UI=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BACKEND_URL:"https://palbackend-a8f4e5171ddb.herokuapp.com"}&&(void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BACKEND_URL:"https://palbackend-a8f4e5171ddb.herokuapp.com"}.REACT_APP_SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BACKEND_URL:"https://palbackend-a8f4e5171ddb.herokuapp.com"}.REACT_APP_SC_DISABLE_SPEEDY?"false"!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BACKEND_URL:"https://palbackend-a8f4e5171ddb.herokuapp.com"}.REACT_APP_SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BACKEND_URL:"https://palbackend-a8f4e5171ddb.herokuapp.com"}.REACT_APP_SC_DISABLE_SPEEDY:void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BACKEND_URL:"https://palbackend-a8f4e5171ddb.herokuapp.com"}.SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BACKEND_URL:"https://palbackend-a8f4e5171ddb.herokuapp.com"}.SC_DISABLE_SPEEDY&&("false"!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BACKEND_URL:"https://palbackend-a8f4e5171ddb.herokuapp.com"}.SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BACKEND_URL:"https://palbackend-a8f4e5171ddb.herokuapp.com"}.SC_DISABLE_SPEEDY)));function DI(e){for(var g=arguments.length,t=new Array(g>1?g-1:0),n=1;n<g;n++)t[n-1]=arguments[n];throw new Error("An error occurred. See https://git.io/JUIaE#"+e+" for more information."+(t.length>0?" Args: "+t.join(", "):""))}var QI=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}var g=e.prototype;return g.indexOfGroup=function(e){for(var g=0,t=0;t<e;t++)g+=this.groupSizes[t];return g},g.insertRules=function(e,g){if(e>=this.groupSizes.length){for(var t=this.groupSizes,n=t.length,I=n;e>=I;)(I<<=1)<0&&DI(16,""+e);this.groupSizes=new Uint32Array(I),this.groupSizes.set(t),this.length=I;for(var C=n;C<I;C++)this.groupSizes[C]=0}for(var l=this.indexOfGroup(e+1),a=0,o=g.length;a<o;a++)this.tag.insertRule(l,g[a])&&(this.groupSizes[e]++,l++)},g.clearGroup=function(e){if(e<this.length){var g=this.groupSizes[e],t=this.indexOfGroup(e),n=t+g;this.groupSizes[e]=0;for(var I=t;I<n;I++)this.tag.deleteRule(t)}},g.getGroup=function(e){var g="";if(e>=this.length||0===this.groupSizes[e])return g;for(var t=this.groupSizes[e],n=this.indexOfGroup(e),I=n+t,C=n;C<I;C++)g+=this.tag.getRule(C)+"/*!sc*/\n";return g},e}(),LI=new Map,TI=new Map,jI=1,OI=function(e){if(LI.has(e))return LI.get(e);for(;TI.has(jI);)jI++;var g=jI++;return LI.set(e,g),TI.set(g,e),g},PI=function(e){return TI.get(e)},_I=function(e,g){g>=jI&&(jI=g+1),LI.set(e,g),TI.set(g,e)},qI="style["+zI+'][data-styled-version="5.3.11"]',$I=new RegExp("^"+zI+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),eC=function(e,g,t){for(var n,I=t.split(","),C=0,l=I.length;C<l;C++)(n=I[C])&&e.registerName(g,n)},gC=function(e,g){for(var t=(g.textContent||"").split("/*!sc*/\n"),n=[],I=0,C=t.length;I<C;I++){var l=t[I].trim();if(l){var a=l.match($I);if(a){var o=0|parseInt(a[1],10),r=a[2];0!==o&&(_I(r,o),eC(e,r,a[3]),e.getTag().insertRules(o,n)),n.length=0}else n.push(l)}}},tC=function(){return t.nc},nC=function(e){var g=document.head,t=e||g,n=document.createElement("style"),I=function(e){for(var g=e.childNodes,t=g.length;t>=0;t--){var n=g[t];if(n&&1===n.nodeType&&n.hasAttribute(zI))return n}}(t),C=void 0!==I?I.nextSibling:null;n.setAttribute(zI,"active"),n.setAttribute("data-styled-version","5.3.11");var l=tC();return l&&n.setAttribute("nonce",l),t.insertBefore(n,C),n},IC=function(){function e(e){var g=this.element=nC(e);g.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var g=document.styleSheets,t=0,n=g.length;t<n;t++){var I=g[t];if(I.ownerNode===e)return I}DI(17)}(g),this.length=0}var g=e.prototype;return g.insertRule=function(e,g){try{return this.sheet.insertRule(g,e),this.length++,!0}catch(e){return!1}},g.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},g.getRule=function(e){var g=this.sheet.cssRules[e];return void 0!==g&&"string"==typeof g.cssText?g.cssText:""},e}(),CC=function(){function e(e){var g=this.element=nC(e);this.nodes=g.childNodes,this.length=0}var g=e.prototype;return g.insertRule=function(e,g){if(e<=this.length&&e>=0){var t=document.createTextNode(g),n=this.nodes[e];return this.element.insertBefore(t,n||null),this.length++,!0}return!1},g.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},g.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),lC=function(){function e(e){this.rules=[],this.length=0}var g=e.prototype;return g.insertRule=function(e,g){return e<=this.length&&(this.rules.splice(e,0,g),this.length++,!0)},g.deleteRule=function(e){this.rules.splice(e,1),this.length--},g.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),aC=MI,oC={isServer:!MI,useCSSOMInjection:!UI},rC=function(){function e(e,g,t){void 0===e&&(e=KI),void 0===g&&(g={}),this.options=YI({},oC,{},e),this.gs=g,this.names=new Map(t),this.server=!!e.isServer,!this.server&&MI&&aC&&(aC=!1,function(e){for(var g=document.querySelectorAll(qI),t=0,n=g.length;t<n;t++){var I=g[t];I&&"active"!==I.getAttribute(zI)&&(gC(e,I),I.parentNode&&I.parentNode.removeChild(I))}}(this))}e.registerId=function(e){return OI(e)};var g=e.prototype;return g.reconstructWithOptions=function(g,t){return void 0===t&&(t=!0),new e(YI({},this.options,{},g),this.gs,t&&this.names||void 0)},g.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},g.getTag=function(){return this.tag||(this.tag=(t=(g=this.options).isServer,n=g.useCSSOMInjection,I=g.target,e=t?new lC(I):n?new IC(I):new CC(I),new QI(e)));var e,g,t,n,I},g.hasNameForId=function(e,g){return this.names.has(e)&&this.names.get(e).has(g)},g.registerName=function(e,g){if(OI(e),this.names.has(e))this.names.get(e).add(g);else{var t=new Set;t.add(g),this.names.set(e,t)}},g.insertRules=function(e,g,t){this.registerName(e,g),this.getTag().insertRules(OI(e),t)},g.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},g.clearRules=function(e){this.getTag().clearGroup(OI(e)),this.clearNames(e)},g.clearTag=function(){this.tag=void 0},g.toString=function(){return function(e){for(var g=e.getTag(),t=g.length,n="",I=0;I<t;I++){var C=PI(I);if(void 0!==C){var l=e.names.get(C),a=g.getGroup(I);if(l&&a&&l.size){var o=zI+".g"+I+'[id="'+C+'"]',r="";void 0!==l&&l.forEach((function(e){e.length>0&&(r+=e+",")})),n+=""+a+o+'{content:"'+r+'"}/*!sc*/\n'}}}return n}(this)},e}(),cC=/(a)(d)/gi,iC=function(e){return String.fromCharCode(e+(e>25?39:97))};function sC(e){var g,t="";for(g=Math.abs(e);g>52;g=g/52|0)t=iC(g%52)+t;return(iC(g%52)+t).replace(cC,"$1-$2")}var AC=function(e,g){for(var t=g.length;t;)e=33*e^g.charCodeAt(--t);return e},dC=function(e){return AC(5381,e)};function uC(e){for(var g=0;g<e.length;g+=1){var t=e[g];if(FI(t)&&!EI(t))return!1}return!0}var mC=dC("5.3.11"),bC=function(){function e(e,g,t){this.rules=e,this.staticRulesId="",this.isStatic=(void 0===t||t.isStatic)&&uC(e),this.componentId=g,this.baseHash=AC(mC,g),this.baseStyle=t,rC.registerId(g)}return e.prototype.generateAndInjectStyles=function(e,g,t){var n=this.componentId,I=[];if(this.baseStyle&&I.push(this.baseStyle.generateAndInjectStyles(e,g,t)),this.isStatic&&!t.hash)if(this.staticRulesId&&g.hasNameForId(n,this.staticRulesId))I.push(this.staticRulesId);else{var C=wC(this.rules,e,g,t).join(""),l=sC(AC(this.baseHash,C)>>>0);if(!g.hasNameForId(n,l)){var a=t(C,"."+l,void 0,n);g.insertRules(n,l,a)}I.push(l),this.staticRulesId=l}else{for(var o=this.rules.length,r=AC(this.baseHash,t.hash),c="",i=0;i<o;i++){var s=this.rules[i];if("string"==typeof s)c+=s;else if(s){var A=wC(s,e,g,t),d=Array.isArray(A)?A.join(""):A;r=AC(r,d+i),c+=d}}if(c){var u=sC(r>>>0);if(!g.hasNameForId(n,u)){var m=t(c,"."+u,void 0,n);g.insertRules(n,u,m)}I.push(u)}}return I.join(" ")},e}(),ZC=/^\s*\/\/.*$/gm,hC=[":","[",".","#"];function pC(e){var g,t,n,I,C=void 0===e?KI:e,l=C.options,a=void 0===l?KI:l,o=C.plugins,r=void 0===o?NI:o,c=new vI(a),i=[],s=function(e){function g(g){if(g)try{e(g+"}")}catch(e){}}return function(t,n,I,C,l,a,o,r,c,i){switch(t){case 1:if(0===c&&64===n.charCodeAt(0))return e(n+";"),"";break;case 2:if(0===r)return n+"/*|*/";break;case 3:switch(r){case 102:case 112:return e(I[0]+n),"";default:return n+(0===i?"/*|*/":"")}case-2:n.split("/*|*/}").forEach(g)}}}((function(e){i.push(e)})),A=function(e,n,C){return 0===n&&-1!==hC.indexOf(C[t.length])||C.match(I)?e:"."+g};function d(e,C,l,a){void 0===a&&(a="&");var o=e.replace(ZC,""),r=C&&l?l+" "+C+" { "+o+" }":o;return g=a,t=C,n=new RegExp("\\"+t+"\\b","g"),I=new RegExp("(\\"+t+"\\b){2,}"),c(l||!C?"":C,r)}return c.use([].concat(r,[function(e,g,I){2===e&&I.length&&I[0].lastIndexOf(t)>0&&(I[0]=I[0].replace(n,A))},s,function(e){if(-2===e){var g=i;return i=[],g}}])),d.hash=r.length?r.reduce((function(e,g){return g.name||DI(15),AC(e,g.name)}),5381).toString():"",d}var GC=g.createContext(),yC=(GC.Consumer,g.createContext()),BC=(yC.Consumer,new rC),fC=pC();function SC(){return(0,g.useContext)(GC)||BC}function vC(){return(0,g.useContext)(yC)||fC}function WC(e){var t=(0,g.useState)(e.stylisPlugins),n=t[0],I=t[1],C=SC(),l=(0,g.useMemo)((function(){var g=C;return e.sheet?g=e.sheet:e.target&&(g=g.reconstructWithOptions({target:e.target},!1)),e.disableCSSOMInjection&&(g=g.reconstructWithOptions({useCSSOMInjection:!1})),g}),[e.disableCSSOMInjection,e.sheet,e.target]),a=(0,g.useMemo)((function(){return pC({options:{prefix:!e.disableVendorPrefixes},plugins:n})}),[e.disableVendorPrefixes,n]);return(0,g.useEffect)((function(){SI()(n,e.stylisPlugins)||I(e.stylisPlugins)}),[e.stylisPlugins]),g.createElement(GC.Provider,{value:l},g.createElement(yC.Provider,{value:a},e.children))}var VC=function(){function e(e,g){var t=this;this.inject=function(e,g){void 0===g&&(g=fC);var n=t.name+g.hash;e.hasNameForId(t.id,n)||e.insertRules(t.id,n,g(t.rules,n,"@keyframes"))},this.toString=function(){return DI(12,String(t.name))},this.name=e,this.id="sc-keyframes-"+e,this.rules=g}return e.prototype.getName=function(e){return void 0===e&&(e=fC),this.name+e.hash},e}(),RC=/([A-Z])/,kC=/([A-Z])/g,XC=/^ms-/,JC=function(e){return"-"+e.toLowerCase()};function YC(e){return RC.test(e)?e.replace(kC,JC).replace(XC,"-ms-"):e}var HC=function(e){return null==e||!1===e||""===e};function wC(e,g,t,n){if(Array.isArray(e)){for(var I,C=[],l=0,a=e.length;l<a;l+=1)""!==(I=wC(e[l],g,t,n))&&(Array.isArray(I)?C.push.apply(C,I):C.push(I));return C}return HC(e)?"":EI(e)?"."+e.styledComponentId:FI(e)?"function"!=typeof(o=e)||o.prototype&&o.prototype.isReactComponent||!g?e:wC(e(g),g,t,n):e instanceof VC?t?(e.inject(t,n),e.getName(n)):e:wI(e)?function e(g,t){var n,I,C=[];for(var l in g)g.hasOwnProperty(l)&&!HC(g[l])&&(Array.isArray(g[l])&&g[l].isCss||FI(g[l])?C.push(YC(l)+":",g[l],";"):wI(g[l])?C.push.apply(C,e(g[l],l)):C.push(YC(l)+": "+(n=l,(null==(I=g[l])||"boolean"==typeof I||""===I?"":"number"!=typeof I||0===I||n in WI||n.startsWith("--")?String(I).trim():I+"px")+";")));return t?[t+" {"].concat(C,["}"]):C}(e):e.toString();var o}var NC=function(e){return Array.isArray(e)&&(e.isCss=!0),e};function KC(e){for(var g=arguments.length,t=new Array(g>1?g-1:0),n=1;n<g;n++)t[n-1]=arguments[n];return FI(e)||wI(e)?NC(wC(HI(NI,[e].concat(t)))):0===t.length&&1===e.length&&"string"==typeof e[0]?e:NC(wC(HI(e,t)))}new Set;var FC=function(e,g,t){return void 0===t&&(t=KI),e.theme!==t.theme&&e.theme||g||t.theme},xC=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,EC=/(^-|-$)/g;function zC(e){return e.replace(xC,"-").replace(EC,"")}var MC=function(e){return sC(dC(e)>>>0)};function UC(e){return"string"==typeof e&&!0}var DC=function(e){return"function"==typeof e||"object"==typeof e&&null!==e&&!Array.isArray(e)},QC=function(e){return"__proto__"!==e&&"constructor"!==e&&"prototype"!==e};function LC(e,g,t){var n=e[t];DC(g)&&DC(n)?TC(n,g):e[t]=g}function TC(e){for(var g=arguments.length,t=new Array(g>1?g-1:0),n=1;n<g;n++)t[n-1]=arguments[n];for(var I=0,C=t;I<C.length;I++){var l=C[I];if(DC(l))for(var a in l)QC(a)&&LC(e,l[a],a)}return e}var jC=g.createContext();jC.Consumer;var OC={};function PC(e,t,n){var I=EI(e),C=!UC(e),l=t.attrs,a=void 0===l?NI:l,o=t.componentId,r=void 0===o?function(e,g){var t="string"!=typeof e?"sc":zC(e);OC[t]=(OC[t]||0)+1;var n=t+"-"+MC("5.3.11"+t+OC[t]);return g?g+"-"+n:n}(t.displayName,t.parentComponentId):o,c=t.displayName,i=void 0===c?function(e){return UC(e)?"styled."+e:"Styled("+xI(e)+")"}(e):c,s=t.displayName&&t.componentId?zC(t.displayName)+"-"+t.componentId:t.componentId||r,A=I&&e.attrs?Array.prototype.concat(e.attrs,a).filter(Boolean):a,d=t.shouldForwardProp;I&&e.shouldForwardProp&&(d=t.shouldForwardProp?function(g,n,I){return e.shouldForwardProp(g,n,I)&&t.shouldForwardProp(g,n,I)}:e.shouldForwardProp);var u,m=new bC(n,s,I?e.componentStyle:void 0),b=m.isStatic&&0===a.length,Z=function(e,t){return function(e,t,n,I){var C=e.attrs,l=e.componentStyle,a=e.defaultProps,o=e.foldedComponentIds,r=e.shouldForwardProp,c=e.styledComponentId,i=e.target,s=function(e,g,t){void 0===e&&(e=KI);var n=YI({},g,{theme:e}),I={};return t.forEach((function(e){var g,t,C,l=e;for(g in FI(l)&&(l=l(n)),l)n[g]=I[g]="className"===g?(t=I[g],C=l[g],t&&C?t+" "+C:t||C):l[g]})),[n,I]}(FC(t,(0,g.useContext)(jC),a)||KI,t,C),A=s[0],d=s[1],u=function(e,g,t,n){var I=SC(),C=vC();return g?e.generateAndInjectStyles(KI,I,C):e.generateAndInjectStyles(t,I,C)}(l,I,A),m=n,b=d.$as||t.$as||d.as||t.as||i,Z=UC(b),h=d!==t?YI({},t,{},d):t,p={};for(var G in h)"$"!==G[0]&&"as"!==G&&("forwardedAs"===G?p.as=h[G]:(r?r(G,kI,b):!Z||kI(G))&&(p[G]=h[G]));return t.style&&d.style!==t.style&&(p.style=YI({},t.style,{},d.style)),p.className=Array.prototype.concat(o,c,u!==c?u:null,t.className,d.className).filter(Boolean).join(" "),p.ref=m,(0,g.createElement)(b,p)}(u,e,t,b)};return Z.displayName=i,(u=g.forwardRef(Z)).attrs=A,u.componentStyle=m,u.displayName=i,u.shouldForwardProp=d,u.foldedComponentIds=I?Array.prototype.concat(e.foldedComponentIds,e.styledComponentId):NI,u.styledComponentId=s,u.target=I?e.target:e,u.withComponent=function(e){var g=t.componentId,I=function(e,g){if(null==e)return{};var t,n,I={},C=Object.keys(e);for(n=0;n<C.length;n++)t=C[n],g.indexOf(t)>=0||(I[t]=e[t]);return I}(t,["componentId"]),C=g&&g+"-"+(UC(e)?e:zC(xI(e)));return PC(e,YI({},I,{attrs:A,componentId:C}),n)},Object.defineProperty(u,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(g){this._foldedDefaultProps=I?TC({},e.defaultProps,g):g}}),Object.defineProperty(u,"toString",{value:function(){return"."+u.styledComponentId}}),C&&JI()(u,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),u}var _C=function(e){return function e(g,t,n){if(void 0===n&&(n=KI),!(0,BI.isValidElementType)(t))return DI(1,String(t));var I=function(){return g(t,n,KC.apply(void 0,arguments))};return I.withConfig=function(I){return e(g,t,YI({},n,{},I))},I.attrs=function(I){return e(g,t,YI({},n,{attrs:Array.prototype.concat(n.attrs,I).filter(Boolean)}))},I}(PC,e)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach((function(e){_C[e]=_C(e)}));!function(){function e(e,g){this.rules=e,this.componentId=g,this.isStatic=uC(e),rC.registerId(this.componentId+1)}var g=e.prototype;g.createStyles=function(e,g,t,n){var I=n(wC(this.rules,g,t,n).join(""),""),C=this.componentId+e;t.insertRules(C,C,I)},g.removeStyles=function(e,g){g.clearRules(this.componentId+e)},g.renderStyles=function(e,g,t,n){e>2&&rC.registerId(this.componentId+e),this.removeStyles(e,t),this.createStyles(e,g,t,n)}}();function qC(e){for(var g=arguments.length,t=new Array(g>1?g-1:0),n=1;n<g;n++)t[n-1]=arguments[n];var I=KC.apply(void 0,[e].concat(t)).join(""),C=MC(I);return new VC(C,I)}!function(){function e(){var e=this;this._emitSheetCSS=function(){var g=e.instance.toString();if(!g)return"";var t=tC();return"<style "+[t&&'nonce="'+t+'"',zI+'="true"','data-styled-version="5.3.11"'].filter(Boolean).join(" ")+">"+g+"</style>"},this.getStyleTags=function(){return e.sealed?DI(2):e._emitSheetCSS()},this.getStyleElement=function(){var t;if(e.sealed)return DI(2);var n=((t={})[zI]="",t["data-styled-version"]="5.3.11",t.dangerouslySetInnerHTML={__html:e.instance.toString()},t),I=tC();return I&&(n.nonce=I),[g.createElement("style",YI({},n,{key:"sc-0-0"}))]},this.seal=function(){e.sealed=!0},this.instance=new rC({isServer:!0}),this.sealed=!1}var t=e.prototype;t.collectStyles=function(e){return this.sealed?DI(2):g.createElement(WC,{sheet:this.instance},e)},t.interleaveWithNodeStream=function(e){return DI(3)}}();var $C,el,gl=_C,tl=function(e,g){return Object.defineProperty?Object.defineProperty(e,"raw",{value:g}):e.raw=g,e},nl=242.776657104492,Il=qC($C||($C=tl(["\n  12.5% {\n    stroke-dasharray: ","px, ","px;\n    stroke-dashoffset: -","px;\n  }\n  43.75% {\n    stroke-dasharray: ","px, ","px;\n    stroke-dashoffset: -","px;\n  }\n  100% {\n    stroke-dasharray: ","px, ","px;\n    stroke-dashoffset: -","px;\n  }\n"],["\n  12.5% {\n    stroke-dasharray: ","px, ","px;\n    stroke-dashoffset: -","px;\n  }\n  43.75% {\n    stroke-dasharray: ","px, ","px;\n    stroke-dashoffset: -","px;\n  }\n  100% {\n    stroke-dasharray: ","px, ","px;\n    stroke-dashoffset: -","px;\n  }\n"])),.14*nl,nl,.11*nl,.35*nl,nl,.35*nl,.01*nl,nl,.99*nl),Cl=(gl.path(el||(el=tl(["\n  stroke-dasharray: ","px, ",";\n  stroke-dashoffset: 0;\n  animation: "," ","s linear infinite;\n"],["\n  stroke-dasharray: ","px, ",";\n  stroke-dashoffset: 0;\n  animation: "," ","s linear infinite;\n"])),.01*nl,nl,Il,1.6),function(e,g){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("undefined"!==typeof t[e])return t[e];if(e&&e.indexOf(".")>0){for(var n=e.split("."),I=n.length,C=t[n[0]],l=1;null!=C&&l<I;)C=C[n[l]],l+=1;if("undefined"!==typeof C)return C}return g}});var ll,al,ol,rl=function(e,g){return Object.defineProperty?Object.defineProperty(e,"raw",{value:g}):e.raw=g,e},cl=qC(ll||(ll=rl(["\n to {\n    transform: rotate(360deg);\n  }\n"],["\n to {\n    transform: rotate(360deg);\n  }\n"])));gl.svg(al||(al=rl(["\n  animation: "," 0.75s steps(12, end) infinite;\n  animation-duration: ","s;\n"],["\n  animation: "," 0.75s steps(12, end) infinite;\n  animation-duration: ","s;\n"])),cl,Cl("speed","0.75")),gl.polyline(ol||(ol=rl(["\n  stroke-width: ","px;\n  stroke-linecap: round;\n\n  &:nth-child(12n + 0) {\n    stroke-opacity: 0.08;\n  }\n\n  &:nth-child(12n + 1) {\n    stroke-opacity: 0.17;\n  }\n\n  &:nth-child(12n + 2) {\n    stroke-opacity: 0.25;\n  }\n\n  &:nth-child(12n + 3) {\n    stroke-opacity: 0.33;\n  }\n\n  &:nth-child(12n + 4) {\n    stroke-opacity: 0.42;\n  }\n\n  &:nth-child(12n + 5) {\n    stroke-opacity: 0.5;\n  }\n\n  &:nth-child(12n + 6) {\n    stroke-opacity: 0.58;\n  }\n\n  &:nth-child(12n + 7) {\n    stroke-opacity: 0.66;\n  }\n\n  &:nth-child(12n + 8) {\n    stroke-opacity: 0.75;\n  }\n\n  &:nth-child(12n + 9) {\n    stroke-opacity: 0.83;\n  }\n\n  &:nth-child(12n + 11) {\n    stroke-opacity: 0.92;\n  }\n"],["\n  stroke-width: ","px;\n  stroke-linecap: round;\n\n  &:nth-child(12n + 0) {\n    stroke-opacity: 0.08;\n  }\n\n  &:nth-child(12n + 1) {\n    stroke-opacity: 0.17;\n  }\n\n  &:nth-child(12n + 2) {\n    stroke-opacity: 0.25;\n  }\n\n  &:nth-child(12n + 3) {\n    stroke-opacity: 0.33;\n  }\n\n  &:nth-child(12n + 4) {\n    stroke-opacity: 0.42;\n  }\n\n  &:nth-child(12n + 5) {\n    stroke-opacity: 0.5;\n  }\n\n  &:nth-child(12n + 6) {\n    stroke-opacity: 0.58;\n  }\n\n  &:nth-child(12n + 7) {\n    stroke-opacity: 0.66;\n  }\n\n  &:nth-child(12n + 8) {\n    stroke-opacity: 0.75;\n  }\n\n  &:nth-child(12n + 9) {\n    stroke-opacity: 0.83;\n  }\n\n  &:nth-child(12n + 11) {\n    stroke-opacity: 0.92;\n  }\n"])),(function(e){return e.width}));var il,sl,Al,dl=function(e,g){return Object.defineProperty?Object.defineProperty(e,"raw",{value:g}):e.raw=g,e},ul=qC(il||(il=dl(["\n to {\n    stroke-dashoffset: 136;\n  }\n"],["\n to {\n    stroke-dashoffset: 136;\n  }\n"])));gl.polygon(sl||(sl=dl(["\n  stroke-dasharray: 17;\n  animation: "," 2.5s cubic-bezier(0.35, 0.04, 0.63, 0.95) infinite;\n"],["\n  stroke-dasharray: 17;\n  animation: "," 2.5s cubic-bezier(0.35, 0.04, 0.63, 0.95) infinite;\n"])),ul),gl.svg(Al||(Al=dl(["\n  transform-origin: 50% 65%;\n"],["\n  transform-origin: 50% 65%;\n"])));var ml=function(){return ml=Object.assign||function(e){for(var g,t=1,n=arguments.length;t<n;t++)for(var I in g=arguments[t])Object.prototype.hasOwnProperty.call(g,I)&&(e[I]=g[I]);return e},ml.apply(this,arguments)};function bl(e){var t=e.visible,n=void 0===t||t,I=e.height,C=void 0===I?"80":I,l=e.width,a=void 0===l?"80":l,o=e.wrapperClass,r=void 0===o?"":o,c=e.wrapperStyle,i=void 0===c?{}:c,s=e.ariaLabel,A=void 0===s?"progress-bar-loading":s,d=e.borderColor,u=void 0===d?"#F4442E":d,m=e.barColor,b=void 0===m?"#51E5FF":m;return n?g.createElement("svg",ml({width:a,height:C,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",className:r,style:i,"aria-label":A,"data-testid":"progress-bar-svg"},yI),g.createElement("defs",null,g.createElement("clipPath",{"ng-attr-id":"{{config.cpid}}",x:"0",y:"0",width:"100",height:"100",id:"lds-progress-cpid-5009611b8a418"},g.createElement("rect",{x:"0",y:"0",width:"66.6667",height:"100"},g.createElement("animate",{attributeName:"width",calcMode:"linear",values:"0;100;100",keyTimes:"0;0.5;1",dur:"1",begin:"0s",repeatCount:"indefinite"}),g.createElement("animate",{attributeName:"x",calcMode:"linear",values:"0;0;100",keyTimes:"0;0.5;1",dur:"1",begin:"0s",repeatCount:"indefinite"})))),g.createElement("path",{fill:"none","ng-attr-stroke":"{{config.c1}}",strokeWidth:"2.7928",d:"M82,63H18c-7.2,0-13-5.8-13-13v0c0-7.2,5.8-13,13-13h64c7.2,0,13,5.8,13,13v0C95,57.2,89.2,63,82,63z",stroke:u}),g.createElement("path",{"ng-attr-fill":"{{config.c2}}","ng-attr-clip-path":"url(#{{config.cpid}})",d:"M81.3,58.7H18.7c-4.8,0-8.7-3.9-8.7-8.7v0c0-4.8,3.9-8.7,8.7-8.7h62.7c4.8,0,8.7,3.9,8.7,8.7v0C90,54.8,86.1,58.7,81.3,58.7z",fill:b,clipPath:"url(#lds-progress-cpid-5009611b8a418)"})):null}var Zl=function(){var e=r((0,g.useState)([]),2),t=e[0],n=e[1],I=r((0,g.useState)(!1),2),C=I[0],l=I[1],a=r((0,g.useState)(null),2),o=a[0],c=a[1],i=r((0,g.useState)(!1),2),s=i[0],A=i[1],d=r((0,g.useState)([]),2),u=d[0],m=d[1],b=r((0,g.useState)(!0),2),Z=b[0],h=b[1],p=function(){var e=sg(cg().mark((function e(){var g;return cg().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(!0),e.next=4,un.get("".concat("https://palbackend-a8f4e5171ddb.herokuapp.com","/api/presentations/presentations"),{headers:gg()});case 4:g=e.sent,n(g.data),h(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),_n.error("Error fetching presentations."),h(!1);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();(0,g.useEffect)((function(){p()}),[]);var G=function(){var e=sg(cg().mark((function e(g){var t;return cg().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.confirm("Are you sure you want to delete this presentation?")){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,t=gg(),e.next=6,un.delete("".concat("https://palbackend-a8f4e5171ddb.herokuapp.com","/api/presentations/").concat(g),t);case 6:n((function(e){return e.filter((function(e){return e._id!==g}))})),_n.success("Presentation deleted successfully!"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),_n.error("Error deleting presentation: ".concat(e.t0.response.data.message));case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(g){return e.apply(this,arguments)}}(),y=function(e){var g=e.attendees?e.attendees.length:0,t=e.maxAttendees||0;return"".concat(g,"/").concat(t)};return(0,eI.jsxs)("div",{children:[(0,eI.jsx)("h2",{children:"Presentation List"}),Z?(0,eI.jsx)("div",{style:{textAlign:"center",margin:"2rem 0"},children:(0,eI.jsx)(bl,{color:"#00BFFF",height:100,width:100})}):(0,eI.jsxs)(eI.Fragment,{children:[(0,eI.jsxs)("table",{children:[(0,eI.jsx)("thead",{children:(0,eI.jsxs)("tr",{children:[(0,eI.jsx)("th",{children:"Name"}),(0,eI.jsx)("th",{children:"Location"}),(0,eI.jsx)("th",{children:"Campus"}),(0,eI.jsx)("th",{children:"Date"}),(0,eI.jsx)("th",{children:"Start Time"}),(0,eI.jsx)("th",{children:"End Time"}),(0,eI.jsx)("th",{children:"Attendees"}),(0,eI.jsx)("th",{children:"Actions"})]})}),(0,eI.jsx)("tbody",{children:t.map((function(e){return(0,eI.jsx)(g.Fragment,{children:e.timeSlots&&e.timeSlots.map((function(g){return(0,eI.jsxs)("tr",{children:[(0,eI.jsx)("td",{children:e.name}),(0,eI.jsx)("td",{children:e.location}),(0,eI.jsx)("td",{children:e.campus}),(0,eI.jsx)("td",{children:new Date(e.date).toLocaleDateString()}),(0,eI.jsx)("td",{children:new Date(g.startTime).toLocaleTimeString()}),(0,eI.jsx)("td",{children:new Date(g.endTime).toLocaleTimeString()}),(0,eI.jsx)("td",{children:y(g)}),(0,eI.jsxs)("td",{children:[(0,eI.jsx)("button",{onClick:function(){return G(e._id)},children:"Delete"}),(0,eI.jsx)("button",{onClick:function(){return g=e._id,c(g),void l(!0);var g},children:"Edit"}),(0,eI.jsx)("button",{onClick:function(){return function(e){var g=t.find((function(g){return g._id===e})),n=g.timeSlots.flatMap((function(e){return e.attendees.map((function(e){var g;return null===(g=e._id)||void 0===g?void 0:g.phone}))}));m(n),A(!0)}(e._id)},children:"Send SMS"})]})]},g._id)}))},e._id)}))})]}),(0,eI.jsx)(pI,{presentationId:o,isOpen:C,onRequestClose:function(){c(null),l(!1)},onUpdated:p}),(0,eI.jsx)(GI,{isOpen:s,onRequestClose:function(){return A(!1)},phoneNumbers:u})]})]})},hl=function(e){var t=e.isOpen,n=e.onRequestClose,I=localStorage.getItem("userCampus")||"",C=localStorage.getItem("userRole")||"",l=r((0,g.useState)({date:"",startTime:"",endTime:"",testGrade:"",campus:I,capacity:""}),2),a=l[0],o=l[1],c=function(e){o(rg(rg({},a),{},ag({},e.target.name,e.target.value)))},i=function(){var e=sg(cg().mark((function e(g){var t;return cg().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g.preventDefault(),e.prev=1,t=localStorage.getItem("token"),e.next=5,un.post("".concat("https://palbackend-a8f4e5171ddb.herokuapp.com","/api/timeSlots"),a,{headers:{Authorization:"Bearer ".concat(t)}});case 5:alert("Test slot created successfully!"),o({date:"",startTime:"",endTime:"",testGrade:"",campus:I,capacity:""}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),alert("Error creating test slot.");case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(g){return e.apply(this,arguments)}}();return(0,eI.jsx)(dg(),{isOpen:t,onRequestClose:n,contentLabel:"Create Test Slot",className:"testslot-modal",overlayClassName:"overlay",children:(0,eI.jsxs)("div",{className:"form-container",children:[(0,eI.jsx)("h2",{children:"Create Test Slot"}),(0,eI.jsxs)("form",{onSubmit:i,children:[(0,eI.jsxs)("div",{className:"label-input-group",children:[(0,eI.jsx)("label",{htmlFor:"date",children:"Date:"}),(0,eI.jsx)("input",{type:"date",id:"date",name:"date",value:a.date,onChange:c,required:!0})]}),(0,eI.jsxs)("div",{className:"label-input-group",children:[(0,eI.jsx)("label",{htmlFor:"startTime",children:"Start Time:"}),(0,eI.jsx)("input",{type:"time",id:"startTime",name:"startTime",value:a.startTime,onChange:c,required:!0})]}),(0,eI.jsxs)("div",{className:"label-input-group",children:[(0,eI.jsx)("label",{htmlFor:"endTime",children:"End Time:"}),(0,eI.jsx)("input",{type:"time",id:"endTime",name:"endTime",value:a.endTime,onChange:c,required:!0})]}),(0,eI.jsxs)("div",{className:"label-input-group",children:[(0,eI.jsx)("label",{htmlFor:"testGrade",children:"Age Group:"}),(0,eI.jsxs)("select",{id:"testGrade",name:"testGrade",value:a.testGrade,onChange:c,children:[(0,eI.jsx)("option",{value:"",children:"Select Grade"}),(0,eI.jsx)("option",{value:"\uc608\ube44 5\uc138",children:"\uc608\ube44 5\uc138"}),(0,eI.jsx)("option",{value:"\uc608\ube44 6\uc138",children:"\uc608\ube44 6\uc138"}),(0,eI.jsx)("option",{value:"\uc608\ube44 7\uc138",children:"\uc608\ube44 7\uc138"}),(0,eI.jsx)("option",{value:"\uc608\ube44 \ucd08\ub4f1 1\ud559\ub144",children:"\uc608\ube44 \ucd08\ub4f1 1\ud559\ub144"}),(0,eI.jsx)("option",{value:"\uc608\ube44 \ucd08\ub4f1 2\ud559\ub144",children:"\uc608\ube44 \ucd08\ub4f1 2\ud559\ub144"}),(0,eI.jsx)("option",{value:"\uc608\ube44 \ucd08\ub4f1 3\ud559\ub144",children:"\uc608\ube44 \ucd08\ub4f1 3\ud559\ub144"}),(0,eI.jsx)("option",{value:"\uc608\ube44 \ucd08\ub4f1 4\ud559\ub144",children:"\uc608\ube44 \ucd08\ub4f1 4\ud559\ub144"}),(0,eI.jsx)("option",{value:"\uc608\ube44 \ucd08\ub4f1 5\ud559\ub144",children:"\uc608\ube44 \ucd08\ub4f1 5\ud559\ub144"}),(0,eI.jsx)("option",{value:"\uc608\ube44 \ucd08\ub4f1 6\ud559\ub144",children:"\uc608\ube44 \ucd08\ub4f1 6\ud559\ub144"}),(0,eI.jsx)("option",{value:"\uc608\ube44 \uc911\ub4f1 1\ud559\ub144",children:"\uc608\ube44 \uc911\ub4f1 1\ud559\ub144"}),(0,eI.jsx)("option",{value:"\uc608\ube44 \uc911\ub4f1 2\ud559\ub144",children:"\uc608\ube44 \uc911\ub4f1 2\ud559\ub144"})]})]}),(0,eI.jsxs)("div",{className:"label-input-group",children:[(0,eI.jsx)("label",{htmlFor:"campus",children:"Campus:"}),"superadmin"!==C?(0,eI.jsx)("input",{type:"text",id:"campus",name:"campus",value:a.campus,readOnly:!0}):(0,eI.jsxs)("select",{id:"campus",name:"campus",value:a.campus,onChange:c,children:[(0,eI.jsx)("option",{value:"",children:"Select Campus"}),(0,eI.jsx)("option",{value:"\ubd84\ub2f9",children:"\ubd84\ub2f9"}),(0,eI.jsx)("option",{value:"\ub3d9\ud0c4",children:"\ub3d9\ud0c4"}),(0,eI.jsx)("option",{value:"\uc218\uc9c0",children:"\uc218\uc9c0"})]})]}),(0,eI.jsxs)("div",{className:"label-input-group",children:[(0,eI.jsx)("label",{htmlFor:"capacity",children:"Capacity:"}),(0,eI.jsx)("input",{type:"number",id:"capacity",name:"capacity",value:a.capacity,onChange:c,required:!0})]}),(0,eI.jsx)("button",{type:"submit",children:"Create Slot"})]})]})})},pl=function(e){var t=e.testSlotId,n=e.onClose,I=e.onUpdated,C=r((0,g.useState)({date:"",startTime:"",endTime:"",campus:"",capacity:""}),2),l=C[0],a=C[1];(0,g.useEffect)((function(){var e=function(){var e=sg(cg().mark((function e(){var g;return cg().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,un.get("".concat("https://palbackend-a8f4e5171ddb.herokuapp.com","/api/timeSlots/").concat(t));case 3:g=e.sent,a(g.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert("Error fetching test slot.");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[t]);var o=function(e){a(rg(rg({},l),{},ag({},e.target.name,e.target.value)))},c=function(){var e=sg(cg().mark((function e(g){return cg().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g.preventDefault(),e.prev=1,e.next=4,un.patch("".concat("https://palbackend-a8f4e5171ddb.herokuapp.com","/api/timeSlots/").concat(t),l);case 4:n(),I(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),alert("Error updating test slot.");case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(g){return e.apply(this,arguments)}}();return(0,eI.jsx)("div",{children:(0,eI.jsxs)(dg(),{isOpen:!0,onRequestClose:n,contentLabel:"Update Test Slot",children:[(0,eI.jsx)("h2",{children:"Update Test Slot"}),(0,eI.jsxs)("form",{onSubmit:c,children:[(0,eI.jsxs)("div",{children:[(0,eI.jsx)("label",{children:"Date:"}),(0,eI.jsx)("input",{type:"date",name:"date",value:l.date,onChange:o,required:!0})]}),(0,eI.jsxs)("div",{children:[(0,eI.jsx)("label",{children:"Start Time:"}),(0,eI.jsx)("input",{type:"time",name:"startTime",value:l.startTime,onChange:o,required:!0})]}),(0,eI.jsxs)("div",{children:[(0,eI.jsx)("label",{children:"End Time:"}),(0,eI.jsx)("input",{type:"time",name:"endTime",value:l.endTime,onChange:o,required:!0})]}),(0,eI.jsxs)("div",{children:[(0,eI.jsx)("label",{children:"Campus:"}),(0,eI.jsxs)("select",{name:"campus",value:l.campus,onChange:o,children:[(0,eI.jsx)("option",{value:"Suji",children:"Suji"}),(0,eI.jsx)("option",{value:"Dongtan",children:"Dongtan"}),(0,eI.jsx)("option",{value:"Bundang",children:"Bundang"})]})]}),(0,eI.jsxs)("div",{children:[(0,eI.jsx)("label",{children:"Capacity:"}),(0,eI.jsx)("input",{type:"number",name:"capacity",value:l.capacity,onChange:o,required:!0})]}),(0,eI.jsx)("button",{type:"submit",children:"Update Slot"})]})]})})},Gl=function(){var e=r((0,g.useState)([]),2),t=e[0],n=e[1],I=r((0,g.useState)(null),2),C=I[0],l=I[1];(0,g.useEffect)((function(){var e=function(){var e=sg(cg().mark((function e(){var g;return cg().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,un.get("".concat("https://palbackend-a8f4e5171ddb.herokuapp.com","/api/timeSlots/admin"));case 3:g=e.sent,n(g.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),_n.error("Error fetching test slots.");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[]);var a=function(){var e=sg(cg().mark((function e(){var g;return cg().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,un.get("".concat("https://palbackend-a8f4e5171ddb.herokuapp.com","/api/timeSlots/admin"));case 3:g=e.sent,n(g.data),_n.success("Test slot list updated!"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),_n.error("Error updating test slot list.");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),o=function(){var e=sg(cg().mark((function e(g){return cg().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,un.delete("".concat("https://palbackend-a8f4e5171ddb.herokuapp.com","/api/timeSlots/").concat(g));case 3:n((function(e){return e.filter((function(e){return e._id!==g}))})),_n.success("Test slot deleted successfully!"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),_n.error("Error deleting test slot.");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(g){return e.apply(this,arguments)}}();return(0,eI.jsxs)("div",{className:"timeslots",children:[(0,eI.jsx)("h2",{children:"Test Slot List"}),(0,eI.jsxs)("table",{children:[(0,eI.jsx)("thead",{children:(0,eI.jsxs)("tr",{children:[(0,eI.jsx)("th",{children:"Campus"}),(0,eI.jsx)("th",{children:"Age Group"}),(0,eI.jsx)("th",{children:"Date"}),(0,eI.jsx)("th",{children:"Start Time"}),(0,eI.jsx)("th",{children:"End Time"}),(0,eI.jsx)("th",{children:"Capacity"}),(0,eI.jsx)("th",{children:"Actions"})]})}),(0,eI.jsx)("tbody",{children:t.map((function(e){return(0,eI.jsxs)("tr",{children:[(0,eI.jsx)("td",{children:e.campus}),(0,eI.jsx)("td",{children:e.testGrade}),(0,eI.jsx)("td",{children:new Date(e.date).toLocaleDateString()}),(0,eI.jsx)("td",{children:e.startTime}),(0,eI.jsx)("td",{children:e.endTime}),(0,eI.jsxs)("td",{children:[e.booked||0,"/",e.capacity]}),(0,eI.jsxs)("td",{children:[(0,eI.jsx)("button",{onClick:function(){return function(e){l(e)}(e)},children:"Edit"}),(0,eI.jsx)("button",{onClick:function(){return o(e._id)},children:"Delete"})]})]},e._id)}))})]}),C&&(0,eI.jsx)(pl,{testSlotId:C._id,onClose:function(){l(null)},onUpdated:a})]})},yl=function(){var e=r((0,g.useState)([]),2),t=e[0],n=e[1],I=r((0,g.useState)([]),2),C=I[0],l=I[1],a=r((0,g.useState)(!1),2),o=a[0],c=a[1],s=r((0,g.useState)([]),2),A=s[0],d=s[1],u=r((0,g.useState)(""),2),m=u[0],b=u[1],Z=r((0,g.useState)(""),2),h=Z[0],p=Z[1];var G=function(){var e=sg(cg().mark((function e(g){var I;return cg().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"https://palbackend-a8f4e5171ddb.herokuapp.com",e.next=4,un.delete("".concat("https://palbackend-a8f4e5171ddb.herokuapp.com","/api/bookings/admin/delete/").concat(g),gg());case 4:200===e.sent.status?(I=t.filter((function(e){return e._id!==g})),n(I),_n.success("Booking successfully cancelled.")):(console.log("Error deleting booking"),_n.error("Error deleting booking.")),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0),_n.error("Operation failed.");case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(g){return e.apply(this,arguments)}}(),y=function(){var e=sg(cg().mark((function e(g){var I;return cg().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"https://palbackend-a8f4e5171ddb.herokuapp.com",e.next=4,un.patch("".concat("https://palbackend-a8f4e5171ddb.herokuapp.com","/api/bookings/payment/").concat(g),{},gg());case 4:200===e.sent.status?(I=t.map((function(e){return e._id===g?rg(rg({},e),{},{paid:!0}):e})),n(I),_n.success("Booking marked as paid.")):(console.log("Error updating booking"),_n.error("Error updating booking.")),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("Error updating booking:",e.t0),_n.error("Error updating the booking. ".concat(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(g){return e.apply(this,arguments)}}();return(0,g.useEffect)((function(){b(localStorage.getItem("userCampus")),p(localStorage.getItem("userRole"));var e=function(){var e=sg(cg().mark((function e(){var g,t;return cg().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,un.get("".concat("https://palbackend-a8f4e5171ddb.herokuapp.com","/api/bookings"));case 3:g=e.sent,"superadmin"===h?n(g.data):(t=g.data.filter((function(e){return e.testSlot&&e.testSlot.campus===m})),n(t)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("Error fetching bookings:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[m,h]),(0,eI.jsxs)("div",{children:[(0,eI.jsx)(GI,{isOpen:o,onRequestClose:function(){c(!1),l([]),d([])},phoneNumber:C.length>0?C[0]:"",phoneNumbers:[].concat(i(C),i(A.map((function(e){return e.phone}))))},o),(0,eI.jsx)("h2",{children:"Booking List"}),(0,eI.jsxs)("table",{children:[(0,eI.jsx)("thead",{children:(0,eI.jsxs)("tr",{children:[(0,eI.jsx)("th",{children:"Child"}),(0,eI.jsx)("th",{children:"Test Grade"}),(0,eI.jsx)("th",{children:"DOB"}),(0,eI.jsx)("th",{children:"Gender"}),(0,eI.jsx)("th",{children:"Campus"}),(0,eI.jsx)("th",{children:"Test Slot"}),(0,eI.jsx)("th",{children:"Date"}),(0,eI.jsx)("th",{children:"Parent Number"}),(0,eI.jsx)("th",{children:"Actions"}),(0,eI.jsx)("th",{children:"Paid"})]})}),(0,eI.jsx)("tbody",{children:t.map((function(e){return(0,eI.jsxs)("tr",{children:[(0,eI.jsx)("td",{children:e.child&&e.child.name}),(0,eI.jsx)("td",{children:e.child&&e.child.testGrade}),(0,eI.jsx)("td",{children:e.child&&new Date(e.child.dateOfBirth).toLocaleDateString()}),(0,eI.jsx)("td",{children:e.child&&e.child.gender}),(0,eI.jsx)("td",{children:e.testSlot&&e.testSlot.campus}),(0,eI.jsx)("td",{children:e.testSlot&&"".concat(e.testSlot.startTime," - ").concat(e.testSlot.endTime)}),(0,eI.jsx)("td",{children:e.testSlot&&new Date(e.testSlot.date).toLocaleDateString()}),(0,eI.jsx)("td",{children:e.parent&&e.parent.phone}),(0,eI.jsx)("td",{children:(0,eI.jsxs)("select",{onChange:function(g){return function(e,g){switch(e.target.value){case"cancel":window.confirm("Are you sure you want to cancel this record?")&&G(g._id);break;case"paid":window.confirm("Are you sure you want to mark this as paid?")&&y(g._id);break;case"sms":l((function(e){return[].concat(i(e),[g.parent.phone])})),c(!0)}}(g,e)},children:[(0,eI.jsx)("option",{value:"",children:"Select an action"}),(0,eI.jsx)("option",{value:"cancel",children:"Cancel"}),(0,eI.jsx)("option",{value:"paid",children:"Paid"}),(0,eI.jsx)("option",{value:"sms",children:"Send SMS"})]})}),(0,eI.jsx)("td",{children:e&&e.paid?"Yes":"No"})]},e._id)}))})]})]})},Bl="https://palbackend-a8f4e5171ddb.herokuapp.com",fl=function(){var e=r((0,g.useState)([]),2),t=(e[0],e[1],r((0,g.useState)(!1),2)),n=t[0],I=t[1],C=r((0,g.useState)(null),2),l=C[0],a=C[1],o=r((0,g.useState)({}),2),c=o[0],i=o[1],s=localStorage.getItem("userCampus"),A=localStorage.getItem("userRole"),d=r((0,g.useState)([]),2),u=d[0],m=d[1],b=r((0,g.useState)(""),2),Z=b[0],h=b[1],p=r((0,g.useState)({criteria:"date",order:"desc"}),2),G=p[0],y=p[1],B=r((0,g.useState)(!0),2),f=B[0],S=B[1];(0,g.useEffect)((function(){var e=!0;S(!0);var g=function(){var g=sg(cg().mark((function g(){var t,n,I;return cg().wrap((function(g){for(;;)switch(g.prev=g.next){case 0:return g.prev=0,g.next=3,un.get("".concat("https://palbackend-a8f4e5171ddb.herokuapp.com","/api/presentations/allAttendeesInTimeSlots"),gg());case 3:t=g.sent,e&&(n=t.data.filter((function(e){return e.campus===s||"superadmin"===A})),m(n),console.log("Filtered Attendees:",n),I={},n.forEach((function(e){I[e._id]=e.attendedPresentation})),i(I),S(!1)),g.next=10;break;case 7:g.prev=7,g.t0=g.catch(0),e&&(console.error("Error fetching data: ",g.t0),S(!1));case 10:case"end":return g.stop()}}),g,null,[[0,7]])})));return function(){return g.apply(this,arguments)}}();return g(),function(){e=!1}}),[]);var v=function(){var e=sg(cg().mark((function e(){var g,t,n,I;return cg().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,un.get("".concat(Bl,"/api/presentations/exportToExcel"),rg(rg({},gg()),{},{responseType:"blob"}));case 3:g=e.sent,t=new Blob([g.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),n=window.URL.createObjectURL(t),(I=document.createElement("a")).href=n,I.setAttribute("download","attendees_data.xlsx"),document.body.appendChild(I),I.click(),document.body.removeChild(I),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),console.error("Error exporting data: ",e.t0),alert("Error exporting data. Please try again.");case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=sg(cg().mark((function e(g,t){return cg().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,un.patch("".concat(Bl,"/api/users/").concat(g,"/attendedPresentation"),{attended:t});case 3:200!==e.sent.status?(V(g,t),alert("There was an error updating the attendance status.")):_n.success("Attendance status updated successfully!"),e.next=12;break;case 7:e.prev=7,e.t0=e.catch(0),V(g,t),console.error("Error marking attendance: ",e.t0),alert("Error marking attendance. Please try again.");case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(g,t){return e.apply(this,arguments)}}(),V=function(e,g){i((function(t){return rg(rg({},t),{},ag({},e,!g))}))};return(0,eI.jsxs)("div",{className:"attendee-list",children:[(0,eI.jsx)("button",{onClick:v,children:"Export to Excel"}),(0,eI.jsx)("input",{type:"text",placeholder:"Search by Phone, Name or Child Name",value:Z,onChange:function(e){h(e.target.value)}}),(0,eI.jsxs)("select",{value:"".concat(G.criteria,"-").concat(G.order),onChange:function(e){var g=r(e.target.value.split("-"),2),t=g[0],n=g[1];y({criteria:t,order:n})},children:[(0,eI.jsx)("option",{value:"",children:"Sort by"}),(0,eI.jsx)("option",{value:"date-asc",children:"Date Ascending"}),(0,eI.jsx)("option",{value:"date-desc",children:"Date Descending"})]}),f?(0,eI.jsx)("div",{style:{textAlign:"center",marginTop:"2rem"},children:(0,eI.jsx)(bl,{type:"ThreeDots",color:"#00BFFF",height:100,width:100})}):(0,eI.jsxs)("table",{children:[(0,eI.jsx)("thead",{children:(0,eI.jsxs)("tr",{children:[(0,eI.jsx)("th",{children:"No."}),(0,eI.jsx)("th",{children:"Parent"}),(0,eI.jsx)("th",{children:"Email"}),(0,eI.jsx)("th",{children:"Phone Number"}),(0,eI.jsx)("th",{children:"Campus"}),(0,eI.jsx)("th",{children:"Child Name"}),(0,eI.jsx)("th",{children:"DOB"}),(0,eI.jsx)("th",{children:"Gender"}),(0,eI.jsx)("th",{children:"School"}),(0,eI.jsx)("th",{children:"Grade"}),(0,eI.jsx)("th",{children:"Presentation"}),(0,eI.jsx)("th",{children:"Booked Time"}),(0,eI.jsx)("th",{children:"Booking Created"}),(0,eI.jsx)("th",{children:"Action"}),(0,eI.jsx)("th",{children:"Attendance"})]})}),(0,eI.jsx)("tbody",{children:u&&u.filter((function(e){return!Z||(e.phone.includes(Z)||e.name.toLowerCase().includes(Z.toLowerCase())||e.childName.toLowerCase().includes(Z.toLowerCase()))})).sort((function(e,g){return"date"===G.criteria?"asc"===G.order?new Date(e.bookedAt)-new Date(g.bookedAt):new Date(g.bookedAt)-new Date(e.bookedAt):0})).map((function(e,g){return(0,eI.jsxs)("tr",{children:[(0,eI.jsx)("td",{children:g+1}),(0,eI.jsx)("td",{children:e.name}),(0,eI.jsx)("td",{children:e.email}),(0,eI.jsx)("td",{children:e.phone}),(0,eI.jsx)("td",{children:e.campus}),(0,eI.jsx)("td",{children:e.childName}),(0,eI.jsx)("td",{children:new Date(e.dateOfBirth).toLocaleDateString()}),(0,eI.jsx)("td",{children:e.childGender}),(0,eI.jsx)("td",{children:e.previousSchool}),(0,eI.jsx)("td",{children:e.childTestGrade}),(0,eI.jsx)("td",{children:e.presentationName}),(0,eI.jsx)("td",{children:new Date(e.startTime).toLocaleTimeString()}),(0,eI.jsx)("td",{children:new Date(e.bookedAt).toLocaleString()}),(0,eI.jsx)("td",{children:(0,eI.jsx)("button",{onClick:function(){return g=e.phone,a(g),void I(!0);var g},children:"Send SMS"})}),(0,eI.jsx)("td",{children:(0,eI.jsx)("input",{type:"checkbox",checked:c[e._id]||!1,onChange:function(g){return function(e,g){var t=e.target.checked;i((function(e){return rg(rg({},e),{},ag({},g,t))})),W(g,t)}(g,e._id)}})})]},g)}))})]}),(0,eI.jsx)(GI,{isOpen:n,onRequestClose:function(){a(null),I(!1)},phoneNumbers:[l]})]})};var Sl=function(){var e=r((0,g.useState)(""),2),t=e[0],n=e[1],I=r((0,g.useState)(""),2),C=I[0],l=I[1],a=r((0,g.useState)(""),2),o=a[0],c=a[1],i=r((0,g.useState)(""),2),s=i[0],A=i[1],d=r((0,g.useState)("admin"),2),u=d[0],m=d[1],b=r((0,g.useState)(""),2),Z=b[0],h=b[1],p=function(){var e=sg(cg().mark((function e(g){var n,I;return cg().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g.preventDefault(),e.prev=1,"https://palbackend-a8f4e5171ddb.herokuapp.com",e.next=5,fetch("".concat("https://palbackend-a8f4e5171ddb.herokuapp.com","/api/users/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t,email:C,password:o,phone:s,role:u,campus:Z})});case 5:if(!(n=e.sent).ok){e.next=10;break}_n.success("New admin created!"),e.next=14;break;case 10:return e.next=12,n.json();case 12:I=e.sent,console.error(I);case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),console.error(e.t0);case 19:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(g){return e.apply(this,arguments)}}();return(0,eI.jsx)("div",{className:"form-container",children:(0,eI.jsxs)("form",{className:"form",onSubmit:p,children:[(0,eI.jsx)("h1",{className:"form-title",children:"Register"}),(0,eI.jsxs)("div",{className:"form-field",children:[(0,eI.jsx)("label",{className:"form-label",htmlFor:"name",children:"Name:"}),(0,eI.jsx)("input",{className:"form-input",type:"text",id:"name",value:t,onChange:function(e){return n(e.target.value)},required:!0})]}),(0,eI.jsxs)("div",{className:"form-field",children:[(0,eI.jsx)("label",{className:"form-label",htmlFor:"email",children:"Email:"}),(0,eI.jsx)("input",{className:"form-input",type:"email",id:"email",value:C,onChange:function(e){return l(e.target.value)},required:!0})]}),(0,eI.jsxs)("div",{className:"form-field",children:[(0,eI.jsx)("label",{className:"form-label",htmlFor:"password",children:"Password:"}),(0,eI.jsx)("input",{className:"form-input",type:"password",id:"password",value:o,onChange:function(e){return c(e.target.value)},required:!0})]}),(0,eI.jsxs)("div",{className:"form-field",children:[(0,eI.jsx)("label",{className:"form-label",htmlFor:"phone",children:"Phone:"}),(0,eI.jsx)("input",{className:"form-input",type:"text",id:"phone",value:s,onChange:function(e){return A(e.target.value)},required:!0})]}),(0,eI.jsxs)("label",{children:["Campus",(0,eI.jsxs)("select",{value:Z,onChange:function(e){return h(e.target.value)},required:!0,children:[(0,eI.jsx)("option",{value:"",children:"--\uc635\uc158\uc744 \uc120\ud0dd\ud574\uc8fc\uc138\uc694--"}),(0,eI.jsx)("option",{value:"\uc218\uc9c0",children:"\uc218\uc9c0"}),(0,eI.jsx)("option",{value:"\ub3d9\ud0c4",children:"\ub3d9\ud0c4"}),(0,eI.jsx)("option",{value:"\ubd84\ub2f9",children:"\ubd84\ub2f9"})]})]}),(0,eI.jsx)("label",{className:"form-label",htmlFor:"role",children:"Role:"}),(0,eI.jsx)("input",{className:"form-input",type:"text",id:"role",value:u,onChange:function(e){return m(e.target.value)},disabled:!0}),(0,eI.jsx)("div",{className:"form-field",children:(0,eI.jsx)("button",{className:"form-button",type:"submit",children:"Add Admin"})})]})})};var vl=function(e){var t=e.admin,n=e.onClose,I=e.onSave,C=r((0,g.useState)({name:t.name,email:t.email,role:t.role,campus:t.campus}),2),l=C[0],a=C[1],o=function(e){var g=e.target,t=g.name,n=g.value;a((function(e){return rg(rg({},e),{},ag({},t,n))}))};return(0,eI.jsxs)("div",{children:[(0,eI.jsx)("div",{style:{position:"fixed",top:"0%",left:"0%",width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.7)",zIndex:999},onClick:n}),(0,eI.jsxs)("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"white",padding:"20px",zIndex:1e3,width:"400px",borderRadius:"5px"},children:[(0,eI.jsx)("h2",{children:"Edit Admin"}),(0,eI.jsxs)("label",{children:["Name:",(0,eI.jsx)("input",{name:"name",value:l.name,onChange:o})]}),(0,eI.jsxs)("label",{children:["Email:",(0,eI.jsx)("input",{name:"email",value:l.email,onChange:o})]}),(0,eI.jsxs)("div",{children:[(0,eI.jsx)("button",{onClick:function(){return I(l)},children:"Save Changes"}),(0,eI.jsx)("button",{onClick:n,children:"Close"})]})]})]})};var Wl=function(){var e=r((0,g.useState)([]),2),t=e[0],n=e[1],I=r((0,g.useState)(null),2),C=I[0],l=I[1];(0,g.useEffect)((function(){function e(){return(e=sg(cg().mark((function e(){var g,t;return cg().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://palbackend-a8f4e5171ddb.herokuapp.com","/api/users/admins"));case 2:return g=e.sent,e.next=5,g.json();case 5:t=e.sent,n(t);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var a=function(){var e=sg(cg().mark((function e(g){var t,I;return cg().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://palbackend-a8f4e5171ddb.herokuapp.com","/api/users/admin/").concat(C._id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(g)});case 2:if(!(t=e.sent).ok){e.next=12;break}return e.next=6,t.json();case 6:I=e.sent,_n.success("Admin data updated successfully!"),n((function(e){return e.map((function(e){return e._id===I._id?I:e}))})),l(null),e.next=12;break;case 12:case"end":return e.stop()}}),e)})));return function(g){return e.apply(this,arguments)}}(),o=function(){var e=sg(cg().mark((function e(g){return cg().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure you want to delete this admin?")){e.next=6;break}return e.next=4,fetch("".concat("https://palbackend-a8f4e5171ddb.herokuapp.com","/api/users/admin/").concat(g),{method:"DELETE"});case 4:e.sent.ok?(n((function(e){return e.filter((function(e){return e._id!==g}))})),_n.success("Admin deleted successfully!")):_n.error("An error occurred while deleting the admin.");case 6:case"end":return e.stop()}}),e)})));return function(g){return e.apply(this,arguments)}}();return(0,eI.jsxs)("div",{children:[(0,eI.jsx)("h2",{children:"Admin List"}),(0,eI.jsxs)("table",{children:[(0,eI.jsx)("thead",{children:(0,eI.jsxs)("tr",{children:[(0,eI.jsx)("th",{children:"Name"}),(0,eI.jsx)("th",{children:"Email"}),(0,eI.jsx)("th",{children:"Role"}),(0,eI.jsx)("th",{children:"Campus"}),(0,eI.jsx)("th",{children:"Actions"})]})}),(0,eI.jsx)("tbody",{children:t.map((function(e){return(0,eI.jsxs)("tr",{children:[(0,eI.jsx)("td",{children:e.name}),(0,eI.jsx)("td",{children:e.email}),(0,eI.jsx)("td",{children:e.role}),(0,eI.jsx)("td",{children:e.campus}),(0,eI.jsxs)("td",{children:[(0,eI.jsx)("button",{onClick:function(){return function(e){l(e)}(e)},children:"Edit"}),(0,eI.jsx)("button",{onClick:function(){return o(e._id)},children:"Delete"})]})]},e._id)}))})]}),C&&(0,eI.jsx)(vl,{admin:C,onClose:function(){l(null)},onSave:a})]})},Vl=function(e){var t=e.isOpen,n=e.onRequestClose,I=r((0,g.useState)(""),2),C=I[0],l=I[1],a=r((0,g.useState)(""),2),o=a[0],c=a[1],i=r((0,g.useState)(""),2),s=i[0],A=i[1],d=function(){var e=sg(cg().mark((function e(){return cg().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"https://palbackend-a8f4e5171ddb.herokuapp.com",e.next=4,un.post("".concat("https://palbackend-a8f4e5171ddb.herokuapp.com","/api/bookingPriority"),{priorityStart:C,priorityEnd:o});case 4:e.sent.data&&(A("Booking priority times set successfully!"),setTimeout(n,2e3)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),A("Failed to set booking priority times. Please try again.");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return(0,eI.jsxs)(dg(),{isOpen:t,onRequestClose:n,contentLabel:"Booking Priority Modal",className:"priority-modal",overlayClassName:"overlay",children:[(0,eI.jsxs)("div",{className:"modal-header",children:[(0,eI.jsx)("h2",{children:"Set Booking Priority Times"}),(0,eI.jsx)("button",{className:"close-button",onClick:n,children:"\xd7"})]}),(0,eI.jsxs)("div",{className:"modal-body",children:[(0,eI.jsxs)("label",{children:["Start Time:",(0,eI.jsx)("input",{type:"datetime-local",value:C,onChange:function(e){return l(e.target.value)}})]}),(0,eI.jsxs)("label",{children:["End Time:",(0,eI.jsx)("input",{type:"datetime-local",value:o,onChange:function(e){return c(e.target.value)}})]})]}),s&&(0,eI.jsx)("div",{className:"modal-message",children:s}),(0,eI.jsx)("div",{className:"modal-footer",children:(0,eI.jsx)("button",{className:"submit-button",onClick:d,children:"Submit"})})]})},Rl=t(176),kl=t.n(Rl),Xl=function(){};function Jl(e,g){return void 0!==e[g]}function Yl(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function Hl(){return Hl=Object.assign?Object.assign.bind():function(e){for(var g=1;g<arguments.length;g++){var t=arguments[g];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},Hl.apply(this,arguments)}var wl=t(688);var Nl=t(7),Kl=t.n(Nl),Fl="milliseconds",xl="seconds",El="minutes",zl="hours",Ml="day",Ul="week",Dl="month",Ql="year",Ll="decade",Tl="century",jl={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,day:864e5,week:6048e5},Ol={month:1,year:12,decade:120,century:1200};function Pl(e){return e%4===0&&e%100!==0||e%400===0?29:28}function _l(e,g,t){switch(e=new Date(e),t){case Fl:case xl:case El:case zl:case Ml:case Ul:return function(e,g){var t=new Date(+e+g);return function(e,g){var t=e.getTimezoneOffset(),n=g.getTimezoneOffset();return new Date(+g+(n-t)*jl.minutes)}(e,t)}(e,g*jl[t]);case Dl:case Ql:case Ll:case Tl:return function(e,g){var t=e.getFullYear(),n=e.getMonth(),I=e.getDate(),C=12*t+n+g,l=Math.trunc(C/12),a=C%12,o=Math.min(I,function(e){return[31,Pl(e),31,30,31,30,31,31,30,31,30,31]}(l)[a]),r=new Date(e);return r.setFullYear(l),r.setDate(1),r.setMonth(a),r.setDate(o),r}(e,g*Ol[t])}throw new TypeError('Invalid units: "'+t+'"')}function ql(e,g,t){return _l(e,-g,t)}function $l(e,g,t){switch(e=new Date(e),g){case Tl:case Ll:case Ql:e=ma(e,0);case Dl:e=ua(e,1);case Ul:case Ml:e=Aa(e,0);case zl:e=sa(e,0);case El:e=ia(e,0);case xl:e=ca(e,0)}return g===Ll&&(e=ql(e,ba(e)%10,"year")),g===Tl&&(e=ql(e,ba(e)%100,"year")),g===Ul&&(e=function(e,g,t){var n=(da(e)+7-(t||0))%7;return void 0===g?n:_l(e,g-n,Ml)}(e,0,t)),e}function ea(e,g,t){switch(e=$l(e=new Date(e),g,t),g){case Tl:case Ll:case Ql:case Dl:case Ul:(e=ql(e=_l(e,1,g),1,Ml)).setHours(23,59,59,999);break;case Ml:e.setHours(23,59,59,999);break;case zl:case El:case xl:e=ql(e=_l(e,1,g),1,Fl)}return e}var ga=ha((function(e,g){return e===g})),ta=ha((function(e,g){return e!==g})),na=ha((function(e,g){return e>g})),Ia=ha((function(e,g){return e>=g})),Ca=ha((function(e,g){return e<g})),la=ha((function(e,g){return e<=g}));function aa(){return new Date(Math.min.apply(Math,arguments))}function oa(){return new Date(Math.max.apply(Math,arguments))}function ra(e,g,t,n){return n=n||"day",(!g||Ia(e,g,n))&&(!t||la(e,t,n))}var ca=Za("Milliseconds"),ia=Za("Seconds"),sa=Za("Minutes"),Aa=Za("Hours"),da=Za("Day"),ua=Za("Date"),ma=Za("Month"),ba=Za("FullYear");function Za(e){var g=function(e){switch(e){case"Milliseconds":return 36e5;case"Seconds":return 3600;case"Minutes":return 60;case"Hours":return 1;default:return null}}(e);return function(t,n){if(void 0===n)return t["get"+e]();var I=new Date(t);return I["set"+e](n),g&&I["get"+e]()!=n&&("Hours"===e||n>=g&&I.getHours()-t.getHours()<Math.floor(n/g))&&I["set"+e](n+g),I}}function ha(e){return function(g,t,n){return e(+$l(g,n),+$l(t,n))}}var pa=function(e,g,t){var n=-1,I=e.length;g<0&&(g=-g>I?0:I+g),(t=t>I?I:t)<0&&(t+=I),I=g>t?0:t-g>>>0,g>>>=0;for(var C=Array(I);++n<I;)C[n]=e[n+g];return C};var Ga=function(e,g){return e===g||e!==e&&g!==g},ya="object"==typeof global&&global&&global.Object===Object&&global,Ba="object"==typeof self&&self&&self.Object===Object&&self,fa=ya||Ba||Function("return this")(),Sa=fa.Symbol,va=Object.prototype,Wa=va.hasOwnProperty,Va=va.toString,Ra=Sa?Sa.toStringTag:void 0;var ka=function(e){var g=Wa.call(e,Ra),t=e[Ra];try{e[Ra]=void 0;var n=!0}catch(Oe){}var I=Va.call(e);return n&&(g?e[Ra]=t:delete e[Ra]),I},Xa=Object.prototype.toString;var Ja=function(e){return Xa.call(e)},Ya=Sa?Sa.toStringTag:void 0;var Ha=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Ya&&Ya in Object(e)?ka(e):Ja(e)};var wa=function(e){var g=typeof e;return null!=e&&("object"==g||"function"==g)};var Na=function(e){if(!wa(e))return!1;var g=Ha(e);return"[object Function]"==g||"[object GeneratorFunction]"==g||"[object AsyncFunction]"==g||"[object Proxy]"==g};var Ka=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991};var Fa=function(e){return null!=e&&Ka(e.length)&&!Na(e)},xa=/^(?:0|[1-9]\d*)$/;var Ea=function(e,g){var t=typeof e;return!!(g=null==g?9007199254740991:g)&&("number"==t||"symbol"!=t&&xa.test(e))&&e>-1&&e%1==0&&e<g};var za=function(e,g,t){if(!wa(t))return!1;var n=typeof g;return!!("number"==n?Fa(t)&&Ea(g,t.length):"string"==n&&g in t)&&Ga(t[g],e)},Ma=/\s/;var Ua=function(e){for(var g=e.length;g--&&Ma.test(e.charAt(g)););return g},Da=/^\s+/;var Qa=function(e){return e?e.slice(0,Ua(e)+1).replace(Da,""):e};var La=function(e){return null!=e&&"object"==typeof e};var Ta=function(e){return"symbol"==typeof e||La(e)&&"[object Symbol]"==Ha(e)},ja=/^[-+]0x[0-9a-f]+$/i,Oa=/^0b[01]+$/i,Pa=/^0o[0-7]+$/i,_a=parseInt;var qa=function(e){if("number"==typeof e)return e;if(Ta(e))return NaN;if(wa(e)){var g="function"==typeof e.valueOf?e.valueOf():e;e=wa(g)?g+"":g}if("string"!=typeof e)return 0===e?e:+e;e=Qa(e);var t=Oa.test(e);return t||Pa.test(e)?_a(e.slice(2),t?2:8):ja.test(e)?NaN:+e},$a=1/0;var eo=function(e){return e?(e=qa(e))===$a||e===-1/0?17976931348623157e292*(e<0?-1:1):e===e?e:0:0===e?e:0};var go=function(e){var g=eo(e),t=g%1;return g===g?t?g-t:g:0},to=Math.ceil,no=Math.max;var Io=function(e,g,t){g=(t?za(e,g,t):void 0===g)?1:no(go(g),0);var n=null==e?0:e.length;if(!n||g<1)return[];for(var I=0,C=0,l=Array(to(n/g));I<n;)l[C++]=pa(e,I,I+=g);return l};function Co(e){return e&&e.ownerDocument||document}function lo(e,g){return function(e){var g=Co(e);return g&&g.defaultView||window}(e).getComputedStyle(e,g)}var ao=/([A-Z])/g;var oo=/^ms-/;function ro(e){return function(e){return e.replace(ao,"-$1").toLowerCase()}(e).replace(oo,"-ms-")}var co=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;var io=function(e,g){var t="",n="";if("string"===typeof g)return e.style.getPropertyValue(ro(g))||lo(e).getPropertyValue(ro(g));Object.keys(g).forEach((function(I){var C=g[I];C||0===C?!function(e){return!(!e||!co.test(e))}(I)?t+=ro(I)+": "+C+";":n+=I+"("+C+") ":e.style.removeProperty(ro(I))})),n&&(t+="transform: "+n+";"),e.style.cssText+=";"+t};function so(e,g){return e.contains?e.contains(g):e.compareDocumentPosition?e===g||!!(16&e.compareDocumentPosition(g)):void 0}function Ao(e){return"window"in e&&e.window===e?e:"nodeType"in(g=e)&&g.nodeType===document.DOCUMENT_NODE&&e.defaultView||!1;var g}function uo(e){var g="pageXOffset"===e?"scrollLeft":"scrollTop";return function(t,n){var I=Ao(t);if(void 0===n)return I?I[e]:t[g];I?I.scrollTo(I[e],n):t[g]=n}}var mo=uo("pageXOffset"),bo=uo("pageYOffset");function Zo(e){var g=Co(e),t={top:0,left:0,height:0,width:0},n=g&&g.documentElement;return n&&so(n,e)?(void 0!==e.getBoundingClientRect&&(t=e.getBoundingClientRect()),t={top:t.top+bo(n)-(n.clientTop||0),left:t.left+mo(n)-(n.clientLeft||0),width:t.width,height:t.height}):t}var ho=function(e){return!!e&&"offsetParent"in e};function po(e,g){var t,n={top:0,left:0};if("fixed"===io(e,"position"))t=e.getBoundingClientRect();else{var I=g||function(e){for(var g=Co(e),t=e&&e.offsetParent;ho(t)&&"HTML"!==t.nodeName&&"static"===io(t,"position");)t=t.offsetParent;return t||g.documentElement}(e);t=Zo(e),"html"!==function(e){return e.nodeName&&e.nodeName.toLowerCase()}(I)&&(n=Zo(I));var C=String(io(I,"borderTopWidth")||0);n.top+=parseInt(C,10)-bo(I)||0;var l=String(io(I,"borderLeftWidth")||0);n.left+=parseInt(l,10)-mo(I)||0}var a=String(io(e,"marginTop")||0),o=String(io(e,"marginLeft")||0);return Hl({},t,{top:t.top-n.top-(parseInt(a,10)||0),left:t.left-n.left-(parseInt(o,10)||0)})}var Go=!("undefined"===typeof window||!window.document||!window.document.createElement),yo=(new Date).getTime();var Bo="clearTimeout",fo=function(e){var g=(new Date).getTime(),t=Math.max(0,16-(g-yo)),n=setTimeout(e,t);return yo=g,n},So=function(e,g){return e+(e?g[0].toUpperCase()+g.substr(1):g)+"AnimationFrame"};Go&&["","webkit","moz","o","ms"].some((function(e){var g=So(e,"request");return g in window&&(Bo=So(e,"cancel"),fo=function(e){return window[g](e)}),!!fo}));var vo=function(e){"function"===typeof window[Bo]&&window[Bo](e)},Wo=fo,Vo=t(164);function Ro(){return(0,g.useState)(null)}var ko=function(e){return e&&"function"!==typeof e?function(g){e.current=g}:e};var Xo=function(e,t){return(0,g.useMemo)((function(){return function(e,g){var t=ko(e),n=ko(g);return function(e){t&&t(e),n&&n(e)}}(e,t)}),[e,t])},Jo="top",Yo="bottom",Ho="right",wo="left",No="auto",Ko=[Jo,Yo,Ho,wo],Fo="start",xo="end",Eo="clippingParents",zo="viewport",Mo="popper",Uo="reference",Do=Ko.reduce((function(e,g){return e.concat([g+"-"+Fo,g+"-"+xo])}),[]),Qo=[].concat(Ko,[No]).reduce((function(e,g){return e.concat([g,g+"-"+Fo,g+"-"+xo])}),[]),Lo=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];var To=function(e){var t=function(){var e=(0,g.useRef)(!0),t=(0,g.useRef)((function(){return e.current}));return(0,g.useEffect)((function(){return e.current=!0,function(){e.current=!1}}),[]),t.current}();return[e[0],(0,g.useCallback)((function(g){if(t())return e[1](g)}),[t,e[1]])]};function jo(e){return e.split("-")[0]}function Oo(e){if(null==e)return window;if("[object Window]"!==e.toString()){var g=e.ownerDocument;return g&&g.defaultView||window}return e}function Po(e){return e instanceof Oo(e).Element||e instanceof Element}function _o(e){return e instanceof Oo(e).HTMLElement||e instanceof HTMLElement}function qo(e){return"undefined"!==typeof ShadowRoot&&(e instanceof Oo(e).ShadowRoot||e instanceof ShadowRoot)}var $o=Math.max,er=Math.min,gr=Math.round;function tr(){var e=navigator.userAgentData;return null!=e&&e.brands&&Array.isArray(e.brands)?e.brands.map((function(e){return e.brand+"/"+e.version})).join(" "):navigator.userAgent}function nr(){return!/^((?!chrome|android).)*safari/i.test(tr())}function Ir(e,g,t){void 0===g&&(g=!1),void 0===t&&(t=!1);var n=e.getBoundingClientRect(),I=1,C=1;g&&_o(e)&&(I=e.offsetWidth>0&&gr(n.width)/e.offsetWidth||1,C=e.offsetHeight>0&&gr(n.height)/e.offsetHeight||1);var l=(Po(e)?Oo(e):window).visualViewport,a=!nr()&&t,o=(n.left+(a&&l?l.offsetLeft:0))/I,r=(n.top+(a&&l?l.offsetTop:0))/C,c=n.width/I,i=n.height/C;return{width:c,height:i,top:r,right:o+c,bottom:r+i,left:o,x:o,y:r}}function Cr(e){var g=Ir(e),t=e.offsetWidth,n=e.offsetHeight;return Math.abs(g.width-t)<=1&&(t=g.width),Math.abs(g.height-n)<=1&&(n=g.height),{x:e.offsetLeft,y:e.offsetTop,width:t,height:n}}function lr(e,g){var t=g.getRootNode&&g.getRootNode();if(e.contains(g))return!0;if(t&&qo(t)){var n=g;do{if(n&&e.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function ar(e){return e?(e.nodeName||"").toLowerCase():null}function or(e){return Oo(e).getComputedStyle(e)}function rr(e){return["table","td","th"].indexOf(ar(e))>=0}function cr(e){return((Po(e)?e.ownerDocument:e.document)||window.document).documentElement}function ir(e){return"html"===ar(e)?e:e.assignedSlot||e.parentNode||(qo(e)?e.host:null)||cr(e)}function sr(e){return _o(e)&&"fixed"!==or(e).position?e.offsetParent:null}function Ar(e){for(var g=Oo(e),t=sr(e);t&&rr(t)&&"static"===or(t).position;)t=sr(t);return t&&("html"===ar(t)||"body"===ar(t)&&"static"===or(t).position)?g:t||function(e){var g=/firefox/i.test(tr());if(/Trident/i.test(tr())&&_o(e)&&"fixed"===or(e).position)return null;var t=ir(e);for(qo(t)&&(t=t.host);_o(t)&&["html","body"].indexOf(ar(t))<0;){var n=or(t);if("none"!==n.transform||"none"!==n.perspective||"paint"===n.contain||-1!==["transform","perspective"].indexOf(n.willChange)||g&&"filter"===n.willChange||g&&n.filter&&"none"!==n.filter)return t;t=t.parentNode}return null}(e)||g}function dr(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function ur(e,g,t){return $o(e,er(g,t))}function mr(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function br(e,g){return g.reduce((function(g,t){return g[t]=e,g}),{})}var Zr={name:"arrow",enabled:!0,phase:"main",fn:function(e){var g,t=e.state,n=e.name,I=e.options,C=t.elements.arrow,l=t.modifiersData.popperOffsets,a=jo(t.placement),o=dr(a),r=[wo,Ho].indexOf(a)>=0?"height":"width";if(C&&l){var c=function(e,g){return mr("number"!==typeof(e="function"===typeof e?e(Object.assign({},g.rects,{placement:g.placement})):e)?e:br(e,Ko))}(I.padding,t),i=Cr(C),s="y"===o?Jo:wo,A="y"===o?Yo:Ho,d=t.rects.reference[r]+t.rects.reference[o]-l[o]-t.rects.popper[r],u=l[o]-t.rects.reference[o],m=Ar(C),b=m?"y"===o?m.clientHeight||0:m.clientWidth||0:0,Z=d/2-u/2,h=c[s],p=b-i[r]-c[A],G=b/2-i[r]/2+Z,y=ur(h,G,p),B=o;t.modifiersData[n]=((g={})[B]=y,g.centerOffset=y-G,g)}},effect:function(e){var g=e.state,t=e.options.element,n=void 0===t?"[data-popper-arrow]":t;null!=n&&("string"!==typeof n||(n=g.elements.popper.querySelector(n)))&&lr(g.elements.popper,n)&&(g.elements.arrow=n)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function hr(e){return e.split("-")[1]}var pr={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Gr(e){var g,t=e.popper,n=e.popperRect,I=e.placement,C=e.variation,l=e.offsets,a=e.position,o=e.gpuAcceleration,r=e.adaptive,c=e.roundOffsets,i=e.isFixed,s=l.x,A=void 0===s?0:s,d=l.y,u=void 0===d?0:d,m="function"===typeof c?c({x:A,y:u}):{x:A,y:u};A=m.x,u=m.y;var b=l.hasOwnProperty("x"),Z=l.hasOwnProperty("y"),h=wo,p=Jo,G=window;if(r){var y=Ar(t),B="clientHeight",f="clientWidth";if(y===Oo(t)&&"static"!==or(y=cr(t)).position&&"absolute"===a&&(B="scrollHeight",f="scrollWidth"),I===Jo||(I===wo||I===Ho)&&C===xo)p=Yo,u-=(i&&y===G&&G.visualViewport?G.visualViewport.height:y[B])-n.height,u*=o?1:-1;if(I===wo||(I===Jo||I===Yo)&&C===xo)h=Ho,A-=(i&&y===G&&G.visualViewport?G.visualViewport.width:y[f])-n.width,A*=o?1:-1}var S,v=Object.assign({position:a},r&&pr),W=!0===c?function(e,g){var t=e.x,n=e.y,I=g.devicePixelRatio||1;return{x:gr(t*I)/I||0,y:gr(n*I)/I||0}}({x:A,y:u},Oo(t)):{x:A,y:u};return A=W.x,u=W.y,o?Object.assign({},v,((S={})[p]=Z?"0":"",S[h]=b?"0":"",S.transform=(G.devicePixelRatio||1)<=1?"translate("+A+"px, "+u+"px)":"translate3d("+A+"px, "+u+"px, 0)",S)):Object.assign({},v,((g={})[p]=Z?u+"px":"",g[h]=b?A+"px":"",g.transform="",g))}var yr={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var g=e.state,t=e.options,n=t.gpuAcceleration,I=void 0===n||n,C=t.adaptive,l=void 0===C||C,a=t.roundOffsets,o=void 0===a||a,r={placement:jo(g.placement),variation:hr(g.placement),popper:g.elements.popper,popperRect:g.rects.popper,gpuAcceleration:I,isFixed:"fixed"===g.options.strategy};null!=g.modifiersData.popperOffsets&&(g.styles.popper=Object.assign({},g.styles.popper,Gr(Object.assign({},r,{offsets:g.modifiersData.popperOffsets,position:g.options.strategy,adaptive:l,roundOffsets:o})))),null!=g.modifiersData.arrow&&(g.styles.arrow=Object.assign({},g.styles.arrow,Gr(Object.assign({},r,{offsets:g.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:o})))),g.attributes.popper=Object.assign({},g.attributes.popper,{"data-popper-placement":g.placement})},data:{}},Br={passive:!0};var fr={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var g=e.state,t=e.instance,n=e.options,I=n.scroll,C=void 0===I||I,l=n.resize,a=void 0===l||l,o=Oo(g.elements.popper),r=[].concat(g.scrollParents.reference,g.scrollParents.popper);return C&&r.forEach((function(e){e.addEventListener("scroll",t.update,Br)})),a&&o.addEventListener("resize",t.update,Br),function(){C&&r.forEach((function(e){e.removeEventListener("scroll",t.update,Br)})),a&&o.removeEventListener("resize",t.update,Br)}},data:{}},Sr={left:"right",right:"left",bottom:"top",top:"bottom"};function vr(e){return e.replace(/left|right|bottom|top/g,(function(e){return Sr[e]}))}var Wr={start:"end",end:"start"};function Vr(e){return e.replace(/start|end/g,(function(e){return Wr[e]}))}function Rr(e){var g=Oo(e);return{scrollLeft:g.pageXOffset,scrollTop:g.pageYOffset}}function kr(e){return Ir(cr(e)).left+Rr(e).scrollLeft}function Xr(e){var g=or(e),t=g.overflow,n=g.overflowX,I=g.overflowY;return/auto|scroll|overlay|hidden/.test(t+I+n)}function Jr(e){return["html","body","#document"].indexOf(ar(e))>=0?e.ownerDocument.body:_o(e)&&Xr(e)?e:Jr(ir(e))}function Yr(e,g){var t;void 0===g&&(g=[]);var n=Jr(e),I=n===(null==(t=e.ownerDocument)?void 0:t.body),C=Oo(n),l=I?[C].concat(C.visualViewport||[],Xr(n)?n:[]):n,a=g.concat(l);return I?a:a.concat(Yr(ir(l)))}function Hr(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function wr(e,g,t){return g===zo?Hr(function(e,g){var t=Oo(e),n=cr(e),I=t.visualViewport,C=n.clientWidth,l=n.clientHeight,a=0,o=0;if(I){C=I.width,l=I.height;var r=nr();(r||!r&&"fixed"===g)&&(a=I.offsetLeft,o=I.offsetTop)}return{width:C,height:l,x:a+kr(e),y:o}}(e,t)):Po(g)?function(e,g){var t=Ir(e,!1,"fixed"===g);return t.top=t.top+e.clientTop,t.left=t.left+e.clientLeft,t.bottom=t.top+e.clientHeight,t.right=t.left+e.clientWidth,t.width=e.clientWidth,t.height=e.clientHeight,t.x=t.left,t.y=t.top,t}(g,t):Hr(function(e){var g,t=cr(e),n=Rr(e),I=null==(g=e.ownerDocument)?void 0:g.body,C=$o(t.scrollWidth,t.clientWidth,I?I.scrollWidth:0,I?I.clientWidth:0),l=$o(t.scrollHeight,t.clientHeight,I?I.scrollHeight:0,I?I.clientHeight:0),a=-n.scrollLeft+kr(e),o=-n.scrollTop;return"rtl"===or(I||t).direction&&(a+=$o(t.clientWidth,I?I.clientWidth:0)-C),{width:C,height:l,x:a,y:o}}(cr(e)))}function Nr(e,g,t,n){var I="clippingParents"===g?function(e){var g=Yr(ir(e)),t=["absolute","fixed"].indexOf(or(e).position)>=0&&_o(e)?Ar(e):e;return Po(t)?g.filter((function(e){return Po(e)&&lr(e,t)&&"body"!==ar(e)})):[]}(e):[].concat(g),C=[].concat(I,[t]),l=C[0],a=C.reduce((function(g,t){var I=wr(e,t,n);return g.top=$o(I.top,g.top),g.right=er(I.right,g.right),g.bottom=er(I.bottom,g.bottom),g.left=$o(I.left,g.left),g}),wr(e,l,n));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function Kr(e){var g,t=e.reference,n=e.element,I=e.placement,C=I?jo(I):null,l=I?hr(I):null,a=t.x+t.width/2-n.width/2,o=t.y+t.height/2-n.height/2;switch(C){case Jo:g={x:a,y:t.y-n.height};break;case Yo:g={x:a,y:t.y+t.height};break;case Ho:g={x:t.x+t.width,y:o};break;case wo:g={x:t.x-n.width,y:o};break;default:g={x:t.x,y:t.y}}var r=C?dr(C):null;if(null!=r){var c="y"===r?"height":"width";switch(l){case Fo:g[r]=g[r]-(t[c]/2-n[c]/2);break;case xo:g[r]=g[r]+(t[c]/2-n[c]/2)}}return g}function Fr(e,g){void 0===g&&(g={});var t=g,n=t.placement,I=void 0===n?e.placement:n,C=t.strategy,l=void 0===C?e.strategy:C,a=t.boundary,o=void 0===a?Eo:a,r=t.rootBoundary,c=void 0===r?zo:r,i=t.elementContext,s=void 0===i?Mo:i,A=t.altBoundary,d=void 0!==A&&A,u=t.padding,m=void 0===u?0:u,b=mr("number"!==typeof m?m:br(m,Ko)),Z=s===Mo?Uo:Mo,h=e.rects.popper,p=e.elements[d?Z:s],G=Nr(Po(p)?p:p.contextElement||cr(e.elements.popper),o,c,l),y=Ir(e.elements.reference),B=Kr({reference:y,element:h,strategy:"absolute",placement:I}),f=Hr(Object.assign({},h,B)),S=s===Mo?f:y,v={top:G.top-S.top+b.top,bottom:S.bottom-G.bottom+b.bottom,left:G.left-S.left+b.left,right:S.right-G.right+b.right},W=e.modifiersData.offset;if(s===Mo&&W){var V=W[I];Object.keys(v).forEach((function(e){var g=[Ho,Yo].indexOf(e)>=0?1:-1,t=[Jo,Yo].indexOf(e)>=0?"y":"x";v[e]+=V[t]*g}))}return v}var xr={name:"flip",enabled:!0,phase:"main",fn:function(e){var g=e.state,t=e.options,n=e.name;if(!g.modifiersData[n]._skip){for(var I=t.mainAxis,C=void 0===I||I,l=t.altAxis,a=void 0===l||l,o=t.fallbackPlacements,r=t.padding,c=t.boundary,i=t.rootBoundary,s=t.altBoundary,A=t.flipVariations,d=void 0===A||A,u=t.allowedAutoPlacements,m=g.options.placement,b=jo(m),Z=o||(b===m||!d?[vr(m)]:function(e){if(jo(e)===No)return[];var g=vr(e);return[Vr(e),g,Vr(g)]}(m)),h=[m].concat(Z).reduce((function(e,t){return e.concat(jo(t)===No?function(e,g){void 0===g&&(g={});var t=g,n=t.placement,I=t.boundary,C=t.rootBoundary,l=t.padding,a=t.flipVariations,o=t.allowedAutoPlacements,r=void 0===o?Qo:o,c=hr(n),i=c?a?Do:Do.filter((function(e){return hr(e)===c})):Ko,s=i.filter((function(e){return r.indexOf(e)>=0}));0===s.length&&(s=i);var A=s.reduce((function(g,t){return g[t]=Fr(e,{placement:t,boundary:I,rootBoundary:C,padding:l})[jo(t)],g}),{});return Object.keys(A).sort((function(e,g){return A[e]-A[g]}))}(g,{placement:t,boundary:c,rootBoundary:i,padding:r,flipVariations:d,allowedAutoPlacements:u}):t)}),[]),p=g.rects.reference,G=g.rects.popper,y=new Map,B=!0,f=h[0],S=0;S<h.length;S++){var v=h[S],W=jo(v),V=hr(v)===Fo,R=[Jo,Yo].indexOf(W)>=0,k=R?"width":"height",X=Fr(g,{placement:v,boundary:c,rootBoundary:i,altBoundary:s,padding:r}),J=R?V?Ho:wo:V?Yo:Jo;p[k]>G[k]&&(J=vr(J));var Y=vr(J),H=[];if(C&&H.push(X[W]<=0),a&&H.push(X[J]<=0,X[Y]<=0),H.every((function(e){return e}))){f=v,B=!1;break}y.set(v,H)}if(B)for(var w=function(e){var g=h.find((function(g){var t=y.get(g);if(t)return t.slice(0,e).every((function(e){return e}))}));if(g)return f=g,"break"},N=d?3:1;N>0;N--){if("break"===w(N))break}g.placement!==f&&(g.modifiersData[n]._skip=!0,g.placement=f,g.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function Er(e,g,t){return void 0===t&&(t={x:0,y:0}),{top:e.top-g.height-t.y,right:e.right-g.width+t.x,bottom:e.bottom-g.height+t.y,left:e.left-g.width-t.x}}function zr(e){return[Jo,Ho,Yo,wo].some((function(g){return e[g]>=0}))}var Mr={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var g=e.state,t=e.options,n=e.name,I=t.offset,C=void 0===I?[0,0]:I,l=Qo.reduce((function(e,t){return e[t]=function(e,g,t){var n=jo(e),I=[wo,Jo].indexOf(n)>=0?-1:1,C="function"===typeof t?t(Object.assign({},g,{placement:e})):t,l=C[0],a=C[1];return l=l||0,a=(a||0)*I,[wo,Ho].indexOf(n)>=0?{x:a,y:l}:{x:l,y:a}}(t,g.rects,C),e}),{}),a=l[g.placement],o=a.x,r=a.y;null!=g.modifiersData.popperOffsets&&(g.modifiersData.popperOffsets.x+=o,g.modifiersData.popperOffsets.y+=r),g.modifiersData[n]=l}};var Ur={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var g=e.state,t=e.options,n=e.name,I=t.mainAxis,C=void 0===I||I,l=t.altAxis,a=void 0!==l&&l,o=t.boundary,r=t.rootBoundary,c=t.altBoundary,i=t.padding,s=t.tether,A=void 0===s||s,d=t.tetherOffset,u=void 0===d?0:d,m=Fr(g,{boundary:o,rootBoundary:r,padding:i,altBoundary:c}),b=jo(g.placement),Z=hr(g.placement),h=!Z,p=dr(b),G="x"===p?"y":"x",y=g.modifiersData.popperOffsets,B=g.rects.reference,f=g.rects.popper,S="function"===typeof u?u(Object.assign({},g.rects,{placement:g.placement})):u,v="number"===typeof S?{mainAxis:S,altAxis:S}:Object.assign({mainAxis:0,altAxis:0},S),W=g.modifiersData.offset?g.modifiersData.offset[g.placement]:null,V={x:0,y:0};if(y){if(C){var R,k="y"===p?Jo:wo,X="y"===p?Yo:Ho,J="y"===p?"height":"width",Y=y[p],H=Y+m[k],w=Y-m[X],N=A?-f[J]/2:0,K=Z===Fo?B[J]:f[J],F=Z===Fo?-f[J]:-B[J],x=g.elements.arrow,E=A&&x?Cr(x):{width:0,height:0},z=g.modifiersData["arrow#persistent"]?g.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},M=z[k],U=z[X],D=ur(0,B[J],E[J]),Q=h?B[J]/2-N-D-M-v.mainAxis:K-D-M-v.mainAxis,L=h?-B[J]/2+N+D+U+v.mainAxis:F+D+U+v.mainAxis,T=g.elements.arrow&&Ar(g.elements.arrow),j=T?"y"===p?T.clientTop||0:T.clientLeft||0:0,O=null!=(R=null==W?void 0:W[p])?R:0,P=Y+L-O,_=ur(A?er(H,Y+Q-O-j):H,Y,A?$o(w,P):w);y[p]=_,V[p]=_-Y}if(a){var q,$="x"===p?Jo:wo,ee="x"===p?Yo:Ho,ge=y[G],te="y"===G?"height":"width",ne=ge+m[$],Ie=ge-m[ee],Ce=-1!==[Jo,wo].indexOf(b),le=null!=(q=null==W?void 0:W[G])?q:0,ae=Ce?ne:ge-B[te]-f[te]-le+v.altAxis,oe=Ce?ge+B[te]+f[te]-le-v.altAxis:Ie,re=A&&Ce?function(e,g,t){var n=ur(e,g,t);return n>t?t:n}(ae,ge,oe):ur(A?ae:ne,ge,A?oe:Ie);y[G]=re,V[G]=re-ge}g.modifiersData[n]=V}},requiresIfExists:["offset"]};function Dr(e,g,t){void 0===t&&(t=!1);var n=_o(g),I=_o(g)&&function(e){var g=e.getBoundingClientRect(),t=gr(g.width)/e.offsetWidth||1,n=gr(g.height)/e.offsetHeight||1;return 1!==t||1!==n}(g),C=cr(g),l=Ir(e,I,t),a={scrollLeft:0,scrollTop:0},o={x:0,y:0};return(n||!n&&!t)&&(("body"!==ar(g)||Xr(C))&&(a=function(e){return e!==Oo(e)&&_o(e)?{scrollLeft:(g=e).scrollLeft,scrollTop:g.scrollTop}:Rr(e);var g}(g)),_o(g)?((o=Ir(g,!0)).x+=g.clientLeft,o.y+=g.clientTop):C&&(o.x=kr(C))),{x:l.left+a.scrollLeft-o.x,y:l.top+a.scrollTop-o.y,width:l.width,height:l.height}}function Qr(e){var g=new Map,t=new Set,n=[];function I(e){t.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!t.has(e)){var n=g.get(e);n&&I(n)}})),n.push(e)}return e.forEach((function(e){g.set(e.name,e)})),e.forEach((function(e){t.has(e.name)||I(e)})),n}function Lr(e){var g;return function(){return g||(g=new Promise((function(t){Promise.resolve().then((function(){g=void 0,t(e())}))}))),g}}var Tr={placement:"bottom",modifiers:[],strategy:"absolute"};function jr(){for(var e=arguments.length,g=new Array(e),t=0;t<e;t++)g[t]=arguments[t];return!g.some((function(e){return!(e&&"function"===typeof e.getBoundingClientRect)}))}function Or(e){void 0===e&&(e={});var g=e,t=g.defaultModifiers,n=void 0===t?[]:t,I=g.defaultOptions,C=void 0===I?Tr:I;return function(e,g,t){void 0===t&&(t=C);var I={placement:"bottom",orderedModifiers:[],options:Object.assign({},Tr,C),modifiersData:{},elements:{reference:e,popper:g},attributes:{},styles:{}},l=[],a=!1,o={state:I,setOptions:function(t){var a="function"===typeof t?t(I.options):t;r(),I.options=Object.assign({},C,I.options,a),I.scrollParents={reference:Po(e)?Yr(e):e.contextElement?Yr(e.contextElement):[],popper:Yr(g)};var c=function(e){var g=Qr(e);return Lo.reduce((function(e,t){return e.concat(g.filter((function(e){return e.phase===t})))}),[])}(function(e){var g=e.reduce((function(e,g){var t=e[g.name];return e[g.name]=t?Object.assign({},t,g,{options:Object.assign({},t.options,g.options),data:Object.assign({},t.data,g.data)}):g,e}),{});return Object.keys(g).map((function(e){return g[e]}))}([].concat(n,I.options.modifiers)));return I.orderedModifiers=c.filter((function(e){return e.enabled})),I.orderedModifiers.forEach((function(e){var g=e.name,t=e.options,n=void 0===t?{}:t,C=e.effect;if("function"===typeof C){var a=C({state:I,name:g,instance:o,options:n}),r=function(){};l.push(a||r)}})),o.update()},forceUpdate:function(){if(!a){var e=I.elements,g=e.reference,t=e.popper;if(jr(g,t)){I.rects={reference:Dr(g,Ar(t),"fixed"===I.options.strategy),popper:Cr(t)},I.reset=!1,I.placement=I.options.placement,I.orderedModifiers.forEach((function(e){return I.modifiersData[e.name]=Object.assign({},e.data)}));for(var n=0;n<I.orderedModifiers.length;n++)if(!0!==I.reset){var C=I.orderedModifiers[n],l=C.fn,r=C.options,c=void 0===r?{}:r,i=C.name;"function"===typeof l&&(I=l({state:I,options:c,name:i,instance:o})||I)}else I.reset=!1,n=-1}}},update:Lr((function(){return new Promise((function(e){o.forceUpdate(),e(I)}))})),destroy:function(){r(),a=!0}};if(!jr(e,g))return o;function r(){l.forEach((function(e){return e()})),l=[]}return o.setOptions(t).then((function(e){!a&&t.onFirstUpdate&&t.onFirstUpdate(e)})),o}}var Pr=Or({defaultModifiers:[{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var g=e.state,t=e.name,n=g.rects.reference,I=g.rects.popper,C=g.modifiersData.preventOverflow,l=Fr(g,{elementContext:"reference"}),a=Fr(g,{altBoundary:!0}),o=Er(l,n),r=Er(a,I,C),c=zr(o),i=zr(r);g.modifiersData[t]={referenceClippingOffsets:o,popperEscapeOffsets:r,isReferenceHidden:c,hasPopperEscaped:i},g.attributes.popper=Object.assign({},g.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":i})}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var g=e.state,t=e.name;g.modifiersData[t]=Kr({reference:g.rects.reference,element:g.rects.popper,strategy:"absolute",placement:g.placement})},data:{}},yr,fr,Mr,xr,Ur,Zr]}),_r=function(e){return{position:e,top:"0",left:"0",opacity:"0",pointerEvents:"none"}},qr={name:"applyStyles",enabled:!1},$r={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:function(e){var g=e.state;return function(){var e=g.elements,t=e.reference,n=e.popper;if("removeAttribute"in t){var I=(t.getAttribute("aria-describedby")||"").split(",").filter((function(e){return e.trim()!==n.id}));I.length?t.setAttribute("aria-describedby",I.join(",")):t.removeAttribute("aria-describedby")}}},fn:function(e){var g,t=e.state.elements,n=t.popper,I=t.reference,C=null==(g=n.getAttribute("role"))?void 0:g.toLowerCase();if(n.id&&"tooltip"===C&&"setAttribute"in I){var l=I.getAttribute("aria-describedby");if(l&&-1!==l.split(",").indexOf(n.id))return;I.setAttribute("aria-describedby",l?l+","+n.id:n.id)}}},ec=[];var gc=function(e,t,n){var I=void 0===n?{}:n,C=I.enabled,l=void 0===C||C,a=I.placement,o=void 0===a?"bottom":a,r=I.strategy,c=void 0===r?"absolute":r,i=I.modifiers,s=void 0===i?ec:i,A=mn(I,["enabled","placement","strategy","modifiers"]),d=(0,g.useRef)(),u=(0,g.useCallback)((function(){var e;null==(e=d.current)||e.update()}),[]),m=(0,g.useCallback)((function(){var e;null==(e=d.current)||e.forceUpdate()}),[]),b=To((0,g.useState)({placement:o,update:u,forceUpdate:m,attributes:{},styles:{popper:_r(c),arrow:{}}})),Z=b[0],h=b[1],p=(0,g.useMemo)((function(){return{name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:function(e){var g=e.state,t={},n={};Object.keys(g.elements).forEach((function(e){t[e]=g.styles[e],n[e]=g.attributes[e]})),h({state:g,styles:t,attributes:n,update:u,forceUpdate:m,placement:g.placement})}}}),[u,m,h]);return(0,g.useEffect)((function(){d.current&&l&&d.current.setOptions({placement:o,strategy:c,modifiers:[].concat(s,[p,qr])})}),[c,o,p,l]),(0,g.useEffect)((function(){if(l&&null!=e&&null!=t)return d.current=Pr(e,t,Hl({},A,{placement:o,strategy:c,modifiers:[].concat(s,[$r,p])})),function(){null!=d.current&&(d.current.destroy(),d.current=void 0,h((function(e){return Hl({},e,{attributes:{},styles:{popper:_r(c)}})})))}}),[l,e,t]),Z},tc=!1,nc=!1;try{var Ic={get passive(){return tc=!0},get once(){return nc=tc=!0}};Go&&(window.addEventListener("test",Ic,Ic),window.removeEventListener("test",Ic,!0))}catch(Oe){}var Cc=function(e,g,t,n){if(n&&"boolean"!==typeof n&&!nc){var I=n.once,C=n.capture,l=t;!nc&&I&&(l=t.__once||function e(n){this.removeEventListener(g,e,C),t.call(this,n)},t.__once=l),e.addEventListener(g,l,tc?n:C)}e.addEventListener(g,t,n)};var lc=function(e,g,t,n){var I=n&&"boolean"!==typeof n?n.capture:n;e.removeEventListener(g,t,I),t.__once&&e.removeEventListener(g,t.__once,I)};var ac=function(e,g,t,n){return Cc(e,g,t,n),function(){lc(e,g,t,n)}};var oc=function(e){var t=(0,g.useRef)(e);return(0,g.useEffect)((function(){t.current=e}),[e]),t};function rc(e){var t=oc(e);return(0,g.useCallback)((function(){return t.current&&t.current.apply(t,arguments)}),[t])}var cc=t(391),ic=t.n(cc);var sc=function(e){return Co(function(e){return e&&"setState"in e?Vo.findDOMNode(e):null!=e?e:null}(e))},Ac=function(){};var dc=function(e){return e&&("current"in e?e.current:e)};var uc=function(e,t,n){var I=void 0===n?{}:n,C=I.disabled,l=I.clickTrigger,a=void 0===l?"click":l,o=(0,g.useRef)(!1),r=t||Ac,c=(0,g.useCallback)((function(g){var t,n,I=dc(e);ic()(!!I,"RootClose captured a close event but does not have a ref to compare it to. useRootClose(), should be passed a ref that resolves to a DOM node"),o.current=!I||!!((n=g).metaKey||n.altKey||n.ctrlKey||n.shiftKey)||!function(e){return 0===e.button}(g)||!!so(I,null!=(t=null==g.composedPath?void 0:g.composedPath()[0])?t:g.target)}),[e]),i=rc((function(e){o.current||r(e)})),s=rc((function(e){27===e.keyCode&&r(e)}));(0,g.useEffect)((function(){if(!C&&null!=e){var g=window.event,t=sc(dc(e)),n=ac(t,a,c,!0),I=ac(t,a,(function(e){e!==g?i(e):g=void 0})),l=ac(t,"keyup",(function(e){e!==g?s(e):g=void 0})),o=[];return"ontouchstart"in t.documentElement&&(o=[].slice.call(t.body.children).map((function(e){return ac(e,"mousemove",Ac)}))),function(){n(),I(),l(),o.forEach((function(e){return e()}))}}}),[e,C,a,c,i,s])},mc=function(e){var g;return"undefined"===typeof document?null:null==e?Co().body:("function"===typeof e&&(e=e()),e&&"current"in e&&(e=e.current),null!=(g=e)&&g.nodeType&&e||null)};function bc(e,t){var n=(0,g.useState)((function(){return mc(e)})),I=n[0],C=n[1];if(!I){var l=mc(e);l&&C(l)}return(0,g.useEffect)((function(){t&&I&&t(I)}),[t,I]),(0,g.useEffect)((function(){var g=mc(e);g!==I&&C(g)}),[e,I]),I}function Zc(e){var g,t,n,I,C,l=e.enabled,a=e.enableEvents,o=e.placement,r=e.flip,c=e.offset,i=e.fixed,s=e.containerPadding,A=e.arrowElement,d=e.popperConfig,u=void 0===d?{}:d,m=function(e){var g={};return Array.isArray(e)?(null==e||e.forEach((function(e){g[e.name]=e})),g):e||g}(u.modifiers);return Hl({},u,{placement:o,enabled:l,strategy:i?"fixed":u.strategy,modifiers:(C=Hl({},m,{eventListeners:{enabled:a},preventOverflow:Hl({},m.preventOverflow,{options:s?Hl({padding:s},null==(g=m.preventOverflow)?void 0:g.options):null==(t=m.preventOverflow)?void 0:t.options}),offset:{options:Hl({offset:c},null==(n=m.offset)?void 0:n.options)},arrow:Hl({},m.arrow,{enabled:!!A,options:Hl({},null==(I=m.arrow)?void 0:I.options,{element:A})}),flip:Hl({enabled:!!r},m.flip)}),void 0===C&&(C={}),Array.isArray(C)?C:Object.keys(C).map((function(e){return C[e].name=e,C[e]})))})}var hc=g.forwardRef((function(e,t){var n=e.flip,I=e.offset,C=e.placement,l=e.containerPadding,a=void 0===l?5:l,o=e.popperConfig,r=void 0===o?{}:o,c=e.transition,i=Ro(),s=i[0],A=i[1],d=Ro(),u=d[0],m=d[1],b=Xo(A,t),Z=bc(e.container),h=bc(e.target),p=(0,g.useState)(!e.show),G=p[0],y=p[1],B=gc(h,s,Zc({placement:C,enableEvents:!!e.show,containerPadding:a||5,flip:n,offset:I,arrowElement:u,popperConfig:r})),f=B.styles,S=B.attributes,v=mn(B,["styles","attributes"]);e.show?G&&y(!1):e.transition||G||y(!0);var W=e.show||c&&!G;if(uc(s,e.onHide,{disabled:!e.rootClose||e.rootCloseDisabled,clickTrigger:e.rootCloseEvent}),!W)return null;var V=e.children(Hl({},v,{show:!!e.show,props:Hl({},S.popper,{style:f.popper,ref:b}),arrowProps:Hl({},S.arrow,{style:f.arrow,ref:m})}));if(c){var R=e.onExit,k=e.onExiting,X=e.onEnter,J=e.onEntering,Y=e.onEntered;V=g.createElement(c,{in:e.show,appear:!0,onExit:R,onExiting:k,onExited:function(){y(!0),e.onExited&&e.onExited.apply(e,arguments)},onEnter:X,onEntering:J,onEntered:Y},V)}return Z?Vo.createPortal(V,Z):null}));hc.displayName="Overlay",hc.propTypes={show:Kl().bool,placement:Kl().oneOf(Qo),target:Kl().any,container:Kl().any,flip:Kl().bool,children:Kl().func.isRequired,containerPadding:Kl().number,popperConfig:Kl().object,rootClose:Kl().bool,rootCloseEvent:Kl().oneOf(["click","mousedown"]),rootCloseDisabled:Kl().bool,onHide:function(e){for(var g=arguments.length,t=new Array(g>1?g-1:0),n=1;n<g;n++)t[n-1]=arguments[n];var I;return e.rootClose?(I=Kl().func).isRequired.apply(I,[e].concat(t)):Kl().func.apply(Kl(),[e].concat(t))},transition:Kl().elementType,onEnter:Kl().func,onEntering:Kl().func,onEntered:Kl().func,onExit:Kl().func,onExiting:Kl().func,onExited:Kl().func};var pc=hc;var Gc=function(){this.__data__=[],this.size=0};var yc=function(e,g){for(var t=e.length;t--;)if(Ga(e[t][0],g))return t;return-1},Bc=Array.prototype.splice;var fc=function(e){var g=this.__data__,t=yc(g,e);return!(t<0)&&(t==g.length-1?g.pop():Bc.call(g,t,1),--this.size,!0)};var Sc=function(e){var g=this.__data__,t=yc(g,e);return t<0?void 0:g[t][1]};var vc=function(e){return yc(this.__data__,e)>-1};var Wc=function(e,g){var t=this.__data__,n=yc(t,e);return n<0?(++this.size,t.push([e,g])):t[n][1]=g,this};function Vc(e){var g=-1,t=null==e?0:e.length;for(this.clear();++g<t;){var n=e[g];this.set(n[0],n[1])}}Vc.prototype.clear=Gc,Vc.prototype.delete=fc,Vc.prototype.get=Sc,Vc.prototype.has=vc,Vc.prototype.set=Wc;var Rc=Vc;var kc=function(){this.__data__=new Rc,this.size=0};var Xc=function(e){var g=this.__data__,t=g.delete(e);return this.size=g.size,t};var Jc=function(e){return this.__data__.get(e)};var Yc=function(e){return this.__data__.has(e)},Hc=fa["__core-js_shared__"],wc=function(){var e=/[^.]+$/.exec(Hc&&Hc.keys&&Hc.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();var Nc=function(e){return!!wc&&wc in e},Kc=Function.prototype.toString;var Fc=function(e){if(null!=e){try{return Kc.call(e)}catch(Oe){}try{return e+""}catch(Oe){}}return""},xc=/^\[object .+?Constructor\]$/,Ec=Function.prototype,zc=Object.prototype,Mc=Ec.toString,Uc=zc.hasOwnProperty,Dc=RegExp("^"+Mc.call(Uc).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var Qc=function(e){return!(!wa(e)||Nc(e))&&(Na(e)?Dc:xc).test(Fc(e))};var Lc=function(e,g){return null==e?void 0:e[g]};var Tc=function(e,g){var t=Lc(e,g);return Qc(t)?t:void 0},jc=Tc(fa,"Map"),Oc=Tc(Object,"create");var Pc=function(){this.__data__=Oc?Oc(null):{},this.size=0};var _c=function(e){var g=this.has(e)&&delete this.__data__[e];return this.size-=g?1:0,g},qc=Object.prototype.hasOwnProperty;var $c=function(e){var g=this.__data__;if(Oc){var t=g[e];return"__lodash_hash_undefined__"===t?void 0:t}return qc.call(g,e)?g[e]:void 0},ei=Object.prototype.hasOwnProperty;var gi=function(e){var g=this.__data__;return Oc?void 0!==g[e]:ei.call(g,e)};var ti=function(e,g){var t=this.__data__;return this.size+=this.has(e)?0:1,t[e]=Oc&&void 0===g?"__lodash_hash_undefined__":g,this};function ni(e){var g=-1,t=null==e?0:e.length;for(this.clear();++g<t;){var n=e[g];this.set(n[0],n[1])}}ni.prototype.clear=Pc,ni.prototype.delete=_c,ni.prototype.get=$c,ni.prototype.has=gi,ni.prototype.set=ti;var Ii=ni;var Ci=function(){this.size=0,this.__data__={hash:new Ii,map:new(jc||Rc),string:new Ii}};var li=function(e){var g=typeof e;return"string"==g||"number"==g||"symbol"==g||"boolean"==g?"__proto__"!==e:null===e};var ai=function(e,g){var t=e.__data__;return li(g)?t["string"==typeof g?"string":"hash"]:t.map};var oi=function(e){var g=ai(this,e).delete(e);return this.size-=g?1:0,g};var ri=function(e){return ai(this,e).get(e)};var ci=function(e){return ai(this,e).has(e)};var ii=function(e,g){var t=ai(this,e),n=t.size;return t.set(e,g),this.size+=t.size==n?0:1,this};function si(e){var g=-1,t=null==e?0:e.length;for(this.clear();++g<t;){var n=e[g];this.set(n[0],n[1])}}si.prototype.clear=Ci,si.prototype.delete=oi,si.prototype.get=ri,si.prototype.has=ci,si.prototype.set=ii;var Ai=si;var di=function(e,g){var t=this.__data__;if(t instanceof Rc){var n=t.__data__;if(!jc||n.length<199)return n.push([e,g]),this.size=++t.size,this;t=this.__data__=new Ai(n)}return t.set(e,g),this.size=t.size,this};function ui(e){var g=this.__data__=new Rc(e);this.size=g.size}ui.prototype.clear=kc,ui.prototype.delete=Xc,ui.prototype.get=Jc,ui.prototype.has=Yc,ui.prototype.set=di;var mi=ui;var bi=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this};var Zi=function(e){return this.__data__.has(e)};function hi(e){var g=-1,t=null==e?0:e.length;for(this.__data__=new Ai;++g<t;)this.add(e[g])}hi.prototype.add=hi.prototype.push=bi,hi.prototype.has=Zi;var pi=hi;var Gi=function(e,g){for(var t=-1,n=null==e?0:e.length;++t<n;)if(g(e[t],t,e))return!0;return!1};var yi=function(e,g){return e.has(g)};var Bi=function(e,g,t,n,I,C){var l=1&t,a=e.length,o=g.length;if(a!=o&&!(l&&o>a))return!1;var r=C.get(e),c=C.get(g);if(r&&c)return r==g&&c==e;var i=-1,s=!0,A=2&t?new pi:void 0;for(C.set(e,g),C.set(g,e);++i<a;){var d=e[i],u=g[i];if(n)var m=l?n(u,d,i,g,e,C):n(d,u,i,e,g,C);if(void 0!==m){if(m)continue;s=!1;break}if(A){if(!Gi(g,(function(e,g){if(!yi(A,g)&&(d===e||I(d,e,t,n,C)))return A.push(g)}))){s=!1;break}}else if(d!==u&&!I(d,u,t,n,C)){s=!1;break}}return C.delete(e),C.delete(g),s},fi=fa.Uint8Array;var Si=function(e){var g=-1,t=Array(e.size);return e.forEach((function(e,n){t[++g]=[n,e]})),t};var vi=function(e){var g=-1,t=Array(e.size);return e.forEach((function(e){t[++g]=e})),t},Wi=Sa?Sa.prototype:void 0,Vi=Wi?Wi.valueOf:void 0;var Ri=function(e,g,t,n,I,C,l){switch(t){case"[object DataView]":if(e.byteLength!=g.byteLength||e.byteOffset!=g.byteOffset)return!1;e=e.buffer,g=g.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=g.byteLength||!C(new fi(e),new fi(g)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Ga(+e,+g);case"[object Error]":return e.name==g.name&&e.message==g.message;case"[object RegExp]":case"[object String]":return e==g+"";case"[object Map]":var a=Si;case"[object Set]":var o=1&n;if(a||(a=vi),e.size!=g.size&&!o)return!1;var r=l.get(e);if(r)return r==g;n|=2,l.set(e,g);var c=Bi(a(e),a(g),n,I,C,l);return l.delete(e),c;case"[object Symbol]":if(Vi)return Vi.call(e)==Vi.call(g)}return!1};var ki=function(e,g){for(var t=-1,n=g.length,I=e.length;++t<n;)e[I+t]=g[t];return e},Xi=Array.isArray;var Ji=function(e,g,t){var n=g(e);return Xi(e)?n:ki(n,t(e))};var Yi=function(e,g){for(var t=-1,n=null==e?0:e.length,I=0,C=[];++t<n;){var l=e[t];g(l,t,e)&&(C[I++]=l)}return C};var Hi=function(){return[]},wi=Object.prototype.propertyIsEnumerable,Ni=Object.getOwnPropertySymbols,Ki=Ni?function(e){return null==e?[]:(e=Object(e),Yi(Ni(e),(function(g){return wi.call(e,g)})))}:Hi;var Fi=function(e,g){for(var t=-1,n=Array(e);++t<e;)n[t]=g(t);return n};var xi=function(e){return La(e)&&"[object Arguments]"==Ha(e)},Ei=Object.prototype,zi=Ei.hasOwnProperty,Mi=Ei.propertyIsEnumerable,Ui=xi(function(){return arguments}())?xi:function(e){return La(e)&&zi.call(e,"callee")&&!Mi.call(e,"callee")},Di=Ui;var Qi=function(){return!1},Li="object"==typeof exports&&exports&&!exports.nodeType&&exports,Ti=Li&&"object"==typeof module&&module&&!module.nodeType&&module,ji=Ti&&Ti.exports===Li?fa.Buffer:void 0,Oi=(ji?ji.isBuffer:void 0)||Qi,Pi={};Pi["[object Float32Array]"]=Pi["[object Float64Array]"]=Pi["[object Int8Array]"]=Pi["[object Int16Array]"]=Pi["[object Int32Array]"]=Pi["[object Uint8Array]"]=Pi["[object Uint8ClampedArray]"]=Pi["[object Uint16Array]"]=Pi["[object Uint32Array]"]=!0,Pi["[object Arguments]"]=Pi["[object Array]"]=Pi["[object ArrayBuffer]"]=Pi["[object Boolean]"]=Pi["[object DataView]"]=Pi["[object Date]"]=Pi["[object Error]"]=Pi["[object Function]"]=Pi["[object Map]"]=Pi["[object Number]"]=Pi["[object Object]"]=Pi["[object RegExp]"]=Pi["[object Set]"]=Pi["[object String]"]=Pi["[object WeakMap]"]=!1;var _i=function(e){return La(e)&&Ka(e.length)&&!!Pi[Ha(e)]};var qi=function(e){return function(g){return e(g)}},$i="object"==typeof exports&&exports&&!exports.nodeType&&exports,es=$i&&"object"==typeof module&&module&&!module.nodeType&&module,gs=es&&es.exports===$i&&ya.process,ts=function(){try{var e=es&&es.require&&es.require("util").types;return e||gs&&gs.binding&&gs.binding("util")}catch(Oe){}}(),ns=ts&&ts.isTypedArray,Is=ns?qi(ns):_i,Cs=Object.prototype.hasOwnProperty;var ls=function(e,g){var t=Xi(e),n=!t&&Di(e),I=!t&&!n&&Oi(e),C=!t&&!n&&!I&&Is(e),l=t||n||I||C,a=l?Fi(e.length,String):[],o=a.length;for(var r in e)!g&&!Cs.call(e,r)||l&&("length"==r||I&&("offset"==r||"parent"==r)||C&&("buffer"==r||"byteLength"==r||"byteOffset"==r)||Ea(r,o))||a.push(r);return a},as=Object.prototype;var os=function(e){var g=e&&e.constructor;return e===("function"==typeof g&&g.prototype||as)};var rs=function(e,g){return function(t){return e(g(t))}},cs=rs(Object.keys,Object),is=Object.prototype.hasOwnProperty;var ss=function(e){if(!os(e))return cs(e);var g=[];for(var t in Object(e))is.call(e,t)&&"constructor"!=t&&g.push(t);return g};var As=function(e){return Fa(e)?ls(e):ss(e)};var ds=function(e){return Ji(e,As,Ki)},us=Object.prototype.hasOwnProperty;var ms=function(e,g,t,n,I,C){var l=1&t,a=ds(e),o=a.length;if(o!=ds(g).length&&!l)return!1;for(var r=o;r--;){var c=a[r];if(!(l?c in g:us.call(g,c)))return!1}var i=C.get(e),s=C.get(g);if(i&&s)return i==g&&s==e;var A=!0;C.set(e,g),C.set(g,e);for(var d=l;++r<o;){var u=e[c=a[r]],m=g[c];if(n)var b=l?n(m,u,c,g,e,C):n(u,m,c,e,g,C);if(!(void 0===b?u===m||I(u,m,t,n,C):b)){A=!1;break}d||(d="constructor"==c)}if(A&&!d){var Z=e.constructor,h=g.constructor;Z==h||!("constructor"in e)||!("constructor"in g)||"function"==typeof Z&&Z instanceof Z&&"function"==typeof h&&h instanceof h||(A=!1)}return C.delete(e),C.delete(g),A},bs=Tc(fa,"DataView"),Zs=Tc(fa,"Promise"),hs=Tc(fa,"Set"),ps=Tc(fa,"WeakMap"),Gs="[object Map]",ys="[object Promise]",Bs="[object Set]",fs="[object WeakMap]",Ss="[object DataView]",vs=Fc(bs),Ws=Fc(jc),Vs=Fc(Zs),Rs=Fc(hs),ks=Fc(ps),Xs=Ha;(bs&&Xs(new bs(new ArrayBuffer(1)))!=Ss||jc&&Xs(new jc)!=Gs||Zs&&Xs(Zs.resolve())!=ys||hs&&Xs(new hs)!=Bs||ps&&Xs(new ps)!=fs)&&(Xs=function(e){var g=Ha(e),t="[object Object]"==g?e.constructor:void 0,n=t?Fc(t):"";if(n)switch(n){case vs:return Ss;case Ws:return Gs;case Vs:return ys;case Rs:return Bs;case ks:return fs}return g});var Js=Xs,Ys="[object Arguments]",Hs="[object Array]",ws="[object Object]",Ns=Object.prototype.hasOwnProperty;var Ks=function(e,g,t,n,I,C){var l=Xi(e),a=Xi(g),o=l?Hs:Js(e),r=a?Hs:Js(g),c=(o=o==Ys?ws:o)==ws,i=(r=r==Ys?ws:r)==ws,s=o==r;if(s&&Oi(e)){if(!Oi(g))return!1;l=!0,c=!1}if(s&&!c)return C||(C=new mi),l||Is(e)?Bi(e,g,t,n,I,C):Ri(e,g,o,t,n,I,C);if(!(1&t)){var A=c&&Ns.call(e,"__wrapped__"),d=i&&Ns.call(g,"__wrapped__");if(A||d){var u=A?e.value():e,m=d?g.value():g;return C||(C=new mi),I(u,m,t,n,C)}}return!!s&&(C||(C=new mi),ms(e,g,t,n,I,C))};var Fs=function e(g,t,n,I,C){return g===t||(null==g||null==t||!La(g)&&!La(t)?g!==g&&t!==t:Ks(g,t,n,I,e,C))};var xs=function(e,g){return Fs(e,g)};function Es(e,g){var t=Ao(e);return t?t.innerHeight:g?e.clientHeight:Zo(e).height}var zs,Ms=Function.prototype.bind.call(Function.prototype.call,[].slice);function Us(e,g){if(!zs){var t=document.body,n=t.matches||t.matchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector;zs=function(e,g){return n.call(e,g)}}return zs(e,g)}function Ds(e,g,t){e.closest&&!t&&e.closest(g);var n=e;do{if(Us(n,g))return n;n=n.parentElement}while(n&&n!==t&&n.nodeType===document.ELEMENT_NODE);return null}var Qs=function(e,g,t,n){for(var I=e.length,C=t+(n?1:-1);n?C--:++C<I;)if(g(e[C],C,e))return C;return-1};var Ls=function(e,g,t,n){var I=t.length,C=I,l=!n;if(null==e)return!C;for(e=Object(e);I--;){var a=t[I];if(l&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++I<C;){var o=(a=t[I])[0],r=e[o],c=a[1];if(l&&a[2]){if(void 0===r&&!(o in e))return!1}else{var i=new mi;if(n)var s=n(r,c,o,e,g,i);if(!(void 0===s?Fs(c,r,3,n,i):s))return!1}}return!0};var Ts=function(e){return e===e&&!wa(e)};var js=function(e){for(var g=As(e),t=g.length;t--;){var n=g[t],I=e[n];g[t]=[n,I,Ts(I)]}return g};var Os=function(e,g){return function(t){return null!=t&&(t[e]===g&&(void 0!==g||e in Object(t)))}};var Ps=function(e){var g=js(e);return 1==g.length&&g[0][2]?Os(g[0][0],g[0][1]):function(t){return t===e||Ls(t,e,g)}},_s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,qs=/^\w*$/;var $s=function(e,g){if(Xi(e))return!1;var t=typeof e;return!("number"!=t&&"symbol"!=t&&"boolean"!=t&&null!=e&&!Ta(e))||(qs.test(e)||!_s.test(e)||null!=g&&e in Object(g))};function eA(e,g){if("function"!=typeof e||null!=g&&"function"!=typeof g)throw new TypeError("Expected a function");var t=function t(){var n=arguments,I=g?g.apply(this,n):n[0],C=t.cache;if(C.has(I))return C.get(I);var l=e.apply(this,n);return t.cache=C.set(I,l)||C,l};return t.cache=new(eA.Cache||Ai),t}eA.Cache=Ai;var gA=eA;var tA=function(e){var g=gA(e,(function(e){return 500===t.size&&t.clear(),e})),t=g.cache;return g},nA=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,IA=/\\(\\)?/g,CA=tA((function(e){var g=[];return 46===e.charCodeAt(0)&&g.push(""),e.replace(nA,(function(e,t,n,I){g.push(n?I.replace(IA,"$1"):t||e)})),g}));var lA=function(e,g){for(var t=-1,n=null==e?0:e.length,I=Array(n);++t<n;)I[t]=g(e[t],t,e);return I},aA=Sa?Sa.prototype:void 0,oA=aA?aA.toString:void 0;var rA=function e(g){if("string"==typeof g)return g;if(Xi(g))return lA(g,e)+"";if(Ta(g))return oA?oA.call(g):"";var t=g+"";return"0"==t&&1/g==-Infinity?"-0":t};var cA=function(e){return null==e?"":rA(e)};var iA=function(e,g){return Xi(e)?e:$s(e,g)?[e]:CA(cA(e))};var sA=function(e){if("string"==typeof e||Ta(e))return e;var g=e+"";return"0"==g&&1/e==-Infinity?"-0":g};var AA=function(e,g){for(var t=0,n=(g=iA(g,e)).length;null!=e&&t<n;)e=e[sA(g[t++])];return t&&t==n?e:void 0};var dA=function(e,g,t){var n=null==e?void 0:AA(e,g);return void 0===n?t:n};var uA=function(e,g){return null!=e&&g in Object(e)};var mA=function(e,g,t){for(var n=-1,I=(g=iA(g,e)).length,C=!1;++n<I;){var l=sA(g[n]);if(!(C=null!=e&&t(e,l)))break;e=e[l]}return C||++n!=I?C:!!(I=null==e?0:e.length)&&Ka(I)&&Ea(l,I)&&(Xi(e)||Di(e))};var bA=function(e,g){return null!=e&&mA(e,g,uA)};var ZA=function(e,g){return $s(e)&&Ts(g)?Os(sA(e),g):function(t){var n=dA(t,e);return void 0===n&&n===g?bA(t,e):Fs(g,n,3)}};var hA=function(e){return e};var pA=function(e){return function(g){return null==g?void 0:g[e]}};var GA=function(e){return function(g){return AA(g,e)}};var yA=function(e){return $s(e)?pA(sA(e)):GA(e)};var BA=function(e){return"function"==typeof e?e:null==e?hA:"object"==typeof e?Xi(e)?ZA(e[0],e[1]):Ps(e):yA(e)},fA=Math.max;var SA=function(e,g,t){var n=null==e?0:e.length;if(!n)return-1;var I=null==t?0:go(t);return I<0&&(I=fA(n+I,0)),Qs(e,BA(g,3),I)},vA=Math.ceil,WA=Math.max;var VA=function(e,g,t,n){for(var I=-1,C=WA(vA((g-e)/(t||1)),0),l=Array(C);C--;)l[n?C:++I]=e,e+=t;return l};var RA=function(e){return function(g,t,n){return n&&"number"!=typeof n&&za(g,t,n)&&(t=n=void 0),g=eo(g),void 0===t?(t=g,g=0):t=eo(t),n=void 0===n?g<t?1:-1:eo(n),VA(g,t,n,e)}},kA=RA(),XA=Number.isNaN||function(e){return"number"===typeof e&&e!==e};function JA(e,g){if(e.length!==g.length)return!1;for(var t=0;t<e.length;t++)if(n=e[t],I=g[t],!(n===I||XA(n)&&XA(I)))return!1;var n,I;return!0}function YA(e,g){void 0===g&&(g=JA);var t=null;function n(){for(var n=[],I=0;I<arguments.length;I++)n[I]=arguments[I];if(t&&t.lastThis===this&&g(n,t.lastArgs))return t.lastResult;var C=e.apply(this,n);return t={lastResult:C,lastArgs:n,lastThis:this},C}return n.clear=function(){t=null},n}var HA=Sa?Sa.isConcatSpreadable:void 0;var wA=function(e){return Xi(e)||Di(e)||!!(HA&&e&&e[HA])};var NA=function e(g,t,n,I,C){var l=-1,a=g.length;for(n||(n=wA),C||(C=[]);++l<a;){var o=g[l];t>0&&n(o)?t>1?e(o,t-1,n,I,C):ki(C,o):I||(C[C.length]=o)}return C};var KA=function(e){return function(g,t,n){for(var I=-1,C=Object(g),l=n(g),a=l.length;a--;){var o=l[e?a:++I];if(!1===t(C[o],o,C))break}return g}}();var FA=function(e,g){return e&&KA(e,g,As)};var xA=function(e,g){return function(t,n){if(null==t)return t;if(!Fa(t))return e(t,n);for(var I=t.length,C=g?I:-1,l=Object(t);(g?C--:++C<I)&&!1!==n(l[C],C,l););return t}}(FA);var EA=function(e,g){var t=-1,n=Fa(e)?Array(e.length):[];return xA(e,(function(e,I,C){n[++t]=g(e,I,C)})),n};var zA=function(e,g){var t=e.length;for(e.sort(g);t--;)e[t]=e[t].value;return e};var MA=function(e,g){if(e!==g){var t=void 0!==e,n=null===e,I=e===e,C=Ta(e),l=void 0!==g,a=null===g,o=g===g,r=Ta(g);if(!a&&!r&&!C&&e>g||C&&l&&o&&!a&&!r||n&&l&&o||!t&&o||!I)return 1;if(!n&&!C&&!r&&e<g||r&&t&&I&&!n&&!C||a&&t&&I||!l&&I||!o)return-1}return 0};var UA=function(e,g,t){for(var n=-1,I=e.criteria,C=g.criteria,l=I.length,a=t.length;++n<l;){var o=MA(I[n],C[n]);if(o)return n>=a?o:o*("desc"==t[n]?-1:1)}return e.index-g.index};var DA=function(e,g,t){g=g.length?lA(g,(function(e){return Xi(e)?function(g){return AA(g,1===e.length?e[0]:e)}:e})):[hA];var n=-1;g=lA(g,qi(BA));var I=EA(e,(function(e,t,I){return{criteria:lA(g,(function(g){return g(e)})),index:++n,value:e}}));return zA(I,(function(e,g){return UA(e,g,t)}))};var QA=function(e,g,t){switch(t.length){case 0:return e.call(g);case 1:return e.call(g,t[0]);case 2:return e.call(g,t[0],t[1]);case 3:return e.call(g,t[0],t[1],t[2])}return e.apply(g,t)},LA=Math.max;var TA=function(e,g,t){return g=LA(void 0===g?e.length-1:g,0),function(){for(var n=arguments,I=-1,C=LA(n.length-g,0),l=Array(C);++I<C;)l[I]=n[g+I];I=-1;for(var a=Array(g+1);++I<g;)a[I]=n[I];return a[g]=t(l),QA(e,this,a)}};var jA=function(e){return function(){return e}},OA=function(){try{var e=Tc(Object,"defineProperty");return e({},"",{}),e}catch(Oe){}}(),PA=OA?function(e,g){return OA(e,"toString",{configurable:!0,enumerable:!1,value:jA(g),writable:!0})}:hA,_A=Date.now;var qA=function(e){var g=0,t=0;return function(){var n=_A(),I=16-(n-t);if(t=n,I>0){if(++g>=800)return arguments[0]}else g=0;return e.apply(void 0,arguments)}},$A=qA(PA);var ed,gd=function(e,g){return $A(TA(e,g,hA),e+"")},td=gd((function(e,g){if(null==e)return[];var t=g.length;return t>1&&za(e,g[0],g[1])?g=[]:t>2&&za(g[0],g[1],g[2])&&(g=[g[0]]),DA(e,NA(g,1),[])}));function nd(e){if((!ed&&0!==ed||e)&&Go){var g=document.createElement("div");g.style.position="absolute",g.style.top="-9999px",g.style.width="50px",g.style.height="50px",g.style.overflow="scroll",document.body.appendChild(g),ed=g.offsetWidth-g.clientWidth,document.body.removeChild(g)}return ed}function Id(e,g){var t=Ao(e);return t?t.innerWidth:g?e.clientWidth:Zo(e).width}function Cd(e,g){return e.replace(new RegExp("(^|\\s)"+g+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}var ld=function(e,g){for(var t=-1,n=null==e?0:e.length;++t<n&&!1!==g(e[t],t,e););return e};var ad=function(e,g,t){"__proto__"==g&&OA?OA(e,g,{configurable:!0,enumerable:!0,value:t,writable:!0}):e[g]=t},od=Object.prototype.hasOwnProperty;var rd=function(e,g,t){var n=e[g];od.call(e,g)&&Ga(n,t)&&(void 0!==t||g in e)||ad(e,g,t)};var cd=function(e,g,t,n){var I=!t;t||(t={});for(var C=-1,l=g.length;++C<l;){var a=g[C],o=n?n(t[a],e[a],a,t,e):void 0;void 0===o&&(o=e[a]),I?ad(t,a,o):rd(t,a,o)}return t};var id=function(e,g){return e&&cd(g,As(g),e)};var sd=function(e){var g=[];if(null!=e)for(var t in Object(e))g.push(t);return g},Ad=Object.prototype.hasOwnProperty;var dd=function(e){if(!wa(e))return sd(e);var g=os(e),t=[];for(var n in e)("constructor"!=n||!g&&Ad.call(e,n))&&t.push(n);return t};var ud=function(e){return Fa(e)?ls(e,!0):dd(e)};var md=function(e,g){return e&&cd(g,ud(g),e)},bd="object"==typeof exports&&exports&&!exports.nodeType&&exports,Zd=bd&&"object"==typeof module&&module&&!module.nodeType&&module,hd=Zd&&Zd.exports===bd?fa.Buffer:void 0,pd=hd?hd.allocUnsafe:void 0;var Gd=function(e,g){if(g)return e.slice();var t=e.length,n=pd?pd(t):new e.constructor(t);return e.copy(n),n};var yd=function(e,g){var t=-1,n=e.length;for(g||(g=Array(n));++t<n;)g[t]=e[t];return g};var Bd=function(e,g){return cd(e,Ki(e),g)},fd=rs(Object.getPrototypeOf,Object),Sd=Object.getOwnPropertySymbols?function(e){for(var g=[];e;)ki(g,Ki(e)),e=fd(e);return g}:Hi;var vd=function(e,g){return cd(e,Sd(e),g)};var Wd=function(e){return Ji(e,ud,Sd)},Vd=Object.prototype.hasOwnProperty;var Rd=function(e){var g=e.length,t=new e.constructor(g);return g&&"string"==typeof e[0]&&Vd.call(e,"index")&&(t.index=e.index,t.input=e.input),t};var kd=function(e){var g=new e.constructor(e.byteLength);return new fi(g).set(new fi(e)),g};var Xd=function(e,g){var t=g?kd(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.byteLength)},Jd=/\w*$/;var Yd=function(e){var g=new e.constructor(e.source,Jd.exec(e));return g.lastIndex=e.lastIndex,g},Hd=Sa?Sa.prototype:void 0,wd=Hd?Hd.valueOf:void 0;var Nd=function(e){return wd?Object(wd.call(e)):{}};var Kd=function(e,g){var t=g?kd(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.length)};var Fd=function(e,g,t){var n=e.constructor;switch(g){case"[object ArrayBuffer]":return kd(e);case"[object Boolean]":case"[object Date]":return new n(+e);case"[object DataView]":return Xd(e,t);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Kd(e,t);case"[object Map]":case"[object Set]":return new n;case"[object Number]":case"[object String]":return new n(e);case"[object RegExp]":return Yd(e);case"[object Symbol]":return Nd(e)}},xd=Object.create,Ed=function(){function e(){}return function(g){if(!wa(g))return{};if(xd)return xd(g);e.prototype=g;var t=new e;return e.prototype=void 0,t}}();var zd=function(e){return"function"!=typeof e.constructor||os(e)?{}:Ed(fd(e))};var Md=function(e){return La(e)&&"[object Map]"==Js(e)},Ud=ts&&ts.isMap,Dd=Ud?qi(Ud):Md;var Qd=function(e){return La(e)&&"[object Set]"==Js(e)},Ld=ts&&ts.isSet,Td=Ld?qi(Ld):Qd,jd="[object Arguments]",Od="[object Function]",Pd="[object Object]",_d={};_d[jd]=_d["[object Array]"]=_d["[object ArrayBuffer]"]=_d["[object DataView]"]=_d["[object Boolean]"]=_d["[object Date]"]=_d["[object Float32Array]"]=_d["[object Float64Array]"]=_d["[object Int8Array]"]=_d["[object Int16Array]"]=_d["[object Int32Array]"]=_d["[object Map]"]=_d["[object Number]"]=_d[Pd]=_d["[object RegExp]"]=_d["[object Set]"]=_d["[object String]"]=_d["[object Symbol]"]=_d["[object Uint8Array]"]=_d["[object Uint8ClampedArray]"]=_d["[object Uint16Array]"]=_d["[object Uint32Array]"]=!0,_d["[object Error]"]=_d[Od]=_d["[object WeakMap]"]=!1;var qd=function e(g,t,n,I,C,l){var a,o=1&t,r=2&t,c=4&t;if(n&&(a=C?n(g,I,C,l):n(g)),void 0!==a)return a;if(!wa(g))return g;var i=Xi(g);if(i){if(a=Rd(g),!o)return yd(g,a)}else{var s=Js(g),A=s==Od||"[object GeneratorFunction]"==s;if(Oi(g))return Gd(g,o);if(s==Pd||s==jd||A&&!C){if(a=r||A?{}:zd(g),!o)return r?vd(g,md(a,g)):Bd(g,id(a,g))}else{if(!_d[s])return C?g:{};a=Fd(g,s,o)}}l||(l=new mi);var d=l.get(g);if(d)return d;l.set(g,a),Td(g)?g.forEach((function(I){a.add(e(I,t,n,I,g,l))})):Dd(g)&&g.forEach((function(I,C){a.set(C,e(I,t,n,C,g,l))}));var u=i?void 0:(c?r?Wd:ds:r?ud:As)(g);return ld(u||g,(function(I,C){u&&(I=g[C=I]),rd(a,C,e(I,t,n,C,g,l))})),a};var $d=function(e){var g=null==e?0:e.length;return g?e[g-1]:void 0};var eu=function(e,g){return g.length<2?e:AA(e,pa(g,0,-1))};var gu=function(e,g){return g=iA(g,e),null==(e=eu(e,g))||delete e[sA($d(g))]},tu=Function.prototype,nu=Object.prototype,Iu=tu.toString,Cu=nu.hasOwnProperty,lu=Iu.call(Object);var au=function(e){if(!La(e)||"[object Object]"!=Ha(e))return!1;var g=fd(e);if(null===g)return!0;var t=Cu.call(g,"constructor")&&g.constructor;return"function"==typeof t&&t instanceof t&&Iu.call(t)==lu};var ou=function(e){return au(e)?void 0:e};var ru=function(e){return(null==e?0:e.length)?NA(e,1):[]};var cu=function(e){return $A(TA(e,void 0,ru),e+"")}((function(e,g){var t={};if(null==e)return t;var n=!1;g=lA(g,(function(g){return g=iA(g,e),n||(n=g.length>1),g})),cd(e,Wd(e),t),n&&(t=qd(t,7,ou));for(var I=g.length;I--;)gu(t,g[I]);return t})),iu=Object.prototype,su=iu.hasOwnProperty,Au=gd((function(e,g){e=Object(e);var t=-1,n=g.length,I=n>2?g[2]:void 0;for(I&&za(g[0],g[1],I)&&(n=1);++t<n;)for(var C=g[t],l=ud(C),a=-1,o=l.length;++a<o;){var r=l[a],c=e[r];(void 0===c||Ga(c,iu[r])&&!su.call(e,r))&&(e[r]=C[r])}return e}));var du=function(e,g,t){var n=Xi(e),I=n||Oi(e)||Is(e);if(g=BA(g,4),null==t){var C=e&&e.constructor;t=I?n?new C:[]:wa(e)&&Na(C)?Ed(fd(e)):{}}return(I?ld:FA)(e,(function(e,n,I){return g(t,e,n,I)})),t};var uu=function(e,g){var t={};return g=BA(g,3),FA(e,(function(e,n,I){ad(t,n,g(e,n,I))})),t};t(818),t(253),t(320),t(36),t(893),t(26),t(27);function mu(e){return e.children}var bu="PREV",Zu="NEXT",hu="TODAY",pu="DATE",Gu={MONTH:"month",WEEK:"week",WORK_WEEK:"work_week",DAY:"day",AGENDA:"agenda"},yu=Object.keys(Gu).map((function(e){return Gu[e]}));function Bu(e,g){e&&e.apply(null,[].concat(g))}Kl().oneOfType([Kl().string,Kl().func]),Kl().any,Kl().func,Kl().oneOfType([Kl().arrayOf(Kl().oneOf(yu)),Kl().objectOf((function(e,g){if(-1!==yu.indexOf(g)&&"boolean"===typeof e[g])return null;for(var t=arguments.length,n=new Array(t>2?t-2:0),I=2;I<t;I++)n[I-2]=arguments[I];return Kl().elementType.apply(Kl(),[e,g].concat(n))}))]),Kl().oneOfType([Kl().oneOf(["overlap","no-overlap"]),Kl().func]);var fu={seconds:1e3,minutes:6e4,hours:36e5,day:864e5};function Su(e,g){var t=$l(e,"month");return $l(t,"week",g.startOfWeek())}function vu(e,g){var t=ea(e,"month");return ea(t,"week",g.startOfWeek())}function Wu(e,g){for(var t=Su(e,g),n=vu(e,g),I=[];la(t,n,"day");)I.push(t),t=_l(t,1,"day");return I}function Vu(e,g){var t=$l(e,g);return ga(t,e)?t:_l(t,1,g)}function Ru(e,g){for(var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"day",n=e,I=[];la(n,g,t);)I.push(n),n=_l(n,1,t);return I}function ku(e,g){return null==g&&null==e?null:(null==g&&(g=new Date),null==e&&(e=new Date),e=$l(e,"day"),e=Aa(e,Aa(g)),e=sa(e,sa(g)),e=ia(e,ia(g)),ca(e,ca(g)))}function Xu(e){return 0===Aa(e)&&0===sa(e)&&0===ia(e)&&0===ca(e)}function Ju(e,g,t){return t&&"milliseconds"!==t?Math.round(Math.abs(+$l(e,t)/fu[t]-+$l(g,t)/fu[t])):Math.abs(+e-+g)}var Yu=Kl().oneOfType([Kl().string,Kl().func]);function Hu(e,g,t,n,I){var C="function"===typeof n?n(t,I,e):g.call(e,t,n,I);return kl()(null==C||"string"===typeof C,"`localizer format(..)` must return a string, null, or undefined"),C}function wu(e,g,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,g+t,0,0)}function Nu(e,g){return e.getTimezoneOffset()-g.getTimezoneOffset()}function Ku(e,g){return Ju(e,g,"minutes")+Nu(e,g)}function Fu(e){var g=$l(e,"day");return Ju(g,e,"minutes")+Nu(g,e)}function xu(e,g){return Ca(e,g,"day")}function Eu(e,g,t){return ga(e,g,"minutes")?Ia(g,t,"minutes"):na(g,t,"minutes")}function zu(e){var g=e.evtA,t=g.start,n=g.end,I=g.allDay,C=e.evtB,l=C.start,a=C.end,o=C.allDay,r=+$l(t,"day")-+$l(l,"day"),c=Ju(t,Vu(n,"day"),"day"),i=Ju(l,Vu(a,"day"),"day");return r||Math.max(i,1)-Math.max(c,1)||!!o-!!I||+t-+l||+n-+a}function Mu(e){var g=e.event,t=g.start,n=g.end,I=e.range,C=I.start,l=I.end,a=$l(t,"day"),o=la(a,l,"day"),r=ta(a,n,"minutes")?na(n,C,"minutes"):Ia(n,C,"minutes");return o&&r}function Uu(e,g){return ga(e,g,"day")}function Du(e,g){return Xu(e)&&Xu(g)}var Qu=m((function e(g){var t=this;s(this,e),kl()("function"===typeof g.format,"date localizer `format(..)` must be a function"),kl()("function"===typeof g.firstOfWeek,"date localizer `firstOfWeek(..)` must be a function"),this.propType=g.propType||Yu,this.formats=g.formats,this.format=function(){for(var e=arguments.length,n=new Array(e),I=0;I<e;I++)n[I]=arguments[I];return Hu.apply(void 0,[t,g.format].concat(n))},this.startOfWeek=g.firstOfWeek,this.merge=g.merge||ku,this.inRange=g.inRange||ra,this.lt=g.lt||Ca,this.lte=g.lte||la,this.gt=g.gt||na,this.gte=g.gte||Ia,this.eq=g.eq||ga,this.neq=g.neq||ta,this.startOf=g.startOf||$l,this.endOf=g.endOf||ea,this.add=g.add||_l,this.range=g.range||Ru,this.diff=g.diff||Ju,this.ceil=g.ceil||Vu,this.min=g.min||aa,this.max=g.max||oa,this.minutes=g.minutes||sa,this.firstVisibleDay=g.firstVisibleDay||Su,this.lastVisibleDay=g.lastVisibleDay||vu,this.visibleDays=g.visibleDays||Wu,this.getSlotDate=g.getSlotDate||wu,this.getTimezoneOffset=g.getTimezoneOffset||function(e){return e.getTimezoneOffset()},this.getDstOffset=g.getDstOffset||Nu,this.getTotalMin=g.getTotalMin||Ku,this.getMinutesFromMidnight=g.getMinutesFromMidnight||Fu,this.continuesPrior=g.continuesPrior||xu,this.continuesAfter=g.continuesAfter||Eu,this.sortEvents=g.sortEvents||zu,this.inEventRange=g.inEventRange||Mu,this.isSameDate=g.isSameDate||Uu,this.startAndEndAreDateOnly=g.startAndEndAreDateOnly||Du,this.segmentOffset=g.browserTZOffset?g.browserTZOffset():0}));function Lu(e,g,t,n){var I=rg(rg({},e.formats),t);return rg(rg({},e),{},{messages:n,startOfWeek:function(){return e.startOfWeek(g)},format:function(t,n){return e.format(t,I[n]||n,g)}})}var Tu={date:"Date",time:"Time",event:"Event",allDay:"All Day",week:"Week",work_week:"Work Week",day:"Day",month:"Month",previous:"Back",next:"Next",yesterday:"Yesterday",tomorrow:"Tomorrow",today:"Today",agenda:"Agenda",noEventsInRange:"There are no events in this range.",showMore:function(e){return"+".concat(e," more")}};var ju=["style","className","event","selected","isAllDay","onSelect","onDoubleClick","onKeyPress","localizer","continuesPrior","continuesAfter","accessors","getters","children","components","slotStart","slotEnd"],Ou=function(e){Z(n,e);var t=y(n);function n(){return s(this,n),t.apply(this,arguments)}return m(n,[{key:"render",value:function(){var e=this.props,t=e.style,n=e.className,I=e.event,C=e.selected,l=e.isAllDay,a=e.onSelect,o=e.onDoubleClick,r=e.onKeyPress,c=e.localizer,i=e.continuesPrior,s=e.continuesAfter,A=e.accessors,d=e.getters,u=e.children,m=e.components,b=m.event,Z=m.eventWrapper,h=e.slotStart,p=e.slotEnd,G=bn(e,ju);delete G.resizable;var y=A.title(I),B=A.tooltip(I),f=A.end(I),S=A.start(I),v=A.allDay(I),W=l||v||c.diff(S,c.ceil(f,"day"),"day")>1,V=d.eventProp(I,S,f,C),R=g.createElement("div",{className:"rbc-event-content",title:B||void 0},b?g.createElement(b,{event:I,continuesPrior:i,continuesAfter:s,title:y,isAllDay:v,localizer:c,slotStart:h,slotEnd:p}):y);return g.createElement(Z,Object.assign({},this.props,{type:"date"}),g.createElement("div",Object.assign({},G,{tabIndex:0,style:rg(rg({},V.style),t),className:hn("rbc-event",n,V.className,{"rbc-selected":C,"rbc-event-allday":W,"rbc-event-continues-prior":i,"rbc-event-continues-after":s}),onClick:function(e){return a&&a(I,e)},onDoubleClick:function(e){return o&&o(I,e)},onKeyPress:function(e){return r&&r(I,e)}}),"function"===typeof u?u(R):R))}}]),n}(g.Component);function Pu(e,g){return!(!e||null==g)&&xs(e,g)}function _u(e,g){return(e.right-e.left)/g}function qu(e,g,t,n){var I=_u(e,n);return t?n-1-Math.floor((g-e.left)/I):Math.floor((g-e.left)/I)}function $u(e){var t=e.containerRef,n=e.accessors,I=e.getters,C=e.selected,l=e.components,a=e.localizer,o=e.position,r=e.show,c=e.events,i=e.slotStart,s=e.slotEnd,A=e.onSelect,d=e.onDoubleClick,u=e.onKeyPress,m=e.handleDragStart,b=e.popperRef,Z=e.target,h=e.offset;!function(e){var t=e.ref,n=e.callback;(0,g.useEffect)((function(){var e=function(e){t.current&&!t.current.contains(e.target)&&n()};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[t,n])}({ref:b,callback:r}),(0,g.useLayoutEffect)((function(){var e=function(e){var g=e.target,t=e.offset,n=e.container,I=e.box,C=Zo(g),l=C.top,a=C.left,o=C.width,r=C.height,c=Zo(n),i=c.top,s=c.left,A=c.width,d=c.height,u=Zo(I),m=u.width,b=u.height,Z=i+d,h=s+A,p=l+b,G=a+m,y=t.x,B=t.y;return{topOffset:p>Z?l-b-B:l+B+r,leftOffset:G>h?a+y-m+o:a+y}}({target:Z,offset:h,container:t.current,box:b.current}),g=e.topOffset,n=e.leftOffset;b.current.style.top="".concat(g,"px"),b.current.style.left="".concat(n,"px")}),[h.x,h.y,Z]);var p=o.width,G={minWidth:p+p/2};return g.createElement("div",{style:G,className:"rbc-overlay",ref:b},g.createElement("div",{className:"rbc-overlay-header"},a.format(i,"dayHeaderFormat")),c.map((function(e,t){return g.createElement(Ou,{key:t,type:"popup",localizer:a,event:e,getters:I,onSelect:A,accessors:n,components:l,onDoubleClick:d,onKeyPress:u,continuesPrior:a.lt(n.end(e),i,"day"),continuesAfter:a.gte(n.start(e),s,"day"),slotStart:i,slotEnd:s,selected:Pu(e,C),draggable:!0,onDragStart:function(){return m(e)},onDragEnd:function(){return r()}})})))}var em=g.forwardRef((function(e,t){return g.createElement($u,Object.assign({},e,{popperRef:t}))}));function gm(e){var t=e.containerRef,n=e.popupOffset,I=void 0===n?5:n,C=e.overlay,l=e.accessors,a=e.localizer,o=e.components,r=e.getters,c=e.selected,i=e.handleSelectEvent,s=e.handleDoubleClickEvent,A=e.handleKeyPressEvent,d=e.handleDragStart,u=e.onHide,m=e.overlayDisplay,b=(0,g.useRef)(null);if(!C.position)return null;var Z=I;isNaN(I)||(Z={x:I,y:I});var h=C.position,p=C.events,G=C.date,y=C.end;return g.createElement(pc,{rootClose:!0,flip:!0,show:!0,placement:"bottom",onHide:u,target:C.target},(function(e){var n=e.props;return g.createElement(em,Object.assign({},n,{containerRef:t,ref:b,target:C.target,offset:Z,accessors:l,getters:r,selected:c,components:o,localizer:a,position:h,show:m,events:p,slotStart:G,slotEnd:y,onSelect:i,onDoubleClick:s,onKeyPress:A,handleDragStart:d}))}))}em.propTypes={accessors:Kl().object.isRequired,getters:Kl().object.isRequired,selected:Kl().object,components:Kl().object.isRequired,localizer:Kl().object.isRequired,position:Kl().object.isRequired,show:Kl().func.isRequired,events:Kl().array.isRequired,slotStart:Kl().instanceOf(Date).isRequired,slotEnd:Kl().instanceOf(Date),onSelect:Kl().func,onDoubleClick:Kl().func,onKeyPress:Kl().func,handleDragStart:Kl().func,style:Kl().object,offset:Kl().shape({x:Kl().number,y:Kl().number})};var tm=g.forwardRef((function(e,t){return g.createElement(gm,Object.assign({},e,{containerRef:t}))}));function nm(e,g){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;return ac(t,e,g,{passive:!1})}function Im(e,g){return!!function(e,g){var t=g.clientX,n=g.clientY;return Ds(document.elementFromPoint(t,n),".rbc-event",e)}(e,g)}function Cm(e,g){return!!function(e,g){var t=g.clientX,n=g.clientY;return Ds(document.elementFromPoint(t,n),".rbc-show-more",e)}(e,g)}function lm(e){var g=e;return e.touches&&e.touches.length&&(g=e.touches[0]),{clientX:g.clientX,clientY:g.clientY,pageX:g.pageX,pageY:g.pageY}}tm.propTypes={popupOffset:Kl().oneOfType([Kl().number,Kl().shape({x:Kl().number,y:Kl().number})]),overlay:Kl().shape({position:Kl().object,events:Kl().array,date:Kl().instanceOf(Date),end:Kl().instanceOf(Date)}),accessors:Kl().object.isRequired,localizer:Kl().object.isRequired,components:Kl().object.isRequired,getters:Kl().object.isRequired,selected:Kl().object,handleSelectEvent:Kl().func,handleDoubleClickEvent:Kl().func,handleKeyPressEvent:Kl().func,handleDragStart:Kl().func,onHide:Kl().func,overlayDisplay:Kl().func};var am=function(){function e(g){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.global,I=void 0!==n&&n,C=t.longPressThreshold,l=void 0===C?250:C,a=t.validContainers,o=void 0===a?[]:a;s(this,e),this.isDetached=!1,this.container=g,this.globalMouse=!g||I,this.longPressThreshold=l,this.validContainers=o,this._listeners=Object.create(null),this._handleInitialEvent=this._handleInitialEvent.bind(this),this._handleMoveEvent=this._handleMoveEvent.bind(this),this._handleTerminatingEvent=this._handleTerminatingEvent.bind(this),this._keyListener=this._keyListener.bind(this),this._dropFromOutsideListener=this._dropFromOutsideListener.bind(this),this._dragOverFromOutsideListener=this._dragOverFromOutsideListener.bind(this),this._removeTouchMoveWindowListener=nm("touchmove",(function(){}),window),this._removeKeyDownListener=nm("keydown",this._keyListener),this._removeKeyUpListener=nm("keyup",this._keyListener),this._removeDropFromOutsideListener=nm("drop",this._dropFromOutsideListener),this._removeDragOverFromOutsideListener=nm("dragover",this._dragOverFromOutsideListener),this._addInitialEventListener()}return m(e,[{key:"on",value:function(e,g){var t=this._listeners[e]||(this._listeners[e]=[]);return t.push(g),{remove:function(){var e=t.indexOf(g);-1!==e&&t.splice(e,1)}}}},{key:"emit",value:function(e){for(var g=arguments.length,t=new Array(g>1?g-1:0),n=1;n<g;n++)t[n-1]=arguments[n];var I;return(this._listeners[e]||[]).forEach((function(e){void 0===I&&(I=e.apply(void 0,t))})),I}},{key:"teardown",value:function(){this.isDetached=!0,this._listeners=Object.create(null),this._removeTouchMoveWindowListener&&this._removeTouchMoveWindowListener(),this._removeInitialEventListener&&this._removeInitialEventListener(),this._removeEndListener&&this._removeEndListener(),this._onEscListener&&this._onEscListener(),this._removeMoveListener&&this._removeMoveListener(),this._removeKeyUpListener&&this._removeKeyUpListener(),this._removeKeyDownListener&&this._removeKeyDownListener(),this._removeDropFromOutsideListener&&this._removeDropFromOutsideListener(),this._removeDragOverFromOutsideListener&&this._removeDragOverFromOutsideListener()}},{key:"isSelected",value:function(e){var g=this._selectRect;return!(!g||!this.selecting)&&om(g,rm(e))}},{key:"filter",value:function(e){return this._selectRect&&this.selecting?e.filter(this.isSelected,this):[]}},{key:"_addLongPressListener",value:function(e,g){var t=this,n=null,I=null,C=null,l=function(g){n=setTimeout((function(){o(),e(g)}),t.longPressThreshold),I=nm("touchmove",(function(){return o()})),C=nm("touchend",(function(){return o()}))},a=nm("touchstart",l),o=function(){n&&clearTimeout(n),I&&I(),C&&C(),n=null,I=null,C=null};return g&&l(g),function(){o(),a()}}},{key:"_addInitialEventListener",value:function(){var e=this,g=nm("mousedown",(function(g){e._removeInitialEventListener(),e._handleInitialEvent(g),e._removeInitialEventListener=nm("mousedown",e._handleInitialEvent)})),t=nm("touchstart",(function(g){e._removeInitialEventListener(),e._removeInitialEventListener=e._addLongPressListener(e._handleInitialEvent,g)}));this._removeInitialEventListener=function(){g(),t()}}},{key:"_dropFromOutsideListener",value:function(e){var g=lm(e),t=g.pageX,n=g.pageY,I=g.clientX,C=g.clientY;this.emit("dropFromOutside",{x:t,y:n,clientX:I,clientY:C}),e.preventDefault()}},{key:"_dragOverFromOutsideListener",value:function(e){var g=lm(e),t=g.pageX,n=g.pageY,I=g.clientX,C=g.clientY;this.emit("dragOverFromOutside",{x:t,y:n,clientX:I,clientY:C}),e.preventDefault()}},{key:"_handleInitialEvent",value:function(e){if(!this.isDetached){var g,t=lm(e),n=t.clientX,I=t.clientY,C=t.pageX,l=t.pageY,a=this.container();if(3!==e.which&&2!==e.button&&function(e,g,t){return!e||so(e,document.elementFromPoint(g,t))}(a,n,I)){if(!this.globalMouse&&a&&!so(a,e.target)){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;"object"!==A(e)&&(e={top:e,left:e,right:e,bottom:e});return e}(0),r=o.top,c=o.left,i=o.bottom,s=o.right;if(!om({top:(g=rm(a)).top-r,left:g.left-c,bottom:g.bottom+i,right:g.right+s},{top:l,left:C}))return}if(!1!==this.emit("beforeSelect",this._initialEventData={isTouch:/^touch/.test(e.type),x:C,y:l,clientX:n,clientY:I}))switch(e.type){case"mousedown":this._removeEndListener=nm("mouseup",this._handleTerminatingEvent),this._onEscListener=nm("keydown",this._handleTerminatingEvent),this._removeMoveListener=nm("mousemove",this._handleMoveEvent);break;case"touchstart":this._handleMoveEvent(e),this._removeEndListener=nm("touchend",this._handleTerminatingEvent),this._removeMoveListener=nm("touchmove",this._handleMoveEvent)}}}}},{key:"_isWithinValidContainer",value:function(e){var g=e.target,t=this.validContainers;return!(t&&t.length&&g)||t.some((function(e){return!!g.closest(e)}))}},{key:"_handleTerminatingEvent",value:function(e){var g=lm(e),t=g.pageX,n=g.pageY;if(this.selecting=!1,this._removeEndListener&&this._removeEndListener(),this._removeMoveListener&&this._removeMoveListener(),this._initialEventData){var I=!this.container||so(this.container(),e.target),C=this._isWithinValidContainer(e),l=this._selectRect,a=this.isClick(t,n);return this._initialEventData=null,"Escape"!==e.key&&C?a&&I?this._handleClickEvent(e):a?this.emit("reset"):this.emit("select",l):this.emit("reset")}}},{key:"_handleClickEvent",value:function(e){var g=lm(e),t=g.pageX,n=g.pageY,I=g.clientX,C=g.clientY,l=(new Date).getTime();return this._lastClickData&&l-this._lastClickData.timestamp<250?(this._lastClickData=null,this.emit("doubleClick",{x:t,y:n,clientX:I,clientY:C})):(this._lastClickData={timestamp:l},this.emit("click",{x:t,y:n,clientX:I,clientY:C}))}},{key:"_handleMoveEvent",value:function(e){if(null!==this._initialEventData&&!this.isDetached){var g=this._initialEventData,t=g.x,n=g.y,I=lm(e),C=I.pageX,l=I.pageY,a=Math.abs(t-C),o=Math.abs(n-l),r=Math.min(C,t),c=Math.min(l,n),i=this.selecting;(!this.isClick(C,l)||i||a||o)&&(this.selecting=!0,this._selectRect={top:c,left:r,x:C,y:l,right:r+a,bottom:c+o},i||this.emit("selectStart",this._initialEventData),this.isClick(C,l)||this.emit("selecting",this._selectRect),e.preventDefault())}}},{key:"_keyListener",value:function(e){this.ctrl=e.metaKey||e.ctrlKey}},{key:"isClick",value:function(e,g){var t=this._initialEventData,n=t.x,I=t.y;return!t.isTouch&&Math.abs(e-n)<=5&&Math.abs(g-I)<=5}}]),e}();function om(e,g){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=rm(e),I=n.top,C=n.left,l=n.right,a=void 0===l?C:l,o=n.bottom,r=void 0===o?I:o,c=rm(g),i=c.top,s=c.left,A=c.right,d=void 0===A?s:A,u=c.bottom;return!(r-t<i||I+t>(void 0===u?i:u)||a-t<s||C+t>d)}function rm(e){if(!e.getBoundingClientRect)return e;var g=e.getBoundingClientRect(),t=g.left+cm("left"),n=g.top+cm("top");return{top:n,left:t,right:(e.offsetWidth||0)+t,bottom:(e.offsetHeight||0)+n}}function cm(e){return"left"===e?window.pageXOffset||document.body.scrollLeft||0:"top"===e?window.pageYOffset||document.body.scrollTop||0:void 0}var im=function(e){Z(n,e);var t=y(n);function n(e,I){var C;return s(this,n),(C=t.call(this,e,I)).state={selecting:!1},C.containerRef=(0,g.createRef)(),C}return m(n,[{key:"componentDidMount",value:function(){this.props.selectable&&this._selectable()}},{key:"componentWillUnmount",value:function(){this._teardownSelectable()}},{key:"componentDidUpdate",value:function(e){!e.selectable&&this.props.selectable&&this._selectable(),e.selectable&&!this.props.selectable&&this._teardownSelectable()}},{key:"render",value:function(){var e=this.props,t=e.range,n=e.getNow,I=e.getters,C=e.date,l=e.components.dateCellWrapper,a=e.localizer,o=this.state,r=o.selecting,c=o.startIdx,i=o.endIdx,s=n();return g.createElement("div",{className:"rbc-row-bg",ref:this.containerRef},t.map((function(e,n){var o=r&&n>=c&&n<=i,A=I.dayProp(e),d=A.className,u=A.style;return g.createElement(l,{key:n,value:e,range:t},g.createElement("div",{style:u,className:hn("rbc-day-bg",d,o&&"rbc-selected-cell",a.isSameDate(e,s)&&"rbc-today",C&&a.neq(C,e,"month")&&"rbc-off-range-bg")}))})))}},{key:"_selectable",value:function(){var e=this,g=this.containerRef.current,t=this._selector=new am(this.props.container,{longPressThreshold:this.props.longPressThreshold}),n=function(t,n){if(!Im(g,t)&&!Cm(g,t)){var I=rm(g),C=e.props,l=C.range,a=C.rtl;if(function(e,g){var t=g.x,n=g.y;return n>=e.top&&n<=e.bottom&&t>=e.left&&t<=e.right}(I,t)){var o=qu(I,t.x,a,l.length);e._selectSlot({startIdx:o,endIdx:o,action:n,box:t})}}e._initial={},e.setState({selecting:!1})};t.on("selecting",(function(n){var I=e.props,C=I.range,l=I.rtl,a=-1,o=-1;if(e.state.selecting||(Bu(e.props.onSelectStart,[n]),e._initial={x:n.x,y:n.y}),t.isSelected(g)){var r=rm(g),c=function(e,g,t,n,I){var C=-1,l=-1,a=n-1,o=_u(g,n),r=qu(g,t.x,I,n),c=g.top<t.y&&g.bottom>t.y,i=g.top<e.y&&g.bottom>e.y,s=e.y>g.bottom,A=g.top>e.y;return t.top<g.top&&t.bottom>g.bottom&&(C=0,l=a),c&&(A?(C=0,l=r):s&&(C=r,l=a)),i&&(C=l=I?a-Math.floor((e.x-g.left)/o):Math.floor((e.x-g.left)/o),c?r<C?C=r:l=r:e.y<t.y?l=a:C=0),{startIdx:C,endIdx:l}}(e._initial,r,n,C.length,l);a=c.startIdx,o=c.endIdx}e.setState({selecting:!0,startIdx:a,endIdx:o})})),t.on("beforeSelect",(function(g){if("ignoreEvents"===e.props.selectable)return!Im(e.containerRef.current,g)})),t.on("click",(function(e){return n(e,"click")})),t.on("doubleClick",(function(e){return n(e,"doubleClick")})),t.on("select",(function(g){e._selectSlot(rg(rg({},e.state),{},{action:"select",bounds:g})),e._initial={},e.setState({selecting:!1}),Bu(e.props.onSelectEnd,[e.state])}))}},{key:"_teardownSelectable",value:function(){this._selector&&(this._selector.teardown(),this._selector=null)}},{key:"_selectSlot",value:function(e){var g=e.endIdx,t=e.startIdx,n=e.action,I=e.bounds,C=e.box;-1!==g&&-1!==t&&this.props.onSelectSlot&&this.props.onSelectSlot({start:t,end:g,action:n,bounds:I,box:C,resourceId:this.props.resourceId})}}]),n}(g.Component),sm=(Kl().object.isRequired,Kl().object,Kl().bool,Kl().object.isRequired,Kl().object.isRequired,Kl().object.isRequired,Kl().object.isRequired,Kl().func,Kl().func,Kl().func,{segments:[],selected:{}}),Am=function(e,t){var n=e.selected;e.isAllDay;var I=e.accessors,C=e.getters,l=e.onSelect,a=e.onDoubleClick,o=e.onKeyPress,r=e.localizer,c=e.slotMetrics,i=e.components,s=e.resizable,A=c.continuesPrior(t),d=c.continuesAfter(t);return g.createElement(Ou,{event:t,getters:C,localizer:r,accessors:I,components:i,onSelect:l,onDoubleClick:a,onKeyPress:o,continuesPrior:A,continuesAfter:d,slotStart:c.first,slotEnd:c.last,selected:Pu(t,n),resizable:s})},dm=function(e,t,n){var I=arguments.length>3&&void 0!==arguments[3]?arguments[3]:" ",C=Math.abs(t)/e*100+"%";return g.createElement("div",{key:n,className:"rbc-row-segment",style:{WebkitFlexBasis:C,flexBasis:C,maxWidth:C}},I)},um=function(e){Z(n,e);var t=y(n);function n(){return s(this,n),t.apply(this,arguments)}return m(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.segments,I=t.slotMetrics.slots,C=t.className,l=1;return g.createElement("div",{className:hn(C,"rbc-row")},n.reduce((function(g,t,n){var C=t.event,a=t.left,o=t.right,r=t.span,c="_lvl_"+n,i=a-l,s=Am(e.props,C);return i&&g.push(dm(I,i,"".concat(c,"_gap"))),g.push(dm(I,r,c,s)),l=o+1,g}),[]))}}]),n}(g.Component);function mm(e){var g=e.dateRange,t=e.unit,n=void 0===t?"day":t,I=e.localizer;return{first:g[0],last:I.add(g[g.length-1],1,n)}}function bm(e){var g,t,n,I=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,C=[],l=[];for(g=0;g<e.length;g++){for(n=e[g],t=0;t<C.length&&hm(n,C[t]);t++);t>=I?l.push(n):(C[t]||(C[t]=[])).push(n)}for(g=0;g<C.length;g++)C[g].sort((function(e,g){return e.left-g.left}));return{levels:C,extra:l}}function Zm(e,g,t,n,I){var C={start:n.start(e),end:n.end(e)},l={start:g,end:t};return I.inEventRange({event:C,range:l})}function hm(e,g){return g.some((function(g){return g.left<=e.right&&g.right>=e.left}))}function pm(e,g,t,n){var I={start:t.start(e),end:t.end(e),allDay:t.allDay(e)},C={start:t.start(g),end:t.end(g),allDay:t.allDay(g)};return n.sortEvents({evtA:I,evtB:C})}um.defaultProps=rg({},sm);var Gm=function(e,g){return e.left<=g&&e.right>=g},ym=function(e,g){return e.filter((function(e){return Gm(e,g)})).length},Bm=function(e){Z(n,e);var t=y(n);function n(){return s(this,n),t.apply(this,arguments)}return m(n,[{key:"render",value:function(){for(var e=this.props,t=e.segments,n=e.slotMetrics.slots,I=bm(t).levels[0],C=1,l=1,a=[];C<=n;){var o="_lvl_"+C,r=I.filter((function(e){return Gm(e,C)}))[0]||{},c=r.event,i=r.left,s=r.right,A=r.span;if(c){var d=Math.max(0,i-l);if(this.canRenderSlotEvent(i,A)){var u=Am(this.props,c);d&&a.push(dm(n,d,o+"_gap")),a.push(dm(n,A,o,u)),l=C=s+1}else d&&a.push(dm(n,d,o+"_gap")),a.push(dm(n,1,o,this.renderShowMore(t,C))),l=C+=1}else C++}return g.createElement("div",{className:"rbc-row"},a)}},{key:"canRenderSlotEvent",value:function(e,g){var t=this.props.segments;return kA(e,e+g).every((function(e){return 1===ym(t,e)}))}},{key:"renderShowMore",value:function(e,t){var n=this,I=this.props.localizer,C=ym(e,t);return!!C&&g.createElement("button",{type:"button",key:"sm_"+t,className:hn("rbc-button-link","rbc-show-more"),onClick:function(e){return n.showMore(t,e)}},I.messages.showMore(C))}},{key:"showMore",value:function(e,g){g.preventDefault(),g.stopPropagation(),this.props.onShowMore(e,g.target)}}]),n}(g.Component);Bm.defaultProps=rg({},sm);var fm=function(e){var t=e.children;return g.createElement("div",{className:"rbc-row-content-scroll-container"},t)},Sm=function(e,g){return e[0].range===g[0].range&&e[0].events===g[0].events};function vm(){return YA((function(e){for(var g=e.range,t=e.events,n=e.maxRows,I=e.minRows,C=e.accessors,l=e.localizer,a=mm({dateRange:g,localizer:l}),o=a.first,r=a.last,c=t.map((function(e){return function(e,g,t,n){var I=mm({dateRange:g,localizer:n}),C=I.first,l=I.last,a=n.diff(C,l,"day"),o=n.max(n.startOf(t.start(e),"day"),C),r=n.min(n.ceil(t.end(e),"day"),l),c=SA(g,(function(e){return n.isSameDate(e,o)})),i=n.diff(o,r,"day");return i=Math.min(i,a),{event:e,span:i=Math.max(i-n.segmentOffset,1),left:c+1,right:Math.max(c+i,1)}}(e,g,C,l)})),i=bm(c,Math.max(n-1,1)),s=i.levels,A=i.extra,d=A.length>0?I-1:I;s.length<d;)s.push([]);return{first:o,last:r,levels:s,extra:A,range:g,slots:g.length,clone:function(g){return vm()(rg(rg({},e),g))},getDateForSlot:function(e){return g[e]},getSlotForDate:function(e){return g.find((function(g){return l.isSameDate(g,e)}))},getEventsForSlot:function(e){return c.filter((function(g){return function(e,g){return e.left<=g&&e.right>=g}(g,e)})).map((function(e){return e.event}))},continuesPrior:function(e){return l.continuesPrior(C.start(e),o)},continuesAfter:function(e){var g=C.start(e),t=C.end(e);return l.continuesAfter(g,t,r)}}}),Sm)}var Wm=function(e){Z(n,e);var t=y(n);function n(){var e;s(this,n);for(var I=arguments.length,C=new Array(I),l=0;l<I;l++)C[l]=arguments[l];return(e=t.call.apply(t,[this].concat(C))).handleSelectSlot=function(g){var t=e.props,n=t.range;(0,t.onSelectSlot)(n.slice(g.start,g.end+1),g)},e.handleShowMore=function(g,t){var n,I,C,l=e.props,a=l.range,o=l.onShowMore,r=e.slotMetrics(e.props),c=(n=e.containerRef.current,I=".rbc-row-bg",Ms(n.querySelectorAll(I)))[0];c&&(C=c.children[g-1]),o(r.getEventsForSlot(g),a[g-1],C,g,t)},e.getContainer=function(){var g=e.props.container;return g?g():e.containerRef.current},e.renderHeadingCell=function(g,t){var n=e.props,I=n.renderHeader,C=n.getNow,l=n.localizer;return I({date:g,key:"header_".concat(t),className:hn("rbc-date-cell",l.isSameDate(g,C())&&"rbc-now")})},e.renderDummy=function(){var t=e.props,n=t.className,I=t.range,C=t.renderHeader,l=t.showAllEvents;return g.createElement("div",{className:n,ref:e.containerRef},g.createElement("div",{className:hn("rbc-row-content",l&&"rbc-row-content-scrollable")},C&&g.createElement("div",{className:"rbc-row",ref:e.headingRowRef},I.map(e.renderHeadingCell)),g.createElement("div",{className:"rbc-row",ref:e.eventRowRef},g.createElement("div",{className:"rbc-row-segment"},g.createElement("div",{className:"rbc-event"},g.createElement("div",{className:"rbc-event-content"},"\xa0"))))))},e.containerRef=(0,g.createRef)(),e.headingRowRef=(0,g.createRef)(),e.eventRowRef=(0,g.createRef)(),e.slotMetrics=vm(),e}return m(n,[{key:"getRowLimit",value:function(){var e,g=Es(this.eventRowRef.current),t=null!==(e=this.headingRowRef)&&void 0!==e&&e.current?Es(this.headingRowRef.current):0,n=Es(this.containerRef.current)-t;return Math.max(Math.floor(n/g),1)}},{key:"render",value:function(){var e=this.props,t=e.date,n=e.rtl,I=e.range,C=e.className,l=e.selected,a=e.selectable,o=e.renderForMeasure,r=e.accessors,c=e.getters,i=e.components,s=e.getNow,A=e.renderHeader,d=e.onSelect,u=e.localizer,m=e.onSelectStart,b=e.onSelectEnd,Z=e.onDoubleClick,h=e.onKeyPress,p=e.resourceId,G=e.longPressThreshold,y=e.isAllDay,B=e.resizable,f=e.showAllEvents;if(o)return this.renderDummy();var S=this.slotMetrics(this.props),v=S.levels,W=S.extra,V=f?fm:mu,R=i.weekWrapper,k={selected:l,accessors:r,getters:c,localizer:u,components:i,onSelect:d,onDoubleClick:Z,onKeyPress:h,resourceId:p,slotMetrics:S,resizable:B};return g.createElement("div",{className:C,role:"rowgroup",ref:this.containerRef},g.createElement(im,{localizer:u,date:t,getNow:s,rtl:n,range:I,selectable:a,container:this.getContainer,getters:c,onSelectStart:m,onSelectEnd:b,onSelectSlot:this.handleSelectSlot,components:i,longPressThreshold:G,resourceId:p}),g.createElement("div",{className:hn("rbc-row-content",f&&"rbc-row-content-scrollable"),role:"row"},A&&g.createElement("div",{className:"rbc-row ",ref:this.headingRowRef},I.map(this.renderHeadingCell)),g.createElement(V,null,g.createElement(R,Object.assign({isAllDay:y},k,{rtl:this.props.rtl}),v.map((function(e,t){return g.createElement(um,Object.assign({key:t,segments:e},k))})),!!W.length&&g.createElement(Bm,Object.assign({segments:W,onShowMore:this.handleShowMore},k))))))}}]),n}(g.Component);Wm.defaultProps={minRows:0,maxRows:1/0};var Vm=function(e){var t=e.label;return g.createElement("span",{role:"columnheader","aria-sort":"none"},t)},Rm=function(e){var t=e.label,n=e.drilldownView,I=e.onDrillDown;return n?g.createElement("button",{type:"button",className:"rbc-button-link",onClick:I,role:"cell"},t):g.createElement("span",null,t)},km=["date","className"],Xm=function(e){Z(n,e);var t=y(n);function n(){var e;s(this,n);for(var I=arguments.length,C=new Array(I),l=0;l<I;l++)C[l]=arguments[l];return(e=t.call.apply(t,[this].concat(C))).getContainer=function(){return e.containerRef.current},e.renderWeek=function(t,n){var I=e.props,C=I.events,l=I.components,a=I.selectable,o=I.getNow,r=I.selected,c=I.date,s=I.localizer,A=I.longPressThreshold,d=I.accessors,u=I.getters,m=I.showAllEvents,b=e.state,Z=b.needLimitMeasure,h=b.rowLimit,p=function(e,g,t,n,I){return e.filter((function(e){return Zm(e,g,t,n,I)}))}(i(C),t[0],t[t.length-1],d,s);return p.sort((function(e,g){return pm(e,g,d,s)})),g.createElement(Wm,{key:n,ref:0===n?e.slotRowRef:void 0,container:e.getContainer,className:"rbc-month-row",getNow:o,date:c,range:t,events:p,maxRows:m?1/0:h,selected:r,selectable:a,components:l,accessors:d,getters:u,localizer:s,renderHeader:e.readerDateHeading,renderForMeasure:Z,onShowMore:e.handleShowMore,onSelect:e.handleSelectEvent,onDoubleClick:e.handleDoubleClickEvent,onKeyPress:e.handleKeyPressEvent,onSelectSlot:e.handleSelectSlot,longPressThreshold:A,rtl:e.props.rtl,resizable:e.props.resizable,showAllEvents:m})},e.readerDateHeading=function(t){var n=t.date,I=t.className,C=bn(t,km),l=e.props,a=l.date,o=l.getDrilldownView,r=l.localizer,c=r.neq(n,a,"month"),i=r.isSameDate(n,a),s=o(n),A=r.format(n,"dateFormat"),d=e.props.components.dateHeader||Rm;return g.createElement("div",Object.assign({},C,{className:hn(I,c&&"rbc-off-range",i&&"rbc-current"),role:"cell"}),g.createElement(d,{label:A,date:n,drilldownView:s,isOffRange:c,onDrillDown:function(g){return e.handleHeadingClick(n,s,g)}}))},e.handleSelectSlot=function(g,t){e._pendingSelection=e._pendingSelection.concat(g),clearTimeout(e._selectTimer),e._selectTimer=setTimeout((function(){return e.selectDates(t)}))},e.handleHeadingClick=function(g,t,n){n.preventDefault(),e.clearSelection(),Bu(e.props.onDrillDown,[g,t])},e.handleSelectEvent=function(){e.clearSelection();for(var g=arguments.length,t=new Array(g),n=0;n<g;n++)t[n]=arguments[n];Bu(e.props.onSelectEvent,t)},e.handleDoubleClickEvent=function(){e.clearSelection();for(var g=arguments.length,t=new Array(g),n=0;n<g;n++)t[n]=arguments[n];Bu(e.props.onDoubleClickEvent,t)},e.handleKeyPressEvent=function(){e.clearSelection();for(var g=arguments.length,t=new Array(g),n=0;n<g;n++)t[n]=arguments[n];Bu(e.props.onKeyPressEvent,t)},e.handleShowMore=function(g,t,n,I,C){var l=e.props,a=l.popup,o=l.onDrillDown,r=l.onShowMore,c=l.getDrilldownView,i=l.doShowMoreDrillDown;if(e.clearSelection(),a){var s=po(n,e.containerRef.current);e.setState({overlay:{date:t,events:g,position:s,target:C}})}else i&&Bu(o,[t,c(t)||Gu.DAY]);Bu(r,[g,t,I])},e.overlayDisplay=function(){e.setState({overlay:null})},e.state={rowLimit:5,needLimitMeasure:!0,date:null},e.containerRef=(0,g.createRef)(),e.slotRowRef=(0,g.createRef)(),e._bgRows=[],e._pendingSelection=[],e}return m(n,[{key:"componentDidMount",value:function(){var e,g=this;this.state.needLimitMeasure&&this.measureRowLimit(this.props),window.addEventListener("resize",this._resizeListener=function(){e||Wo((function(){e=!1,g.setState({needLimitMeasure:!0})}))},!1)}},{key:"componentDidUpdate",value:function(){this.state.needLimitMeasure&&this.measureRowLimit(this.props)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this._resizeListener,!1)}},{key:"render",value:function(){var e=this.props,t=e.date,n=e.localizer,I=e.className,C=n.visibleDays(t,n),l=Io(C,7);return this._weekCount=l.length,g.createElement("div",{className:hn("rbc-month-view",I),role:"table","aria-label":"Month View",ref:this.containerRef},g.createElement("div",{className:"rbc-row rbc-month-header",role:"row"},this.renderHeaders(l[0])),l.map(this.renderWeek),this.props.popup&&this.renderOverlay())}},{key:"renderHeaders",value:function(e){var t=this.props,n=t.localizer,I=t.components,C=e[0],l=e[e.length-1],a=I.header||Vm;return n.range(C,l,"day").map((function(e,t){return g.createElement("div",{key:"header_"+t,className:"rbc-header"},g.createElement(a,{date:e,localizer:n,label:n.format(e,"weekdayFormat")}))}))}},{key:"renderOverlay",value:function(){var e,t,n=this,I=null!==(e=null===(t=this.state)||void 0===t?void 0:t.overlay)&&void 0!==e?e:{},C=this.props,l=C.accessors,a=C.localizer,o=C.components,r=C.getters,c=C.selected,i=C.popupOffset,s=C.handleDragStart;return g.createElement(tm,{overlay:I,accessors:l,localizer:a,components:o,getters:r,selected:c,popupOffset:i,ref:this.containerRef,handleKeyPressEvent:this.handleKeyPressEvent,handleSelectEvent:this.handleSelectEvent,handleDoubleClickEvent:this.handleDoubleClickEvent,handleDragStart:s,show:!!I.position,overlayDisplay:this.overlayDisplay,onHide:function(){return n.setState({overlay:null})}})}},{key:"measureRowLimit",value:function(){this.setState({needLimitMeasure:!1,rowLimit:this.slotRowRef.current.getRowLimit()})}},{key:"selectDates",value:function(e){var g=this._pendingSelection.slice();this._pendingSelection=[],g.sort((function(e,g){return+e-+g}));var t=new Date(g[0]),n=new Date(g[g.length-1]);n.setDate(g[g.length-1].getDate()+1),Bu(this.props.onSelectSlot,{slots:g,start:t,end:n,action:e.action,bounds:e.bounds,box:e.box})}},{key:"clearSelection",value:function(){clearTimeout(this._selectTimer),this._pendingSelection=[]}}],[{key:"getDerivedStateFromProps",value:function(e,g){var t=e.date;return{date:t,needLimitMeasure:e.localizer.neq(t,g.date,"month")}}}]),n}(g.Component);Xm.range=function(e,g){var t=g.localizer;return{start:t.firstVisibleDay(e,t),end:t.lastVisibleDay(e,t)}},Xm.navigate=function(e,g,t){var n=t.localizer;switch(g){case bu:return n.add(e,-1,"month");case Zu:return n.add(e,1,"month");default:return e}},Xm.title=function(e,g){return g.localizer.format(e,"monthHeaderFormat")};var Jm=function(e){var g=e.min,t=e.max,n=e.step,I=e.slots,C=e.localizer;return"".concat(+C.startOf(g,"minutes"))+"".concat(+C.startOf(t,"minutes"))+"".concat(n,"-").concat(I)};function Ym(e){for(var g=e.min,t=e.max,n=e.step,I=e.timeslots,C=e.localizer,l=Jm({start:g,end:t,step:n,timeslots:I,localizer:C}),a=1+C.getTotalMin(g,t),o=C.getMinutesFromMidnight(g),r=Math.ceil((a-1)/(n*I)),c=r*I,i=new Array(r),s=new Array(c),A=0;A<r;A++){i[A]=new Array(I);for(var d=0;d<I;d++){var u=A*I+d,m=u*n;s[u]=i[A][d]=C.getSlotDate(g,o,m)}}var b=s.length*n;function Z(e){var t=C.diff(g,e,"minutes")+C.getDstOffset(g,e);return Math.min(t,a)}return s.push(C.getSlotDate(g,o,b)),{groups:i,update:function(e){return Jm(e)!==l?Ym(e):this},dateIsInGroup:function(e,g){var n=i[g+1];return C.inRange(e,i[g][0],n?n[0]:t,"minutes")},nextSlot:function(e){var g=s[Math.min(s.indexOf(e)+1,s.length-1)];return g===e&&(g=C.add(e,n,"minutes")),g},closestSlotToPosition:function(e){var g=Math.min(s.length-1,Math.max(0,Math.floor(e*c)));return s[g]},closestSlotFromPoint:function(e,g){var t=Math.abs(g.top-g.bottom);return this.closestSlotToPosition((e.y-g.top)/t)},closestSlotFromDate:function(e){var I=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(C.lt(e,g,"minutes"))return s[0];if(C.gt(e,t,"minutes"))return s[s.length-1];var l=C.diff(g,e,"minutes");return s[(l-l%n)/n+I]},startsBeforeDay:function(e){return C.lt(e,g,"day")},startsAfterDay:function(e){return C.gt(e,t,"day")},startsBefore:function(e){return C.lt(C.merge(g,e),g,"minutes")},startsAfter:function(e){return C.gt(C.merge(t,e),t,"minutes")},getRange:function(e,I,l,a){l||(e=C.min(t,C.max(g,e))),a||(I=C.min(t,C.max(g,I)));var o=Z(e),r=Z(I),i=r>n*c&&!C.eq(t,I)?(o-n)/(n*c)*100:o/(n*c)*100;return{top:i,height:r/(n*c)*100-i,start:Z(e),startDate:e,end:Z(I),endDate:I}},getCurrentTimePosition:function(e){return Z(e)/(n*c)*100}}}var Hm=function(){function e(g,t){var n=t.accessors,I=t.slotMetrics;s(this,e);var C=I.getRange(n.start(g),n.end(g)),l=C.start,a=C.startDate,o=C.end,r=C.endDate,c=C.top,i=C.height;this.start=l,this.end=o,this.startMs=+a,this.endMs=+r,this.top=c,this.height=i,this.data=g}return m(e,[{key:"_width",get:function(){if(this.rows){var e=this.rows.reduce((function(e,g){return Math.max(e,g.leaves.length+1)}),0)+1;return 100/e}return this.leaves?(100-this.container._width)/(this.leaves.length+1):this.row._width}},{key:"width",get:function(){var e=this._width,g=Math.min(100,1.7*this._width);if(this.rows)return g;if(this.leaves)return this.leaves.length>0?g:e;var t=this.row.leaves;return t.indexOf(this)===t.length-1?e:g}},{key:"xOffset",get:function(){if(this.rows)return 0;if(this.leaves)return this.container._width;var e=this.row,g=e.leaves,t=e.xOffset,n=e._width;return t+(g.indexOf(this)+1)*n}}]),e}();function wm(e,g,t){return Math.abs(g.start-e.start)<t||g.start>e.start&&g.start<e.end}function Nm(e){for(var g=e.events,t=e.minimumStartDifference,n=e.slotMetrics,I=e.accessors,C=function(e){for(var g=td(e,["startMs",function(e){return-e.endMs}]),t=[];g.length>0;){var n=g.shift();t.push(n);for(var I=0;I<g.length;I++){var C=g[I];if(!(n.endMs>C.startMs)){if(I>0){var l=g.splice(I,1)[0];t.push(l)}break}}}return t}(g.map((function(e){return new Hm(e,{slotMetrics:n,accessors:I})}))),l=[],a=function(){var e=C[o],g=l.find((function(g){return g.end>e.start||Math.abs(e.start-g.start)<t}));if(!g)return e.rows=[],l.push(e),"continue";e.container=g;for(var n=null,I=g.rows.length-1;!n&&I>=0;I--)wm(g.rows[I],e,t)&&(n=g.rows[I]);n?(n.leaves.push(e),e.row=n):(e.leaves=[],g.rows.push(e))},o=0;o<C.length;o++)a();return C.map((function(e){return{event:e.data,style:{top:e.top,height:e.height,width:e.width,xOffset:Math.max(0,e.xOffset)}}}))}function Km(e,g,t){for(var n=0;n<e.friends.length;++n)if(!(t.indexOf(e.friends[n])>-1)){g=g>e.friends[n].idx?g:e.friends[n].idx,t.push(e.friends[n]);var I=Km(e.friends[n],g,t);g=g>I?g:I}return g}var Fm={overlap:Nm,"no-overlap":function(e){var g=Nm({events:e.events,minimumStartDifference:e.minimumStartDifference,slotMetrics:e.slotMetrics,accessors:e.accessors});g.sort((function(e,g){return e=e.style,g=g.style,e.top!==g.top?e.top>g.top?1:-1:e.top+e.height<g.top+g.height?1:-1}));for(var t=0;t<g.length;++t)g[t].friends=[],delete g[t].style.left,delete g[t].style.left,delete g[t].idx,delete g[t].size;for(var n=0;n<g.length-1;++n)for(var I=g[n],C=I.style.top,l=I.style.top+I.style.height,a=n+1;a<g.length;++a){var o=g[a],r=o.style.top,c=o.style.top+o.style.height;(r>=C&&c<=l||c>C&&c<=l||r>=C&&r<l)&&(I.friends.push(o),o.friends.push(I))}for(var i=0;i<g.length;++i){for(var s=g[i],A=[],d=0;d<100;++d)A.push(1);for(var u=0;u<s.friends.length;++u)void 0!==s.friends[u].idx&&(A[s.friends[u].idx]=0);s.idx=A.indexOf(1)}for(var m=0;m<g.length;++m){var b;if(!g[m].size){var Z=[];b=100/(Km(g[m],0,Z)+1),g[m].size=b;for(var h=0;h<Z.length;++h)Z[h].size=b}}for(var p=0;p<g.length;++p){var G=g[p];G.style.left=G.idx*G.size;for(var y=0,B=0;B<G.friends.length;++B){var f=G.friends[B].idx;y=y>f?y:f}y<=G.idx&&(G.size=100-G.idx*G.size);var S=0===G.idx?0:3;G.style.width="calc(".concat(G.size,"% - ").concat(S,"px)"),G.style.height="calc(".concat(G.style.height,"% - 2px)"),G.style.xOffset="calc(".concat(G.style.left,"% + ").concat(S,"px)")}return g}};var xm=function(e){Z(n,e);var t=y(n);function n(){return s(this,n),t.apply(this,arguments)}return m(n,[{key:"render",value:function(){var e=this.props,t=e.renderSlot,n=e.resource,I=e.group,C=e.getters,l=e.components,a=(void 0===l?{}:l).timeSlotWrapper,o=void 0===a?mu:a,r=C?C.slotGroupProp(I):{};return g.createElement("div",Object.assign({className:"rbc-timeslot-group"},r),I.map((function(e,I){var l=C?C.slotProp(e,n):{};return g.createElement(o,{key:I,value:e,resource:n},g.createElement("div",Object.assign({},l,{className:hn("rbc-time-slot",l.className)}),t&&t(e,I)))})))}}]),n}(g.Component);function Em(e){return"string"===typeof e?e:e+"%"}function zm(e){var t=e.style,n=e.className,I=e.event,C=e.accessors,l=e.rtl,a=e.selected,o=e.label,r=e.continuesPrior,c=e.continuesAfter,i=e.getters,s=e.onClick,A=e.onDoubleClick,d=e.isBackgroundEvent,u=e.onKeyPress,m=e.components,b=m.event,Z=m.eventWrapper,h=C.title(I),p=C.tooltip(I),G=C.end(I),y=C.start(I),B=i.eventProp(I,y,G,a),f=t.height,S=t.top,v=t.width,W=t.xOffset,V=[g.createElement("div",{key:"1",className:"rbc-event-label"},o),g.createElement("div",{key:"2",className:"rbc-event-content"},b?g.createElement(b,{event:I,title:h}):h)],R=rg(rg({},B.style),{},d?ag({top:Em(S),height:Em(f),width:"calc(".concat(v," + 10px)")},l?"right":"left",Em(Math.max(0,W))):ag({top:Em(S),width:Em(v),height:Em(f)},l?"right":"left",Em(W)));return g.createElement(Z,Object.assign({type:"time"},e),g.createElement("div",{onClick:s,onDoubleClick:A,style:R,onKeyPress:u,title:p?("string"===typeof o?o+": ":"")+p:void 0,className:hn(d?"rbc-background-event":"rbc-event",n,B.className,{"rbc-selected":a,"rbc-event-continues-earlier":r,"rbc-event-continues-later":c})},V))}var Mm=function(e){var t=e.children,n=e.className,I=e.style,C=e.innerRef;return g.createElement("div",{className:n,style:I,ref:C},t)},Um=g.forwardRef((function(e,t){return g.createElement(Mm,Object.assign({},e,{innerRef:t}))})),Dm=["dayProp"],Qm=["eventContainerWrapper"],Lm=function(e){Z(n,e);var t=y(n);function n(){var e;s(this,n);for(var I=arguments.length,C=new Array(I),l=0;l<I;l++)C[l]=arguments[l];return(e=t.call.apply(t,[this].concat(C))).state={selecting:!1,timeIndicatorPosition:null},e.intervalTriggered=!1,e.renderEvents=function(t){var n=t.events,I=t.isBackgroundEvent,C=e.props,l=C.rtl,a=C.selected,o=C.accessors,r=C.localizer,c=C.getters,i=C.components,s=C.step,A=C.timeslots,d=C.dayLayoutAlgorithm,u=C.resizable,m=G(e).slotMetrics,b=r.messages,Z=function(e){e.events,e.minimumStartDifference,e.slotMetrics,e.accessors;var g,t=e.dayLayoutAlgorithm,n=t;return t in Fm&&(n=Fm[t]),(g=n)&&g.constructor&&g.call&&g.apply?n.apply(this,arguments):[]}({events:n,accessors:o,slotMetrics:m,minimumStartDifference:Math.ceil(s*A/2),dayLayoutAlgorithm:d});return Z.map((function(t,n){var C,s=t.event,A=t.style,d=o.end(s),Z=o.start(s),h="eventTimeRangeFormat",p=m.startsBeforeDay(Z),G=m.startsAfterDay(d);p?h="eventTimeRangeEndFormat":G&&(h="eventTimeRangeStartFormat"),C=p&&G?b.allDay:r.format({start:Z,end:d},h);var y=p||m.startsBefore(Z),B=G||m.startsAfter(d);return g.createElement(zm,{style:A,event:s,label:C,key:"evt_"+n,getters:c,rtl:l,components:i,continuesPrior:y,continuesAfter:B,accessors:o,resource:e.props.resource,selected:Pu(s,a),onClick:function(g){return e._select(rg(rg({},s),{},{sourceResource:e.props.resource}),g)},onDoubleClick:function(g){return e._doubleClick(s,g)},isBackgroundEvent:I,onKeyPress:function(g){return e._keyPress(s,g)},resizable:u})}))},e._selectable=function(){var g=e.containerRef.current,t=e.props,n=t.longPressThreshold,I=t.localizer,C=e._selector=new am((function(){return g}),{longPressThreshold:n}),l=function(g){var t=e.props.onSelecting,n=e.state||{},C=a(g),l=C.startDate,o=C.endDate;t&&(I.eq(n.startDate,l,"minutes")&&I.eq(n.endDate,o,"minutes")||!1===t({start:l,end:o,resourceId:e.props.resource}))||e.state.start===C.start&&e.state.end===C.end&&e.state.selecting===C.selecting||e.setState(C)},a=function(t){var n=e.slotMetrics.closestSlotFromPoint(t,rm(g));e.state.selecting||(e._initialSlot=n);var C=e._initialSlot;I.lte(C,n)?n=e.slotMetrics.nextSlot(n):I.gt(C,n)&&(C=e.slotMetrics.nextSlot(C));var l=e.slotMetrics.getRange(I.min(C,n),I.max(C,n));return rg(rg({},l),{},{selecting:!0,top:"".concat(l.top,"%"),height:"".concat(l.height,"%")})},o=function(g,t){if(!Im(e.containerRef.current,g)){var n=a(g),I=n.startDate,C=n.endDate;e._selectSlot({startDate:I,endDate:C,action:t,box:g})}e.setState({selecting:!1})};C.on("selecting",l),C.on("selectStart",l),C.on("beforeSelect",(function(g){if("ignoreEvents"===e.props.selectable)return!Im(e.containerRef.current,g)})),C.on("click",(function(e){return o(e,"click")})),C.on("doubleClick",(function(e){return o(e,"doubleClick")})),C.on("select",(function(g){e.state.selecting&&(e._selectSlot(rg(rg({},e.state),{},{action:"select",bounds:g})),e.setState({selecting:!1}))})),C.on("reset",(function(){e.state.selecting&&e.setState({selecting:!1})}))},e._teardownSelectable=function(){e._selector&&(e._selector.teardown(),e._selector=null)},e._selectSlot=function(g){for(var t=g.startDate,n=g.endDate,I=g.action,C=g.bounds,l=g.box,a=t,o=[];e.props.localizer.lte(a,n);)o.push(a),a=new Date(+a+60*e.props.step*1e3);Bu(e.props.onSelectSlot,{slots:o,start:t,end:n,resourceId:e.props.resource,action:I,bounds:C,box:l})},e._select=function(){for(var g=arguments.length,t=new Array(g),n=0;n<g;n++)t[n]=arguments[n];Bu(e.props.onSelectEvent,t)},e._doubleClick=function(){for(var g=arguments.length,t=new Array(g),n=0;n<g;n++)t[n]=arguments[n];Bu(e.props.onDoubleClickEvent,t)},e._keyPress=function(){for(var g=arguments.length,t=new Array(g),n=0;n<g;n++)t[n]=arguments[n];Bu(e.props.onKeyPressEvent,t)},e.slotMetrics=Ym(e.props),e.containerRef=(0,g.createRef)(),e}return m(n,[{key:"componentDidMount",value:function(){this.props.selectable&&this._selectable(),this.props.isNow&&this.setTimeIndicatorPositionUpdateInterval()}},{key:"componentWillUnmount",value:function(){this._teardownSelectable(),this.clearTimeIndicatorInterval()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.selectable&&!this.props.selectable&&this._selectable(),!e.selectable&&this.props.selectable&&this._teardownSelectable(),this.slotMetrics=this.slotMetrics.update(e)}},{key:"componentDidUpdate",value:function(e,g){var t=this.props,n=t.getNow,I=t.isNow,C=t.localizer,l=t.date,a=t.min,o=t.max,r=C.neq(e.getNow(),n(),"minutes");if(e.isNow!==I||r){if(this.clearTimeIndicatorInterval(),I){var c=!r&&C.eq(e.date,l,"minutes")&&g.timeIndicatorPosition===this.state.timeIndicatorPosition;this.setTimeIndicatorPositionUpdateInterval(c)}}else I&&(C.neq(e.min,a,"minutes")||C.neq(e.max,o,"minutes"))&&this.positionTimeIndicator()}},{key:"setTimeIndicatorPositionUpdateInterval",value:function(){var e=this,g=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.intervalTriggered||g||this.positionTimeIndicator(),this._timeIndicatorTimeout=window.setTimeout((function(){e.intervalTriggered=!0,e.positionTimeIndicator(),e.setTimeIndicatorPositionUpdateInterval()}),6e4)}},{key:"clearTimeIndicatorInterval",value:function(){this.intervalTriggered=!1,window.clearTimeout(this._timeIndicatorTimeout)}},{key:"positionTimeIndicator",value:function(){var e=this.props,g=e.min,t=e.max,n=(0,e.getNow)();if(n>=g&&n<=t){var I=this.slotMetrics.getCurrentTimePosition(n);this.intervalTriggered=!0,this.setState({timeIndicatorPosition:I})}else this.clearTimeIndicatorInterval()}},{key:"render",value:function(){var e=this.props,t=e.date,n=e.max,I=e.rtl,C=e.isNow,l=e.resource,a=e.accessors,o=e.localizer,r=e.getters,c=r.dayProp,i=bn(r,Dm),s=e.components,A=s.eventContainerWrapper,d=bn(s,Qm),u=this.slotMetrics,m=this.state,b=m.selecting,Z=m.top,h=m.height,p={start:m.startDate,end:m.endDate},G=c(n),y=G.className,B=G.style,f=d.dayColumnWrapper||Um;return g.createElement(f,{ref:this.containerRef,date:t,style:B,className:hn(y,"rbc-day-slot","rbc-time-column",C&&"rbc-now",C&&"rbc-today",b&&"rbc-slot-selecting"),slotMetrics:u},u.groups.map((function(e,t){return g.createElement(xm,{key:t,group:e,resource:l,getters:i,components:d})})),g.createElement(A,{localizer:o,resource:l,accessors:a,getters:i,components:d,slotMetrics:u},g.createElement("div",{className:hn("rbc-events-container",I&&"rtl")},this.renderEvents({events:this.props.backgroundEvents,isBackgroundEvent:!0}),this.renderEvents({events:this.props.events}))),b&&g.createElement("div",{className:"rbc-slot-selection",style:{top:Z,height:h}},g.createElement("span",null,o.format(p,"selectRangeFormat"))),C&&this.intervalTriggered&&g.createElement("div",{className:"rbc-current-time-indicator",style:{top:"".concat(this.state.timeIndicatorPosition,"%")}}))}}]),n}(g.Component);Lm.defaultProps={dragThroughEvents:!0,timeslots:2};var Tm=function(e){var t=e.min,n=e.max,I=e.timeslots,C=e.step,l=e.localizer,a=e.getNow,o=e.resource,c=e.components,i=e.getters,s=e.gutterRef,A=c.timeGutterWrapper,d=(0,g.useMemo)((function(){return function(e){var g=e.min,t=e.max,n=e.localizer;return n.getTimezoneOffset(g)!==n.getTimezoneOffset(t)?{start:n.add(g,-1,"day"),end:n.add(t,-1,"day")}:{start:g,end:t}}({min:t,max:n,localizer:l})}),[null===t||void 0===t?void 0:t.toISOString(),null===n||void 0===n?void 0:n.toISOString(),l]),u=d.start,m=d.end,b=r((0,g.useState)(Ym({min:u,max:m,timeslots:I,step:C,localizer:l})),2),Z=b[0],h=b[1];(0,g.useEffect)((function(){Z&&h(Z.update({min:u,max:m,timeslots:I,step:C,localizer:l}))}),[null===u||void 0===u?void 0:u.toISOString(),null===m||void 0===m?void 0:m.toISOString(),I,C]);var p=(0,g.useCallback)((function(e,t){if(t)return null;var n=Z.dateIsInGroup(a(),t);return g.createElement("span",{className:hn("rbc-label",n&&"rbc-now")},l.format(e,"timeGutterFormat"))}),[Z,l,a]);return g.createElement(A,{slotMetrics:Z},g.createElement("div",{className:"rbc-time-gutter rbc-time-column",ref:s},Z.groups.map((function(e,t){return g.createElement(xm,{key:t,group:e,resource:o,components:c,renderSlot:p,getters:i})}))))},jm=g.forwardRef((function(e,t){return g.createElement(Tm,Object.assign({gutterRef:t},e))})),Om=function(e){var t=e.label;return g.createElement(g.Fragment,null,t)},Pm=function(e){Z(n,e);var t=y(n);function n(){var e;s(this,n);for(var I=arguments.length,C=new Array(I),l=0;l<I;l++)C[l]=arguments[l];return(e=t.call.apply(t,[this].concat(C))).handleHeaderClick=function(g,t,n){n.preventDefault(),Bu(e.props.onDrillDown,[g,t])},e.renderRow=function(t){var n=e.props,I=n.events,C=n.rtl,l=n.selectable,a=n.getNow,o=n.range,r=n.getters,c=n.localizer,i=n.accessors,s=n.components,A=n.resizable,d=i.resourceId(t),u=t?I.filter((function(e){return i.resource(e)===d})):I;return g.createElement(Wm,{isAllDay:!0,rtl:C,getNow:a,minRows:2,maxRows:e.props.allDayMaxRows+1,range:o,events:u,resourceId:d,className:"rbc-allday-cell",selectable:l,selected:e.props.selected,components:s,accessors:i,getters:r,localizer:c,onSelect:e.props.onSelectEvent,onShowMore:e.props.onShowMore,onDoubleClick:e.props.onDoubleClickEvent,onKeyPress:e.props.onKeyPressEvent,onSelectSlot:e.props.onSelectSlot,longPressThreshold:e.props.longPressThreshold,resizable:A})},e}return m(n,[{key:"renderHeaderCells",value:function(e){var t=this,n=this.props,I=n.localizer,C=n.getDrilldownView,l=n.getNow,a=n.getters.dayProp,o=n.components.header,r=void 0===o?Vm:o,c=l();return e.map((function(e,n){var l=C(e),o=I.format(e,"dayFormat"),i=a(e),s=i.className,A=i.style,d=g.createElement(r,{date:e,label:o,localizer:I});return g.createElement("div",{key:n,style:A,className:hn("rbc-header",s,I.isSameDate(e,c)&&"rbc-today")},l?g.createElement("button",{type:"button",className:"rbc-button-link",onClick:function(g){return t.handleHeaderClick(e,l,g)}},d):g.createElement("span",null,d))}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.width,I=t.rtl,C=t.resources,l=t.range,a=t.events,o=t.getNow,c=t.accessors,i=t.selectable,s=t.components,A=t.getters,d=t.scrollRef,u=t.localizer,m=t.isOverflowing,b=t.components,Z=b.timeGutterHeader,h=b.resourceHeader,p=void 0===h?Om:h,G=t.resizable,y={};m&&(y[I?"marginLeft":"marginRight"]="".concat(nd()-1,"px"));var B=C.groupEvents(a);return g.createElement("div",{style:y,ref:d,className:hn("rbc-time-header",m&&"rbc-overflowing")},g.createElement("div",{className:"rbc-label rbc-time-header-gutter",style:{width:n,minWidth:n,maxWidth:n}},Z&&g.createElement(Z,null)),C.map((function(t,n){var C=r(t,2),a=C[0],d=C[1];return g.createElement("div",{className:"rbc-time-header-content",key:a||n},d&&g.createElement("div",{className:"rbc-row rbc-row-resource",key:"resource_".concat(n)},g.createElement("div",{className:"rbc-header"},g.createElement(p,{index:n,label:c.resourceTitle(d),resource:d}))),g.createElement("div",{className:"rbc-row rbc-time-header-cell".concat(l.length<=1?" rbc-time-header-cell-single-day":"")},e.renderHeaderCells(l)),g.createElement(Wm,{isAllDay:!0,rtl:I,getNow:o,minRows:2,maxRows:e.props.allDayMaxRows+1,range:l,events:B.get(a)||[],resourceId:d&&a,className:"rbc-allday-cell",selectable:i,selected:e.props.selected,components:s,accessors:c,getters:A,localizer:u,onSelect:e.props.onSelectEvent,onShowMore:e.props.onShowMore,onDoubleClick:e.props.onDoubleClickEvent,onKeyPress:e.props.onKeyPressEvent,onSelectSlot:e.props.onSelectSlot,longPressThreshold:e.props.longPressThreshold,resizable:G}))})))}}]),n}(g.Component),_m={};var qm=function(e){Z(n,e);var t=y(n);function n(e){var I;return s(this,n),(I=t.call(this,e)).handleScroll=function(e){I.scrollRef.current&&(I.scrollRef.current.scrollLeft=e.target.scrollLeft)},I.handleResize=function(){vo(I.rafHandle),I.rafHandle=Wo(I.checkOverflow)},I.handleKeyPressEvent=function(){I.clearSelection();for(var e=arguments.length,g=new Array(e),t=0;t<e;t++)g[t]=arguments[t];Bu(I.props.onKeyPressEvent,g)},I.handleSelectEvent=function(){I.clearSelection();for(var e=arguments.length,g=new Array(e),t=0;t<e;t++)g[t]=arguments[t];Bu(I.props.onSelectEvent,g)},I.handleDoubleClickEvent=function(){I.clearSelection();for(var e=arguments.length,g=new Array(e),t=0;t<e;t++)g[t]=arguments[t];Bu(I.props.onDoubleClickEvent,g)},I.handleShowMore=function(e,g,t,n,C){var l=I.props,a=l.popup,o=l.onDrillDown,r=l.onShowMore,c=l.getDrilldownView,i=l.doShowMoreDrillDown;if(I.clearSelection(),a){var s=po(t,I.containerRef.current);I.setState({overlay:{date:g,events:e,position:rg(rg({},s),{},{width:"200px"}),target:C}})}else i&&Bu(o,[g,c(g)||Gu.DAY]);Bu(r,[e,g,n])},I.handleSelectAllDaySlot=function(e,g){var t=I.props.onSelectSlot,n=new Date(e[0]),C=new Date(e[e.length-1]);C.setDate(e[e.length-1].getDate()+1),Bu(t,{slots:e,start:n,end:C,action:g.action,resourceId:g.resourceId})},I.overlayDisplay=function(){I.setState({overlay:null})},I.checkOverflow=function(){if(!I._updatingOverflow){var e=I.contentRef.current,g=e.scrollHeight>e.clientHeight;I.state.isOverflowing!==g&&(I._updatingOverflow=!0,I.setState({isOverflowing:g},(function(){I._updatingOverflow=!1})))}},I.memoizedResources=YA((function(e,g){return function(e,g){return{map:function(t){return e?e.map((function(e,n){return t([g.resourceId(e),e],n)})):[t([_m,null],0)]},groupEvents:function(t){var n=new Map;return e?(t.forEach((function(e){var t=g.resource(e)||_m;if(Array.isArray(t))t.forEach((function(g){var t=n.get(g)||[];t.push(e),n.set(g,t)}));else{var I=n.get(t)||[];I.push(e),n.set(t,I)}})),n):(n.set(_m,t),n)}}}(e,g)})),I.state={gutterWidth:void 0,isOverflowing:null},I.scrollRef=g.createRef(),I.contentRef=g.createRef(),I.containerRef=g.createRef(),I._scrollRatio=null,I.gutterRef=(0,g.createRef)(),I}return m(n,[{key:"getSnapshotBeforeUpdate",value:function(){return this.checkOverflow(),null}},{key:"componentDidMount",value:function(){null==this.props.width&&this.measureGutter(),this.calculateScroll(),this.applyScroll(),window.addEventListener("resize",this.handleResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize),vo(this.rafHandle),this.measureGutterAnimationFrameRequest&&window.cancelAnimationFrame(this.measureGutterAnimationFrameRequest)}},{key:"componentDidUpdate",value:function(){this.applyScroll()}},{key:"renderEvents",value:function(e,t,n,I){var C=this,l=this.props,a=l.min,o=l.max,c=l.components,i=l.accessors,s=l.localizer,A=l.dayLayoutAlgorithm,d=this.memoizedResources(this.props.resources,i),u=d.groupEvents(t),m=d.groupEvents(n);return d.map((function(t,n){var l=r(t,2),d=l[0],b=l[1];return e.map((function(e,t){var l=(u.get(d)||[]).filter((function(g){return s.inRange(e,i.start(g),i.end(g),"day")})),r=(m.get(d)||[]).filter((function(g){return s.inRange(e,i.start(g),i.end(g),"day")}));return g.createElement(Lm,Object.assign({},C.props,{localizer:s,min:s.merge(e,a),max:s.merge(e,o),resource:b&&d,components:c,isNow:s.isSameDate(e,I),key:n+"-"+t,date:e,events:l,backgroundEvents:r,dayLayoutAlgorithm:A}))}))}))}},{key:"render",value:function(){var e,t=this.props,n=t.events,I=t.backgroundEvents,C=t.range,l=t.width,a=t.rtl,o=t.selected,r=t.getNow,c=t.resources,i=t.components,s=t.accessors,A=t.getters,d=t.localizer,u=t.min,m=t.max,b=t.showMultiDayTimes,Z=t.longPressThreshold,h=t.resizable;l=l||this.state.gutterWidth;var p=C[0],G=C[C.length-1];this.slots=C.length;var y=[],B=[],f=[];return n.forEach((function(e){if(Zm(e,p,G,s,d)){var g=s.start(e),t=s.end(e);s.allDay(e)||d.startAndEndAreDateOnly(g,t)||!b&&!d.isSameDate(g,t)?y.push(e):B.push(e)}})),I.forEach((function(e){Zm(e,p,G,s,d)&&f.push(e)})),y.sort((function(e,g){return pm(e,g,s,d)})),g.createElement("div",{className:hn("rbc-time-view",c&&"rbc-time-view-resources"),ref:this.containerRef},g.createElement(Pm,{range:C,events:y,width:l,rtl:a,getNow:r,localizer:d,selected:o,allDayMaxRows:this.props.showAllEvents?1/0:null!==(e=this.props.allDayMaxRows)&&void 0!==e?e:1/0,resources:this.memoizedResources(c,s),selectable:this.props.selectable,accessors:s,getters:A,components:i,scrollRef:this.scrollRef,isOverflowing:this.state.isOverflowing,longPressThreshold:Z,onSelectSlot:this.handleSelectAllDaySlot,onSelectEvent:this.handleSelectEvent,onShowMore:this.handleShowMore,onDoubleClickEvent:this.props.onDoubleClickEvent,onKeyPressEvent:this.props.onKeyPressEvent,onDrillDown:this.props.onDrillDown,getDrilldownView:this.props.getDrilldownView,resizable:h}),this.props.popup&&this.renderOverlay(),g.createElement("div",{ref:this.contentRef,className:"rbc-time-content",onScroll:this.handleScroll},g.createElement(jm,{date:p,ref:this.gutterRef,localizer:d,min:d.merge(p,u),max:d.merge(p,m),step:this.props.step,getNow:this.props.getNow,timeslots:this.props.timeslots,components:i,className:"rbc-time-gutter",getters:A}),this.renderEvents(C,B,f,r())))}},{key:"renderOverlay",value:function(){var e,t,n=this,I=null!==(e=null===(t=this.state)||void 0===t?void 0:t.overlay)&&void 0!==e?e:{},C=this.props,l=C.accessors,a=C.localizer,o=C.components,r=C.getters,c=C.selected,i=C.popupOffset,s=C.handleDragStart;return g.createElement(tm,{overlay:I,accessors:l,localizer:a,components:o,getters:r,selected:c,popupOffset:i,ref:this.containerRef,handleKeyPressEvent:this.handleKeyPressEvent,handleSelectEvent:this.handleSelectEvent,handleDoubleClickEvent:this.handleDoubleClickEvent,handleDragStart:s,show:!!I.position,overlayDisplay:this.overlayDisplay,onHide:function(){return n.setState({overlay:null})}})}},{key:"clearSelection",value:function(){clearTimeout(this._selectTimer),this._pendingSelection=[]}},{key:"measureGutter",value:function(){var e=this;this.measureGutterAnimationFrameRequest&&window.cancelAnimationFrame(this.measureGutterAnimationFrameRequest),this.measureGutterAnimationFrameRequest=window.requestAnimationFrame((function(){var g,t=null!==(g=e.gutterRef)&&void 0!==g&&g.current?Id(e.gutterRef.current):void 0;t&&e.state.gutterWidth!==t&&e.setState({gutterWidth:t})}))}},{key:"applyScroll",value:function(){if(null!=this._scrollRatio&&!0===this.props.enableAutoScroll){var e=this.contentRef.current;e.scrollTop=e.scrollHeight*this._scrollRatio,this._scrollRatio=null}}},{key:"calculateScroll",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,g=e.min,t=e.max,n=e.scrollToTime,I=e.localizer,C=I.diff(I.merge(n,g),n,"milliseconds"),l=I.diff(g,t,"milliseconds");this._scrollRatio=C/l}}]),n}(g.Component);qm.defaultProps={step:30,timeslots:2};var $m=["date","localizer","min","max","scrollToTime","enableAutoScroll"],eb=function(e){Z(n,e);var t=y(n);function n(){return s(this,n),t.apply(this,arguments)}return m(n,[{key:"render",value:function(){var e=this.props,t=e.date,I=e.localizer,C=e.min,l=void 0===C?I.startOf(new Date,"day"):C,a=e.max,o=void 0===a?I.endOf(new Date,"day"):a,r=e.scrollToTime,c=void 0===r?I.startOf(new Date,"day"):r,i=e.enableAutoScroll,s=void 0===i||i,A=bn(e,$m),d=n.range(t,{localizer:I});return g.createElement(qm,Object.assign({},A,{range:d,eventOffset:10,localizer:I,min:l,max:o,scrollToTime:c,enableAutoScroll:s}))}}]),n}(g.Component);eb.range=function(e,g){return[g.localizer.startOf(e,"day")]},eb.navigate=function(e,g,t){var n=t.localizer;switch(g){case bu:return n.add(e,-1,"day");case Zu:return n.add(e,1,"day");default:return e}},eb.title=function(e,g){return g.localizer.format(e,"dayHeaderFormat")};var gb=["date","localizer","min","max","scrollToTime","enableAutoScroll"],tb=function(e){Z(n,e);var t=y(n);function n(){return s(this,n),t.apply(this,arguments)}return m(n,[{key:"render",value:function(){var e=this.props,t=e.date,I=e.localizer,C=e.min,l=void 0===C?I.startOf(new Date,"day"):C,a=e.max,o=void 0===a?I.endOf(new Date,"day"):a,r=e.scrollToTime,c=void 0===r?I.startOf(new Date,"day"):r,i=e.enableAutoScroll,s=void 0===i||i,A=bn(e,gb),d=n.range(t,this.props);return g.createElement(qm,Object.assign({},A,{range:d,eventOffset:15,localizer:I,min:l,max:o,scrollToTime:c,enableAutoScroll:s}))}}]),n}(g.Component);tb.defaultProps=qm.defaultProps,tb.navigate=function(e,g,t){var n=t.localizer;switch(g){case bu:return n.add(e,-1,"week");case Zu:return n.add(e,1,"week");default:return e}},tb.range=function(e,g){var t=g.localizer,n=t.startOfWeek(),I=t.startOf(e,"week",n),C=t.endOf(e,"week",n);return t.range(I,C)},tb.title=function(e,g){var t=g.localizer,n=S(tb.range(e,{localizer:t})),I=n[0],C=n.slice(1);return t.format({start:I,end:C.pop()},"dayRangeHeaderFormat")};var nb=["date","localizer","min","max","scrollToTime","enableAutoScroll"];function Ib(e,g){return tb.range(e,g).filter((function(e){return-1===[6,0].indexOf(e.getDay())}))}var Cb,lb=function(e){Z(n,e);var t=y(n);function n(){return s(this,n),t.apply(this,arguments)}return m(n,[{key:"render",value:function(){var e=this.props,t=e.date,n=e.localizer,I=e.min,C=void 0===I?n.startOf(new Date,"day"):I,l=e.max,a=void 0===l?n.endOf(new Date,"day"):l,o=e.scrollToTime,r=void 0===o?n.startOf(new Date,"day"):o,c=e.enableAutoScroll,i=void 0===c||c,s=bn(e,nb),A=Ib(t,this.props);return g.createElement(qm,Object.assign({},s,{range:A,eventOffset:15,localizer:n,min:C,max:a,scrollToTime:r,enableAutoScroll:i}))}}]),n}(g.Component);function ab(e){var t=e.accessors,n=e.components,I=e.date,C=e.events,l=e.getters,a=e.length,o=e.localizer,r=e.onDoubleClickEvent,c=e.onSelectEvent,i=e.selected,s=(0,g.useRef)(null),A=(0,g.useRef)(null),d=(0,g.useRef)(null),u=(0,g.useRef)(null),m=(0,g.useRef)(null);(0,g.useEffect)((function(){Z()}));var b=function(e,I){var C="",l=n.time,a=o.messages.allDay,r=t.end(I),c=t.start(I);return t.allDay(I)||(o.eq(c,r)?a=o.format(c,"agendaTimeFormat"):o.isSameDate(c,r)?a=o.format({start:c,end:r},"agendaTimeRangeFormat"):o.isSameDate(e,c)?a=o.format(c,"agendaTimeFormat"):o.isSameDate(e,r)&&(a=o.format(r,"agendaTimeFormat"))),o.gt(e,c,"day")&&(C="rbc-continues-prior"),o.lt(e,r,"day")&&(C+=" rbc-continues-after"),g.createElement("span",{className:C.trim()},l?g.createElement(l,{event:I,day:e,label:a}):a)},Z=function(){if(m.current){var e=s.current,g=m.current.firstChild;if(g){var t,n,I=u.current.scrollHeight>u.current.clientHeight,C=[],l=C;C=[Id(g.children[0]),Id(g.children[1])],l[0]===C[0]&&l[1]===C[1]||(A.current.style.width=C[0]+"px",d.current.style.width=C[1]+"px"),I?(n="rbc-header-overflowing",(t=e).classList?t.classList.add(n):function(e,g){return e.classList?!!g&&e.classList.contains(g):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+g+" ")}(t,n)||("string"===typeof t.className?t.className=t.className+" "+n:t.setAttribute("class",(t.className&&t.className.baseVal||"")+" "+n)),e.style.marginRight=nd()+"px"):function(e,g){e.classList?e.classList.remove(g):"string"===typeof e.className?e.className=Cd(e.className,g):e.setAttribute("class",Cd(e.className&&e.className.baseVal||"",g))}(e,"rbc-header-overflowing")}}},h=o.messages,p=o.add(I,a,"day"),G=o.range(I,p,"day");return(C=C.filter((function(e){return Zm(e,o.startOf(I,"day"),o.endOf(p,"day"),t,o)}))).sort((function(e,g){return+t.start(e)-+t.start(g)})),g.createElement("div",{className:"rbc-agenda-view"},0!==C.length?g.createElement(g.Fragment,null,g.createElement("table",{ref:s,className:"rbc-agenda-table"},g.createElement("thead",null,g.createElement("tr",null,g.createElement("th",{className:"rbc-header",ref:A},h.date),g.createElement("th",{className:"rbc-header",ref:d},h.time),g.createElement("th",{className:"rbc-header"},h.event)))),g.createElement("div",{className:"rbc-agenda-content",ref:u},g.createElement("table",{className:"rbc-agenda-table"},g.createElement("tbody",{ref:m},G.map((function(e,I){return function(e,I,C){var a=n.event,s=n.date;return I=I.filter((function(g){return Zm(g,o.startOf(e,"day"),o.endOf(e,"day"),t,o)})),I.map((function(n,A){var d=t.title(n),u=t.end(n),m=t.start(n),Z=l.eventProp(n,m,u,Pu(n,i)),h=0===A&&o.format(e,"agendaDateFormat"),p=0===A&&g.createElement("td",{rowSpan:I.length,className:"rbc-agenda-date-cell"},s?g.createElement(s,{day:e,label:h}):h);return g.createElement("tr",{key:C+"_"+A,className:Z.className,style:Z.style},p,g.createElement("td",{className:"rbc-agenda-time-cell"},b(e,n)),g.createElement("td",{className:"rbc-agenda-event-cell",onClick:function(e){return c&&c(n,e)},onDoubleClick:function(e){return r&&r(n,e)}},a?g.createElement(a,{event:n,title:d}):d))}),[])}(e,C,I)})))))):g.createElement("span",{className:"rbc-agenda-empty"},h.noEventsInRange))}lb.defaultProps=qm.defaultProps,lb.range=Ib,lb.navigate=tb.navigate,lb.title=function(e,g){var t=g.localizer,n=S(Ib(e,{localizer:t})),I=n[0],C=n.slice(1);return t.format({start:I,end:C.pop()},"dayRangeHeaderFormat")},ab.defaultProps={length:30},ab.range=function(e,g){var t=g.length,n=void 0===t?ab.defaultProps.length:t;return{start:e,end:g.localizer.add(e,n,"day")}},ab.navigate=function(e,g,t){var n=t.length,I=void 0===n?ab.defaultProps.length:n,C=t.localizer;switch(g){case bu:return C.add(e,-I,"day");case Zu:return C.add(e,I,"day");default:return e}},ab.title=function(e,g){var t=g.length,n=void 0===t?ab.defaultProps.length:t,I=g.localizer,C=I.add(e,n,"day");return I.format({start:e,end:C},"agendaHeaderFormat")};var ob=(ag(Cb={},Gu.MONTH,Xm),ag(Cb,Gu.WEEK,tb),ag(Cb,Gu.WORK_WEEK,lb),ag(Cb,Gu.DAY,eb),ag(Cb,Gu.AGENDA,ab),Cb),rb=["action","date","today"];var cb=function(e){Z(n,e);var t=y(n);function n(){var e;s(this,n);for(var g=arguments.length,I=new Array(g),C=0;C<g;C++)I[C]=arguments[C];return(e=t.call.apply(t,[this].concat(I))).navigate=function(g){e.props.onNavigate(g)},e.view=function(g){e.props.onView(g)},e}return m(n,[{key:"render",value:function(){var e=this.props,t=e.localizer.messages,n=e.label;return g.createElement("div",{className:"rbc-toolbar"},g.createElement("span",{className:"rbc-btn-group"},g.createElement("button",{type:"button",onClick:this.navigate.bind(null,hu)},t.today),g.createElement("button",{type:"button",onClick:this.navigate.bind(null,bu)},t.previous),g.createElement("button",{type:"button",onClick:this.navigate.bind(null,Zu)},t.next)),g.createElement("span",{className:"rbc-toolbar-label"},n),g.createElement("span",{className:"rbc-btn-group"},this.viewNamesGroup(t)))}},{key:"viewNamesGroup",value:function(e){var t=this,n=this.props.views,I=this.props.view;if(n.length>1)return n.map((function(n){return g.createElement("button",{type:"button",key:n,className:hn({"rbc-active":I===n}),onClick:t.view.bind(null,n)},e[n])}))}}]),n}(g.Component);var ib=function(e){return function(g){return function(e,g){var t=null;return"function"===typeof g?t=g(e):"string"===typeof g&&"object"===A(e)&&null!=e&&g in e&&(t=e[g]),t}(g,e)}},sb=["view","date","getNow","onNavigate"],Ab=["view","toolbar","events","backgroundEvents","style","className","elementProps","date","getNow","length","showMultiDayTimes","onShowMore","doShowMoreDrillDown","components","formats","messages","culture"];function db(e){if(Array.isArray(e))return e;for(var g=[],t=0,n=Object.entries(e);t<n.length;t++){var I=r(n[t],2),C=I[0];I[1]&&g.push(C)}return g}var ub=function(e){Z(n,e);var t=y(n);function n(){var e;s(this,n);for(var g=arguments.length,I=new Array(g),C=0;C<g;C++)I[C]=arguments[C];return(e=t.call.apply(t,[this].concat(I))).getViews=function(){var g=e.props.views;return Array.isArray(g)?du(g,(function(e,g){return e[g]=ob[g]}),{}):"object"===A(g)?uu(g,(function(e,g){return!0===e?ob[g]:e})):ob},e.getView=function(){return e.getViews()[e.props.view]},e.getDrilldownView=function(g){var t=e.props,n=t.view,I=t.drilldownView,C=t.getDrilldownView;return C?C(g,n,Object.keys(e.getViews())):I},e.handleRangeChange=function(g,t,n){var I=e.props,C=I.onRangeChange,l=I.localizer;C&&t.range&&C(t.range(g,{localizer:l}),n)},e.handleNavigate=function(g,t){var n=e.props,I=n.view,C=n.date,l=n.getNow,a=n.onNavigate,o=bn(n,sb),r=e.getView(),c=l();C=function(e,g){var t=g.action,n=g.date,I=g.today,C=bn(g,rb);switch(e="string"===typeof e?ob[e]:e,t){case hu:n=I||new Date;break;case pu:break;default:kl()(e&&"function"===typeof e.navigate,"Calendar View components must implement a static `.navigate(date, action)` method.s"),n=e.navigate(n,t,C)}return n}(r,rg(rg({},o),{},{action:g,date:t||C||c,today:c})),a(C,I,g),e.handleRangeChange(C,r)},e.handleViewChange=function(g){g!==e.props.view&&function(e,g){return-1!==db(g.views).indexOf(e)}(g,e.props)&&e.props.onView(g);var t=e.getViews();e.handleRangeChange(e.props.date||e.props.getNow(),t[g],g)},e.handleSelectEvent=function(){for(var g=arguments.length,t=new Array(g),n=0;n<g;n++)t[n]=arguments[n];Bu(e.props.onSelectEvent,t)},e.handleDoubleClickEvent=function(){for(var g=arguments.length,t=new Array(g),n=0;n<g;n++)t[n]=arguments[n];Bu(e.props.onDoubleClickEvent,t)},e.handleKeyPressEvent=function(){for(var g=arguments.length,t=new Array(g),n=0;n<g;n++)t[n]=arguments[n];Bu(e.props.onKeyPressEvent,t)},e.handleSelectSlot=function(g){Bu(e.props.onSelectSlot,g)},e.handleDrillDown=function(g,t){var n=e.props.onDrillDown;n?n(g,t,e.drilldownView):(t&&e.handleViewChange(t),e.handleNavigate(pu,g))},e.state={context:n.getContext(e.props)},e}return m(n,[{key:"render",value:function(){var e=this.props,t=e.view,n=e.toolbar,I=e.events,C=e.backgroundEvents,l=e.style,a=e.className,o=e.elementProps,r=e.date,c=e.getNow,i=e.length,s=e.showMultiDayTimes,A=e.onShowMore,d=e.doShowMoreDrillDown;e.components,e.formats,e.messages,e.culture;var u=bn(e,Ab);r=r||c();var m=this.getView(),b=this.state.context,Z=b.accessors,h=b.components,p=b.getters,G=b.localizer,y=b.viewNames,B=h.toolbar||cb,f=m.title(r,{localizer:G,length:i});return g.createElement("div",Object.assign({},o,{className:hn(a,"rbc-calendar",u.rtl&&"rbc-rtl"),style:l}),n&&g.createElement(B,{date:r,view:t,views:y,label:f,onView:this.handleViewChange,onNavigate:this.handleNavigate,localizer:G}),g.createElement(m,Object.assign({},u,{events:I,backgroundEvents:C,date:r,getNow:c,length:i,localizer:G,getters:p,components:h,accessors:Z,showMultiDayTimes:s,getDrilldownView:this.getDrilldownView,onNavigate:this.handleNavigate,onDrillDown:this.handleDrillDown,onSelectEvent:this.handleSelectEvent,onDoubleClickEvent:this.handleDoubleClickEvent,onKeyPressEvent:this.handleKeyPressEvent,onSelectSlot:this.handleSelectSlot,onShowMore:A,doShowMoreDrillDown:d})))}}],[{key:"getDerivedStateFromProps",value:function(e){return{context:n.getContext(e)}}},{key:"getContext",value:function(e){var g=e.startAccessor,t=e.endAccessor,n=e.allDayAccessor,I=e.tooltipAccessor,C=e.titleAccessor,l=e.resourceAccessor,a=e.resourceIdAccessor,o=e.resourceTitleAccessor,r=e.eventPropGetter,c=e.backgroundEventPropGetter,i=e.slotPropGetter,s=e.slotGroupPropGetter,A=e.dayPropGetter,d=e.view,u=e.views,m=e.localizer,b=e.culture,Z=e.messages,h=void 0===Z?{}:Z,p=e.components,G=void 0===p?{}:p,y=e.formats,B=void 0===y?{}:y,f=db(u);return{viewNames:f,localizer:Lu(m,b,B,function(e){return rg(rg({},Tu),e)}(h)),getters:{eventProp:function(){return r&&r.apply(void 0,arguments)||{}},backgroundEventProp:function(){return c&&c.apply(void 0,arguments)||{}},slotProp:function(){return i&&i.apply(void 0,arguments)||{}},slotGroupProp:function(){return s&&s.apply(void 0,arguments)||{}},dayProp:function(){return A&&A.apply(void 0,arguments)||{}}},components:Au(G[d]||{},cu(G,f),{eventWrapper:mu,backgroundEventWrapper:mu,eventContainerWrapper:mu,dateCellWrapper:mu,weekWrapper:mu,timeSlotWrapper:mu,timeGutterWrapper:mu}),accessors:{start:ib(g),end:ib(t),allDay:ib(n),tooltip:ib(I),title:ib(C),resource:ib(l),resourceId:ib(a),resourceTitle:ib(o)}}}}]),n}(g.Component);ub.defaultProps={events:[],backgroundEvents:[],elementProps:{},popup:!1,toolbar:!0,view:Gu.MONTH,views:[Gu.MONTH,Gu.WEEK,Gu.DAY,Gu.AGENDA],step:30,length:30,allDayMaxRows:1/0,doShowMoreDrillDown:!0,drilldownView:Gu.DAY,titleAccessor:"title",tooltipAccessor:"title",allDayAccessor:"allDay",startAccessor:"start",endAccessor:"end",resourceAccessor:"resourceId",resourceIdAccessor:"id",resourceTitleAccessor:"title",longPressThreshold:250,getNow:function(){return new Date},dayLayoutAlgorithm:"overlap"};var mb=function e(t,n,I){void 0===I&&(I=[]);var C,l=t.displayName||t.name||"Component",a=!!(C=t)&&("function"!==typeof C||C.prototype&&C.prototype.isReactComponent),o=Object.keys(n),r=o.map(Yl);!a&&I.length&&kl()(!1);var c=function(e){var C,l;function a(){for(var g,t=arguments.length,C=new Array(t),l=0;l<t;l++)C[l]=arguments[l];(g=e.call.apply(e,[this].concat(C))||this).handlers=Object.create(null),o.forEach((function(e){var t=n[e];g.handlers[t]=function(n){if(g.props[t]){var I;g._notifying=!0;for(var C=arguments.length,l=new Array(C>1?C-1:0),a=1;a<C;a++)l[a-1]=arguments[a];(I=g.props)[t].apply(I,[n].concat(l)),g._notifying=!1}g.unmounted||g.setState((function(g){var t,I=g.values;return{values:Hl(Object.create(null),I,(t={},t[e]=n,t))}}))}})),I.length&&(g.attachRef=function(e){g.inner=e});var a=Object.create(null);return o.forEach((function(e){a[e]=g.props[Yl(e)]})),g.state={values:a,prevProps:{}},g}l=e,(C=a).prototype=Object.create(l.prototype),C.prototype.constructor=C,b(C,l);var c=a.prototype;return c.shouldComponentUpdate=function(){return!this._notifying},a.getDerivedStateFromProps=function(e,g){var t=g.values,n=g.prevProps,I={values:Hl(Object.create(null),t),prevProps:{}};return o.forEach((function(g){I.prevProps[g]=e[g],!Jl(e,g)&&Jl(n,g)&&(I.values[g]=e[Yl(g)])})),I},c.componentWillUnmount=function(){this.unmounted=!0},c.render=function(){var e=this,n=this.props,I=n.innerRef,C=mn(n,["innerRef"]);r.forEach((function(e){delete C[e]}));var l={};return o.forEach((function(g){var t=e.props[g];l[g]=void 0!==t?t:e.state.values[g]})),g.createElement(t,Hl({},C,l,this.handlers,{ref:I||this.attachRef}))},a}(g.Component);(0,wl.polyfill)(c),c.displayName="Uncontrolled("+l+")",c.propTypes=Hl({innerRef:function(){}},function(e,g){var t={};return Object.keys(e).forEach((function(e){t[Yl(e)]=Xl})),t}(n)),I.forEach((function(e){c.prototype[e]=function(){var g;return(g=this.inner)[e].apply(g,arguments)}}));var i=c;return g.forwardRef&&((i=g.forwardRef((function(e,t){return g.createElement(c,Hl({},e,{innerRef:t,__source:{fileName:"/Users/jquense/src/uncontrollable/src/uncontrollable.js",lineNumber:128},__self:this}))}))).propTypes=c.propTypes),i.ControlledComponent=t,i.deferControlTo=function(g,t,I){return void 0===t&&(t={}),e(g,Hl({},n,t),I)},i}(ub,{view:"onView",date:"onNavigate",selected:"onSelectEvent"}),bb=function(e,g,t){var n=e.start,I=e.end;return t.format(n,"LT",g)+" \u2013 "+t.format(I,"LT",g)},Zb={dateFormat:"DD",dayFormat:"DD ddd",weekdayFormat:"ddd",selectRangeFormat:bb,eventTimeRangeFormat:bb,eventTimeRangeStartFormat:function(e,g,t){var n=e.start;return t.format(n,"LT",g)+" \u2013 "},eventTimeRangeEndFormat:function(e,g,t){var n=e.end;return" \u2013 "+t.format(n,"LT",g)},timeGutterFormat:"LT",monthHeaderFormat:"MMMM YYYY",dayHeaderFormat:"dddd MMM DD",dayRangeHeaderFormat:function(e,g,t){var n=e.start,I=e.end;return t.format(n,"MMMM DD",g)+" \u2013 "+t.format(I,t.eq(n,I,"month")?"DD":"MMMM DD",g)},agendaHeaderFormat:function(e,g,t){var n=e.start,I=e.end;return t.format(n,"L",g)+" \u2013 "+t.format(I,"L",g)},agendaDateFormat:"ddd MMM DD",agendaTimeFormat:"LT",agendaTimeRangeFormat:bb};function hb(e){var g=e?e.toLowerCase():e;return"FullYear"===g?g="year":g||(g=void 0),g}var pb=function(e){var g=e.isOpen,t=e.booking,n=e.onClose;return g?(0,eI.jsx)("div",{className:"modalOverlay",children:(0,eI.jsxs)("div",{className:"modalContent",children:[(0,eI.jsx)("h2",{children:"Booking Details"}),t&&(0,eI.jsxs)("div",{children:[(0,eI.jsxs)("p",{children:[(0,eI.jsx)("strong",{children:"Child:"})," ",t.child?t.child.name:"No Name"]}),(0,eI.jsxs)("p",{children:[(0,eI.jsx)("strong",{children:"Test:"})," ",t.child?t.child.testGrade:"No Name"]}),(0,eI.jsxs)("p",{children:[(0,eI.jsx)("strong",{children:"Date:"})," ",new Date(t.testSlot.date).toLocaleDateString()]}),(0,eI.jsxs)("p",{children:[(0,eI.jsx)("strong",{children:"Start Time:"})," ",t.testSlot.startTime]}),(0,eI.jsxs)("p",{children:[(0,eI.jsx)("strong",{children:"End Time:"})," ",t.testSlot.endTime]}),(0,eI.jsxs)("p",{children:[(0,eI.jsx)("strong",{children:"Fee:"})," ",t.price?"\u20a9".concat(new Intl.NumberFormat("ko-KR").format(t.price)):"N/A"]})]}),(0,eI.jsx)("button",{onClick:n,children:"Close"})]})}):null},Gb=function(e){function g(g,t){var n,I,C=e(g).local(),l=e(t).local();if(!e.tz)return C.toDate().getTimezoneOffset()-l.toDate().getTimezoneOffset();var a=null!==(n=null===C||void 0===C||null===(I=C._z)||void 0===I?void 0:I.name)&&void 0!==n?n:e.tz.guess();return e.tz.zone(a).utcOffset(+C)-e.tz.zone(a).utcOffset(+l)}function t(g,t,n){var I=hb(n);return[I?e(g).startOf(I):e(g),I?e(t).startOf(I):e(t),I]}function n(){var g=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=hb(arguments.length>1?arguments[1]:void 0);return t?e(g).startOf(t).toDate():e(g).toDate()}function I(e,g,n){var I=r(t(e,g,n),3),C=I[0],l=I[1],a=I[2];return C.isSame(l,a)}function C(e,g,n){var I=r(t(e,g,n),3),C=I[0],l=I[1],a=I[2];return C.isSameOrBefore(l,a)}function l(g,t,n){var I=hb(n);return e(g).add(t,I).toDate()}function a(e,g){var t=hb(g),C=n(e,t);return I(C,e)?C:l(C,1,t)}function o(g,t){var n=hb(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"day"),I=e(g);return e(t).diff(I,n)}function c(g){return e(g).startOf("month").startOf("week").toDate()}function i(g){return e(g).endOf("month").endOf("week").toDate()}return new Qu({formats:Zb,firstOfWeek:function(g){var t=g?e.localeData(g):e.localeData();return t?t.firstDayOfWeek():0},firstVisibleDay:c,lastVisibleDay:i,visibleDays:function(e){for(var g=c(e),t=i(e),n=[];C(g,t);)n.push(g),g=l(g,1,"d");return n},format:function(g,t,n){return function(e,g){return g?e.locale(g):e}(e(g),n).format(t)},lt:function(e,g,n){var I=r(t(e,g,n),3),C=I[0],l=I[1],a=I[2];return C.isBefore(l,a)},lte:C,gt:function(e,g,n){var I=r(t(e,g,n),3),C=I[0],l=I[1],a=I[2];return C.isAfter(l,a)},gte:function(e,g,n){var I=r(t(e,g,n),3),C=I[0],l=I[1],a=I[2];return C.isSameOrBefore(l,a)},eq:I,neq:function(e,g,t){return!I(e,g,t)},merge:function(g,t){if(!g&&!t)return null;var n=e(t).format("HH:mm:ss"),I=e(g).startOf("day").format("MM/DD/YYYY");return e("".concat(I," ").concat(n),"MM/DD/YYYY HH:mm:ss").toDate()},inRange:function(g,t,n){var I=hb(arguments.length>3&&void 0!==arguments[3]?arguments[3]:"day"),C=e(g),l=e(t),a=e(n);return C.isBetween(l,a,I,"[]")},startOf:n,endOf:function(){var g=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=hb(arguments.length>1?arguments[1]:void 0);return t?e(g).endOf(t).toDate():e(g).toDate()},range:function(g,t){for(var n=hb(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"day"),I=e(g).toDate(),a=[];C(I,t);)a.push(I),I=l(I,1,n);return a},add:l,diff:o,ceil:a,min:function(g,t){var n=e(g),I=e(t);return e.min(n,I).toDate()},max:function(g,t){var n=e(g),I=e(t);return e.max(n,I).toDate()},minutes:function(g){return e(g).minutes()},getSlotDate:function(g,t,n){return e(g).startOf("day").minute(t+n).toDate()},getTimezoneOffset:function(g){return e(g).toDate().getTimezoneOffset()},getDstOffset:g,getTotalMin:function(e,g){return o(e,g,"minutes")},getMinutesFromMidnight:function(t){var n=e(t).startOf("day");return e(t).diff(n,"minutes")+function(t){return g(e(t).startOf("day"),t)}(t)},continuesPrior:function(g,t){var n=e(g),I=e(t);return n.isBefore(I,"day")},continuesAfter:function(g,t,n){var I=e(t),C=e(n);return I.isSameOrAfter(C,"minutes")},sortEvents:function(e){var g=e.evtA,t=g.start,I=g.end,C=g.allDay,l=e.evtB,r=l.start,c=l.end,i=l.allDay,s=+n(t,"day")-+n(r,"day"),A=o(t,a(I,"day"),"day"),d=o(r,a(c,"day"),"day");return s||Math.max(d,1)-Math.max(A,1)||!!i-!!C||+t-+r||+I-+c},inEventRange:function(g){var t=g.event,n=t.start,I=t.end,C=g.range,l=C.start,a=C.end,o=e(n).startOf("day"),r=e(I),c=e(l),i=e(a),s=o.isSameOrBefore(i,"day"),A=!o.isSame(r,"minutes")?r.isAfter(c,"minutes"):r.isSameOrAfter(c,"minutes");return s&&A},isSameDate:function(g,t){var n=e(g),I=e(t);return n.isSame(I,"day")},browserTZOffset:function(){var g=new Date,t=/-/.test(g.toString())?"-":"",n=g.getTimezoneOffset(),I=Number("".concat(t).concat(Math.abs(n)));return e().utcOffset()>I?1:0}})}(II()),yb="".concat("https://palbackend-a8f4e5171ddb.herokuapp.com","/api/bookings"),Bb={height:500},fb=function(e){var g,t,n;if(console.log("Booking's child:",e.child),!e.testSlot)return null;var I=new Date(e.testSlot.date),C=new Date(e.testSlot.date),l=r(e.testSlot.startTime.split(":"),2),a=l[0],o=l[1],c=r(e.testSlot.endTime.split(":"),2),i=c[0],s=c[1];return I.setHours(parseInt(a),parseInt(o)),C.setHours(parseInt(i),parseInt(s)),{title:null!==e&&void 0!==e&&e.child?null===e||void 0===e||null===(g=e.child)||void 0===g?void 0:g.name:"No Name",start:I,end:C,resource:e,desc:e.child?"Additional info: ".concat((null===e||void 0===e||null===(t=e.child)||void 0===t?void 0:t.gender)||"No Gender"," ").concat((null===e||void 0===e||null===(n=e.child)||void 0===n?void 0:n.testGrade)||"No TestGrade"):"No Child Data"}},Sb=function(){var e=r((0,g.useState)([]),2),t=e[0],n=e[1],I=r((0,g.useState)(null),2),C=I[0],l=I[1],a=r((0,g.useState)(!1),2),o=a[0],c=a[1];(0,g.useEffect)((function(){var e=function(){var e=sg(cg().mark((function e(){var g,t,I;return cg().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,un.get(yb);case 3:g=e.sent,console.log("Fetched Bookings:",g.data),t=g.data.map(fb),n(t),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("Error fetching bookings:",(null===(I=e.t0.response)||void 0===I?void 0:I.data)||e.t0.message),_n.error("Failed to fetch bookings.");case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();e()}),[]);return(0,eI.jsxs)("div",{style:Bb,children:[(0,eI.jsx)(mb,{localizer:Gb,events:t,startAccessor:"start",endAccessor:"end",style:Bb,onSelectEvent:function(e){l(e.resource),console.log("Current selectedBooking after click:",C),c(!0)}}),(0,eI.jsx)(pb,{isOpen:o,booking:C,onClose:function(){l(null),c(!1)}})]})};var vb=function(e){var t=e.isOpen,n=e.onRequestClose,I=e.onParentUpdated,C=e.parent,l=r((0,g.useState)(rg(rg({},C),{},{children:C.children.map((function(e){return rg(rg({},e),{},{dateOfBirth:e.dateOfBirth?new Date(e.dateOfBirth).toISOString().split("T")[0]:""})}))})),2),a=l[0],o=l[1],c=function(){var e=sg(cg().mark((function e(g){var t;return cg().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=a.children[g],e.next=4,fetch("".concat("https://palbackend-a8f4e5171ddb.herokuapp.com","/api/child/").concat(t._id),{method:"DELETE"});case 4:e.sent.ok?(_n.success("Child deleted successfully"),o((function(e){return rg(rg({},e),{},{children:e.children.filter((function(e,t){return t!==g}))})}))):_n.error("Failed to delete child"),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0),_n.error("Failed to delete child");case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(g){return e.apply(this,arguments)}}(),i=function(){var e=sg(cg().mark((function e(){var g;return cg().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("https://palbackend-a8f4e5171ddb.herokuapp.com","/api/users/parent/").concat(C._id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 3:if(!(g=e.sent).ok){e.next=14;break}return _n.success("Parent updated successfully"),e.t0=I,e.next=9,g.json();case 9:e.t1=e.sent,(0,e.t0)(e.t1),n(),e.next=15;break;case 14:_n.error("Failed to update parent");case 15:e.next=21;break;case 17:e.prev=17,e.t2=e.catch(0),console.error(e.t2),_n.error("Failed to update parent");case 21:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(){return e.apply(this,arguments)}}(),s=function(){var e=sg(cg().mark((function e(){return cg().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.confirm("Are you sure you want to delete this parent? This action cannot be undone.")){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,fetch("".concat("https://palbackend-a8f4e5171ddb.herokuapp.com","/api/users/user/").concat(C._id),{method:"DELETE"});case 6:e.sent.ok?(_n.success("Parent deleted successfully"),n(),I(null)):_n.error("Failed to delete parent"),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),console.error(e.t0),_n.error("Failed to delete parent");case 14:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=sg(cg().mark((function e(g){var t;return cg().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=a.children[g],e.next=4,fetch("".concat("https://palbackend-a8f4e5171ddb.herokuapp.com","/api/child/").concat(t._id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 4:e.sent.ok?_n.success("Child updated successfully"):_n.error("Failed to update child"),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0),_n.error("Failed to update child");case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(g){return e.apply(this,arguments)}}(),d=function(e,g,t){o((function(n){return rg(rg({},n),{},{children:n.children.map((function(n,I){return I===e?rg(rg({},n),{},ag({},g,t)):n}))})}))};return(0,eI.jsx)(dg(),{isOpen:t,onRequestClose:n,className:"edit-parent-modal",style:{content:{overflow:"auto"}},children:(0,eI.jsxs)("div",{className:"content",children:[(0,eI.jsx)("button",{className:"close-modal",onClick:n,children:"x"}),(0,eI.jsx)("h3",{children:"Edit Parent Details"}),(0,eI.jsxs)("div",{className:"input-group",children:[(0,eI.jsxs)("div",{children:[(0,eI.jsx)("label",{children:"Name:"}),(0,eI.jsx)("input",{value:a.name,onChange:function(e){return o(rg(rg({},a),{},{name:e.target.value}))}})]}),(0,eI.jsxs)("div",{children:[(0,eI.jsx)("label",{children:"Phone Number:"}),(0,eI.jsx)("input",{value:a.phone,onChange:function(e){return o(rg(rg({},a),{},{phone:e.target.value}))}})]}),(0,eI.jsxs)("div",{children:[(0,eI.jsx)("label",{children:"Email:"}),(0,eI.jsx)("input",{value:a.email,onChange:function(e){return o(rg(rg({},a),{},{email:e.target.value}))}})]}),(0,eI.jsxs)("div",{children:[(0,eI.jsx)("label",{children:"Campus:"}),(0,eI.jsxs)("select",{value:a.campus,onChange:function(e){return o(rg(rg({},a),{},{campus:e.target.value}))},children:[(0,eI.jsx)("option",{value:"\ubd84\ub2f9",children:"\ubd84\ub2f9"}),(0,eI.jsx)("option",{value:"\ub3d9\ud0c4",children:"\ub3d9\ud0c4"}),(0,eI.jsx)("option",{value:"\uc218\uc9c0",children:"\uc218\uc9c0"})]})]})]}),(0,eI.jsx)("h4",{children:"Children:"}),(0,eI.jsx)("div",{className:"input-group",children:a.children&&a.children.map((function(e,g){return(0,eI.jsxs)("div",{className:"child-details-card",children:[(0,eI.jsxs)("h5",{children:["Child ",g+1]}),(0,eI.jsxs)("div",{className:"child-input",children:[(0,eI.jsx)("label",{children:"Name:"}),(0,eI.jsx)("input",{value:e.name,onChange:function(e){return d(g,"name",e.target.value)}})]}),(0,eI.jsxs)("div",{className:"child-input",children:[(0,eI.jsx)("label",{children:"Previous School:"}),(0,eI.jsx)("input",{value:e.previousSchool,onChange:function(e){return d(g,"previousSchool",e.target.value)}})]}),(0,eI.jsxs)("div",{className:"child-input",children:[(0,eI.jsx)("label",{children:"Date of Birth:"}),(0,eI.jsx)("input",{type:"date",value:e.dateOfBirth,onChange:function(e){return d(g,"dateOfBirth",e.target.value)}})]}),(0,eI.jsxs)("div",{className:"child-input",children:[(0,eI.jsx)("label",{children:"Gender:"}),(0,eI.jsxs)("select",{value:e.gender,onChange:function(e){return d(g,"gender",e.target.value)},children:[(0,eI.jsx)("option",{value:"male",children:"Male"}),(0,eI.jsx)("option",{value:"female",children:"Female"})]})]}),(0,eI.jsxs)("div",{className:"child-actions",children:[(0,eI.jsx)("button",{className:"save-button",onClick:function(){return A(g)},children:"Save Child"}),(0,eI.jsx)("button",{className:"delete-button",onClick:function(){return c(g)},children:"Delete Child"})]})]},g)}))}),(0,eI.jsxs)("div",{className:"actions",children:[(0,eI.jsx)("button",{className:"save-button",onClick:i,children:"Save"}),(0,eI.jsx)("button",{className:"delete-button",onClick:s,children:"Delete Parent"})]})]})})};var Wb=function(){var e=r((0,g.useState)([]),2),t=e[0],n=e[1],I=r((0,g.useState)(""),2),C=I[0],l=I[1],a=r((0,g.useState)(null),2),o=a[0],c=a[1],i=r((0,g.useState)(!1),2),s=i[0],A=i[1],d=r((0,g.useState)(!1),2),u=d[0],m=d[1],b=localStorage.getItem("userRole"),Z=localStorage.getItem("userCampus"),h=r((0,g.useState)(!0),2),p=h[0],G=h[1];(0,g.useEffect)((function(){function e(){return(e=sg(cg().mark((function e(){var g,t;return cg().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,G(!0),e.next=4,fetch("".concat("https://palbackend-a8f4e5171ddb.herokuapp.com","/api/users/parents"));case 4:return g=e.sent,e.next=7,g.json();case 7:t=e.sent,"admin"===b&&(t=t.filter((function(e){return e.campus===Z}))),n(t),G(!1),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),console.error("Error fetching parents:",e.t0),G(!1);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[b,Z,u]);var y=Array.isArray(t)?t.filter((function(e){return e.children.some((function(e){var g;return null===e||void 0===e||null===(g=e.name)||void 0===g?void 0:g.includes(C)}))})):[];return(0,eI.jsxs)("div",{children:[(0,eI.jsx)("h2",{children:"Parent List"}),p?(0,eI.jsx)("div",{style:{textAlign:"center",margin:"2rem 0"},children:(0,eI.jsx)(bl,{color:"#00BFFF",height:100,width:100})}):(0,eI.jsxs)(eI.Fragment,{children:[(0,eI.jsx)("div",{children:(0,eI.jsx)("input",{type:"text",placeholder:"Search by child name...",value:C,onChange:function(e){return l(e.target.value)}})}),(0,eI.jsxs)("table",{children:[(0,eI.jsx)("thead",{children:(0,eI.jsxs)("tr",{children:[(0,eI.jsx)("th",{children:"Email"}),(0,eI.jsx)("th",{children:"Phone"}),(0,eI.jsx)("th",{children:"Campus"}),(0,eI.jsx)("th",{children:"Children's Names"}),(0,eI.jsx)("th",{children:"Test Grades"}),(0,eI.jsx)("th",{children:"Action"})]})}),(0,eI.jsx)("tbody",{children:y.map((function(e){return(0,eI.jsxs)("tr",{children:[(0,eI.jsx)("td",{children:e.email}),(0,eI.jsx)("td",{children:e.phone}),(0,eI.jsx)("td",{children:e.campus}),(0,eI.jsx)("td",{children:e.children.map((function(e){return e.name})).join(", ")}),(0,eI.jsx)("td",{children:e.children.map((function(e){return e.testGrade})).join(", ")}),(0,eI.jsx)("td",{children:(0,eI.jsx)("button",{onClick:function(){c(e),A(!0)},children:"Edit"})})]},e._id)}))})]}),o&&(0,eI.jsx)(vb,{isOpen:s,onRequestClose:function(){c(null),A(!1)},onParentUpdated:function(e){e&&n(t.map((function(g){return g._id===e._id?e:g}))),m((function(e){return!e}))},parent:o})]})]})},Vb=t(8),Rb=t.n(Vb),kb=function(e){var t=e.isOpen,n=e.onRequestClose,I=r((0,g.useState)(""),2),C=I[0],l=I[1],a=function(){var e=sg(cg().mark((function e(g){var t,n,I;return cg().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!g){e.next=15;break}return t=g.text,console.log(t),l(t),n=t.split(",")[3].trim(),e.prev=5,e.next=8,un.patch("".concat("https://palbackend-a8f4e5171ddb.herokuapp.com","/api/qr/").concat(n,"/attendedPresentation"),{attended:!0});case 8:I=e.sent,console.log("Attendance updated successfully:",I.data),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),console.error("An error occurred while updating attendance:",e.t0);case 15:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(g){return e.apply(this,arguments)}}(),o=C.split(","),c=o[0],i=o[1],s=o[2],A=o[3];return t&&(0,eI.jsx)("div",{className:"modal",children:(0,eI.jsxs)("div",{className:"modal-content",children:[(0,eI.jsx)("button",{className:"close-modal",onClick:n,children:"\xd7"}),(0,eI.jsx)(Rb(),{onScan:a}),(0,eI.jsxs)("p",{children:["Name: ",c]}),(0,eI.jsxs)("p",{children:["Phone Number: ",i]}),(0,eI.jsxs)("p",{children:["Slot Booked: ",s]}),(0,eI.jsxs)("p",{children:["User ID: ",A]})]})})},Xb=function(){var e=r((0,g.useState)(null),2),t=e[0],n=e[1],I=r((0,g.useState)(null),2),C=I[0],l=I[1],a=r((0,g.useState)(null),2),o=a[0],c=a[1],i=r((0,g.useState)(!0),2),s=i[0],A=i[1],d=r((0,g.useState)(""),2),u=d[0],m=d[1],b=r((0,g.useState)(!1),2),Z=(b[0],b[1]);(0,g.useEffect)((function(){var e=localStorage.getItem("userRole");e&&m(e)}),[]);var h=function(e){A(!1),c(e)},p=function(){c(null),l(null),n(null)};return(0,eI.jsxs)("div",{className:"admin-dashboard",children:[(0,eI.jsx)("h1",{children:"Admin Dashboard"}),(0,eI.jsx)("button",{className:"nav-button",onClick:function(){h("QRScanner")},children:"Open QR Scanner"}),(0,eI.jsxs)("div",{className:"filter-container",children:[(0,eI.jsx)("button",{className:"nav-button",onClick:function(){s&&c(null),A(!s)},children:s?"Hide Calendar":"Show Calendar"}),(0,eI.jsx)("button",{className:"nav-button",onClick:function(){h("createTest")},children:"Create Test"}),(0,eI.jsx)("button",{className:"nav-button",onClick:function(){h("presentationList")},children:"Presentations"}),(0,eI.jsx)("button",{className:"nav-button",onClick:function(){h("testList")},children:"Tests"}),(0,eI.jsx)("button",{className:"nav-button",onClick:function(){h("bookingList")},children:"Test Takers"}),(0,eI.jsx)("button",{className:"nav-button",onClick:function(){h("attendeeList")},children:"Attendees"}),(0,eI.jsx)("button",{className:"nav-button",onClick:function(){h("viewParents")},children:"Parents"}),(0,eI.jsx)("button",{className:"nav-button",onClick:function(){h("createBookingPriority")},children:"Set Booking Priority Times"}),"superadmin"===u&&(0,eI.jsxs)(eI.Fragment,{children:[(0,eI.jsx)("button",{className:"nav-button",onClick:function(){h("createPresentation")},children:"Create Presentation"}),(0,eI.jsx)("button",{className:"nav-button",onClick:function(){h("addAdmin")},children:"Add Admin"}),(0,eI.jsx)("button",{className:"nav-button",onClick:function(){h("editAdmins")},children:"View/Edit Admins"})]})]}),s&&(0,eI.jsx)(Sb,{}),"createBookingPriority"===o&&(0,eI.jsx)(Vl,{isOpen:!0,onRequestClose:p}),"createPresentation"===o&&(0,eI.jsx)(hI,{isOpen:!0,onRequestClose:p}),"updatePresentation"===o&&t&&(0,eI.jsx)(pI,{presentationId:t,isOpen:!0,onRequestClose:p}),"createTest"===o&&(0,eI.jsx)(hl,{isOpen:!0,onRequestClose:p}),"updateTest"===o&&C&&(0,eI.jsx)(pl,{testId:C,isOpen:!0,onRequestClose:p}),"presentationList"===o&&(0,eI.jsx)(Zl,{onEdit:function(e){n(e),h("updatePresentation")}}),"testList"===o&&(0,eI.jsx)(Gl,{onEdit:function(e){l(e),h("updateTest")}}),"bookingList"===o&&(0,eI.jsx)(yl,{}),"attendeeList"===o&&(0,eI.jsx)(fl,{}),"addAdmin"===o&&(0,eI.jsx)(Sl,{}),"editAdmins"===o&&(0,eI.jsx)(Wl,{}),"viewParents"===o&&(0,eI.jsx)(Wb,{}),(0,eI.jsx)(kb,{isOpen:"QRScanner"===o,onRequestClose:function(){Z(!1),c(null)}})]})};var Jb=function(e){var t=e.parentId,n=r((0,g.useState)(""),2),I=n[0],C=n[1],l=r((0,g.useState)(""),2),a=l[0],o=l[1],c=r((0,g.useState)(""),2),i=c[0],s=c[1],A=r((0,g.useState)(""),2),d=A[0],u=A[1],m=he(),b=function(){var e=sg(cg().mark((function e(){return cg().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h();case 2:e.sent&&m("/parent",{replace:!0});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Z=function(){var e=sg(cg().mark((function e(){return cg().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h();case 2:e.sent&&p();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=sg(cg().mark((function e(){var g;return cg().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://palbackend-a8f4e5171ddb.herokuapp.com",e.next=3,un.post("".concat("https://palbackend-a8f4e5171ddb.herokuapp.com","/api/child"),{name:I,previousSchool:a,dateOfBirth:i,gender:d,parent:t},gg());case 3:if(201!==(g=e.sent).status){e.next=9;break}return console.log("Child created:",g.data),e.abrupt("return",!0);case 9:return console.error("Failed to create child:",g.data),e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){C(""),o(""),s(""),u("")};return(0,eI.jsx)("div",{className:"form-container",children:(0,eI.jsxs)("form",{className:"form",onSubmit:function(e){return e.preventDefault()},children:[(0,eI.jsx)("h2",{className:"form-title",children:"\ud559\uc0dd\ucd94\uac00"}),(0,eI.jsx)("p",{className:"text-red",children:"(\ubcf8\uc778 \uc790\ub140\uac00 \uc544\ub2cc \uacbd\uc6b0, \uc608\uc57d\uc740 \ubb34\ud6a8 \ucc98\ub9ac\ub429\ub2c8\ub2e4.)"}),(0,eI.jsxs)("div",{className:"form-field",children:[(0,eI.jsx)("label",{className:"form-label",htmlFor:"name",children:"\ud559\uc0dd(\uc720\uc544) \ud55c\uae00\uba85:"}),(0,eI.jsx)("input",{className:"form-input",type:"text",value:I,onChange:function(e){return C(e.target.value)},required:!0})]}),(0,eI.jsxs)("div",{className:"form-field",children:[(0,eI.jsx)("label",{className:"form-label",htmlFor:"previousSchool",children:"\ud604\uc7ac \uc7ac\uc6d0\uc911\uc778 \uae30\uad00\uba85:"}),(0,eI.jsx)("input",{className:"form-input",type:"text",value:a,onChange:function(e){return o(e.target.value)},required:!0})]}),(0,eI.jsxs)("div",{className:"form-field",children:[(0,eI.jsxs)("label",{className:"form-label",htmlFor:"dateOfBirth",children:["\uc0dd\ub144\uc6d4\uc77c:",(0,eI.jsxs)("p",{className:"text-red",children:["*\uc0dd\ub144\uc6d4\uc77c\uc744 \uae30\uc785 \uc2dc \uc790\ub3d9\uc73c\ub85c \ud559\ub144\uc120\ud0dd\uc774 \ub418\ubbc0\ub85c \uc815\ud655\ud558\uac8c \uae30\uc785\ud574\uc8fc\uc2dc\uae30 \ubc14\ub78d\ub2c8\ub2e4.",(0,eI.jsx)("br",{}),"*\uae30\uc785\uc2dc \uc0c1\ub2e8\uc758 \ub144\ub3c4,\ub0a0\uc9dc\ub97c \uc120\ud0dd\ud558\uc5ec \uc8fc\uc2dc\uae30 \ubc14\ub78c\ub2c8\ub2e4."]})]}),(0,eI.jsx)("input",{className:"form-input",type:"date",value:i,onChange:function(e){return s(e.target.value)},required:!0})]}),(0,eI.jsxs)("div",{className:"form-field",children:[(0,eI.jsx)("label",{className:"form-label",htmlFor:"gender",children:"\uc131\ubcc4:"}),(0,eI.jsxs)("select",{className:"form-input",value:d,onChange:function(e){return u(e.target.value)},required:!0,children:[(0,eI.jsx)("option",{value:"",children:"\uc131\ubcc4\uc744 \uc120\ud0dd\ud558\uc138\uc694"}),(0,eI.jsx)("option",{value:"male",children:"\ub0a8\uc131"}),(0,eI.jsx)("option",{value:"female",children:"\uc5ec\uc131"})]})]}),(0,eI.jsx)("button",{className:"form-button",onClick:b,children:"\uc800\uc7a5"}),(0,eI.jsx)("button",{className:"form-button secondary",onClick:Z,children:"\ub2e4\ub978\ud559\uc0dd \ucd94\uac00\ud558\uae30"})]})})},Yb="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAJNJREFUSEvFlUEOwCAIBNen9WVtf9anNSSSEKMV2qV68aIzoAEKkldJ5sMrOGogurvj8ggEulfiCSAkmQksXBwbgMsdPvD4RJ/hEsgoAwp8JKDBewIqvBXQ4VaQAldBGvw3gYjSsrB1kCJpC40u6VUyVbKkVWizpGSytF33MqEPHCvReonMG/dMDkHt4dkfvAbrxRvnNSYZuwlEMQAAAABJRU5ErkJggg==",Hb=["_id"];var wb=function(){var e=r((0,g.useState)({_id:tg(),name:"",phone:"",email:"",campus:""}),2),t=e[0],n=e[1],I=r((0,g.useState)(!1),2),C=I[0],l=I[1];(0,g.useEffect)((function(){n({_id:tg(),name:ng(),phone:Ig(),email:lg(),campus:Cg()})}),[]);var a=function(){var e=sg(cg().mark((function e(){var g,n,I,C;return cg().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),t._id,g=bn(t,Hb),e.next=4,fetch("".concat("https://palbackend-a8f4e5171ddb.herokuapp.com","/api/users/parent/").concat(t._id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(g)});case 4:if(n=e.sent,l(!1),!n.ok){e.next=14;break}return _n.success("Parent updated successfully"),e.next=10,n.json();case 10:I=e.sent,localStorage.setItem("user",JSON.stringify(I)),e.next=18;break;case 14:return e.next=16,n.json();case 16:C=e.sent,_n.error("Failed to update parent: "+C.message);case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,eI.jsxs)("div",{className:"container",children:[(0,eI.jsx)("div",{className:"top-left-arrow",children:(0,eI.jsx)(Le,{to:"/parent",children:(0,eI.jsx)("img",{src:Yb,alt:"Back to Parent Page"})})}),(0,eI.jsxs)("div",{className:"edit-parent",children:[(0,eI.jsx)("h3",{children:"\ub0b4 \uc815\ubcf4"}),(0,eI.jsxs)("div",{className:"input-group",children:[(0,eI.jsx)("label",{children:"\ud559\ubd80\ubaa8\uc774\ub984:"}),(0,eI.jsx)("input",{value:t.name,onChange:function(e){return n(rg(rg({},t),{},{name:e.target.value}))}}),(0,eI.jsx)("label",{children:"\uc804\ud654\ubc88\ud638:"}),(0,eI.jsx)("input",{value:t.phone,onChange:function(e){return n(rg(rg({},t),{},{phone:e.target.value}))}}),(0,eI.jsx)("label",{children:"\uc774\uba54\uc77c:"}),(0,eI.jsx)("input",{value:t.email,onChange:function(e){return n(rg(rg({},t),{},{email:e.target.value}))}}),(0,eI.jsx)("label",{children:"\ucea0\ud37c\uc2a4:"}),(0,eI.jsx)("p",{children:t.campus})]}),(0,eI.jsx)("div",{className:"actions",children:(0,eI.jsx)("button",{className:"save-button",onClick:a,disabled:C,children:C?"\uc800\uc7a5...":"\uc800\uc7a5"})})]})]})};function Nb(e,g){return g||(g=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(g)}}))}function Kb(e){var g,t,n="";if("string"==typeof e||"number"==typeof e)n+=e;else if("object"==typeof e)if(Array.isArray(e))for(g=0;g<e.length;g++)e[g]&&(t=Kb(e[g]))&&(n&&(n+=" "),n+=t);else for(g in e)e[g]&&(n&&(n+=" "),n+=g);return n}var Fb=function(){for(var e,g,t=0,n="";t<arguments.length;)(e=arguments[t++])&&(g=Kb(e))&&(n&&(n+=" "),n+=g);return n};var xb=!!n.useInsertionEffect&&n.useInsertionEffect,Eb=xb||function(e){return e()};xb||g.useLayoutEffect;var zb={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Mb=/[A-Z]|^ms/g,Ub=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Db=function(e){return 45===e.charCodeAt(1)},Qb=function(e){return null!=e&&"boolean"!==typeof e},Lb=VI((function(e){return Db(e)?e:e.replace(Mb,"-$&").toLowerCase()})),Tb=function(e,g){switch(e){case"animation":case"animationName":if("string"===typeof g)return g.replace(Ub,(function(e,g,t){return Ob={name:g,styles:t,next:Ob},g}))}return 1===zb[e]||Db(e)||"number"!==typeof g||0===g?g:g+"px"};function jb(e,g,t){if(null==t)return"";if(void 0!==t.__emotion_styles)return t;switch(typeof t){case"boolean":return"";case"object":if(1===t.anim)return Ob={name:t.name,styles:t.styles,next:Ob},t.name;if(void 0!==t.styles){var n=t.next;if(void 0!==n)for(;void 0!==n;)Ob={name:n.name,styles:n.styles,next:Ob},n=n.next;return t.styles+";"}return function(e,g,t){var n="";if(Array.isArray(t))for(var I=0;I<t.length;I++)n+=jb(e,g,t[I])+";";else for(var C in t){var l=t[C];if("object"!==typeof l)null!=g&&void 0!==g[l]?n+=C+"{"+g[l]+"}":Qb(l)&&(n+=Lb(C)+":"+Tb(C,l)+";");else if(!Array.isArray(l)||"string"!==typeof l[0]||null!=g&&void 0!==g[l[0]]){var a=jb(e,g,l);switch(C){case"animation":case"animationName":n+=Lb(C)+":"+a+";";break;default:n+=C+"{"+a+"}"}}else for(var o=0;o<l.length;o++)Qb(l[o])&&(n+=Lb(C)+":"+Tb(C,l[o])+";")}return n}(e,g,t);case"function":if(void 0!==e){var I=Ob,C=t(e);return Ob=I,jb(e,g,C)}}if(null==g)return t;var l=g[t];return void 0!==l?l:t}var Ob,Pb=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var _b=function(e,g,t){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var n=!0,I="";Ob=void 0;var C=e[0];null==C||void 0===C.raw?(n=!1,I+=jb(t,g,C)):I+=C[0];for(var l=1;l<e.length;l++)I+=jb(t,g,e[l]),n&&(I+=C[l]);Pb.lastIndex=0;for(var a,o="";null!==(a=Pb.exec(I));)o+="-"+a[1];var r=function(e){for(var g,t=0,n=0,I=e.length;I>=4;++n,I-=4)g=1540483477*(65535&(g=255&e.charCodeAt(n)|(255&e.charCodeAt(++n))<<8|(255&e.charCodeAt(++n))<<16|(255&e.charCodeAt(++n))<<24))+(59797*(g>>>16)<<16),t=1540483477*(65535&(g^=g>>>24))+(59797*(g>>>16)<<16)^1540483477*(65535&t)+(59797*(t>>>16)<<16);switch(I){case 3:t^=(255&e.charCodeAt(n+2))<<16;case 2:t^=(255&e.charCodeAt(n+1))<<8;case 1:t=1540483477*(65535&(t^=255&e.charCodeAt(n)))+(59797*(t>>>16)<<16)}return(((t=1540483477*(65535&(t^=t>>>13))+(59797*(t>>>16)<<16))^t>>>15)>>>0).toString(36)}(I)+o;return{name:r,styles:I,next:Ob}};var qb=function(){function e(e){var g=this;this._insertTag=function(e){var t;t=0===g.tags.length?g.insertionPoint?g.insertionPoint.nextSibling:g.prepend?g.container.firstChild:g.before:g.tags[g.tags.length-1].nextSibling,g.container.insertBefore(e,t),g.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var g=e.prototype;return g.hydrate=function(e){e.forEach(this._insertTag)},g.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var g=document.createElement("style");return g.setAttribute("data-emotion",e.key),void 0!==e.nonce&&g.setAttribute("nonce",e.nonce),g.appendChild(document.createTextNode("")),g.setAttribute("data-s",""),g}(this));var g=this.tags[this.tags.length-1];if(this.isSpeedy){var t=function(e){if(e.sheet)return e.sheet;for(var g=0;g<document.styleSheets.length;g++)if(document.styleSheets[g].ownerNode===e)return document.styleSheets[g]}(g);try{t.insertRule(e,t.cssRules.length)}catch(Oe){0}}else g.appendChild(document.createTextNode(e));this.ctr++},g.flush=function(){this.tags.forEach((function(e){return e.parentNode&&e.parentNode.removeChild(e)})),this.tags=[],this.ctr=0},e}(),$b=Math.abs,eZ=String.fromCharCode,gZ=Object.assign;function tZ(e){return e.trim()}function nZ(e,g,t){return e.replace(g,t)}function IZ(e,g){return e.indexOf(g)}function CZ(e,g){return 0|e.charCodeAt(g)}function lZ(e,g,t){return e.slice(g,t)}function aZ(e){return e.length}function oZ(e){return e.length}function rZ(e,g){return g.push(e),e}var cZ=1,iZ=1,sZ=0,AZ=0,dZ=0,uZ="";function mZ(e,g,t,n,I,C,l){return{value:e,root:g,parent:t,type:n,props:I,children:C,line:cZ,column:iZ,length:l,return:""}}function bZ(e,g){return gZ(mZ("",null,null,"",null,null,0),e,{length:-e.length},g)}function ZZ(){return dZ=AZ>0?CZ(uZ,--AZ):0,iZ--,10===dZ&&(iZ=1,cZ--),dZ}function hZ(){return dZ=AZ<sZ?CZ(uZ,AZ++):0,iZ++,10===dZ&&(iZ=1,cZ++),dZ}function pZ(){return CZ(uZ,AZ)}function GZ(){return AZ}function yZ(e,g){return lZ(uZ,e,g)}function BZ(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function fZ(e){return cZ=iZ=1,sZ=aZ(uZ=e),AZ=0,[]}function SZ(e){return uZ="",e}function vZ(e){return tZ(yZ(AZ-1,RZ(91===e?e+2:40===e?e+1:e)))}function WZ(e){for(;(dZ=pZ())&&dZ<33;)hZ();return BZ(e)>2||BZ(dZ)>3?"":" "}function VZ(e,g){for(;--g&&hZ()&&!(dZ<48||dZ>102||dZ>57&&dZ<65||dZ>70&&dZ<97););return yZ(e,GZ()+(g<6&&32==pZ()&&32==hZ()))}function RZ(e){for(;hZ();)switch(dZ){case e:return AZ;case 34:case 39:34!==e&&39!==e&&RZ(dZ);break;case 40:41===e&&RZ(e);break;case 92:hZ()}return AZ}function kZ(e,g){for(;hZ()&&e+dZ!==57&&(e+dZ!==84||47!==pZ()););return"/*"+yZ(g,AZ-1)+"*"+eZ(47===e?e:hZ())}function XZ(e){for(;!BZ(pZ());)hZ();return yZ(e,AZ)}var JZ="-ms-",YZ="-moz-",HZ="-webkit-",wZ="comm",NZ="rule",KZ="decl",FZ="@keyframes";function xZ(e,g){for(var t="",n=oZ(e),I=0;I<n;I++)t+=g(e[I],I,e,g)||"";return t}function EZ(e,g,t,n){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case KZ:return e.return=e.return||e.value;case wZ:return"";case FZ:return e.return=e.value+"{"+xZ(e.children,n)+"}";case NZ:e.value=e.props.join(",")}return aZ(t=xZ(e.children,n))?e.return=e.value+"{"+t+"}":""}function zZ(e){return SZ(MZ("",null,null,null,[""],e=fZ(e),0,[0],e))}function MZ(e,g,t,n,I,C,l,a,o){for(var r=0,c=0,i=l,s=0,A=0,d=0,u=1,m=1,b=1,Z=0,h="",p=I,G=C,y=n,B=h;m;)switch(d=Z,Z=hZ()){case 40:if(108!=d&&58==CZ(B,i-1)){-1!=IZ(B+=nZ(vZ(Z),"&","&\f"),"&\f")&&(b=-1);break}case 34:case 39:case 91:B+=vZ(Z);break;case 9:case 10:case 13:case 32:B+=WZ(d);break;case 92:B+=VZ(GZ()-1,7);continue;case 47:switch(pZ()){case 42:case 47:rZ(DZ(kZ(hZ(),GZ()),g,t),o);break;default:B+="/"}break;case 123*u:a[r++]=aZ(B)*b;case 125*u:case 59:case 0:switch(Z){case 0:case 125:m=0;case 59+c:-1==b&&(B=nZ(B,/\f/g,"")),A>0&&aZ(B)-i&&rZ(A>32?QZ(B+";",n,t,i-1):QZ(nZ(B," ","")+";",n,t,i-2),o);break;case 59:B+=";";default:if(rZ(y=UZ(B,g,t,r,c,I,a,h,p=[],G=[],i),C),123===Z)if(0===c)MZ(B,g,y,y,p,C,i,a,G);else switch(99===s&&110===CZ(B,3)?100:s){case 100:case 108:case 109:case 115:MZ(e,y,y,n&&rZ(UZ(e,y,y,0,0,I,a,h,I,p=[],i),G),I,G,i,a,n?p:G);break;default:MZ(B,y,y,y,[""],G,0,a,G)}}r=c=A=0,u=b=1,h=B="",i=l;break;case 58:i=1+aZ(B),A=d;default:if(u<1)if(123==Z)--u;else if(125==Z&&0==u++&&125==ZZ())continue;switch(B+=eZ(Z),Z*u){case 38:b=c>0?1:(B+="\f",-1);break;case 44:a[r++]=(aZ(B)-1)*b,b=1;break;case 64:45===pZ()&&(B+=vZ(hZ())),s=pZ(),c=i=aZ(h=B+=XZ(GZ())),Z++;break;case 45:45===d&&2==aZ(B)&&(u=0)}}return C}function UZ(e,g,t,n,I,C,l,a,o,r,c){for(var i=I-1,s=0===I?C:[""],A=oZ(s),d=0,u=0,m=0;d<n;++d)for(var b=0,Z=lZ(e,i+1,i=$b(u=l[d])),h=e;b<A;++b)(h=tZ(u>0?s[b]+" "+Z:nZ(Z,/&\f/g,s[b])))&&(o[m++]=h);return mZ(e,g,t,0===I?NZ:a,o,r,c)}function DZ(e,g,t){return mZ(e,g,t,wZ,eZ(dZ),lZ(e,2,-2),0)}function QZ(e,g,t,n){return mZ(e,g,t,KZ,lZ(e,0,n),lZ(e,n+1,-1),n)}var LZ=function(e,g,t){for(var n=0,I=0;n=I,I=pZ(),38===n&&12===I&&(g[t]=1),!BZ(I);)hZ();return yZ(e,AZ)},TZ=function(e,g){return SZ(function(e,g){var t=-1,n=44;do{switch(BZ(n)){case 0:38===n&&12===pZ()&&(g[t]=1),e[t]+=LZ(AZ-1,g,t);break;case 2:e[t]+=vZ(n);break;case 4:if(44===n){e[++t]=58===pZ()?"&\f":"",g[t]=e[t].length;break}default:e[t]+=eZ(n)}}while(n=hZ());return e}(fZ(e),g))},jZ=new WeakMap,OZ=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var g=e.value,t=e.parent,n=e.column===t.column&&e.line===t.line;"rule"!==t.type;)if(!(t=t.parent))return;if((1!==e.props.length||58===g.charCodeAt(0)||jZ.get(t))&&!n){jZ.set(e,!0);for(var I=[],C=TZ(g,I),l=t.props,a=0,o=0;a<C.length;a++)for(var r=0;r<l.length;r++,o++)e.props[o]=I[a]?C[a].replace(/&\f/g,l[r]):l[r]+" "+C[a]}}},PZ=function(e){if("decl"===e.type){var g=e.value;108===g.charCodeAt(0)&&98===g.charCodeAt(2)&&(e.return="",e.value="")}};function _Z(e,g){switch(function(e,g){return 45^CZ(e,0)?(((g<<2^CZ(e,0))<<2^CZ(e,1))<<2^CZ(e,2))<<2^CZ(e,3):0}(e,g)){case 5103:return HZ+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return HZ+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return HZ+e+YZ+e+JZ+e+e;case 6828:case 4268:return HZ+e+JZ+e+e;case 6165:return HZ+e+JZ+"flex-"+e+e;case 5187:return HZ+e+nZ(e,/(\w+).+(:[^]+)/,HZ+"box-$1$2"+JZ+"flex-$1$2")+e;case 5443:return HZ+e+JZ+"flex-item-"+nZ(e,/flex-|-self/,"")+e;case 4675:return HZ+e+JZ+"flex-line-pack"+nZ(e,/align-content|flex-|-self/,"")+e;case 5548:return HZ+e+JZ+nZ(e,"shrink","negative")+e;case 5292:return HZ+e+JZ+nZ(e,"basis","preferred-size")+e;case 6060:return HZ+"box-"+nZ(e,"-grow","")+HZ+e+JZ+nZ(e,"grow","positive")+e;case 4554:return HZ+nZ(e,/([^-])(transform)/g,"$1"+HZ+"$2")+e;case 6187:return nZ(nZ(nZ(e,/(zoom-|grab)/,HZ+"$1"),/(image-set)/,HZ+"$1"),e,"")+e;case 5495:case 3959:return nZ(e,/(image-set\([^]*)/,HZ+"$1$`$1");case 4968:return nZ(nZ(e,/(.+:)(flex-)?(.*)/,HZ+"box-pack:$3"+JZ+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+HZ+e+e;case 4095:case 3583:case 4068:case 2532:return nZ(e,/(.+)-inline(.+)/,HZ+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(aZ(e)-1-g>6)switch(CZ(e,g+1)){case 109:if(45!==CZ(e,g+4))break;case 102:return nZ(e,/(.+:)(.+)-([^]+)/,"$1"+HZ+"$2-$3$1"+YZ+(108==CZ(e,g+3)?"$3":"$2-$3"))+e;case 115:return~IZ(e,"stretch")?_Z(nZ(e,"stretch","fill-available"),g)+e:e}break;case 4949:if(115!==CZ(e,g+1))break;case 6444:switch(CZ(e,aZ(e)-3-(~IZ(e,"!important")&&10))){case 107:return nZ(e,":",":"+HZ)+e;case 101:return nZ(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+HZ+(45===CZ(e,14)?"inline-":"")+"box$3$1"+HZ+"$2$3$1"+JZ+"$2box$3")+e}break;case 5936:switch(CZ(e,g+11)){case 114:return HZ+e+JZ+nZ(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return HZ+e+JZ+nZ(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return HZ+e+JZ+nZ(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return HZ+e+JZ+e+e}return e}var qZ=[function(e,g,t,n){if(e.length>-1&&!e.return)switch(e.type){case KZ:e.return=_Z(e.value,e.length);break;case FZ:return xZ([bZ(e,{value:nZ(e.value,"@","@"+HZ)})],n);case NZ:if(e.length)return function(e,g){return e.map(g).join("")}(e.props,(function(g){switch(function(e,g){return(e=g.exec(e))?e[0]:e}(g,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return xZ([bZ(e,{props:[nZ(g,/:(read-\w+)/,":-moz-$1")]})],n);case"::placeholder":return xZ([bZ(e,{props:[nZ(g,/:(plac\w+)/,":"+HZ+"input-$1")]}),bZ(e,{props:[nZ(g,/:(plac\w+)/,":-moz-$1")]}),bZ(e,{props:[nZ(g,/:(plac\w+)/,JZ+"input-$1")]})],n)}return""}))}}],$Z=function(e){var g=e.key;if("css"===g){var t=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(t,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var n=e.stylisPlugins||qZ;var I,C,l={},a=[];I=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+g+' "]'),(function(e){for(var g=e.getAttribute("data-emotion").split(" "),t=1;t<g.length;t++)l[g[t]]=!0;a.push(e)}));var o,r,c=[EZ,(r=function(e){o.insert(e)},function(e){e.root||(e=e.return)&&r(e)})],i=function(e){var g=oZ(e);return function(t,n,I,C){for(var l="",a=0;a<g;a++)l+=e[a](t,n,I,C)||"";return l}}([OZ,PZ].concat(n,c));C=function(e,g,t,n){o=t,function(e){xZ(zZ(e),i)}(e?e+"{"+g.styles+"}":g.styles),n&&(s.inserted[g.name]=!0)};var s={key:g,sheet:new qb({key:g,container:I,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:l,registered:{},insert:C};return s.sheet.hydrate(a),s};function eh(){for(var e=arguments.length,g=new Array(e),t=0;t<e;t++)g[t]=arguments[t];return _b(g)}var gh=function(){var e=eh.apply(void 0,arguments),g="animation-"+e.name;return{name:g,styles:"@keyframes "+g+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};function th(e){for(var g="https://mui.com/production-error/?code="+e,t=1;t<arguments.length;t+=1)g+="&args[]="+encodeURIComponent(arguments[t]);return"Minified MUI error #"+e+"; visit "+g+" for the full message."}function nh(e){if("string"!==typeof e)throw new Error(th(7));return e.charAt(0).toUpperCase()+e.slice(1)}var Ih=nh;function Ch(e,g){var t=Hl({},g);return Object.keys(e).forEach((function(n){if(n.toString().match(/^(components|slots)$/))t[n]=Hl({},e[n],t[n]);else if(n.toString().match(/^(componentsProps|slotProps)$/)){var I=e[n]||{},C=g[n];t[n]={},C&&Object.keys(C)?I&&Object.keys(I)?(t[n]=Hl({},C),Object.keys(I).forEach((function(e){t[n][e]=Ch(I[e],C[e])}))):t[n]=C:t[n]=I}else void 0===t[n]&&(t[n]=e[n])})),t}function lh(e){var g=e.theme,t=e.name,n=e.props;return g&&g.components&&g.components[t]&&g.components[t].defaultProps?Ch(g.components[t].defaultProps,n):n}function ah(e){return null!==e&&"object"===typeof e&&e.constructor===Object}function oh(e){if(!ah(e))return e;var g={};return Object.keys(e).forEach((function(t){g[t]=oh(e[t])})),g}function rh(e,g){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0},n=t.clone?Hl({},e):e;return ah(e)&&ah(g)&&Object.keys(g).forEach((function(I){"__proto__"!==I&&(ah(g[I])&&I in e&&ah(e[I])?n[I]=rh(e[I],g[I],t):t.clone?n[I]=ah(g[I])?oh(g[I]):g[I]:n[I]=g[I])})),n}var ch=["values","unit","step"],ih=function(e){var g=Object.keys(e).map((function(g){return{key:g,val:e[g]}}))||[];return g.sort((function(e,g){return e.val-g.val})),g.reduce((function(e,g){return Hl({},e,ag({},g.key,g.val))}),{})};var sh={borderRadius:4},Ah={xs:0,sm:600,md:900,lg:1200,xl:1536},dh={keys:["xs","sm","md","lg","xl"],up:function(e){return"@media (min-width:".concat(Ah[e],"px)")}};function uh(e,g,t){var n=e.theme||{};if(Array.isArray(g)){var I=n.breakpoints||dh;return g.reduce((function(e,n,C){return e[I.up(I.keys[C])]=t(g[C]),e}),{})}if("object"===typeof g){var C=n.breakpoints||dh;return Object.keys(g).reduce((function(e,n){if(-1!==Object.keys(C.values||Ah).indexOf(n)){e[C.up(n)]=t(g[n],n)}else{var I=n;e[I]=g[I]}return e}),{})}return t(g)}function mh(){var e,g=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(null==(e=g.keys)?void 0:e.reduce((function(e,t){return e[g.up(t)]={},e}),{}))||{}}function bh(e,g){return e.reduce((function(e,g){var t=e[g];return(!t||0===Object.keys(t).length)&&delete e[g],e}),g)}function Zh(e,g){var t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!g||"string"!==typeof g)return null;if(e&&e.vars&&t){var n="vars.".concat(g).split(".").reduce((function(e,g){return e&&e[g]?e[g]:null}),e);if(null!=n)return n}return g.split(".").reduce((function(e,g){return e&&null!=e[g]?e[g]:null}),e)}function hh(e,g,t){var n,I=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t;return n="function"===typeof e?e(t):Array.isArray(e)?e[t]||I:Zh(e,t)||I,g&&(n=g(n,I,e)),n}var ph=function(e){var g=e.prop,t=e.cssProperty,n=void 0===t?e.prop:t,I=e.themeKey,C=e.transform,l=function(e){if(null==e[g])return null;var t=e[g],l=Zh(e.theme,I)||{};return uh(e,t,(function(e){var t=hh(l,C,e);return e===t&&"string"===typeof e&&(t=hh(l,C,"".concat(g).concat("default"===e?"":nh(e)),e)),!1===n?t:ag({},n,t)}))};return l.propTypes={},l.filterProps=[g],l};var Gh=function(e,g){return g?rh(e,g,{clone:!1}):e};var yh={m:"margin",p:"padding"},Bh={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},fh={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},Sh=function(e){var g={};return function(t){return void 0===g[t]&&(g[t]=e(t)),g[t]}}((function(e){if(e.length>2){if(!fh[e])return[e];e=fh[e]}var g=r(e.split(""),2),t=g[0],n=g[1],I=yh[t],C=Bh[n]||"";return Array.isArray(C)?C.map((function(e){return I+e})):[I+C]})),vh=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],Wh=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],Vh=[].concat(vh,Wh);function Rh(e,g,t,n){var I,C=null!=(I=Zh(e,g,!1))?I:t;return"number"===typeof C?function(e){return"string"===typeof e?e:C*e}:Array.isArray(C)?function(e){return"string"===typeof e?e:C[e]}:"function"===typeof C?C:function(){}}function kh(e){return Rh(e,"spacing",8)}function Xh(e,g){if("string"===typeof g||null==g)return g;var t=e(Math.abs(g));return g>=0?t:"number"===typeof t?-t:"-".concat(t)}function Jh(e,g,t,n){if(-1===g.indexOf(t))return null;var I=function(e,g){return function(t){return e.reduce((function(e,n){return e[n]=Xh(g,t),e}),{})}}(Sh(t),n);return uh(e,e[t],I)}function Yh(e,g){var t=kh(e.theme);return Object.keys(e).map((function(n){return Jh(e,g,n,t)})).reduce(Gh,{})}function Hh(e){return Yh(e,vh)}function wh(e){return Yh(e,Wh)}function Nh(e){return Yh(e,Vh)}Hh.propTypes={},Hh.filterProps=vh,wh.propTypes={},wh.filterProps=Wh,Nh.propTypes={},Nh.filterProps=Vh;var Kh=function(){for(var e=arguments.length,g=new Array(e),t=0;t<e;t++)g[t]=arguments[t];var n=g.reduce((function(e,g){return g.filterProps.forEach((function(t){e[t]=g})),e}),{}),I=function(e){return Object.keys(e).reduce((function(g,t){return n[t]?Gh(g,n[t](e)):g}),{})};return I.propTypes={},I.filterProps=g.reduce((function(e,g){return e.concat(g.filterProps)}),[]),I};function Fh(e){return"number"!==typeof e?e:"".concat(e,"px solid")}var xh=ph({prop:"border",themeKey:"borders",transform:Fh}),Eh=ph({prop:"borderTop",themeKey:"borders",transform:Fh}),zh=ph({prop:"borderRight",themeKey:"borders",transform:Fh}),Mh=ph({prop:"borderBottom",themeKey:"borders",transform:Fh}),Uh=ph({prop:"borderLeft",themeKey:"borders",transform:Fh}),Dh=ph({prop:"borderColor",themeKey:"palette"}),Qh=ph({prop:"borderTopColor",themeKey:"palette"}),Lh=ph({prop:"borderRightColor",themeKey:"palette"}),Th=ph({prop:"borderBottomColor",themeKey:"palette"}),jh=ph({prop:"borderLeftColor",themeKey:"palette"}),Oh=function(e){if(void 0!==e.borderRadius&&null!==e.borderRadius){var g=Rh(e.theme,"shape.borderRadius",4);return uh(e,e.borderRadius,(function(e){return{borderRadius:Xh(g,e)}}))}return null};Oh.propTypes={},Oh.filterProps=["borderRadius"];Kh(xh,Eh,zh,Mh,Uh,Dh,Qh,Lh,Th,jh,Oh);var Ph=function(e){if(void 0!==e.gap&&null!==e.gap){var g=Rh(e.theme,"spacing",8);return uh(e,e.gap,(function(e){return{gap:Xh(g,e)}}))}return null};Ph.propTypes={},Ph.filterProps=["gap"];var _h=function(e){if(void 0!==e.columnGap&&null!==e.columnGap){var g=Rh(e.theme,"spacing",8);return uh(e,e.columnGap,(function(e){return{columnGap:Xh(g,e)}}))}return null};_h.propTypes={},_h.filterProps=["columnGap"];var qh=function(e){if(void 0!==e.rowGap&&null!==e.rowGap){var g=Rh(e.theme,"spacing",8);return uh(e,e.rowGap,(function(e){return{rowGap:Xh(g,e)}}))}return null};qh.propTypes={},qh.filterProps=["rowGap"];Kh(Ph,_h,qh,ph({prop:"gridColumn"}),ph({prop:"gridRow"}),ph({prop:"gridAutoFlow"}),ph({prop:"gridAutoColumns"}),ph({prop:"gridAutoRows"}),ph({prop:"gridTemplateColumns"}),ph({prop:"gridTemplateRows"}),ph({prop:"gridTemplateAreas"}),ph({prop:"gridArea"}));function $h(e,g){return"grey"===g?g:e}Kh(ph({prop:"color",themeKey:"palette",transform:$h}),ph({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:$h}),ph({prop:"backgroundColor",themeKey:"palette",transform:$h}));function ep(e){return e<=1&&0!==e?"".concat(100*e,"%"):e}var gp=ph({prop:"width",transform:ep}),tp=function(e){if(void 0!==e.maxWidth&&null!==e.maxWidth){return uh(e,e.maxWidth,(function(g){var t;return{maxWidth:(null==(t=e.theme)||null==(t=t.breakpoints)||null==(t=t.values)?void 0:t[g])||Ah[g]||ep(g)}}))}return null};tp.filterProps=["maxWidth"];var np=ph({prop:"minWidth",transform:ep}),Ip=ph({prop:"height",transform:ep}),Cp=ph({prop:"maxHeight",transform:ep}),lp=ph({prop:"minHeight",transform:ep}),ap=(ph({prop:"size",cssProperty:"width",transform:ep}),ph({prop:"size",cssProperty:"height",transform:ep}),Kh(gp,tp,np,Ip,Cp,lp,ph({prop:"boxSizing"})),{border:{themeKey:"borders",transform:Fh},borderTop:{themeKey:"borders",transform:Fh},borderRight:{themeKey:"borders",transform:Fh},borderBottom:{themeKey:"borders",transform:Fh},borderLeft:{themeKey:"borders",transform:Fh},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:Oh},color:{themeKey:"palette",transform:$h},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:$h},backgroundColor:{themeKey:"palette",transform:$h},p:{style:wh},pt:{style:wh},pr:{style:wh},pb:{style:wh},pl:{style:wh},px:{style:wh},py:{style:wh},padding:{style:wh},paddingTop:{style:wh},paddingRight:{style:wh},paddingBottom:{style:wh},paddingLeft:{style:wh},paddingX:{style:wh},paddingY:{style:wh},paddingInline:{style:wh},paddingInlineStart:{style:wh},paddingInlineEnd:{style:wh},paddingBlock:{style:wh},paddingBlockStart:{style:wh},paddingBlockEnd:{style:wh},m:{style:Hh},mt:{style:Hh},mr:{style:Hh},mb:{style:Hh},ml:{style:Hh},mx:{style:Hh},my:{style:Hh},margin:{style:Hh},marginTop:{style:Hh},marginRight:{style:Hh},marginBottom:{style:Hh},marginLeft:{style:Hh},marginX:{style:Hh},marginY:{style:Hh},marginInline:{style:Hh},marginInlineStart:{style:Hh},marginInlineEnd:{style:Hh},marginBlock:{style:Hh},marginBlockStart:{style:Hh},marginBlockEnd:{style:Hh},displayPrint:{cssProperty:!1,transform:function(e){return{"@media print":{display:e}}}},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:Ph},rowGap:{style:qh},columnGap:{style:_h},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:ep},maxWidth:{style:tp},minWidth:{transform:ep},height:{transform:ep},maxHeight:{transform:ep},minHeight:{transform:ep},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}});var op=function(){function e(e,g,t,n){var I,C=(ag(I={},e,g),ag(I,"theme",t),I),l=n[e];if(!l)return ag({},e,g);var a=l.cssProperty,o=void 0===a?e:a,r=l.themeKey,c=l.transform,i=l.style;if(null==g)return null;if("typography"===r&&"inherit"===g)return ag({},e,g);var s=Zh(t,r)||{};if(i)return i(C);return uh(C,g,(function(g){var t=hh(s,c,g);return g===t&&"string"===typeof g&&(t=hh(s,c,"".concat(e).concat("default"===g?"":nh(g)),g)),!1===o?t:ag({},o,t)}))}return function g(t){var n,I=t||{},C=I.sx,l=I.theme,a=void 0===l?{}:l;if(!C)return null;var o=null!=(n=a.unstable_sxConfig)?n:ap;function r(t){var n=t;if("function"===typeof t)n=t(a);else if("object"!==typeof t)return t;if(!n)return null;var I=mh(a.breakpoints),C=Object.keys(I),l=I;return Object.keys(n).forEach((function(t){var I,C,r=(I=n[t],C=a,"function"===typeof I?I(C):I);if(null!==r&&void 0!==r)if("object"===typeof r)if(o[t])l=Gh(l,e(t,r,a,o));else{var c=uh({theme:a},r,(function(e){return ag({},t,e)}));!function(){for(var e=arguments.length,g=new Array(e),t=0;t<e;t++)g[t]=arguments[t];var n=g.reduce((function(e,g){return e.concat(Object.keys(g))}),[]),I=new Set(n);return g.every((function(e){return I.size===Object.keys(e).length}))}(c,r)?l=Gh(l,c):l[t]=g({sx:r,theme:a})}else l=Gh(l,e(t,r,a,o))})),bh(C,l)}return Array.isArray(C)?C.map(r):r(C)}}();op.filterProps=["sx"];var rp=op,cp=["breakpoints","palette","spacing","shape"];var ip=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},g=e.breakpoints,t=void 0===g?{}:g,n=e.palette,I=void 0===n?{}:n,C=e.spacing,l=e.shape,a=void 0===l?{}:l,o=mn(e,cp),r=function(e){var g=e.values,t=void 0===g?{xs:0,sm:600,md:900,lg:1200,xl:1536}:g,n=e.unit,I=void 0===n?"px":n,C=e.step,l=void 0===C?5:C,a=mn(e,ch),o=ih(t),r=Object.keys(o);function c(e){var g="number"===typeof t[e]?t[e]:e;return"@media (min-width:".concat(g).concat(I,")")}function i(e){var g="number"===typeof t[e]?t[e]:e;return"@media (max-width:".concat(g-l/100).concat(I,")")}function s(e,g){var n=r.indexOf(g);return"@media (min-width:".concat("number"===typeof t[e]?t[e]:e).concat(I,") and ")+"(max-width:".concat((-1!==n&&"number"===typeof t[r[n]]?t[r[n]]:g)-l/100).concat(I,")")}return Hl({keys:r,values:o,up:c,down:i,between:s,only:function(e){return r.indexOf(e)+1<r.length?s(e,r[r.indexOf(e)+1]):c(e)},not:function(e){var g=r.indexOf(e);return 0===g?c(r[1]):g===r.length-1?i(r[g]):s(e,r[r.indexOf(e)+1]).replace("@media","@media not all and")},unit:I},a)}(t),c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(e.mui)return e;var g=kh({spacing:e}),t=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0===t.length?[1]:t).map((function(e){var t=g(e);return"number"===typeof t?"".concat(t,"px"):t})).join(" ")};return t.mui=!0,t}(C),i=rh({breakpoints:r,direction:"ltr",components:{},palette:Hl({mode:"light"},I),spacing:c,shape:Hl({},sh,a)},o),s=arguments.length,A=new Array(s>1?s-1:0),d=1;d<s;d++)A[d-1]=arguments[d];return(i=A.reduce((function(e,g){return rh(e,g)}),i)).unstable_sxConfig=Hl({},ap,null==o?void 0:o.unstable_sxConfig),i.unstable_sx=function(e){return rp({sx:e,theme:this})},i},sp=g.createContext("undefined"!==typeof HTMLElement?$Z({key:"css"}):null);sp.Provider;var Ap=function(e){return(0,g.forwardRef)((function(t,n){var I=(0,g.useContext)(sp);return e(t,I,n)}))};var dp=g.createContext({});var up=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=g.useContext(dp);return n&&(e=n,0!==Object.keys(e).length)?n:t},mp=ip();var bp=function(){return up(arguments.length>0&&void 0!==arguments[0]?arguments[0]:mp)};function Zp(e,g){var t;return Hl({toolbar:(t={minHeight:56},ag(t,e.up("xs"),{"@media (orientation: landscape)":{minHeight:48}}),ag(t,e.up("sm"),{minHeight:64}),t)},g)}function hp(e){var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(g,e),t)}function pp(e){if(e.type)return e;if("#"===e.charAt(0))return pp(function(e){e=e.slice(1);var g=new RegExp(".{1,".concat(e.length>=6?2:1,"}"),"g"),t=e.match(g);return t&&1===t[0].length&&(t=t.map((function(e){return e+e}))),t?"rgb".concat(4===t.length?"a":"","(").concat(t.map((function(e,g){return g<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3})).join(", "),")"):""}(e));var g=e.indexOf("("),t=e.substring(0,g);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(t))throw new Error(th(9,e));var n,I=e.substring(g+1,e.length-1);if("color"===t){if(n=(I=I.split(" ")).shift(),4===I.length&&"/"===I[3].charAt(0)&&(I[3]=I[3].slice(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(n))throw new Error(th(10,n))}else I=I.split(",");return{type:t,values:I=I.map((function(e){return parseFloat(e)})),colorSpace:n}}function Gp(e){var g=e.type,t=e.colorSpace,n=e.values;return-1!==g.indexOf("rgb")?n=n.map((function(e,g){return g<3?parseInt(e,10):e})):-1!==g.indexOf("hsl")&&(n[1]="".concat(n[1],"%"),n[2]="".concat(n[2],"%")),n=-1!==g.indexOf("color")?"".concat(t," ").concat(n.join(" ")):"".concat(n.join(", ")),"".concat(g,"(").concat(n,")")}function yp(e){var g="hsl"===(e=pp(e)).type||"hsla"===e.type?pp(function(e){var g=(e=pp(e)).values,t=g[0],n=g[1]/100,I=g[2]/100,C=n*Math.min(I,1-I),l=function(e){var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+t/30)%12;return I-C*Math.max(Math.min(g-3,9-g,1),-1)},a="rgb",o=[Math.round(255*l(0)),Math.round(255*l(8)),Math.round(255*l(4))];return"hsla"===e.type&&(a+="a",o.push(g[3])),Gp({type:a,values:o})}(e)).values:e.values;return g=g.map((function(g){return"color"!==e.type&&(g/=255),g<=.03928?g/12.92:Math.pow((g+.055)/1.055,2.4)})),Number((.2126*g[0]+.7152*g[1]+.0722*g[2]).toFixed(3))}function Bp(e,g){if(e=pp(e),g=hp(g),-1!==e.type.indexOf("hsl"))e.values[2]*=1-g;else if(-1!==e.type.indexOf("rgb")||-1!==e.type.indexOf("color"))for(var t=0;t<3;t+=1)e.values[t]*=1-g;return Gp(e)}function fp(e,g){if(e=pp(e),g=hp(g),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*g;else if(-1!==e.type.indexOf("rgb"))for(var t=0;t<3;t+=1)e.values[t]+=(255-e.values[t])*g;else if(-1!==e.type.indexOf("color"))for(var n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*g;return Gp(e)}var Sp={black:"#000",white:"#fff"},vp={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},Wp={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},Vp={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},Rp={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},kp={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},Xp={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},Jp={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},Yp=["mode","contrastThreshold","tonalOffset"],Hp={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Sp.white,default:Sp.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},wp={text:{primary:Sp.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Sp.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function Np(e,g,t,n){var I=n.light||n,C=n.dark||1.5*n;e[g]||(e.hasOwnProperty(t)?e[g]=e[t]:"light"===g?e.light=fp(e.main,I):"dark"===g&&(e.dark=Bp(e.main,C)))}function Kp(e){var g=e.mode,t=void 0===g?"light":g,n=e.contrastThreshold,I=void 0===n?3:n,C=e.tonalOffset,l=void 0===C?.2:C,a=mn(e,Yp),o=e.primary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:kp[200],light:kp[50],dark:kp[400]}:{main:kp[700],light:kp[400],dark:kp[800]}}(t),r=e.secondary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:Wp[200],light:Wp[50],dark:Wp[400]}:{main:Wp[500],light:Wp[300],dark:Wp[700]}}(t),c=e.error||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:Vp[500],light:Vp[300],dark:Vp[700]}:{main:Vp[700],light:Vp[400],dark:Vp[800]}}(t),i=e.info||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:Xp[400],light:Xp[300],dark:Xp[700]}:{main:Xp[700],light:Xp[500],dark:Xp[900]}}(t),s=e.success||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:Jp[400],light:Jp[300],dark:Jp[700]}:{main:Jp[800],light:Jp[500],dark:Jp[900]}}(t),A=e.warning||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:Rp[400],light:Rp[300],dark:Rp[700]}:{main:"#ed6c02",light:Rp[500],dark:Rp[900]}}(t);function d(e){var g=function(e,g){var t=yp(e),n=yp(g);return(Math.max(t,n)+.05)/(Math.min(t,n)+.05)}(e,wp.text.primary)>=I?wp.text.primary:Hp.text.primary;return g}var u=function(e){var g=e.color,t=e.name,n=e.mainShade,I=void 0===n?500:n,C=e.lightShade,a=void 0===C?300:C,o=e.darkShade,r=void 0===o?700:o;if(!(g=Hl({},g)).main&&g[I]&&(g.main=g[I]),!g.hasOwnProperty("main"))throw new Error(th(11,t?" (".concat(t,")"):"",I));if("string"!==typeof g.main)throw new Error(th(12,t?" (".concat(t,")"):"",JSON.stringify(g.main)));return Np(g,"light",a,l),Np(g,"dark",r,l),g.contrastText||(g.contrastText=d(g.main)),g},m={dark:wp,light:Hp};return rh(Hl({common:Hl({},Sp),mode:t,primary:u({color:o,name:"primary"}),secondary:u({color:r,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:u({color:c,name:"error"}),warning:u({color:A,name:"warning"}),info:u({color:i,name:"info"}),success:u({color:s,name:"success"}),grey:vp,contrastThreshold:I,getContrastText:d,augmentColor:u,tonalOffset:l},m[t]),a)}var Fp=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];var xp={textTransform:"uppercase"},Ep='"Roboto", "Helvetica", "Arial", sans-serif';function zp(e,g){var t="function"===typeof g?g(e):g,n=t.fontFamily,I=void 0===n?Ep:n,C=t.fontSize,l=void 0===C?14:C,a=t.fontWeightLight,o=void 0===a?300:a,r=t.fontWeightRegular,c=void 0===r?400:r,i=t.fontWeightMedium,s=void 0===i?500:i,A=t.fontWeightBold,d=void 0===A?700:A,u=t.htmlFontSize,m=void 0===u?16:u,b=t.allVariants,Z=t.pxToRem,h=mn(t,Fp);var p=l/14,G=Z||function(e){return"".concat(e/m*p,"rem")},y=function(e,g,t,n,C){return Hl({fontFamily:I,fontWeight:e,fontSize:G(g),lineHeight:t},I===Ep?{letterSpacing:"".concat((l=n/g,Math.round(1e5*l)/1e5),"em")}:{},C,b);var l},B={h1:y(o,96,1.167,-1.5),h2:y(o,60,1.2,-.5),h3:y(c,48,1.167,0),h4:y(c,34,1.235,.25),h5:y(c,24,1.334,0),h6:y(s,20,1.6,.15),subtitle1:y(c,16,1.75,.15),subtitle2:y(s,14,1.57,.1),body1:y(c,16,1.5,.15),body2:y(c,14,1.43,.15),button:y(s,14,1.75,.4,xp),caption:y(c,12,1.66,.4),overline:y(c,12,2.66,1,xp),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return rh(Hl({htmlFontSize:m,pxToRem:G,fontFamily:I,fontSize:l,fontWeightLight:o,fontWeightRegular:c,fontWeightMedium:s,fontWeightBold:d},B),h,{clone:!1})}function Mp(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}var Up=["none",Mp(0,2,1,-1,0,1,1,0,0,1,3,0),Mp(0,3,1,-2,0,2,2,0,0,1,5,0),Mp(0,3,3,-2,0,3,4,0,0,1,8,0),Mp(0,2,4,-1,0,4,5,0,0,1,10,0),Mp(0,3,5,-1,0,5,8,0,0,1,14,0),Mp(0,3,5,-1,0,6,10,0,0,1,18,0),Mp(0,4,5,-2,0,7,10,1,0,2,16,1),Mp(0,5,5,-3,0,8,10,1,0,3,14,2),Mp(0,5,6,-3,0,9,12,1,0,3,16,2),Mp(0,6,6,-3,0,10,14,1,0,4,18,3),Mp(0,6,7,-4,0,11,15,1,0,4,20,3),Mp(0,7,8,-4,0,12,17,2,0,5,22,4),Mp(0,7,8,-4,0,13,19,2,0,5,24,4),Mp(0,7,9,-4,0,14,21,2,0,5,26,4),Mp(0,8,9,-5,0,15,22,2,0,6,28,5),Mp(0,8,10,-5,0,16,24,2,0,6,30,5),Mp(0,8,11,-5,0,17,26,2,0,6,32,5),Mp(0,9,11,-5,0,18,28,2,0,7,34,6),Mp(0,9,12,-6,0,19,29,2,0,7,36,6),Mp(0,10,13,-6,0,20,31,3,0,8,38,7),Mp(0,10,13,-6,0,21,33,3,0,8,40,7),Mp(0,10,14,-6,0,22,35,3,0,8,42,7),Mp(0,11,14,-7,0,23,36,3,0,9,44,8),Mp(0,11,15,-7,0,24,38,3,0,9,46,8)],Dp=["duration","easing","delay"],Qp={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},Lp={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function Tp(e){return"".concat(Math.round(e),"ms")}function jp(e){if(!e)return 0;var g=e/36;return Math.round(10*(4+15*Math.pow(g,.25)+g/5))}function Op(e){var g=Hl({},Qp,e.easing),t=Hl({},Lp,e.duration);return Hl({getAutoHeightDuration:jp,create:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},I=n.duration,C=void 0===I?t.standard:I,l=n.easing,a=void 0===l?g.easeInOut:l,o=n.delay,r=void 0===o?0:o;mn(n,Dp);return(Array.isArray(e)?e:[e]).map((function(e){return"".concat(e," ").concat("string"===typeof C?C:Tp(C)," ").concat(a," ").concat("string"===typeof r?r:Tp(r))})).join(",")}},e,{easing:g,duration:t})}var Pp={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},_p=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function qp(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},g=e.mixins,t=void 0===g?{}:g,n=e.palette,I=void 0===n?{}:n,C=e.transitions,l=void 0===C?{}:C,a=e.typography,o=void 0===a?{}:a,r=mn(e,_p);if(e.vars)throw new Error(th(18));var c=Kp(I),i=ip(e),s=rh(i,{mixins:Zp(i.breakpoints,t),palette:c,shadows:Up.slice(),typography:zp(c,o),transitions:Op(l),zIndex:Hl({},Pp)});s=rh(s,r);for(var A=arguments.length,d=new Array(A>1?A-1:0),u=1;u<A;u++)d[u-1]=arguments[u];return(s=d.reduce((function(e,g){return rh(e,g)}),s)).unstable_sxConfig=Hl({},ap,null==r?void 0:r.unstable_sxConfig),s.unstable_sx=function(e){return rp({sx:e,theme:this})},s}var $p=qp(),eG="$$material";function gG(e){return function(e){var g=e.props,t=e.name,n=e.defaultTheme,I=e.themeId,C=bp(n);return I&&(C=C[I]||C),lh({theme:C,name:t,props:g})}({props:e.props,name:e.name,defaultTheme:$p,themeId:eG})}var tG=function(e,g,t){var n=e.key+"-"+g.name;!1===t&&void 0===e.registered[n]&&(e.registered[n]=g.styles)},nG=kI,IG=function(e){return"theme"!==e},CG=function(e){return"string"===typeof e&&e.charCodeAt(0)>96?nG:IG},lG=function(e,g,t){var n;if(g){var I=g.shouldForwardProp;n=e.__emotion_forwardProp&&I?function(g){return e.__emotion_forwardProp(g)&&I(g)}:I}return"function"!==typeof n&&t&&(n=e.__emotion_forwardProp),n},aG=function(e){var g=e.cache,t=e.serialized,n=e.isStringTag;return tG(g,t,n),Eb((function(){return function(e,g,t){tG(e,g,t);var n=e.key+"-"+g.name;if(void 0===e.inserted[g.name]){var I=g;do{e.insert(g===I?"."+n:"",I,e.sheet,!0),I=I.next}while(void 0!==I)}}(g,t,n)})),null},oG=function e(t,n){var I,C,l=t.__emotion_real===t,a=l&&t.__emotion_base||t;void 0!==n&&(I=n.label,C=n.target);var o=lG(t,n,l),r=o||CG(a),c=!r("as");return function(){var i=arguments,s=l&&void 0!==t.__emotion_styles?t.__emotion_styles.slice(0):[];if(void 0!==I&&s.push("label:"+I+";"),null==i[0]||void 0===i[0].raw)s.push.apply(s,i);else{0,s.push(i[0][0]);for(var A=i.length,d=1;d<A;d++)s.push(i[d],i[0][d])}var u=Ap((function(e,t,n){var I=c&&e.as||a,l="",i=[],A=e;if(null==e.theme){for(var d in A={},e)A[d]=e[d];A.theme=g.useContext(dp)}"string"===typeof e.className?l=function(e,g,t){var n="";return t.split(" ").forEach((function(t){void 0!==e[t]?g.push(e[t]+";"):n+=t+" "})),n}(t.registered,i,e.className):null!=e.className&&(l=e.className+" ");var u=_b(s.concat(i),t.registered,A);l+=t.key+"-"+u.name,void 0!==C&&(l+=" "+C);var m=c&&void 0===o?CG(I):r,b={};for(var Z in e)c&&"as"===Z||m(Z)&&(b[Z]=e[Z]);return b.className=l,b.ref=n,g.createElement(g.Fragment,null,g.createElement(aG,{cache:t,serialized:u,isStringTag:"string"===typeof I}),g.createElement(I,b))}));return u.displayName=void 0!==I?I:"Styled("+("string"===typeof a?a:a.displayName||a.name||"Component")+")",u.defaultProps=t.defaultProps,u.__emotion_real=u,u.__emotion_base=a,u.__emotion_styles=s,u.__emotion_forwardProp=o,Object.defineProperty(u,"toString",{value:function(){return"."+C}}),u.withComponent=function(g,t){return e(g,Hl({},n,t,{shouldForwardProp:lG(u,t,!0)})).apply(void 0,s)},u}}.bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){oG[e]=oG(e)}));var rG=["variant"];function cG(e){return 0===e.length}function iG(e){var g=e.variant,t=mn(e,rG),n=g||"";return Object.keys(t).sort().forEach((function(g){n+="color"===g?cG(n)?e[g]:nh(e[g]):"".concat(cG(n)?g:nh(g)).concat(nh(e[g].toString()))})),n}var sG=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function AG(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}var dG=ip();function uG(e){var g,t=e.defaultTheme,n=e.theme,I=e.themeId;return g=n,0===Object.keys(g).length?t:n[I]||n}var mG=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},g=e.themeId,t=e.defaultTheme,n=void 0===t?dG:t,I=e.rootShouldForwardProp,C=void 0===I?AG:I,l=e.slotShouldForwardProp,a=void 0===l?AG:l,o=function(e){return rp(Hl({},e,{theme:uG(Hl({},e,{defaultTheme:n,themeId:g}))}))};return o.__mui_systemSx=!0,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,g){Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=g(e.__emotion_styles))}(e,(function(e){return e.filter((function(e){return!(null!=e&&e.__mui_systemSx)}))}));var I,l,c=t.name,s=t.slot,A=t.skipVariantsResolver,d=t.skipSx,u=t.overridesResolver,m=void 0===u?(I=(l=s)?l.charAt(0).toLowerCase()+l.slice(1):l)?function(e,g){return g[I]}:null:u,b=mn(t,sG),Z=void 0!==A?A:s&&"Root"!==s&&"root"!==s||!1,h=d||!1;var p=AG;"Root"===s||"root"===s?p=C:s?p=a:function(e){return"string"===typeof e&&e.charCodeAt(0)>96}(e)&&(p=void 0);var G=function(e,g){return oG(e,g)}(e,Hl({shouldForwardProp:p,label:undefined},b)),y=function(t){for(var I=arguments.length,C=new Array(I>1?I-1:0),l=1;l<I;l++)C[l-1]=arguments[l];var a=C?C.map((function(e){return"function"===typeof e&&e.__emotion_real!==e?function(t){return e(Hl({},t,{theme:uG(Hl({},t,{defaultTheme:n,themeId:g}))}))}:e})):[],s=t;c&&m&&a.push((function(e){var t=uG(Hl({},e,{defaultTheme:n,themeId:g})),I=function(e,g){return g.components&&g.components[e]&&g.components[e].styleOverrides?g.components[e].styleOverrides:null}(c,t);if(I){var C={};return Object.entries(I).forEach((function(g){var n=r(g,2),I=n[0],l=n[1];C[I]="function"===typeof l?l(Hl({},e,{theme:t})):l})),m(e,C)}return null})),c&&!Z&&a.push((function(e){var t=uG(Hl({},e,{defaultTheme:n,themeId:g}));return function(e,g,t,n){var I,C=e.ownerState,l=void 0===C?{}:C,a=[],o=null==t||null==(I=t.components)||null==(I=I[n])?void 0:I.variants;return o&&o.forEach((function(t){var n=!0;Object.keys(t.props).forEach((function(g){l[g]!==t.props[g]&&e[g]!==t.props[g]&&(n=!1)})),n&&a.push(g[iG(t.props)])})),a}(e,function(e,g){var t=[];g&&g.components&&g.components[e]&&g.components[e].variants&&(t=g.components[e].variants);var n={};return t.forEach((function(e){var g=iG(e.props);n[g]=e.style})),n}(c,t),t,c)})),h||a.push(o);var A=a.length-C.length;if(Array.isArray(t)&&A>0){var d=new Array(A).fill("");(s=[].concat(i(t),i(d))).raw=[].concat(i(t.raw),i(d))}else"function"===typeof t&&t.__emotion_real!==t&&(s=function(e){return t(Hl({},e,{theme:uG(Hl({},e,{defaultTheme:n,themeId:g}))}))});var u=G.apply(void 0,[s].concat(i(a)));return e.muiName&&(u.muiName=e.muiName),u};return G.withConfig&&(y.withConfig=G.withConfig),y}}({themeId:eG,defaultTheme:$p,rootShouldForwardProp:function(e){return AG(e)&&"classes"!==e}}),bG=mG,ZG=function(e){return e},hG=function(){var e=ZG;return{configure:function(g){e=g},generate:function(g){return e(g)},reset:function(){e=ZG}}}(),pG={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function GG(e,g){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui",n=pG[g];return n?"".concat(t,"-").concat(n):"".concat(hG.generate(e),"-").concat(g)}function yG(e){return GG("MuiCircularProgress",e)}!function(e,g){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui",n={};g.forEach((function(g){n[g]=GG(e,g,t)}))}("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);var BG,fG,SG,vG,WG,VG,RG,kG,XG=["className","color","disableShrink","size","style","thickness","value","variant"],JG=44,YG=gh(WG||(WG=BG||(BG=Nb(["\n  0% {\n    transform: rotate(0deg);\n  }\n\n  100% {\n    transform: rotate(360deg);\n  }\n"])))),HG=gh(VG||(VG=fG||(fG=Nb(["\n  0% {\n    stroke-dasharray: 1px, 200px;\n    stroke-dashoffset: 0;\n  }\n\n  50% {\n    stroke-dasharray: 100px, 200px;\n    stroke-dashoffset: -15px;\n  }\n\n  100% {\n    stroke-dasharray: 100px, 200px;\n    stroke-dashoffset: -125px;\n  }\n"])))),wG=function(e){var g=e.classes,t=e.variant,n=e.color,I=e.disableShrink;return function(e,g){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n={};return Object.keys(e).forEach((function(I){n[I]=e[I].reduce((function(e,n){if(n){var I=g(n);""!==I&&e.push(I),t&&t[n]&&e.push(t[n])}return e}),[]).join(" ")})),n}({root:["root",t,"color".concat(Ih(n))],svg:["svg"],circle:["circle","circle".concat(Ih(t)),I&&"circleDisableShrink"]},yG,g)},NG=bG("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:function(e,g){var t=e.ownerState;return[g.root,g[t.variant],g["color".concat(Ih(t.color))]]}})((function(e){var g=e.ownerState,t=e.theme;return Hl({display:"inline-block"},"determinate"===g.variant&&{transition:t.transitions.create("transform")},"inherit"!==g.color&&{color:(t.vars||t).palette[g.color].main})}),(function(e){return"indeterminate"===e.ownerState.variant&&eh(RG||(RG=SG||(SG=Nb(["\n      animation: "," 1.4s linear infinite;\n    "]))),YG)})),KG=bG("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:function(e,g){return g.svg}})({display:"block"}),FG=bG("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:function(e,g){var t=e.ownerState;return[g.circle,g["circle".concat(Ih(t.variant))],t.disableShrink&&g.circleDisableShrink]}})((function(e){var g=e.ownerState,t=e.theme;return Hl({stroke:"currentColor"},"determinate"===g.variant&&{transition:t.transitions.create("stroke-dashoffset")},"indeterminate"===g.variant&&{strokeDasharray:"80px, 200px",strokeDashoffset:0})}),(function(e){var g=e.ownerState;return"indeterminate"===g.variant&&!g.disableShrink&&eh(kG||(kG=vG||(vG=Nb(["\n      animation: "," 1.4s ease-in-out infinite;\n    "]))),HG)})),xG=g.forwardRef((function(e,g){var t=gG({props:e,name:"MuiCircularProgress"}),n=t.className,I=t.color,C=void 0===I?"primary":I,l=t.disableShrink,a=void 0!==l&&l,o=t.size,r=void 0===o?40:o,c=t.style,i=t.thickness,s=void 0===i?3.6:i,A=t.value,d=void 0===A?0:A,u=t.variant,m=void 0===u?"indeterminate":u,b=mn(t,XG),Z=Hl({},t,{color:C,disableShrink:a,size:r,thickness:s,value:d,variant:m}),h=wG(Z),p={},G={},y={};if("determinate"===m){var B=2*Math.PI*((JG-s)/2);p.strokeDasharray=B.toFixed(3),y["aria-valuenow"]=Math.round(d),p.strokeDashoffset="".concat(((100-d)/100*B).toFixed(3),"px"),G.transform="rotate(-90deg)"}return(0,eI.jsx)(NG,Hl({className:Fb(h.root,n),style:Hl({width:r,height:r},G,c),ownerState:Z,ref:g,role:"progressbar"},y,b,{children:(0,eI.jsx)(KG,{className:h.svg,ownerState:Z,viewBox:"".concat(22," ").concat(22," ").concat(JG," ").concat(JG),children:(0,eI.jsx)(FG,{className:h.circle,style:p,ownerState:Z,cx:JG,cy:JG,r:(JG-s)/2,fill:"none",strokeWidth:s})})}))})),EG=xG;var zG=function(){var e=AI().token,t=r((0,g.useState)([]),2),n=(t[0],t[1]),I=r((0,g.useState)([]),2),C=I[0],l=I[1],a=r((0,g.useState)(!1),2),o=a[0],c=a[1],s=r((0,g.useState)(!0),2),A=s[0],d=s[1];(0,g.useEffect)((function(){var g=function(){var g=sg(cg().mark((function g(){var t,I;return cg().wrap((function(g){for(;;)switch(g.prev=g.next){case 0:return d(!0),g.prev=1,g.next=4,fetch("".concat("https://palbackend-a8f4e5171ddb.herokuapp.com","/api/child"),{headers:{Authorization:"Bearer ".concat(e)}});case 4:if(!(t=g.sent).ok){g.next=13;break}return g.next=8,t.json();case 8:I=g.sent,n(I),l(I.map((function(e){return rg(rg({},e),{},{dateOfBirth:e.dateOfBirth?new Date(e.dateOfBirth).toISOString().split("T")[0]:""})}))),g.next=14;break;case 13:console.error("Failed to fetch children");case 14:g.next=19;break;case 16:g.prev=16,g.t0=g.catch(1),console.error("Error fetching children:",g.t0);case 19:return g.prev=19,d(!1),g.finish(19);case 22:case"end":return g.stop()}}),g,null,[[1,16,19,22]])})));return function(){return g.apply(this,arguments)}}();g()}),[e]);var u=function(){var g=sg(cg().mark((function g(t){var I,a,o,r;return cg().wrap((function(g){for(;;)switch(g.prev=g.next){case 0:return g.prev=0,c(!0),I=C[t],g.next=5,fetch("".concat("https://palbackend-a8f4e5171ddb.herokuapp.com","/api/child/").concat(I._id),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify(I)});case 5:if(!(a=g.sent).ok){g.next=16;break}return g.next=9,a.json();case 9:o=g.sent,r=C.map((function(e,g){return g===t?o:e})),n(r),l(r),_n.success("Child updated successfully"),g.next=17;break;case 16:_n.error("Failed to update child");case 17:g.next=23;break;case 19:g.prev=19,g.t0=g.catch(0),console.error("Error updating child:",g.t0),_n.error("An error occurred while updating child");case 23:return g.prev=23,c(!1),g.finish(23);case 26:case"end":return g.stop()}}),g,null,[[0,19,23,26]])})));return function(e){return g.apply(this,arguments)}}(),m=function(){var g=sg(cg().mark((function g(t,n){var I;return cg().wrap((function(g){for(;;)switch(g.prev=g.next){case 0:if(!window.confirm("Are you sure you want to delete this child?")){g.next=13;break}return g.prev=2,g.next=5,fetch("".concat("https://palbackend-a8f4e5171ddb.herokuapp.com","/api/child/").concat(n),{method:"DELETE",headers:{Authorization:"Bearer ".concat(e)}});case 5:g.sent.ok?(_n.success("Child deleted successfully"),I=C.filter((function(e,g){return g!==t})),l(I)):_n.error("Failed to delete child"),g.next=13;break;case 9:g.prev=9,g.t0=g.catch(2),console.error("Error deleting child:",g.t0),_n.error("An error occurred while deleting child");case 13:case"end":return g.stop()}}),g,null,[[2,9]])})));return function(e,t){return g.apply(this,arguments)}}(),b=function(e,g,t){var n=i(C);n[e]&&(n[e][g]=t),l(n)};return A?(0,eI.jsx)("div",{style:{display:"flex",justifyContent:"center",marginTop:"50px"},children:(0,eI.jsx)(EG,{})}):(0,eI.jsxs)("div",{className:"container",children:[(0,eI.jsx)("div",{className:"top-left-arrow",children:(0,eI.jsx)(Le,{to:"/parent",children:(0,eI.jsx)("img",{src:Yb,alt:"Back to Parent Page"})})}),(0,eI.jsx)("h3",{children:"\ud559\uc0dd\uc815\ubcf4 \ud3b8\uc9d1"}),(0,eI.jsx)(Le,{to:"/add-child",children:(0,eI.jsx)("button",{className:"button","aria-label":"Add Child",children:"\ud559\uc0dd \ucd94\uac00"})}),(0,eI.jsx)("div",{className:"edit-child-box",children:C.map((function(e,g){return(0,eI.jsxs)("div",{className:"child-details-card",children:[(0,eI.jsxs)("h5",{children:["\ud559\uc0dd(\uc720\uc544)",g+1]}),(0,eI.jsxs)("div",{className:"child-input",children:[(0,eI.jsx)("label",{children:"\ud559\uc0dd(\uc720\uc544) \ud55c\uae00\uba85"}),(0,eI.jsx)("input",{value:e.name,onChange:function(e){return b(g,"name",e.target.value)}})]}),(0,eI.jsxs)("div",{className:"child-input",children:[(0,eI.jsx)("label",{children:"\ud604\uc7ac \uc7ac\uc6d0\uc911\uc778 \uae30\uad00\uba85:"}),(0,eI.jsx)("input",{value:e.previousSchool,onChange:function(e){return b(g,"previousSchool",e.target.value)}})]}),(0,eI.jsxs)("div",{className:"child-input",children:[(0,eI.jsx)("label",{children:"\uc0dd\ub144\uc6d4\uc77c:"}),(0,eI.jsx)("input",{type:"date",value:e.dateOfBirth,onChange:function(e){return b(g,"dateOfBirth",e.target.value)}})]}),(0,eI.jsxs)("div",{className:"child-input",children:[(0,eI.jsx)("label",{children:"\uc131\ubcc4:"}),(0,eI.jsxs)("select",{value:e.gender,onChange:function(e){return b(g,"gender",e.target.value)},children:[(0,eI.jsx)("option",{value:"male",children:"\ub0a8\uc131"}),(0,eI.jsx)("option",{value:"female",children:"\uc5ec\uc131"})]})]}),(0,eI.jsxs)("div",{children:[(0,eI.jsx)("label",{children:(0,eI.jsx)("strong",{children:"2024\ub144 \uc608\ube44 \ud559\ub144/\uc5f0\ub839"})}),(0,eI.jsx)("p",{children:e.testGrade})]}),(0,eI.jsxs)("div",{className:"child-actions",children:[(0,eI.jsx)("button",{className:"save-button",onClick:function(){return u(g)},disabled:o,children:o?"\uc800\uc7a5...":"\uc800\uc7a5"}),(0,eI.jsx)("button",{className:"delete-button",onClick:function(){return m(g,e._id)},disabled:o,children:"\uc0ad\uc81c"})]})]},e.id||g)}))})]})};var MG={container:{display:"flex",flexDirection:"column",alignItems:"center",padding:"20px",borderRadius:"10px",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",backgroundColor:"#ffffff"},input:{width:"100%",padding:"10px",marginBottom:"10px",borderRadius:"5px",border:"1px solid #ddd"},button:{width:"100%",padding:"10px",borderRadius:"5px",backgroundColor:"#007BFF",color:"#ffffff",border:"none"}},UG=function(e){var t=e.onResetRequested,n=r((0,g.useState)(""),2),I=n[0],C=n[1],l=r((0,g.useState)(!1),2),a=l[0],o=l[1],c=function(){var e=sg(cg().mark((function e(){var g,n;return cg().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o(!0),"https://palbackend-a8f4e5171ddb.herokuapp.com",e.next=5,fetch("".concat("https://palbackend-a8f4e5171ddb.herokuapp.com","/api/users/forgot-password"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phoneNumber:I})});case 5:if(!(g=e.sent).ok){e.next=11;break}_n.success("\uc778\uc99d\ucf54\ub4dc\ub97c \ubb38\uc790\ub85c \ubc1c\uc1a1\ud558\uc600\uc2b5\ub2c8\ub2e4."),t(),e.next=15;break;case 11:return e.next=13,g.json();case 13:n=e.sent,_n.error(n.error);case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(0),console.error(e.t0),_n.error("\uc778\uc99d\ucf54\ub4dc\uac00 \ubc1c\uc1a1\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4. \ub2e4\uc2dc\ud55c\ubc88 \uc2e4\ud589\ud558\uc5ec\uc8fc\uc2dc\uae30 \ubc14\ub78d\ub2c8\ub2e4.");case 21:return e.prev=21,o(!1),e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[0,17,21,24]])})));return function(){return e.apply(this,arguments)}}();return(0,eI.jsxs)("div",{style:MG.container,children:[(0,eI.jsx)("input",{style:MG.input,type:"text",placeholder:"Phone Number",value:I,onChange:function(e){return C(e.target.value)}}),(0,eI.jsx)("button",{style:MG.button,onClick:c,disabled:a,children:a?"\ube44\ubc00\ubc88\ud638 \ubcc0\uacbd...":"\ube44\ubc00\ubc88\ud638 \ubcc0\uacbd"})]})};var DG={container:{display:"flex",flexDirection:"column",alignItems:"center",padding:"20px",borderRadius:"10px",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",backgroundColor:"#ffffff"},input:{width:"100%",padding:"10px",marginBottom:"10px",borderRadius:"5px",border:"1px solid #ddd"},button:{width:"100%",padding:"10px",borderRadius:"5px",backgroundColor:"#007BFF",color:"#ffffff",border:"none"}},QG=function(){var e=r((0,g.useState)(""),2),t=e[0],n=e[1],I=r((0,g.useState)(""),2),C=I[0],l=I[1],a=r((0,g.useState)(!1),2),o=a[0],c=a[1],i=he(),s=function(){var e=sg(cg().mark((function e(){var g,n;return cg().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c(!0),"https://palbackend-a8f4e5171ddb.herokuapp.com",e.next=5,fetch("".concat("https://palbackend-a8f4e5171ddb.herokuapp.com","/api/users/reset-password"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({resetToken:t,newPassword:C})});case 5:if(!(g=e.sent).ok){e.next=11;break}_n.success("\ube44\ubc00\ubc88\ud638\uac00 \ubcc0\uacbd\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),i("/login"),e.next=15;break;case 11:return e.next=13,g.json();case 13:n=e.sent,_n.error(n.error);case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),_n.error("\uc778\uc99d\ucf54\ub4dc\uac00 \ubc1c\uc1a1\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4. \ub2e4\uc2dc\ud55c\ubc88 \uc2e4\ud589\ud558\uc5ec\uc8fc\uc2dc\uae30 \ubc14\ub78d\ub2c8\ub2e4.");case 20:return e.prev=20,c(!1),e.finish(20);case 23:case"end":return e.stop()}}),e,null,[[0,17,20,23]])})));return function(){return e.apply(this,arguments)}}();return(0,eI.jsxs)("div",{style:DG.container,children:[(0,eI.jsx)("input",{style:DG.input,type:"text",placeholder:"\uc778\uc99d\ucf54\ub4dc",value:t,onChange:function(e){return n(e.target.value)}}),(0,eI.jsx)("input",{style:DG.input,type:"password",placeholder:"\uc0c8\ub85c\uc6b4 \ube44\ubc00\ubc88\ud638",value:C,onChange:function(e){return l(e.target.value)}}),(0,eI.jsx)("button",{style:DG.button,onClick:s,disabled:o,children:o?"\ubcc0\uacbd\ud558\uae30...":"\ubcc0\uacbd\ud558\uae30"})]})};var LG={container:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",padding:"20px",backgroundColor:"#f0f0f0"},logo:{width:"200px",marginBottom:"20px",cursor:"pointer"},content:{width:"100%",maxWidth:"400px",padding:"20px",borderRadius:"10px",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",backgroundColor:"#ffffff"},cancelButton:{marginTop:"20px",padding:"10px 20px",border:"none",borderRadius:"5px",backgroundColor:"#d9534f",color:"#ffffff",cursor:"pointer"}},TG=function(){var e=he(),t=r((0,g.useState)(!1),2),n=t[0],I=t[1];return(0,eI.jsxs)("div",{style:LG.container,children:[(0,eI.jsx)("img",{src:cI,alt:"Logo",style:LG.logo,onClick:function(){return e("/")}}),(0,eI.jsxs)("div",{style:LG.content,children:[n?(0,eI.jsx)(QG,{}):(0,eI.jsx)(UG,{onResetRequested:function(){return I(!0)}}),(0,eI.jsx)("button",{style:LG.cancelButton,onClick:function(){return e("/")},children:"Cancel"})]}),(0,eI.jsx)(zn,{})]})};var jG=function(){return(0,eI.jsxs)(dI,{children:[(0,eI.jsx)(zn,{}),(0,eI.jsxs)(Ue,{children:[(0,eI.jsx)(ZI,{}),(0,eI.jsxs)(we,{children:[(0,eI.jsx)(Ye,{path:"/",element:(0,eI.jsx)(iI,{})}),(0,eI.jsx)(Ye,{path:"/register",element:(0,eI.jsx)(bI,{})}),(0,eI.jsx)(Ye,{path:"/login",element:(0,eI.jsx)(uI,{})}),(0,eI.jsx)(Ye,{path:"/admin",element:(0,eI.jsx)(Xb,{})}),(0,eI.jsx)(Ye,{path:"/add-child",element:(0,eI.jsx)(Jb,{})}),(0,eI.jsx)(Ye,{path:"/update-details",element:(0,eI.jsx)(wb,{})}),(0,eI.jsx)(Ye,{path:"/update-child",element:(0,eI.jsx)(zG,{})}),(0,eI.jsx)(Ye,{path:"/change-password",element:(0,eI.jsx)(TG,{})}),(0,eI.jsx)(Ye,{path:"/parent/*",element:(0,eI.jsx)(rI,{})})]})]})]})},OG=function(e){e&&e instanceof Function&&t.e(787).then(t.bind(t,787)).then((function(g){var t=g.getCLS,n=g.getFID,I=g.getFCP,C=g.getLCP,l=g.getTTFB;t(e),n(e),I(e),C(e),l(e)}))};function PG(){return"undefined"!==typeof window}function _G(){return window.vam||"production"}function qG(){return"development"===_G()}function $G(){var e,g=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{debug:!0};if(PG()){!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"auto";window.vam="auto"!==e?e:"production"}(g.mode),window.va||(window.va=function(){for(var e=arguments.length,g=new Array(e),t=0;t<e;t++)g[t]=arguments[t];(window.vaq=window.vaq||[]).push(g)}),g.beforeSend&&(null==(e=window.va)||e.call(window,"beforeSend",g.beforeSend));var t=qG()?"https://va.vercel-scripts.com/v1/script.debug.js":"/_vercel/insights/script.js";if(!document.head.querySelector('script[src*="'.concat(t,'"]'))){var n=document.createElement("script");n.src=t,n.defer=!0,n.setAttribute("data-sdkn","@vercel/analytics"),n.setAttribute("data-sdkv","1.0.2"),n.onerror=function(){var e=qG()?"Please check if any ad blockers are enabled and try again.":"Be sure to enable Web Analytics for your project and deploy again. See https://vercel.com/docs/concepts/analytics/quickstart for more information.";console.log("[Vercel Web Analytics] Failed to load script from ".concat(t,". ").concat(e))},qG()&&!1===g.debug&&n.setAttribute("data-debug","false"),document.head.appendChild(n)}}}dg().setAppElement("#root"),$G(),I.createRoot(document.getElementById("root")).render((0,eI.jsx)(g.StrictMode,{children:(0,eI.jsx)(jG,{})})),OG()}()}();
//# sourceMappingURL=main.9fd20f55.js.map